var Ad=Object.defineProperty,Id=Object.defineProperties;var Nd=Object.getOwnPropertyDescriptors;var Ru=Object.getOwnPropertySymbols;var Rd=Object.prototype.hasOwnProperty,Md=Object.prototype.propertyIsEnumerable;var Mu=(r,e,t)=>e in r?Ad(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xr=(r,e)=>{for(var t in e||(e={}))Rd.call(e,t)&&Mu(r,t,e[t]);if(Ru)for(var t of Ru(e))Md.call(e,t)&&Mu(r,t,e[t]);return r},po=(r,e)=>Id(r,Nd(e));function yt(){}const yo=r=>r;function Zt(r,e){for(const t in e)r[t]=e[t];return r}function Du(r){return r()}function Fu(){return Object.create(null)}function Sr(r){r.forEach(Du)}function Pu(r){return typeof r=="function"}function pr(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let as;function PA(r,e){return as||(as=document.createElement("a")),as.href=e,r===as.href}function Dd(r){return Object.keys(r).length===0}function Fd(r,...e){if(r==null)return yt;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function jA(r,e,t){r.$$.on_destroy.push(Fd(e,t))}function Pd(r,e,t,n){if(r){const i=ju(r,e,t,n);return r[0](i)}}function ju(r,e,t,n){return r[1]&&n?Zt(t.ctx.slice(),r[1](n(e))):t.ctx}function jd(r,e,t,n){if(r[2]&&n){const i=r[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function Ld(r,e,t,n,i,s){if(i){const o=ju(e,t,n,s);r.p(o,i)}}function Bd(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function ci(r){const e={};for(const t in r)t[0]!=="$"&&(e[t]=r[t]);return e}function Lu(r,e){const t={};e=new Set(e);for(const n in r)!e.has(n)&&n[0]!=="$"&&(t[n]=r[n]);return t}function LA(r){return r==null?"":r}const Bu=typeof window!="undefined";let Uu=Bu?()=>window.performance.now():()=>Date.now(),mo=Bu?r=>requestAnimationFrame(r):yt;const vn=new Set;function qu(r){vn.forEach(e=>{e.c(r)||(vn.delete(e),e.f())}),vn.size!==0&&mo(qu)}function Hu(r){let e;return vn.size===0&&mo(qu),{promise:new Promise(t=>{vn.add(e={c:r,f:t})}),abort(){vn.delete(e)}}}let us=!1;function Ud(){us=!0}function qd(){us=!1}function Hd(r,e,t,n){for(;r<e;){const i=r+(e-r>>1);t(i)<=n?r=i+1:e=i}return r}function zd(r){if(r.hydrate_init)return;r.hydrate_init=!0;let e=r.childNodes;if(r.nodeName==="HEAD"){const u=[];for(let c=0;c<e.length;c++){const f=e[c];f.claim_order!==void 0&&u.push(f)}e=u}const t=new Int32Array(e.length+1),n=new Int32Array(e.length);t[0]=-1;let i=0;for(let u=0;u<e.length;u++){const c=e[u].claim_order,f=(i>0&&e[t[i]].claim_order<=c?i+1:Hd(1,i,h=>e[t[h]].claim_order,c))-1;n[u]=t[f]+1;const l=f+1;t[l]=u,i=Math.max(l,i)}const s=[],o=[];let a=e.length-1;for(let u=t[i]+1;u!=0;u=n[u-1]){for(s.push(e[u-1]);a>=u;a--)o.push(e[a]);a--}for(;a>=0;a--)o.push(e[a]);s.reverse(),o.sort((u,c)=>u.claim_order-c.claim_order);for(let u=0,c=0;u<o.length;u++){for(;c<s.length&&o[u].claim_order>=s[c].claim_order;)c++;const f=c<s.length?s[c]:null;r.insertBefore(o[u],f)}}function zu(r,e){r.appendChild(e)}function Gu(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function Gd(r){const e=ct("style");return Vd(Gu(r),e),e.sheet}function Vd(r,e){zu(r.head||r,e)}function rt(r,e){if(us){for(zd(r),(r.actual_end_child===void 0||r.actual_end_child!==null&&r.actual_end_child.parentElement!==r)&&(r.actual_end_child=r.firstChild);r.actual_end_child!==null&&r.actual_end_child.claim_order===void 0;)r.actual_end_child=r.actual_end_child.nextSibling;e!==r.actual_end_child?(e.claim_order!==void 0||e.parentNode!==r)&&r.insertBefore(e,r.actual_end_child):r.actual_end_child=e.nextSibling}else(e.parentNode!==r||e.nextSibling!==null)&&r.appendChild(e)}function Qd(r,e,t){r.insertBefore(e,t||null)}function Xe(r,e,t){us&&!t?rt(r,e):(e.parentNode!==r||e.nextSibling!=t)&&r.insertBefore(e,t||null)}function xe(r){r.parentNode.removeChild(r)}function go(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function ct(r){return document.createElement(r)}function $t(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Mr(r){return document.createTextNode(r)}function Ht(){return Mr(" ")}function _t(){return Mr("")}function wt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Wd(r){return function(e){return e.preventDefault(),r.call(this,e)}}function BA(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function be(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function cs(r,e){const t=Object.getOwnPropertyDescriptors(r.__proto__);for(const n in e)e[n]==null?r.removeAttribute(n):n==="style"?r.style.cssText=e[n]:n==="__value"?r.value=r[n]=e[n]:t[n]&&t[n].set?r[n]=e[n]:be(r,n,e[n])}function Vu(r,e){for(const t in e)be(r,t,e[t])}function vo(r,e,t){e in r?r[e]=typeof r[e]=="boolean"&&t===""?!0:t:be(r,e,t)}function UA(r){return r===""?null:+r}function $e(r){return Array.from(r.childNodes)}function Qu(r){r.claim_info===void 0&&(r.claim_info={last_index:0,total_claimed:0})}function Wu(r,e,t,n,i=!1){Qu(r);const s=(()=>{for(let o=r.claim_info.last_index;o<r.length;o++){const a=r[o];if(e(a)){const u=t(a);return u===void 0?r.splice(o,1):r[o]=u,i||(r.claim_info.last_index=o),a}}for(let o=r.claim_info.last_index-1;o>=0;o--){const a=r[o];if(e(a)){const u=t(a);return u===void 0?r.splice(o,1):r[o]=u,i?u===void 0&&r.claim_info.last_index--:r.claim_info.last_index=o,a}}return n()})();return s.claim_order=r.claim_info.total_claimed,r.claim_info.total_claimed+=1,s}function Yu(r,e,t,n){return Wu(r,i=>i.nodeName===e,i=>{const s=[];for(let o=0;o<i.attributes.length;o++){const a=i.attributes[o];t[a.name]||s.push(a.name)}s.forEach(o=>i.removeAttribute(o))},()=>n(e))}function dt(r,e,t){return Yu(r,e,t,ct)}function sr(r,e,t){return Yu(r,e,t,$t)}function Zr(r,e){return Wu(r,t=>t.nodeType===3,t=>{const n=""+e;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n},()=>Mr(e),!0)}function zt(r){return Zr(r," ")}function Ju(r,e,t){for(let n=t;n<r.length;n+=1){const i=r[n];if(i.nodeType===8&&i.textContent.trim()===e)return n}return r.length}function Yd(r){const e=Ju(r,"HTML_TAG_START",0),t=Ju(r,"HTML_TAG_END",e);if(e===t)return new bo;Qu(r);const n=r.splice(e,t-e+1);xe(n[0]),xe(n[n.length-1]);const i=n.slice(1,n.length-1);for(const s of i)s.claim_order=r.claim_info.total_claimed,r.claim_info.total_claimed+=1;return new bo(i)}function li(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Ku(r,e){r.value=e==null?"":e}function kr(r,e,t,n){t===null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}let ls;function Jd(){if(ls===void 0){ls=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{ls=!0}}return ls}function Kd(r,e){getComputedStyle(r).position==="static"&&(r.style.position="relative");const n=ct("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=Jd();let s;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=wt(window,"message",o=>{o.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{s=wt(n.contentWindow,"resize",e)}),zu(r,n),()=>{(i||s&&n.contentWindow)&&s(),xe(n)}}function Gt(r,e,t){r.classList[t?"add":"remove"](e)}function Xu(r,e,t=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(r,t,!1,e),n}function qA(r,e=document.body){return Array.from(e.querySelectorAll(r))}class Xd{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=ct(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Qd(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(xe)}}class bo extends Xd{constructor(e){super();this.e=this.n=null,this.l=e}c(e){this.l?this.n=this.l:super.c(e)}i(e){for(let t=0;t<this.n.length;t+=1)Xe(this.t,this.n[t],e)}}const fs=new Map;let hs=0;function Zd(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function $d(r,e){const t={stylesheet:Gd(e),rules:{}};return fs.set(r,t),t}function Zu(r,e,t,n,i,s,o,a=0){const u=16.666/n;let c=`{
`;for(let I=0;I<=1;I+=u){const T=e+(t-e)*s(I);c+=I*100+`%{${o(T,1-T)}}
`}const f=c+`100% {${o(t,1-t)}}
}`,l=`__svelte_${Zd(f)}_${a}`,h=Gu(r),{stylesheet:m,rules:b}=fs.get(h)||$d(h,r);b[l]||(b[l]=!0,m.insertRule(`@keyframes ${l} ${f}`,m.cssRules.length));const M=r.style.animation||"";return r.style.animation=`${M?`${M}, `:""}${l} ${n}ms linear ${i}ms 1 both`,hs+=1,l}function ep(r,e){const t=(r.style.animation||"").split(", "),n=t.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=t.length-n.length;i&&(r.style.animation=n.join(", "),hs-=i,hs||tp())}function tp(){mo(()=>{hs||(fs.forEach(r=>{const{stylesheet:e}=r;let t=e.cssRules.length;for(;t--;)e.deleteRule(t);r.rules={}}),fs.clear())})}let fi;function hi(r){fi=r}function $r(){if(!fi)throw new Error("Function called outside component initialization");return fi}function $u(r){$r().$$.before_update.push(r)}function bn(r){$r().$$.on_mount.push(r)}function HA(r){$r().$$.after_update.push(r)}function ec(r){$r().$$.on_destroy.push(r)}function di(){const r=$r();return(e,t)=>{const n=r.$$.callbacks[e];if(n){const i=Xu(e,t);n.slice().forEach(s=>{s.call(r,i)})}}}function rp(r,e){$r().$$.context.set(r,e)}function np(r){return $r().$$.context.get(r)}const pi=[],Er=[],ds=[],_o=[],tc=Promise.resolve();let wo=!1;function rc(){wo||(wo=!0,tc.then(nc))}function ps(){return rc(),tc}function yi(r){ds.push(r)}function ip(r){_o.push(r)}const So=new Set;let ys=0;function nc(){const r=fi;do{for(;ys<pi.length;){const e=pi[ys];ys++,hi(e),sp(e.$$)}for(hi(null),pi.length=0,ys=0;Er.length;)Er.pop()();for(let e=0;e<ds.length;e+=1){const t=ds[e];So.has(t)||(So.add(t),t())}ds.length=0}while(pi.length);for(;_o.length;)_o.pop()();wo=!1,So.clear(),hi(r)}function sp(r){if(r.fragment!==null){r.update(),Sr(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(yi)}}let mi;function op(){return mi||(mi=Promise.resolve(),mi.then(()=>{mi=null})),mi}function ko(r,e,t){r.dispatchEvent(Xu(`${e?"intro":"outro"}${t}`))}const ms=new Set;let Dr;function Mt(){Dr={r:0,c:[],p:Dr}}function Dt(){Dr.r||Sr(Dr.c),Dr=Dr.p}function Ge(r,e){r&&r.i&&(ms.delete(r),r.i(e))}function it(r,e,t,n){if(r&&r.o){if(ms.has(r))return;ms.add(r),Dr.c.push(()=>{ms.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}}const ap={duration:0};function zA(r,e,t,n){let i=e(r,t),s=n?0:1,o=null,a=null,u=null;function c(){u&&ep(r,u)}function f(h,m){const b=h.b-s;return m*=Math.abs(b),{a:s,b:h.b,d:b,duration:m,start:h.start,end:h.start+m,group:h.group}}function l(h){const{delay:m=0,duration:b=300,easing:M=yo,tick:I=yt,css:T}=i||ap,B={start:Uu()+m,b:h};h||(B.group=Dr,Dr.r+=1),o||a?a=B:(T&&(c(),u=Zu(r,s,h,b,m,M,T)),h&&I(0,1),o=f(B,b),yi(()=>ko(r,h,"start")),Hu(q=>{if(a&&q>a.start&&(o=f(a,b),a=null,ko(r,o.b,"start"),T&&(c(),u=Zu(r,s,o.b,o.duration,0,M,i.css))),o){if(q>=o.end)I(s=o.b,1-s),ko(r,o.b,"end"),a||(o.b?c():--o.group.r||Sr(o.group.c)),o=null;else if(q>=o.start){const F=q-o.start;s=o.a+o.d*M(F/o.duration),I(s,1-s)}}return!!(o||a)}))}return{run(h){Pu(i)?op().then(()=>{i=i(),l(h)}):l(h)},end(){c(),o=a=null}}}const GA=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function up(r,e){it(r,1,1,()=>{e.delete(r.key)})}function cp(r,e,t,n,i,s,o,a,u,c,f,l){let h=r.length,m=s.length,b=h;const M={};for(;b--;)M[r[b].key]=b;const I=[],T=new Map,B=new Map;for(b=m;b--;){const se=l(i,s,b),X=t(se);let ee=o.get(X);ee?n&&ee.p(se,e):(ee=c(X,se),ee.c()),T.set(X,I[b]=ee),X in M&&B.set(X,Math.abs(b-M[X]))}const q=new Set,F=new Set;function R(se){Ge(se,1),se.m(a,f),o.set(se.key,se),f=se.first,m--}for(;h&&m;){const se=I[m-1],X=r[h-1],ee=se.key,me=X.key;se===X?(f=se.first,h--,m--):T.has(me)?!o.has(ee)||q.has(ee)?R(se):F.has(me)?h--:B.get(ee)>B.get(me)?(F.add(ee),R(se)):(q.add(me),h--):(u(X,o),h--)}for(;h--;){const se=r[h];T.has(se.key)||u(se,o)}for(;m;)R(I[m-1]);return I}function gi(r,e){const t={},n={},i={$$scope:1};let s=r.length;for(;s--;){const o=r[s],a=e[s];if(a){for(const u in o)u in a||(n[u]=1);for(const u in a)i[u]||(t[u]=a[u],i[u]=1);r[s]=a}else for(const u in o)i[u]=1}for(const o in n)o in t||(t[o]=void 0);return t}function ic(r){return typeof r=="object"&&r!==null?r:{}}function sc(r,e,t){const n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function Vt(r){r&&r.c()}function Br(r,e){r&&r.l(e)}function Ft(r,e,t,n){const{fragment:i,on_mount:s,on_destroy:o,after_update:a}=r.$$;i&&i.m(e,t),n||yi(()=>{const u=s.map(Du).filter(Pu);o?o.push(...u):Sr(u),r.$$.on_mount=[]}),a.forEach(yi)}function Pt(r,e){const t=r.$$;t.fragment!==null&&(Sr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function lp(r,e){r.$$.dirty[0]===-1&&(pi.push(r),rc(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function xr(r,e,t,n,i,s,o,a=[-1]){const u=fi;hi(r);const c=r.$$={fragment:null,ctx:null,props:s,update:yt,not_equal:i,bound:Fu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Fu(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};o&&o(c.root);let f=!1;if(c.ctx=t?t(r,e.props||{},(l,h,...m)=>{const b=m.length?m[0]:h;return c.ctx&&i(c.ctx[l],c.ctx[l]=b)&&(!c.skip_bound&&c.bound[l]&&c.bound[l](b),f&&lp(r,l)),h}):[],c.update(),f=!0,Sr(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){Ud();const l=$e(e.target);c.fragment&&c.fragment.l(l),l.forEach(xe)}else c.fragment&&c.fragment.c();e.intro&&Ge(r.$$.fragment),Ft(r,e.target,e.anchor,e.customElement),qd(),nc()}hi(u)}class Cr{$destroy(){Pt(this,1),this.$destroy=yt}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Dd(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _n=[];function oc(r,e=yt){let t;const n=new Set;function i(a){if(pr(r,a)&&(r=a,t)){const u=!_n.length;for(const c of n)c[1](),_n.push(c,r);if(u){for(let c=0;c<_n.length;c+=2)_n[c][0](_n[c+1]);_n.length=0}}}function s(a){i(a(r))}function o(a,u=yt){const c=[a,u];return n.add(c),n.size===1&&(t=e(i)||yt),a(r),()=>{n.delete(c),n.size===0&&(t(),t=null)}}return{set:i,update:s,subscribe:o}}var en=/^[a-z0-9]+(-[a-z0-9]+)*$/,wn=Object.freeze({left:0,top:0,width:16,height:16,rotate:0,vFlip:!1,hFlip:!1});function Eo(r){return Xr(Xr({},wn),r)}var gs=(r,e,t,n="")=>{const i=r.split(":");if(r.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;n=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const a=i.pop(),u=i.pop(),c={provider:i.length>0?i[0]:n,prefix:u,name:a};return e&&!vi(c)?null:c}const s=i[0],o=s.split("-");if(o.length>1){const a={provider:n,prefix:o.shift(),name:o.join("-")};return e&&!vi(a)?null:a}if(t&&n===""){const a={provider:n,prefix:"",name:s};return e&&!vi(a,t)?null:a}return null},vi=(r,e)=>r?!!((r.provider===""||r.provider.match(en))&&(e&&r.prefix===""||r.prefix.match(en))&&r.name.match(en)):!1;function fp(r,e){const t=Xr({},r);for(const n in wn){const i=n;if(e[i]!==void 0){const s=e[i];if(t[i]===void 0){t[i]=s;continue}switch(i){case"rotate":t[i]=(t[i]+s)%4;break;case"hFlip":case"vFlip":t[i]=s!==t[i];break;default:t[i]=s}}}return t}function ac(r,e,t=!1){function n(s,o){var a,u,c,f;if(r.icons[s]!==void 0)return Object.assign({},r.icons[s]);if(o>5)return null;if(((a=r.aliases)==null?void 0:a[s])!==void 0){const l=(u=r.aliases)==null?void 0:u[s],h=n(l.parent,o+1);return h&&fp(h,l)}return o===0&&((c=r.chars)==null?void 0:c[s])!==void 0?n((f=r.chars)==null?void 0:f[s],o+1):null}const i=n(e,0);if(i)for(const s in wn)i[s]===void 0&&r[s]!==void 0&&(i[s]=r[s]);return i&&t?Eo(i):i}var hp=/^[a-f0-9]+(-[a-f0-9]+)*$/;function uc(r,e){for(const t in r){const n=t,s=typeof r[n];if(s==="undefined"){delete r[n];continue}switch(t){case"body":case"parent":if(s!=="string")return t;break;case"hFlip":case"vFlip":case"hidden":if(s!=="boolean")if(e)delete r[n];else return t;break;case"width":case"height":case"left":case"top":case"rotate":case"inlineHeight":case"inlineTop":case"verticalAlign":if(s!=="number")if(e)delete r[n];else return t;break;default:if(s==="object")if(e)delete r[n];else return t}}return null}function dp(r,e){const t=!!(e==null?void 0:e.fix);if(typeof r!="object"||r===null||typeof r.icons!="object"||!r.icons)throw new Error("Bad icon set");const n=r;if(typeof(e==null?void 0:e.prefix)=="string")n.prefix=e.prefix;else if(typeof n.prefix!="string"||!n.prefix.match(en))throw new Error("Invalid prefix");if(typeof(e==null?void 0:e.provider)=="string")n.provider=e.provider;else if(n.provider!==void 0){const s=n.provider;if(typeof s!="string"||s!==""&&!s.match(en))if(t)delete n.provider;else throw new Error("Invalid provider")}const i=n.icons;if(Object.keys(i).forEach(s=>{if(!s.match(en)){if(t){delete i[s];return}throw new Error(`Invalid icon name: "${s}"`)}const o=i[s];if(typeof o!="object"||o===null||typeof o.body!="string"){if(t){delete i[s];return}throw new Error(`Invalid icon: "${s}"`)}const a=typeof o.parent=="string"?"parent":uc(o,t);if(a!==null){if(t){delete i[s];return}throw new Error(`Invalid property "${a}" in icon "${s}"`)}}),!Object.keys(n.icons).length)throw new Error("Icon set is empty");if(n.aliases!==void 0&&(typeof n.aliases!="object"||n.aliases===null))if(t)delete n.aliases;else throw new Error("Invalid aliases list");if(typeof n.aliases=="object"){let s=function(c,f){if(a.has(c))return!u.has(c);const l=o[c];if(f>5||typeof l!="object"||l===null||typeof l.parent!="string"||!c.match(en)){if(t)return delete o[c],u.add(c),!1;throw new Error(`Invalid icon alias: "${c}"`)}const h=l.parent;if(n.icons[h]===void 0&&(o[h]===void 0||!s(h,f+1))){if(t)return delete o[c],u.add(c),!1;throw new Error(`Missing parent icon for alias "${c}`)}t&&l.body!==void 0&&delete l.body;const m=l.body!==void 0?"body":uc(l,t);if(m!==null){if(t)return delete o[c],u.add(c),!1;throw new Error(`Invalid property "${m}" in alias "${c}"`)}return a.add(c),!0};const o=n.aliases,a=new Set,u=new Set;Object.keys(o).forEach(c=>{s(c,0)}),t&&!Object.keys(n.aliases).length&&delete n.aliases}if(Object.keys(wn).forEach(s=>{const o=typeof wn[s],a=typeof n[s];if(a!=="undefined"&&a!==o)throw new Error(`Invalid value type for "${s}"`)}),n.chars!==void 0&&(typeof n.chars!="object"||n.chars===null))if(t)delete n.chars;else throw new Error("Invalid characters map");if(typeof n.chars=="object"){const s=n.chars;Object.keys(s).forEach(o=>{var a;if(!o.match(hp)||typeof s[o]!="string"){if(t){delete s[o];return}throw new Error(`Invalid character "${o}"`)}const u=s[o];if(n.icons[u]===void 0&&((a=n.aliases)==null?void 0:a[u])===void 0){if(t){delete s[o];return}throw new Error(`Character "${o}" points to missing icon "${u}"`)}}),t&&!Object.keys(n.chars).length&&delete n.chars}return n}function pp(r){for(const e in wn)if(r[e]!==void 0)return!0;return!1}function cc(r,e,t){t=t||{};const n=[];if(typeof r!="object"||typeof r.icons!="object")return n;const i=t.validate;if(i!==!1)try{dp(r,typeof i=="object"?i:{fix:!0})}catch{return n}r.not_found instanceof Array&&r.not_found.forEach(a=>{e(a,null),n.push(a)});const s=r.icons;Object.keys(s).forEach(a=>{const u=ac(r,a,!0);u&&(e(a,u),n.push(a))});const o=t.aliases||"all";if(o!=="none"&&typeof r.aliases=="object"){const a=r.aliases;Object.keys(a).forEach(u=>{if(o==="variations"&&pp(a[u]))return;const c=ac(r,u,!0);c&&(e(u,c),n.push(u))})}return n}var yp=1,vs=Object.create(null);try{const r=window||self;(r==null?void 0:r._iconifyStorage.version)===yp&&(vs=r._iconifyStorage.storage)}catch{}function mp(r,e){return{provider:r,prefix:e,icons:Object.create(null),missing:Object.create(null)}}function tn(r,e){vs[r]===void 0&&(vs[r]=Object.create(null));const t=vs[r];return t[e]===void 0&&(t[e]=mp(r,e)),t[e]}function xo(r,e){const t=Date.now();return cc(e,(n,i)=>{i?r.icons[n]=i:r.missing[n]=t})}function gp(r,e,t){try{if(typeof t.body=="string")return r.icons[e]=Object.freeze(Eo(t)),!0}catch{}return!1}function vp(r,e){const t=r.icons[e];return t===void 0?null:t}var bi=!1;function lc(r){return typeof r=="boolean"&&(bi=r),bi}function bp(r){const e=typeof r=="string"?gs(r,!0,bi):r;return e?vp(tn(e.provider,e.prefix),e.name):null}function _p(r,e){const t=gs(r,!0,bi);if(!t)return!1;const n=tn(t.provider,t.prefix);return gp(n,t.name,e)}function wp(r,e){if(typeof r!="object")return!1;if(typeof e!="string"&&(e=typeof r.provider=="string"?r.provider:""),bi&&e===""&&(typeof r.prefix!="string"||r.prefix==="")){let n=!1;return cc(r,(i,s)=>{s&&_p(i,s)&&(n=!0)},{validate:{fix:!0,prefix:""}}),n}if(typeof r.prefix!="string"||!vi({provider:e,prefix:r.prefix,name:"a"}))return!1;const t=tn(e,r.prefix);return!!xo(t,r)}var fc=Object.freeze({inline:!1,width:null,height:null,hAlign:"center",vAlign:"middle",slice:!1,hFlip:!1,vFlip:!1,rotate:0});function Sp(r,e){const t={};for(const n in r){const i=n;if(t[i]=r[i],e[i]===void 0)continue;const s=e[i];switch(i){case"inline":case"slice":typeof s=="boolean"&&(t[i]=s);break;case"hFlip":case"vFlip":s===!0&&(t[i]=!t[i]);break;case"hAlign":case"vAlign":typeof s=="string"&&s!==""&&(t[i]=s);break;case"width":case"height":(typeof s=="string"&&s!==""||typeof s=="number"&&s||s===null)&&(t[i]=s);break;case"rotate":typeof s=="number"&&(t[i]+=s);break}}return t}var kp=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Ep=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Co(r,e,t){if(e===1)return r;if(t=t===void 0?100:t,typeof r=="number")return Math.ceil(r*e*t)/t;if(typeof r!="string")return r;const n=r.split(kp);if(n===null||!n.length)return r;const i=[];let s=n.shift(),o=Ep.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?i.push(s):i.push(Math.ceil(a*e*t)/t)}else i.push(s);if(s=n.shift(),s===void 0)return i.join("");o=!o}}function xp(r){let e="";switch(r.hAlign){case"left":e+="xMin";break;case"right":e+="xMax";break;default:e+="xMid"}switch(r.vAlign){case"top":e+="YMin";break;case"bottom":e+="YMax";break;default:e+="YMid"}return e+=r.slice?" slice":" meet",e}function Cp(r,e){const t={left:r.left,top:r.top,width:r.width,height:r.height};let n=r.body;[r,e].forEach(a=>{const u=[],c=a.hFlip,f=a.vFlip;let l=a.rotate;c?f?l+=2:(u.push("translate("+(t.width+t.left)+" "+(0-t.top)+")"),u.push("scale(-1 1)"),t.top=t.left=0):f&&(u.push("translate("+(0-t.left)+" "+(t.height+t.top)+")"),u.push("scale(1 -1)"),t.top=t.left=0);let h;switch(l<0&&(l-=Math.floor(l/4)*4),l=l%4,l){case 1:h=t.height/2+t.top,u.unshift("rotate(90 "+h+" "+h+")");break;case 2:u.unshift("rotate(180 "+(t.width/2+t.left)+" "+(t.height/2+t.top)+")");break;case 3:h=t.width/2+t.left,u.unshift("rotate(-90 "+h+" "+h+")");break}l%2==1&&((t.left!==0||t.top!==0)&&(h=t.left,t.left=t.top,t.top=h),t.width!==t.height&&(h=t.width,t.width=t.height,t.height=h)),u.length&&(n='<g transform="'+u.join(" ")+'">'+n+"</g>")});let i,s;e.width===null&&e.height===null?(s="1em",i=Co(s,t.width/t.height)):e.width!==null&&e.height!==null?(i=e.width,s=e.height):e.height!==null?(s=e.height,i=Co(s,t.width/t.height)):(i=e.width,s=Co(i,t.height/t.width)),i==="auto"&&(i=t.width),s==="auto"&&(s=t.height),i=typeof i=="string"?i:i+"",s=typeof s=="string"?s:s+"";const o={attributes:{width:i,height:s,preserveAspectRatio:xp(e),viewBox:t.left+" "+t.top+" "+t.width+" "+t.height},body:n};return e.inline&&(o.inline=!0),o}var Op=/\sid="(\S+)"/g,Tp="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16),Ap=0;function Ip(r,e=Tp){const t=[];let n;for(;n=Op.exec(r);)t.push(n[1]);return t.length&&t.forEach(i=>{const s=typeof e=="function"?e(i):e+Ap++,o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=r.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+s+"$3")}),r}var Oo=Object.create(null);function Np(r,e){Oo[r]=e}function To(r){return Oo[r]||Oo[""]}function Ao(r){let e;if(typeof r.resources=="string")e=[r.resources];else if(e=r.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:r.path===void 0?"/":r.path,maxURL:r.maxURL?r.maxURL:500,rotate:r.rotate?r.rotate:750,timeout:r.timeout?r.timeout:5e3,random:r.random===!0,index:r.index?r.index:0,dataAfterTimeout:r.dataAfterTimeout!==!1}}var Io=Object.create(null),_i=["https://api.simplesvg.com","https://api.unisvg.com"],bs=[];for(;_i.length>0;)_i.length===1||Math.random()>.5?bs.push(_i.shift()):bs.push(_i.pop());Io[""]=Ao({resources:["https://api.iconify.design"].concat(bs)});function Rp(r,e){const t=Ao(e);return t===null?!1:(Io[r]=t,!0)}function No(r){return Io[r]}var hc=(r,e)=>{let t=r,n=t.indexOf("?")!==-1;function i(s){switch(typeof s){case"boolean":return s?"true":"false";case"number":return encodeURIComponent(s);case"string":return encodeURIComponent(s);default:throw new Error("Invalid parameter")}}return Object.keys(e).forEach(s=>{let o;try{o=i(e[s])}catch{return}t+=(n?"&":"?")+encodeURIComponent(s)+"="+o,n=!0}),t},dc=Object.create(null),_s=Object.create(null),Mp=()=>{let r;try{if(r=fetch,typeof r=="function")return r}catch{}try{const e=String.fromCharCode(114)+String.fromCharCode(101);if(r=global[e+"qui"+e]("cross-fetch"),typeof r=="function")return r}catch{}return null},pc=Mp();function Dp(r,e){const t=No(r);if(!t)return 0;let n;if(!t.maxURL)n=0;else{let s=0;t.resources.forEach(a=>{s=Math.max(s,a.length)});const o=hc(e+".json",{icons:""});n=t.maxURL-s-t.path.length-o.length}const i=r+":"+e;return _s[r]=t.path,dc[i]=n,n}var Fp=(r,e,t)=>{const n=[];let i=dc[e];i===void 0&&(i=Dp(r,e));const s="icons";let o={type:s,provider:r,prefix:e,icons:[]},a=0;return t.forEach((u,c)=>{a+=u.length+1,a>=i&&c>0&&(n.push(o),o={type:s,provider:r,prefix:e,icons:[]},a=u.length),o.icons.push(u)}),n.push(o),n};function Pp(r){if(typeof r=="string"){if(_s[r]===void 0){const e=No(r);if(!e)return"/";_s[r]=e.path}return _s[r]}return"/"}var jp=(r,e,t)=>{if(!pc){t.done(void 0,424);return}let n=Pp(e.provider);switch(e.type){case"icons":{const s=e.prefix,a=e.icons.join(",");n+=hc(s+".json",{icons:a});break}case"custom":{const s=e.uri;n+=s.slice(0,1)==="/"?s.slice(1):s;break}default:t.done(void 0,400);return}let i=503;pc(r+n).then(s=>{if(s.status!==200){setTimeout(()=>{t.done(void 0,s.status)});return}return i=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{t.done(void 0,i)});return}setTimeout(()=>{t.done(s)})}).catch(()=>{t.done(void 0,i)})},Lp={prepare:Fp,send:jp};function Bp(r){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);r.sort((i,s)=>i.provider!==s.provider?i.provider.localeCompare(s.provider):i.prefix!==s.prefix?i.prefix.localeCompare(s.prefix):i.name.localeCompare(s.name));let n={provider:"",prefix:"",name:""};return r.forEach(i=>{if(n.name===i.name&&n.prefix===i.prefix&&n.provider===i.provider)return;n=i;const s=i.provider,o=i.prefix,a=i.name;t[s]===void 0&&(t[s]=Object.create(null));const u=t[s];u[o]===void 0&&(u[o]=tn(s,o));const c=u[o];let f;c.icons[a]!==void 0?f=e.loaded:o===""||c.missing[a]!==void 0?f=e.missing:f=e.pending;const l={provider:s,prefix:o,name:a};f.push(l)}),e}var Ur=Object.create(null),Ro=Object.create(null);function yc(r,e){r.forEach(t=>{const n=t.provider;if(Ur[n]===void 0)return;const i=Ur[n],s=t.prefix,o=i[s];o&&(i[s]=o.filter(a=>a.id!==e))})}function Up(r,e){Ro[r]===void 0&&(Ro[r]=Object.create(null));const t=Ro[r];t[e]||(t[e]=!0,setTimeout(()=>{if(t[e]=!1,Ur[r]===void 0||Ur[r][e]===void 0)return;const n=Ur[r][e].slice(0);if(!n.length)return;const i=tn(r,e);let s=!1;n.forEach(o=>{const a=o.icons,u=a.pending.length;a.pending=a.pending.filter(c=>{if(c.prefix!==e)return!0;const f=c.name;if(i.icons[f]!==void 0)a.loaded.push({provider:r,prefix:e,name:f});else if(i.missing[f]!==void 0)a.missing.push({provider:r,prefix:e,name:f});else return s=!0,!0;return!1}),a.pending.length!==u&&(s||yc([{provider:r,prefix:e}],o.id),o.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),o.abort))})}))}var qp=0;function Hp(r,e,t){const n=qp++,i=yc.bind(null,t,n);if(!e.pending.length)return i;const s={id:n,icons:e,callback:r,abort:i};return t.forEach(o=>{const a=o.provider,u=o.prefix;Ur[a]===void 0&&(Ur[a]=Object.create(null));const c=Ur[a];c[u]===void 0&&(c[u]=[]),c[u].push(s)}),i}function zp(r,e=!0,t=!1){const n=[];return r.forEach(i=>{const s=typeof i=="string"?gs(i,!1,t):i;(!e||vi(s,t))&&n.push({provider:s.provider,prefix:s.prefix,name:s.name})}),n}var mc={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Gp(r,e,t,n,i){const s=r.resources.length,o=r.random?Math.floor(Math.random()*s):r.index;let a;if(r.random){let X=r.resources.slice(0);for(a=[];X.length>1;){const ee=Math.floor(Math.random()*X.length);a.push(X[ee]),X=X.slice(0,ee).concat(X.slice(ee+1))}a=a.concat(X)}else a=r.resources.slice(o).concat(r.resources.slice(0,o));const u=Date.now();let c="pending",f=0,l,h=null,m=[],b=[];typeof n=="function"&&b.push(n);function M(){h&&(clearTimeout(h),h=null)}function I(){c==="pending"&&(c="aborted"),M(),m.forEach(X=>{X.abort&&X.abort(),X.status==="pending"&&(X.status="aborted")}),m=[]}function T(X,ee){ee&&(b=[]),typeof X=="function"&&b.push(X)}function B(){return{startTime:u,payload:e,status:c,queriesSent:f,queriesPending:m.length,subscribe:T,abort:I}}function q(){c="failed",b.forEach(X=>{X(void 0,l)})}function F(){m=m.filter(X=>(X.status==="pending"&&(X.status="aborted"),X.abort&&X.abort(),!1))}function R(X,ee,me){const ue=ee===void 0;switch(m=m.filter(Se=>Se!==X),c){case"pending":break;case"failed":if(ue||!r.dataAfterTimeout)return;break;default:return}if(ue){me!==void 0&&(l=me),m.length||(a.length?se():q());return}if(M(),F(),i&&!r.random){const Se=r.resources.indexOf(X.resource);Se!==-1&&Se!==r.index&&i(Se)}c="completed",b.forEach(Se=>{Se(ee)})}function se(){if(c!=="pending")return;M();const X=a.shift();if(X===void 0){if(m.length){const ue=typeof r.timeout=="function"?r.timeout(u):r.timeout;if(ue){h=setTimeout(()=>{M(),c==="pending"&&(F(),q())},ue);return}}q();return}const ee={getQueryStatus:B,status:"pending",resource:X,done:(ue,Se)=>{R(ee,ue,Se)}};m.push(ee),f++;const me=typeof r.rotate=="function"?r.rotate(f,u):r.rotate;h=setTimeout(se,me),t(X,e,ee)}return setTimeout(se),B}function Vp(r){if(typeof r!="object"||typeof r.resources!="object"||!(r.resources instanceof Array)||!r.resources.length)throw new Error("Invalid Reduncancy configuration");const e=Object.create(null);let t;for(t in mc)r[t]!==void 0?e[t]=r[t]:e[t]=mc[t];return e}function gc(r){const e=Vp(r);let t=[];function n(){t=t.filter(a=>a().status==="pending")}function i(a,u,c){const f=Gp(e,a,u,(l,h)=>{n(),c&&c(l,h)},l=>{e.index=l});return t.push(f),f}function s(a){const u=t.find(c=>a(c));return u!==void 0?u:null}return{query:i,find:s,setIndex:a=>{e.index=a},getIndex:()=>e.index,cleanup:n}}function vc(){}var Mo=Object.create(null);function Qp(r){if(Mo[r]===void 0){const e=No(r);if(!e)return;const t=gc(e),n={config:e,redundancy:t};Mo[r]=n}return Mo[r]}function Wp(r,e,t){let n,i;if(typeof r=="string"){const s=To(r);if(!s)return t(void 0,424),vc;i=s.send;const o=Qp(r);o&&(n=o.redundancy)}else{const s=Ao(r);if(s){n=gc(s);const o=r.resources?r.resources[0]:"",a=To(o);a&&(i=a.send)}}return!n||!i?(t(void 0,424),vc):n.query(e,i,t)().abort}var Do={};function bc(){}var rn=Object.create(null),Fo=Object.create(null),Po=Object.create(null),jo=Object.create(null);function Yp(r,e){Po[r]===void 0&&(Po[r]=Object.create(null));const t=Po[r];t[e]||(t[e]=!0,setTimeout(()=>{t[e]=!1,Up(r,e)}))}var _c=Object.create(null);function Jp(r,e,t){function n(){const a=(r===""?"":"@"+r+":")+e,u=Math.floor(Date.now()/6e4);_c[a]<u&&(_c[a]=u,console.error('Unable to retrieve icons for "'+a+'" because API is not configured properly.'))}Fo[r]===void 0&&(Fo[r]=Object.create(null));const i=Fo[r];jo[r]===void 0&&(jo[r]=Object.create(null));const s=jo[r];rn[r]===void 0&&(rn[r]=Object.create(null));const o=rn[r];i[e]===void 0?i[e]=t:i[e]=i[e].concat(t).sort(),s[e]||(s[e]=!0,setTimeout(()=>{s[e]=!1;const a=i[e];delete i[e];const u=To(r);if(!u){n();return}u.prepare(r,e,a).forEach(f=>{Wp(r,f,(l,h)=>{const m=tn(r,e);if(typeof l!="object"){if(h!==404)return;const b=Date.now();f.icons.forEach(M=>{m.missing[M]=b})}else try{const b=xo(m,l);if(!b.length)return;const M=o[e];b.forEach(I=>{delete M[I]}),Do.store&&Do.store(r,l)}catch(b){console.error(b)}Yp(r,e)})})}))}var Kp=(r,e)=>{const t=zp(r,!0,lc()),n=Bp(t);if(!n.pending.length){let c=!0;return e&&setTimeout(()=>{c&&e(n.loaded,n.missing,n.pending,bc)}),()=>{c=!1}}const i=Object.create(null),s=[];let o,a;n.pending.forEach(c=>{const f=c.provider,l=c.prefix;if(l===a&&f===o)return;o=f,a=l,s.push({provider:f,prefix:l}),rn[f]===void 0&&(rn[f]=Object.create(null));const h=rn[f];h[l]===void 0&&(h[l]=Object.create(null)),i[f]===void 0&&(i[f]=Object.create(null));const m=i[f];m[l]===void 0&&(m[l]=[])});const u=Date.now();return n.pending.forEach(c=>{const f=c.provider,l=c.prefix,h=c.name,m=rn[f][l];m[h]===void 0&&(m[h]=u,i[f][l].push(h))}),s.forEach(c=>{const f=c.provider,l=c.prefix;i[f][l].length&&Jp(f,l,i[f][l])}),e?Hp(e,n,s):bc},wc="iconify2",wi="iconify",Sc=wi+"-count",kc=wi+"-version",Ec=36e5,Xp=168,Lo={local:!0,session:!0},Bo=!1,xc={local:0,session:0},Cc={local:[],session:[]},ws=typeof window=="undefined"?{}:window;function Oc(r){const e=r+"Storage";try{if(ws&&ws[e]&&typeof ws[e].length=="number")return ws[e]}catch{}return Lo[r]=!1,null}function Uo(r,e,t){try{return r.setItem(Sc,t+""),xc[e]=t,!0}catch{return!1}}function Tc(r){const e=r.getItem(Sc);if(e){const t=parseInt(e);return t||0}return 0}function Zp(r,e){try{r.setItem(kc,wc)}catch{}Uo(r,e,0)}function $p(r){try{const e=Tc(r);for(let t=0;t<e;t++)r.removeItem(wi+t)}catch{}}var Ac=()=>{if(Bo)return;Bo=!0;const r=Math.floor(Date.now()/Ec)-Xp;function e(t){const n=Oc(t);if(!n)return;const i=s=>{const o=wi+s,a=n.getItem(o);if(typeof a!="string")return!1;let u=!0;try{const c=JSON.parse(a);if(typeof c!="object"||typeof c.cached!="number"||c.cached<r||typeof c.provider!="string"||typeof c.data!="object"||typeof c.data.prefix!="string")u=!1;else{const f=c.provider,l=c.data.prefix,h=tn(f,l);u=xo(h,c.data).length>0}}catch{u=!1}return u||n.removeItem(o),u};try{const s=n.getItem(kc);if(s!==wc){s&&$p(n),Zp(n,t);return}let o=Tc(n);for(let a=o-1;a>=0;a--)i(a)||(a===o-1?o--:Cc[t].push(a));Uo(n,t,o)}catch{}}for(const t in Lo)e(t)},e0=(r,e)=>{Bo||Ac();function t(n){if(!Lo[n])return!1;const i=Oc(n);if(!i)return!1;let s=Cc[n].shift();if(s===void 0&&(s=xc[n],!Uo(i,n,s+1)))return!1;try{const o={cached:Math.floor(Date.now()/Ec),provider:r,data:e};i.setItem(wi+s,JSON.stringify(o))}catch{return!1}return!0}t("local")||t("session")},Ic=/[\s,]+/;function t0(r,e){e.split(Ic).forEach(t=>{switch(t.trim()){case"horizontal":r.hFlip=!0;break;case"vertical":r.vFlip=!0;break}})}function r0(r,e){e.split(Ic).forEach(t=>{const n=t.trim();switch(n){case"left":case"center":case"right":r.hAlign=n;break;case"top":case"middle":case"bottom":r.vAlign=n;break;case"slice":case"crop":r.slice=!0;break;case"meet":r.slice=!1}})}function n0(r,e=0){const t=r.replace(/^-?[0-9.]*/,"");function n(i){for(;i<0;)i+=4;return i%4}if(t===""){const i=parseInt(r);return isNaN(i)?0:n(i)}else if(t!==r){let i=0;switch(t){case"%":i=25;break;case"deg":i=90}if(i){let s=parseFloat(r.slice(0,r.length-t.length));return isNaN(s)?0:(s=s/i,s%1==0?n(s):0)}}return e}const i0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"};function s0(r,e){const t=Sp(fc,e),n=Xr({},i0);let i=typeof e.style=="string"?e.style:"";for(let u in e){const c=e[u];if(c!==void 0)switch(u){case"icon":case"style":case"onLoad":break;case"inline":case"hFlip":case"vFlip":t[u]=c===!0||c==="true"||c===1;break;case"flip":typeof c=="string"&&t0(t,c);break;case"align":typeof c=="string"&&r0(t,c);break;case"color":i=i+(i.length>0&&i.trim().slice(-1)!==";"?";":"")+"color: "+c+"; ";break;case"rotate":typeof c=="string"?t[u]=n0(c):typeof c=="number"&&(t[u]=c);break;case"ariaHidden":case"aria-hidden":c!==!0&&c!=="true"&&delete n["aria-hidden"];break;default:if(u.slice(0,3)==="on:")break;fc[u]===void 0&&(n[u]=c)}}const s=Cp(r,t);for(let u in s.attributes)n[u]=s.attributes[u];s.inline&&(i="vertical-align: -0.125em; "+i),i!==""&&(n.style=i);let o=0;const a=e.id;return{attributes:n,body:Ip(s.body,a?()=>a+"ID"+o++:"iconifySvelte")}}lc(!0);Np("",Lp);if(typeof document!="undefined"&&typeof window!="undefined"){Do.store=e0,Ac();const r=window;if(r.IconifyPreload!==void 0){const e=r.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(n=>{try{(typeof n!="object"||n===null||n instanceof Array||typeof n.icons!="object"||typeof n.prefix!="string"||!wp(n))&&console.error(t)}catch{console.error(t)}})}if(r.IconifyProviders!==void 0){const e=r.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const n="IconifyProviders["+t+"] is invalid.";try{const i=e[t];if(typeof i!="object"||!i||i.resources===void 0)continue;Rp(t,i)||console.error(n)}catch{console.error(n)}}}}function o0(r,e,t,n,i){function s(){e.loading&&(e.loading.abort(),e.loading=null)}if(typeof r=="object"&&r!==null&&typeof r.body=="string")return e.name="",s(),{data:Eo(r)};let o;if(typeof r!="string"||(o=gs(r,!1,!0))===null)return s(),null;const a=bp(o);if(a===null)return t&&(!e.loading||e.loading.name!==r)&&(s(),e.name="",e.loading={name:r,abort:Kp([o],n)}),null;s(),e.name!==r&&(e.name=r,i&&!e.destroyed&&i(r));const u=["iconify"];return o.prefix!==""&&u.push("iconify--"+o.prefix),o.provider!==""&&u.push("iconify--"+o.provider),{data:a,classes:u}}function a0(r,e){return r?s0(r,e):null}function Nc(r){let e,t=r[0].body+"",n=[r[0].attributes],i={};for(let s=0;s<n.length;s+=1)i=Zt(i,n[s]);return{c(){e=$t("svg"),this.h()},l(s){e=sr(s,"svg",{});var o=$e(e);o.forEach(xe),this.h()},h(){Vu(e,i)},m(s,o){Xe(s,e,o),e.innerHTML=t},p(s,o){o&1&&t!==(t=s[0].body+"")&&(e.innerHTML=t),Vu(e,i=gi(n,[o&1&&s[0].attributes]))},d(s){s&&xe(e)}}}function u0(r){let e,t=r[0]!==null&&Nc(r);return{c(){t&&t.c(),e=_t()},l(n){t&&t.l(n),e=_t()},m(n,i){t&&t.m(n,i),Xe(n,e,i)},p(n,[i]){n[0]!==null?t?t.p(n,i):(t=Nc(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:yt,o:yt,d(n){t&&t.d(n),n&&xe(e)}}}function c0(r,e,t){const n={name:"",loading:null,destroyed:!1};let i=!1,s=0,o;const a=c=>{typeof e.onLoad=="function"&&e.onLoad(c),di()("load",{icon:c})};function u(){t(3,s++,s)}return bn(()=>{t(2,i=!0)}),ec(()=>{t(1,n.destroyed=!0,n),n.loading&&(n.loading.abort(),t(1,n.loading=null,n))}),r.$$set=c=>{t(6,e=Zt(Zt({},e),ci(c)))},r.$$.update=()=>{{const c=o0(e.icon,n,i,u,a);t(0,o=c?a0(c.data,e):null),o&&c.classes&&t(0,o.attributes.class=(typeof e.class=="string"?e.class+" ":"")+c.classes.join(" "),o)}},e=ci(e),[o,n,i,s]}class VA extends Cr{constructor(e){super();xr(this,e,c0,u0,pr,{})}}var He=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Rc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Mc(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),e}var Dc={exports:{}};(function(r){var e=256,t=6,n=52,i=[],s=typeof He=="undefined"?window:He,o=Math.pow(e,t),a=Math.pow(2,n),u=a*2,c=e-1,f=Math.random;r.exports=function(I,T){if(T&&T.global===!0)return T.global=!1,Math.random=r.exports(I,T),T.global=!0,Math.random;var B=T&&T.entropy||!1,q=[];m(h(B?[I,M(i)]:0 in arguments?I:b(),3),q);var F=new l(q);return m(M(F.S),i),function(){for(var R=F.g(t),se=o,X=0;R<a;)R=(R+X)*e,se*=e,X=F.g(1);for(;R>=u;)R/=2,se/=2,X>>>=1;return(R+X)/se}},r.exports.resetGlobal=function(){Math.random=f};function l(I){var T,B=I.length,q=this,F=0,R=q.i=q.j=0,se=q.S=[];for(B||(I=[B++]);F<e;)se[F]=F++;for(F=0;F<e;F++)se[F]=se[R=c&R+I[F%B]+(T=se[F])],se[R]=T;(q.g=function(X){for(var ee,me=0,ue=q.i,Se=q.j,W=q.S;X--;)ee=W[ue=c&ue+1],me=me*e+W[c&(W[ue]=W[Se=c&Se+ee])+(W[Se]=ee)];return q.i=ue,q.j=Se,me})(e)}function h(I,T){var B=[],q=(typeof I)[0],F;if(T&&q=="o")for(F in I)try{B.push(h(I[F],T-1))}catch{}return B.length?B:q=="s"?I:I+"\0"}function m(I,T){for(var B=I+"",q,F=0;F<B.length;)T[c&F]=c&(q^=T[c&F]*19)+B.charCodeAt(F++);return M(T)}function b(I){try{return s.crypto.getRandomValues(I=new Uint8Array(e)),M(I)}catch{return[+new Date,s,s.navigator&&s.navigator.plugins,s.screen,M(i)]}}function M(I){return String.fromCharCode.apply(0,I)}m(Math.random(),i)})(Dc);var qo={exports:{}};(function(r,e){(function(){var t=.5*(Math.sqrt(3)-1),n=(3-Math.sqrt(3))/6,i=1/3,s=1/6,o=(Math.sqrt(5)-1)/4,a=(5-Math.sqrt(5))/20;function u(h){var m;typeof h=="function"?m=h:h?m=f(h):m=Math.random,this.p=c(m),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var b=0;b<512;b++)this.perm[b]=this.p[b&255],this.permMod12[b]=this.perm[b]%12}u.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(h,m){var b=this.permMod12,M=this.perm,I=this.grad3,T=0,B=0,q=0,F=(h+m)*t,R=Math.floor(h+F),se=Math.floor(m+F),X=(R+se)*n,ee=R-X,me=se-X,ue=h-ee,Se=m-me,W,Z;ue>Se?(W=1,Z=0):(W=0,Z=1);var C=ue-W+n,A=Se-Z+n,H=ue-1+2*n,w=Se-1+2*n,_=R&255,O=se&255,j=.5-ue*ue-Se*Se;if(j>=0){var G=b[_+M[O]]*3;j*=j,T=j*j*(I[G]*ue+I[G+1]*Se)}var Y=.5-C*C-A*A;if(Y>=0){var te=b[_+W+M[O+Z]]*3;Y*=Y,B=Y*Y*(I[te]*C+I[te+1]*A)}var oe=.5-H*H-w*w;if(oe>=0){var ge=b[_+1+M[O+1]]*3;oe*=oe,q=oe*oe*(I[ge]*H+I[ge+1]*w)}return 70*(T+B+q)},noise3D:function(h,m,b){var M=this.permMod12,I=this.perm,T=this.grad3,B,q,F,R,se=(h+m+b)*i,X=Math.floor(h+se),ee=Math.floor(m+se),me=Math.floor(b+se),ue=(X+ee+me)*s,Se=X-ue,W=ee-ue,Z=me-ue,C=h-Se,A=m-W,H=b-Z,w,_,O,j,G,Y;C>=A?A>=H?(w=1,_=0,O=0,j=1,G=1,Y=0):C>=H?(w=1,_=0,O=0,j=1,G=0,Y=1):(w=0,_=0,O=1,j=1,G=0,Y=1):A<H?(w=0,_=0,O=1,j=0,G=1,Y=1):C<H?(w=0,_=1,O=0,j=0,G=1,Y=1):(w=0,_=1,O=0,j=1,G=1,Y=0);var te=C-w+s,oe=A-_+s,ge=H-O+s,Oe=C-j+2*s,Re=A-G+2*s,ne=H-Y+2*s,Ee=C-1+3*s,Be=A-1+3*s,Ve=H-1+3*s,Je=X&255,qe=ee&255,ot=me&255,x=.6-C*C-A*A-H*H;if(x<0)B=0;else{var p=M[Je+I[qe+I[ot]]]*3;x*=x,B=x*x*(T[p]*C+T[p+1]*A+T[p+2]*H)}var y=.6-te*te-oe*oe-ge*ge;if(y<0)q=0;else{var D=M[Je+w+I[qe+_+I[ot+O]]]*3;y*=y,q=y*y*(T[D]*te+T[D+1]*oe+T[D+2]*ge)}var J=.6-Oe*Oe-Re*Re-ne*ne;if(J<0)F=0;else{var ce=M[Je+j+I[qe+G+I[ot+Y]]]*3;J*=J,F=J*J*(T[ce]*Oe+T[ce+1]*Re+T[ce+2]*ne)}var ae=.6-Ee*Ee-Be*Be-Ve*Ve;if(ae<0)R=0;else{var je=M[Je+1+I[qe+1+I[ot+1]]]*3;ae*=ae,R=ae*ae*(T[je]*Ee+T[je+1]*Be+T[je+2]*Ve)}return 32*(B+q+F+R)},noise4D:function(h,m,b,M){var I=this.perm,T=this.grad4,B,q,F,R,se,X=(h+m+b+M)*o,ee=Math.floor(h+X),me=Math.floor(m+X),ue=Math.floor(b+X),Se=Math.floor(M+X),W=(ee+me+ue+Se)*a,Z=ee-W,C=me-W,A=ue-W,H=Se-W,w=h-Z,_=m-C,O=b-A,j=M-H,G=0,Y=0,te=0,oe=0;w>_?G++:Y++,w>O?G++:te++,w>j?G++:oe++,_>O?Y++:te++,_>j?Y++:oe++,O>j?te++:oe++;var ge,Oe,Re,ne,Ee,Be,Ve,Je,qe,ot,x,p;ge=G>=3?1:0,Oe=Y>=3?1:0,Re=te>=3?1:0,ne=oe>=3?1:0,Ee=G>=2?1:0,Be=Y>=2?1:0,Ve=te>=2?1:0,Je=oe>=2?1:0,qe=G>=1?1:0,ot=Y>=1?1:0,x=te>=1?1:0,p=oe>=1?1:0;var y=w-ge+a,D=_-Oe+a,J=O-Re+a,ce=j-ne+a,ae=w-Ee+2*a,je=_-Be+2*a,ze=O-Ve+2*a,tt=j-Je+2*a,lt=w-qe+3*a,st=_-ot+3*a,Lt=O-x+3*a,Kt=j-p+3*a,Bt=w-1+4*a,ur=_-1+4*a,Fe=O-1+4*a,Wt=j-1+4*a,Qe=ee&255,Nt=me&255,Ut=ue&255,qt=Se&255,Xt=.6-w*w-_*_-O*O-j*j;if(Xt<0)B=0;else{var gt=I[Qe+I[Nt+I[Ut+I[qt]]]]%32*4;Xt*=Xt,B=Xt*Xt*(T[gt]*w+T[gt+1]*_+T[gt+2]*O+T[gt+3]*j)}var Yt=.6-y*y-D*D-J*J-ce*ce;if(Yt<0)q=0;else{var U=I[Qe+ge+I[Nt+Oe+I[Ut+Re+I[qt+ne]]]]%32*4;Yt*=Yt,q=Yt*Yt*(T[U]*y+T[U+1]*D+T[U+2]*J+T[U+3]*ce)}var S=.6-ae*ae-je*je-ze*ze-tt*tt;if(S<0)F=0;else{var Q=I[Qe+Ee+I[Nt+Be+I[Ut+Ve+I[qt+Je]]]]%32*4;S*=S,F=S*S*(T[Q]*ae+T[Q+1]*je+T[Q+2]*ze+T[Q+3]*tt)}var V=.6-lt*lt-st*st-Lt*Lt-Kt*Kt;if(V<0)R=0;else{var K=I[Qe+qe+I[Nt+ot+I[Ut+x+I[qt+p]]]]%32*4;V*=V,R=V*V*(T[K]*lt+T[K+1]*st+T[K+2]*Lt+T[K+3]*Kt)}var re=.6-Bt*Bt-ur*ur-Fe*Fe-Wt*Wt;if(re<0)se=0;else{var le=I[Qe+1+I[Nt+1+I[Ut+1+I[qt+1]]]]%32*4;re*=re,se=re*re*(T[le]*Bt+T[le+1]*ur+T[le+2]*Fe+T[le+3]*Wt)}return 27*(B+q+F+R+se)}};function c(h){var m,b=new Uint8Array(256);for(m=0;m<256;m++)b[m]=m;for(m=0;m<255;m++){var M=m+~~(h()*(256-m)),I=b[m];b[m]=b[M],b[M]=I}return b}u._buildPermutationTable=c;function f(){var h=0,m=0,b=0,M=1,I=l();h=I(" "),m=I(" "),b=I(" ");for(var T=0;T<arguments.length;T++)h-=I(arguments[T]),h<0&&(h+=1),m-=I(arguments[T]),m<0&&(m+=1),b-=I(arguments[T]),b<0&&(b+=1);return I=null,function(){var B=2091639*h+M*23283064365386963e-26;return h=m,m=b,b=B-(M=B|0)}}function l(){var h=4022871197;return function(m){m=m.toString();for(var b=0;b<m.length;b++){h+=m.charCodeAt(b);var M=.02519603282416938*h;h=M>>>0,M-=h,M*=h,h=M>>>0,M-=h,h+=M*4294967296}return(h>>>0)*23283064365386963e-26}}e.SimplexNoise=u,r.exports=u})()})(qo,qo.exports);var Fc=function(){for(var r=0;r<arguments.length;r++)if(arguments[r]!==void 0)return arguments[r]},l0=Dc.exports,f0=qo.exports,Qt=Fc;function Pc(r){r=Qt(r,null);var e=Math.random,t,n,i,s=null,o=!1;return a(r),{value:u,createRandom:function(_){return Pc(_)},setSeed:a,getSeed:f,getRandomSeed:l,valueNonZero:c,permuteNoise:m,noise1D:b,noise2D:M,noise3D:I,noise4D:T,sign:B,boolean:q,chance:F,range:R,rangeFloor:se,pick:X,shuffle:ee,onCircle:me,insideCircle:ue,onSphere:Se,insideSphere:W,quaternion:Z,weighted:H,weightedSet:C,weightedSetIndex:A,gaussian:w};function a(_,O){typeof _=="number"||typeof _=="string"?(t=_,n=l0(t,O)):(t=void 0,n=e),i=h(),s=null,o=!1}function u(){return n()}function c(){for(var _=0;_===0;)_=u();return _}function f(){return t}function l(){var _=String(Math.floor(Math.random()*1e6));return _}function h(){return new f0(n)}function m(){i=h()}function b(_,O,j){if(!isFinite(_))throw new TypeError("x component for noise() must be finite");return O=Qt(O,1),j=Qt(j,1),j*i.noise2D(_*O,0)}function M(_,O,j,G){if(!isFinite(_))throw new TypeError("x component for noise() must be finite");if(!isFinite(O))throw new TypeError("y component for noise() must be finite");return j=Qt(j,1),G=Qt(G,1),G*i.noise2D(_*j,O*j)}function I(_,O,j,G,Y){if(!isFinite(_))throw new TypeError("x component for noise() must be finite");if(!isFinite(O))throw new TypeError("y component for noise() must be finite");if(!isFinite(j))throw new TypeError("z component for noise() must be finite");return G=Qt(G,1),Y=Qt(Y,1),Y*i.noise3D(_*G,O*G,j*G)}function T(_,O,j,G,Y,te){if(!isFinite(_))throw new TypeError("x component for noise() must be finite");if(!isFinite(O))throw new TypeError("y component for noise() must be finite");if(!isFinite(j))throw new TypeError("z component for noise() must be finite");if(!isFinite(G))throw new TypeError("w component for noise() must be finite");return Y=Qt(Y,1),te=Qt(te,1),te*i.noise4D(_*Y,O*Y,j*Y,G*Y)}function B(){return q()?1:-1}function q(){return u()>.5}function F(_){if(_=Qt(_,.5),typeof _!="number")throw new TypeError("expected n to be a number");return u()<_}function R(_,O){if(O===void 0&&(O=_,_=0),typeof _!="number"||typeof O!="number")throw new TypeError("Expected all arguments to be numbers");return u()*(O-_)+_}function se(_,O){if(O===void 0&&(O=_,_=0),typeof _!="number"||typeof O!="number")throw new TypeError("Expected all arguments to be numbers");return Math.floor(R(_,O))}function X(_){if(_.length!==0)return _[se(0,_.length)]}function ee(_){if(!Array.isArray(_))throw new TypeError("Expected Array, got "+typeof _);for(var O,j,G=_.length,Y=_.slice();G;)O=Math.floor(u()*G--),j=Y[G],Y[G]=Y[O],Y[O]=j;return Y}function me(_,O){_=Qt(_,1),O=O||[];var j=u()*2*Math.PI;return O[0]=_*Math.cos(j),O[1]=_*Math.sin(j),O}function ue(_,O){_=Qt(_,1),O=O||[],me(1,O);var j=_*Math.sqrt(u());return O[0]*=j,O[1]*=j,O}function Se(_,O){_=Qt(_,1),O=O||[];var j=u()*Math.PI*2,G=u()*2-1,Y=j,te=Math.acos(G);return O[0]=_*Math.sin(te)*Math.cos(Y),O[1]=_*Math.sin(te)*Math.sin(Y),O[2]=_*Math.cos(te),O}function W(_,O){_=Qt(_,1),O=O||[];var j=u()*Math.PI*2,G=u()*2-1,Y=u(),te=j,oe=Math.acos(G),ge=_*Math.cbrt(Y);return O[0]=ge*Math.sin(oe)*Math.cos(te),O[1]=ge*Math.sin(oe)*Math.sin(te),O[2]=ge*Math.cos(oe),O}function Z(_){_=_||[];var O=u(),j=u(),G=u(),Y=Math.sqrt(1-O),te=Math.sqrt(O),oe=Math.PI*2*j,ge=Math.PI*2*G,Oe=Math.sin(oe)*Y,Re=Math.cos(oe)*Y,ne=Math.sin(ge)*te,Ee=Math.cos(ge)*te;return _[0]=Oe,_[1]=Re,_[2]=ne,_[3]=Ee,_}function C(_){return _=_||[],_.length===0?null:_[A(_)].value}function A(_){return _=_||[],_.length===0?-1:H(_.map(function(O){return O.weight}))}function H(_){if(_=_||[],_.length===0)return-1;var O=0,j;for(j=0;j<_.length;j++)O+=_[j];if(O<=0)throw new Error("Weights must sum to > 0");var G=u()*O;for(j=0;j<_.length;j++){if(G<_[j])return j;G-=_[j]}return 0}function w(_,O){if(_=Qt(_,0),O=Qt(O,1),o){o=!1;var j=s;return s=null,_+O*j}else{var G=0,Y=0,te=0;do G=u()*2-1,Y=u()*2-1,te=G*G+Y*Y;while(te>=1||te===0);var oe=Math.sqrt(-2*Math.log(te)/te);return s=Y*oe,o=!0,_+O*(G*oe)}}}var QA=Pc(),jc=60,Lc=jc*60,Bc=Lc*24,h0=Bc*7,Sn=1e3,Ho=jc*Sn,Uc=Lc*Sn,d0=Bc*Sn,p0=h0*Sn,zo="millisecond",nn="second",sn="minute",on="hour",Fr="day",Ss="week",cr="month",qc="quarter",Pr="year",kn="date",y0="YYYY-MM-DDTHH:mm:ssZ",Hc="Invalid Date",m0=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g0=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v0={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Go=function(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e},b0=function(e){var t=-e.utcOffset(),n=Math.abs(t),i=Math.floor(n/60),s=n%60;return""+(t<=0?"+":"-")+Go(i,2,"0")+":"+Go(s,2,"0")},_0=function r(e,t){if(e.date()<t.date())return-r(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),i=e.clone().add(n,cr),s=t-i<0,o=e.clone().add(n+(s?-1:1),cr);return+(-(n+(t-i)/(s?i-o:o-i))||0)},w0=function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},S0=function(e){var t={M:cr,y:Pr,w:Ss,d:Fr,D:kn,h:on,m:sn,s:nn,ms:zo,Q:qc};return t[e]||String(e||"").toLowerCase().replace(/s$/,"")},k0=function(e){return e===void 0},E0={s:Go,z:b0,m:_0,a:w0,p:S0,u:k0},Si="en",an={};an[Si]=v0;var Vo=function(e){return e instanceof Es},ks=function(e,t,n){var i;if(!e)return Si;if(typeof e=="string")an[e]&&(i=e),t&&(an[e]=t,i=e);else{var s=e.name;an[s]=e,i=s}return!n&&i&&(Si=i),i||!n&&Si},Ct=function(e,t){if(Vo(e))return e.clone();var n=typeof t=="object"?t:{};return n.date=e,n.args=arguments,new Es(n)},x0=function(e,t){return Ct(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},pt=E0;pt.l=ks;pt.i=Vo;pt.w=x0;var C0=function(e){var t=e.date,n=e.utc;if(t===null)return new Date(NaN);if(pt.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var i=t.match(m0);if(i){var s=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],s,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(t)},Es=function(){function r(t){this.$L=ks(t.locale,null,!0),this.parse(t)}var e=r.prototype;return e.parse=function(n){this.$d=C0(n),this.$x=n.x||{},this.init()},e.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},e.$utils=function(){return pt},e.isValid=function(){return this.$d.toString()!==Hc},e.isSame=function(n,i){var s=Ct(n);return this.startOf(i)<=s&&s<=this.endOf(i)},e.isAfter=function(n,i){return Ct(n)<this.startOf(i)},e.isBefore=function(n,i){return this.endOf(i)<Ct(n)},e.$g=function(n,i,s){return pt.u(n)?this[i]:this.set(s,n)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(n,i){var s=this,o=pt.u(i)?!0:i,a=pt.p(n),u=function(T,B){var q=pt.w(s.$u?Date.UTC(s.$y,B,T):new Date(s.$y,B,T),s);return o?q:q.endOf(Fr)},c=function(T,B){var q=[0,0,0,0],F=[23,59,59,999];return pt.w(s.toDate()[T].apply(s.toDate("s"),(o?q:F).slice(B)),s)},f=this.$W,l=this.$M,h=this.$D,m="set"+(this.$u?"UTC":"");switch(a){case Pr:return o?u(1,0):u(31,11);case cr:return o?u(1,l):u(0,l+1);case Ss:{var b=this.$locale().weekStart||0,M=(f<b?f+7:f)-b;return u(o?h-M:h+(6-M),l)}case Fr:case kn:return c(m+"Hours",0);case on:return c(m+"Minutes",1);case sn:return c(m+"Seconds",2);case nn:return c(m+"Milliseconds",3);default:return this.clone()}},e.endOf=function(n){return this.startOf(n,!1)},e.$set=function(n,i){var s,o=pt.p(n),a="set"+(this.$u?"UTC":""),u=(s={},s[Fr]=a+"Date",s[kn]=a+"Date",s[cr]=a+"Month",s[Pr]=a+"FullYear",s[on]=a+"Hours",s[sn]=a+"Minutes",s[nn]=a+"Seconds",s[zo]=a+"Milliseconds",s)[o],c=o===Fr?this.$D+(i-this.$W):i;if(o===cr||o===Pr){var f=this.clone().set(kn,1);f.$d[u](c),f.init(),this.$d=f.set(kn,Math.min(this.$D,f.daysInMonth())).$d}else u&&this.$d[u](c);return this.init(),this},e.set=function(n,i){return this.clone().$set(n,i)},e.get=function(n){return this[pt.p(n)]()},e.add=function(n,i){var s=this,o;n=Number(n);var a=pt.p(i),u=function(h){var m=Ct(s);return pt.w(m.date(m.date()+Math.round(h*n)),s)};if(a===cr)return this.set(cr,this.$M+n);if(a===Pr)return this.set(Pr,this.$y+n);if(a===Fr)return u(1);if(a===Ss)return u(7);var c=(o={},o[sn]=Ho,o[on]=Uc,o[nn]=Sn,o)[a]||1,f=this.$d.getTime()+n*c;return pt.w(f,this)},e.subtract=function(n,i){return this.add(n*-1,i)},e.format=function(n){var i=this,s=this.$locale();if(!this.isValid())return s.invalidDate||Hc;var o=n||y0,a=pt.z(this),u=this.$H,c=this.$m,f=this.$M,l=s.weekdays,h=s.months,m=s.meridiem,b=function(q,F,R,se){return q&&(q[F]||q(i,o))||R[F].substr(0,se)},M=function(q){return pt.s(u%12||12,q,"0")},I=m||function(B,q,F){var R=B<12?"AM":"PM";return F?R.toLowerCase():R},T={YY:String(this.$y).slice(-2),YYYY:this.$y,M:f+1,MM:pt.s(f+1,2,"0"),MMM:b(s.monthsShort,f,h,3),MMMM:b(h,f),D:this.$D,DD:pt.s(this.$D,2,"0"),d:String(this.$W),dd:b(s.weekdaysMin,this.$W,l,2),ddd:b(s.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(u),HH:pt.s(u,2,"0"),h:M(1),hh:M(2),a:I(u,c,!0),A:I(u,c,!1),m:String(c),mm:pt.s(c,2,"0"),s:String(this.$s),ss:pt.s(this.$s,2,"0"),SSS:pt.s(this.$ms,3,"0"),Z:a};return o.replace(g0,function(B,q){return q||T[B]||a.replace(":","")})},e.utcOffset=function(){return-Math.round(this.$d.getTimezoneOffset()/15)*15},e.diff=function(n,i,s){var o,a=pt.p(i),u=Ct(n),c=(u.utcOffset()-this.utcOffset())*Ho,f=this-u,l=pt.m(this,u);return l=(o={},o[Pr]=l/12,o[cr]=l,o[qc]=l/3,o[Ss]=(f-c)/p0,o[Fr]=(f-c)/d0,o[on]=f/Uc,o[sn]=f/Ho,o[nn]=f/Sn,o)[a]||f,s?l:pt.a(l)},e.daysInMonth=function(){return this.endOf(cr).$D},e.$locale=function(){return an[this.$L]},e.locale=function(n,i){if(!n)return this.$L;var s=this.clone(),o=ks(n,i,!0);return o&&(s.$L=o),s},e.clone=function(){return pt.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},r}(),zc=Es.prototype;Ct.prototype=zc;[["$ms",zo],["$s",nn],["$m",sn],["$H",on],["$W",Fr],["$M",cr],["$y",Pr],["$D",kn]].forEach(function(r){zc[r[1]]=function(e){return this.$g(e,r[0],r[1])}});Ct.extend=function(r,e){return r.$i||(r(e,Es,Ct),r.$i=!0),Ct};Ct.locale=ks;Ct.isDayjs=Vo;Ct.unix=function(r){return Ct(r*1e3)};Ct.en=an[Si];Ct.Ls=an;Ct.p={};var O0=function(r,e,t){r=r||{};var n=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};t.en.relativeTime=i,n.fromToBase=function(a,u,c,f,l){for(var h=c.$locale().relativeTime||i,m=r.thresholds||[{l:"s",r:44,d:nn},{l:"m",r:89},{l:"mm",r:44,d:sn},{l:"h",r:89},{l:"hh",r:21,d:on},{l:"d",r:35},{l:"dd",r:25,d:Fr},{l:"M",r:45},{l:"MM",r:10,d:cr},{l:"y",r:17},{l:"yy",d:Pr}],b=m.length,M,I,T,B=0;B<b;B+=1){var q=m[B];q.d&&(M=f?t(a).diff(c,q.d,!0):c.diff(a,q.d,!0));var F=(r.rounding||Math.round)(Math.abs(M));if(T=M>0,F<=q.r||!q.r){F<=1&&B>0&&(q=m[B-1]);var R=h[q.l];l&&(F=l(""+F)),typeof R=="string"?I=R.replace("%d",F):I=R(F,u,q.l,T);break}}if(u)return I;var se=T?h.future:h.past;return typeof se=="function"?se(I):se.replace("%s",I)};function s(a,u,c,f){return n.fromToBase(a,u,c,f)}n.to=function(a,u){return s(a,u,this,!0)},n.from=function(a,u){return s(a,u,this)};var o=function(u){return u.$u?t.utc():t()};n.toNow=function(a){return this.to(o(this),a)},n.fromNow=function(a){return this.from(o(this),a)}};Ct.extend(O0);function T0(r){let e,t,n=[r[3],{title:r[2]},{datetime:r[1]}],i={};for(let s=0;s<n.length;s+=1)i=Zt(i,n[s]);return{c(){e=ct("time"),t=Mr(r[0]),this.h()},l(s){e=dt(s,"TIME",{title:!0,datetime:!0});var o=$e(e);t=Zr(o,r[0]),o.forEach(xe),this.h()},h(){cs(e,i)},m(s,o){Xe(s,e,o),rt(e,t)},p(s,[o]){o&1&&li(t,s[0]),cs(e,i=gi(n,[o&8&&s[3],o&4&&{title:s[2]},o&2&&{datetime:s[1]}]))},i:yt,o:yt,d(s){s&&xe(e)}}}function A0(r,e,t){let n;const i=["timestamp","format","relative","live","formatted"];let s=Lu(e,i),{timestamp:o=new Date().toISOString()}=e,{format:a="MMM DD, YYYY"}=e,{relative:u=!1}=e,{live:c=!1}=e,{formatted:f=""}=e,l;const h=60*1e3;return bn(()=>(u&&c!==!1&&(l=setInterval(()=>{t(0,f=Ct(o).from())},Math.abs(typeof c=="number"?c:h))),()=>{typeof l=="number"&&clearInterval(l)})),r.$$set=m=>{e=Zt(Zt({},e),ci(m)),t(3,s=Lu(e,i)),"timestamp"in m&&t(1,o=m.timestamp),"format"in m&&t(4,a=m.format),"relative"in m&&t(5,u=m.relative),"live"in m&&t(6,c=m.live),"formatted"in m&&t(0,f=m.formatted)},r.$$.update=()=>{r.$$.dirty&50&&t(0,f=u?Ct(o).from():Ct(o).format(a)),r.$$.dirty&34&&t(2,n=u?o:void 0)},[f,o,n,s,a,u,c]}class WA extends Cr{constructor(e){super();xr(this,e,A0,T0,pr,{timestamp:1,format:4,relative:5,live:6,formatted:0})}}function I0(r){return-.5*(Math.cos(Math.PI*r)-1)}function YA(r,{delay:e=0,duration:t=400,easing:n=yo}={}){const i=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*i}`}}var N0={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(He,function(){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(U){if(U==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(U)}function o(){try{if(!Object.assign)return!1;var U=new String("abc");if(U[5]="de",Object.getOwnPropertyNames(U)[0]==="5")return!1;for(var S={},Q=0;Q<10;Q++)S["_"+String.fromCharCode(Q)]=Q;var V=Object.getOwnPropertyNames(S).map(function(re){return S[re]});if(V.join("")!=="0123456789")return!1;var K={};return"abcdefghijklmnopqrst".split("").forEach(function(re){K[re]=re}),Object.keys(Object.assign({},K)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var a=o()?Object.assign:function(U,S){for(var Q,V=s(U),K,re=1;re<arguments.length;re++){Q=Object(arguments[re]);for(var le in Q)n.call(Q,le)&&(V[le]=Q[le]);if(t){K=t(Q);for(var we=0;we<K.length;we++)i.call(Q,K[we])&&(V[K[we]]=Q[K[we]])}}return V},u=typeof window!="undefined"?window:typeof He!="undefined"?He:typeof self!="undefined"?self:{};function c(U,S){return S={exports:{}},U(S,S.exports),S.exports}var f=u.performance&&u.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},l=h;function h(U){return!!U&&(typeof U=="object"||typeof U=="function")&&typeof U.then=="function"}var m=b;function b(U){return!U||typeof U!="object"?!1:typeof window=="object"&&typeof window.Node=="object"?U instanceof window.Node:typeof U.nodeType=="number"&&typeof U.nodeName=="string"}function M(){return typeof window!="undefined"&&window["canvas-sketch-cli"]}function I(){for(var U=arguments,S=0;S<arguments.length;S++)if(U[S]!=null)return U[S]}function T(){return typeof document!="undefined"}function B(U){return typeof U.clear=="function"&&typeof U.clearColor=="function"&&typeof U.bufferData=="function"}function q(U){return m(U)&&/canvas/i.test(U.nodeName)&&typeof U.getContext=="function"}var F=c(function(U,S){S=U.exports=typeof Object.keys=="function"?Object.keys:Q,S.shim=Q;function Q(V){var K=[];for(var re in V)K.push(re);return K}});F.shim;var R=c(function(U,S){var Q=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";S=U.exports=Q?V:K,S.supported=V;function V(re){return Object.prototype.toString.call(re)=="[object Arguments]"}S.unsupported=K;function K(re){return re&&typeof re=="object"&&typeof re.length=="number"&&Object.prototype.hasOwnProperty.call(re,"callee")&&!Object.prototype.propertyIsEnumerable.call(re,"callee")||!1}});R.supported,R.unsupported;var se=c(function(U){var S=Array.prototype.slice,Q=U.exports=function(le,we,pe){return pe||(pe={}),le===we?!0:le instanceof Date&&we instanceof Date?le.getTime()===we.getTime():!le||!we||typeof le!="object"&&typeof we!="object"?pe.strict?le===we:le==we:re(le,we,pe)};function V(le){return le==null}function K(le){return!(!le||typeof le!="object"||typeof le.length!="number"||typeof le.copy!="function"||typeof le.slice!="function"||le.length>0&&typeof le[0]!="number")}function re(le,we,pe){var d,g;if(V(le)||V(we)||le.prototype!==we.prototype)return!1;if(R(le))return R(we)?(le=S.call(le),we=S.call(we),Q(le,we,pe)):!1;if(K(le)){if(!K(we)||le.length!==we.length)return!1;for(d=0;d<le.length;d++)if(le[d]!==we[d])return!1;return!0}try{var v=F(le),k=F(we)}catch{return!1}if(v.length!=k.length)return!1;for(v.sort(),k.sort(),d=v.length-1;d>=0;d--)if(v[d]!=k[d])return!1;for(d=v.length-1;d>=0;d--)if(g=v[d],!Q(le[g],we[g],pe))return!1;return typeof le==typeof we}}),X=c(function(U,S){(function(Q){var V=function(){var pe=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,g=/[^-+\dA-Z]/g;return function(v,k,E,N){if(arguments.length===1&&we(v)==="string"&&!/\d/.test(v)&&(k=v,v=void 0),v=v||new Date,v instanceof Date||(v=new Date(v)),isNaN(v))throw TypeError("Invalid date");k=String(V.masks[k]||k||V.masks.default);var P=k.slice(0,4);(P==="UTC:"||P==="GMT:")&&(k=k.slice(4),E=!0,P==="GMT:"&&(N=!0));var z=E?"getUTC":"get",ie=v[z+"Date"](),de=v[z+"Day"](),ye=v[z+"Month"](),Te=v[z+"FullYear"](),ve=v[z+"Hours"](),fe=v[z+"Minutes"](),ke=v[z+"Seconds"](),Ne=v[z+"Milliseconds"](),Pe=E?0:v.getTimezoneOffset(),Ae=re(v),ht=le(v),Ke={d:ie,dd:K(ie),ddd:V.i18n.dayNames[de],dddd:V.i18n.dayNames[de+7],m:ye+1,mm:K(ye+1),mmm:V.i18n.monthNames[ye],mmmm:V.i18n.monthNames[ye+12],yy:String(Te).slice(2),yyyy:Te,h:ve%12||12,hh:K(ve%12||12),H:ve,HH:K(ve),M:fe,MM:K(fe),s:ke,ss:K(ke),l:K(Ne,3),L:K(Math.round(Ne/10)),t:ve<12?V.i18n.timeNames[0]:V.i18n.timeNames[1],tt:ve<12?V.i18n.timeNames[2]:V.i18n.timeNames[3],T:ve<12?V.i18n.timeNames[4]:V.i18n.timeNames[5],TT:ve<12?V.i18n.timeNames[6]:V.i18n.timeNames[7],Z:N?"GMT":E?"UTC":(String(v).match(d)||[""]).pop().replace(g,""),o:(Pe>0?"-":"+")+K(Math.floor(Math.abs(Pe)/60)*100+Math.abs(Pe)%60,4),S:["th","st","nd","rd"][ie%10>3?0:(ie%100-ie%10!=10)*ie%10],W:Ae,N:ht};return k.replace(pe,function(bt){return bt in Ke?Ke[bt]:bt.slice(1,bt.length-1)})}}();V.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},V.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]};function K(pe,d){for(pe=String(pe),d=d||2;pe.length<d;)pe="0"+pe;return pe}function re(pe){var d=new Date(pe.getFullYear(),pe.getMonth(),pe.getDate());d.setDate(d.getDate()-(d.getDay()+6)%7+3);var g=new Date(d.getFullYear(),0,4);g.setDate(g.getDate()-(g.getDay()+6)%7+3);var v=d.getTimezoneOffset()-g.getTimezoneOffset();d.setHours(d.getHours()-v);var k=(d-g)/(864e5*7);return 1+Math.floor(k)}function le(pe){var d=pe.getDay();return d===0&&(d=7),d}function we(pe){return pe===null?"null":pe===void 0?"undefined":typeof pe!="object"?typeof pe:Array.isArray(pe)?"array":{}.toString.call(pe).slice(8,-1).toLowerCase()}U.exports=V})()});/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ee="",me,ue=Se;function Se(U,S){if(typeof U!="string")throw new TypeError("expected a string");if(S===1)return U;if(S===2)return U+U;var Q=U.length*S;if(me!==U||typeof me=="undefined")me=U,ee="";else if(ee.length>=Q)return ee.substr(0,Q);for(;Q>ee.length&&S>1;)S&1&&(ee+=U),S>>=1,U+=U;return ee+=U,ee=ee.substr(0,Q),ee}var W=function(S,Q,V){return S=S.toString(),typeof Q=="undefined"?S:(V===0?V="0":V?V=V.toString():V=" ",ue(V,Q-S.length)+S)},Z=function(){},C,A={extension:"",prefix:"",suffix:""},H=["image/png","image/jpeg","image/webp"];function w(U,S){return S===void 0&&(S={}),new Promise(function(Q,V){S=a({},A,S);var K=Oe(Object.assign({},S,{extension:"",frame:void 0})),re=U?"streamStart":"streamEnd",le=M();return le&&le.output&&typeof le[re]=="function"?le[re](a({},S,{filename:K})).then(function(we){return Q(we)}):Q({filename:K,client:!1})})}function _(U){return U===void 0&&(U={}),w(!0,U)}function O(U){return U===void 0&&(U={}),w(!1,U)}function j(U,S){S===void 0&&(S={});var Q=S.encoding||"image/png";if(!H.includes(Q))throw new Error("Invalid canvas encoding "+Q);var V=(Q.split("/")[1]||"").replace(/jpeg/i,"jpg");return V&&(V=("."+V).toLowerCase()),{extension:V,type:Q,dataURL:U.toDataURL(Q,S.encodingQuality)}}function G(U){return new Promise(function(S){var Q=U.indexOf(",");if(Q===-1){S(new window.Blob);return}for(var V=U.slice(Q+1),K=window.atob(V),re=U.slice(0,Q),le=/data:([^;]+)/.exec(re),we=(le?le[1]:"")||void 0,pe=new ArrayBuffer(K.length),d=new Uint8Array(pe),g=0;g<K.length;g++)d[g]=K.charCodeAt(g);S(new window.Blob([pe],{type:we}))})}function Y(U,S){return S===void 0&&(S={}),G(U).then(function(Q){return te(Q,S)})}function te(U,S){return S===void 0&&(S={}),new Promise(function(Q){S=a({},A,S);var V=S.filename,K=M();if(K&&typeof K.saveBlob=="function"&&K.output)return K.saveBlob(U,a({},S,{filename:V})).then(function(re){return Q(re)});C||(C=document.createElement("a"),C.style.visibility="hidden",C.target="_blank"),C.download=V,C.href=window.URL.createObjectURL(U),document.body.appendChild(C),C.onclick=function(){C.onclick=Z,setTimeout(function(){window.URL.revokeObjectURL(U),C.parentElement&&C.parentElement.removeChild(C),C.removeAttribute("href"),Q({filename:V,client:!1})})},C.click()})}function oe(U,S){S===void 0&&(S={});var Q=Array.isArray(U)?U:[U],V=new window.Blob(Q,{type:S.type||""});return te(V,S)}function ge(){var U="yyyy.mm.dd-HH.MM.ss";return X(new Date,U)}function Oe(U){if(U===void 0&&(U={}),U=a({},U),typeof U.file=="function")return U.file(U);if(U.file)return U.file;var S=null,Q="";if(typeof U.extension=="string"&&(Q=U.extension),typeof U.frame=="number"){var V;typeof U.totalFrames=="number"?V=U.totalFrames:V=Math.max(1e4,U.frame),S=W(String(U.frame),String(V).length,"0")}var K=isFinite(U.totalLayers)&&isFinite(U.layer)&&U.totalLayers>1?""+U.layer:"";if(S!=null)return[K,S].filter(Boolean).join("-")+Q;var re=U.timeStamp;return[U.prefix,U.name||re,K,U.hash,U.suffix].filter(Boolean).join("-")+Q}var Re={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},ne=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],Ee=function(U){var S=Object.keys(U);S.forEach(function(Q){if(Q in Re){var V=Re[Q];console.warn('[canvas-sketch] Could not recognize the setting "'+Q+'", did you mean "'+V+'"?')}else ne.includes(Q)||console.warn('[canvas-sketch] Could not recognize the setting "'+Q+'"')})};function Be(U){U===void 0&&(U={});var S=function(K){if(!!U.enabled()){var re=M();K.keyCode===83&&!K.altKey&&(K.metaKey||K.ctrlKey)?(K.preventDefault(),U.save(K)):K.keyCode===32?U.togglePlay(K):re&&!K.altKey&&K.keyCode===75&&(K.metaKey||K.ctrlKey)&&(K.preventDefault(),U.commit(K))}},Q=function(){window.addEventListener("keydown",S)},V=function(){window.removeEventListener("keydown",S)};return{attach:Q,detach:V}}var Ve="mm",Je=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]],qe=Je.reduce(function(U,S){var Q={units:S[3]||Ve,dimensions:[S[1],S[2]]};return U[S[0]]=Q,U[S[0].replace(/-/g," ")]=Q,U},{}),ot=function(){for(var U=0;U<arguments.length;U++)if(arguments[U]!==void 0)return arguments[U]},x=["mm","cm","m","pc","pt","in","ft","px"],p={m:{system:"metric",factor:1},cm:{system:"metric",factor:1/100},mm:{system:"metric",factor:1/1e3},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const y={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};function D(U,S){return Number(Math.round(U+"e"+S)+"e-"+S)}function J(U,S,Q,V){if(typeof U!="number"||!isFinite(U))throw new Error("Value must be a finite number");if(!S||!Q)throw new Error("Must specify from and to units");V=V||{};var K=ot(V.pixelsPerInch,96),re=V.precision,le=V.roundPixel!==!1;if(S=S.toLowerCase(),Q=Q.toLowerCase(),x.indexOf(S)===-1)throw new Error('Invalid from unit "'+S+'", must be one of: '+x.join(", "));if(x.indexOf(Q)===-1)throw new Error('Invalid from unit "'+Q+'", must be one of: '+x.join(", "));if(S===Q)return U;var we=1,pe=1,d=!1;S==="px"&&(pe=1/K,S="in"),Q==="px"&&(d=!0,we=K,Q="in");var g=p[S],v=p[Q],k=U*g.factor*pe;g.system!==v.system&&(k*=y[g.system].ratio);var E=k/v.factor*we;return d&&le?E=Math.round(E):typeof re=="number"&&isFinite(re)&&(E=D(E,re)),E}var ce=J,ae=x;ce.units=ae;function je(U,S,Q){if(S===void 0&&(S="px"),Q===void 0&&(Q=72),typeof U=="string"){var V=U.toLowerCase();if(!(V in qe))throw new Error('The dimension preset "'+U+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var K=qe[V];return K.dimensions.map(function(re){return ze(re,K.units,S,Q)})}else return U}function ze(U,S,Q,V){return S===void 0&&(S="px"),Q===void 0&&(Q="px"),V===void 0&&(V=72),ce(U,S,Q,{pixelsPerInch:V,precision:4,roundPixel:!0})}function tt(U){return U.dimensions?!!(typeof U.dimensions=="string"||Array.isArray(U.dimensions)&&U.dimensions.length>=2):!1}function lt(U,S){if(!T())return[300,150];var Q=S.parent||window;if(Q===window||Q===document||Q===document.body)return[window.innerWidth,window.innerHeight];var V=Q.getBoundingClientRect(),K=V.width,re=V.height;return[K,re]}function st(U,S){var Q,V,K,re,le,we,pe=T(),d=S.dimensions,g=tt(S),v=U.exporting,k=g?S.scaleToFit!==!1:!1,E=!v&&g?S.scaleToView:!0;pe||(k=E=!1);var N=S.units,P=typeof S.pixelsPerInch=="number"&&isFinite(S.pixelsPerInch)?S.pixelsPerInch:72,z=I(S.bleed,0),ie=pe?window.devicePixelRatio:1,de=E?ie:1,ye,Te;typeof S.pixelRatio=="number"&&isFinite(S.pixelRatio)?(ye=S.pixelRatio,Te=I(S.exportPixelRatio,ye)):g?(ye=de,Te=I(S.exportPixelRatio,1)):(ye=ie,Te=I(S.exportPixelRatio,ye)),typeof S.maxPixelRatio=="number"&&isFinite(S.maxPixelRatio)&&(ye=Math.min(S.maxPixelRatio,ye)),v&&(ye=Te);var ve=lt(U,S),fe=ve[0],ke=ve[1],Ne,Pe;if(g){var Ae=je(d,N,P),ht=Math.max(Ae[0],Ae[1]),Ke=Math.min(Ae[0],Ae[1]);if(S.orientation){var bt=S.orientation==="landscape";Q=bt?ht:Ke,V=bt?Ke:ht}else Q=Ae[0],V=Ae[1];Ne=Q,Pe=V,Q+=z*2,V+=z*2}else Q=fe,V=ke,Ne=Q,Pe=V;var L=Q,_e=V;if(g&&N&&(L=ze(Q,N,"px",P),_e=ze(V,N,"px",P)),K=Math.round(L),re=Math.round(_e),k&&!v&&g){var $=Q/V,Ce=fe/ke,De=I(S.scaleToFitPadding,40),Ue=Math.round(fe-De*2),Le=Math.round(ke-De*2);(K>Ue||re>Le)&&(Ce>$?(re=Le,K=Math.round(re*$)):(K=Ue,re=Math.round(K/$)))}le=Math.round(E?ye*K:ye*L),we=Math.round(E?ye*re:ye*_e);var Ze=Math.round(E?K:L),We=Math.round(E?re:_e),ut=le/Q,At=we/V;return{bleed:z,pixelRatio:ye,width:Q,height:V,dimensions:[Q,V],units:N||"px",scaleX:ut,scaleY:At,pixelsPerInch:P,viewportWidth:Ze,viewportHeight:We,canvasWidth:le,canvasHeight:we,trimWidth:Ne,trimHeight:Pe,styleWidth:K,styleHeight:re}}var Lt=Kt;function Kt(U,S){if(typeof U!="string")throw new TypeError("must specify type string");if(S=S||{},typeof document=="undefined"&&!S.canvas)return null;var Q=S.canvas||document.createElement("canvas");typeof S.width=="number"&&(Q.width=S.width),typeof S.height=="number"&&(Q.height=S.height);var V=S,K;try{var re=[U];U.indexOf("webgl")===0&&re.push("experimental-"+U);for(var le=0;le<re.length;le++)if(K=Q.getContext(re[le],V),K)return K}catch{K=null}return K||null}function Bt(){if(!T())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}function ur(U){U===void 0&&(U={});var S,Q,V=!1;if(U.canvas!==!1){if(S=U.context,!S||typeof S=="string"){var K=U.canvas;K||(K=Bt(),V=!0);var re=S||"2d";if(typeof K.getContext!="function")throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(S=Lt(re,a({},U.attributes,{canvas:K})),!S)throw new Error("Failed at canvas.getContext('"+re+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(Q=S.canvas,U.canvas&&Q!==U.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");U.pixelated&&(S.imageSmoothingEnabled=!1,S.mozImageSmoothingEnabled=!1,S.oImageSmoothingEnabled=!1,S.webkitImageSmoothingEnabled=!1,S.msImageSmoothingEnabled=!1,Q.style["image-rendering"]="pixelated")}return{canvas:Q,context:S,ownsCanvas:V}}var Fe=function(){var S=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=Be({enabled:function(){return S.settings.hotkeys!==!1},save:function(Q){Q.shiftKey?S.props.recording?(S.endRecord(),S.run()):S.record():S.props.recording||S.exportFrame()},togglePlay:function(){S.props.playing?S.pause():S.play()},commit:function(Q){S.exportFrame({commit:!0})}}),this._animateHandler=function(){return S.animate()},this._resizeHandler=function(){var Q=S.resize();Q&&S.render()}},Wt={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};Wt.sketch.get=function(){return this._sketch},Wt.settings.get=function(){return this._settings},Wt.props.get=function(){return this._props},Fe.prototype._computePlayhead=function(S,Q){var V=typeof Q=="number"&&isFinite(Q);return V?S/Q:0},Fe.prototype._computeFrame=function(S,Q,V,K){return isFinite(V)&&V>1?Math.floor(S*(V-1)):Math.floor(K*Q)},Fe.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},Fe.prototype._getSizeProps=function(){var S=this.props;return{width:S.width,height:S.height,pixelRatio:S.pixelRatio,canvasWidth:S.canvasWidth,canvasHeight:S.canvasHeight,viewportWidth:S.viewportWidth,viewportHeight:S.viewportHeight}},Fe.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return this.settings.playing!==!1&&this.play(),typeof this.sketch.dispose=="function"&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},Fe.prototype._cancelTimeouts=function(){this._raf!=null&&typeof window!="undefined"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(this._raf),this._raf=null),this._recordTimeout!=null&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},Fe.prototype.play=function(){var S=this.settings.animate;if("animation"in this.settings&&(S=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),!!S){if(!T()){console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported");return}this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=f(),this._raf=window.requestAnimationFrame(this._animateHandler))}},Fe.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},Fe.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},Fe.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},Fe.prototype.record=function(){var S=this;if(!this.props.recording){if(!T()){console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported");return}this.stop(),this.props.playing=!0,this.props.recording=!0;var Q=this._createExportOptions({sequence:!0}),V=1/this.props.fps;this._cancelTimeouts();var K=function(){return S.props.recording?(S.props.deltaTime=V,S.tick(),S.exportFrame(Q).then(function(){!S.props.recording||(S.props.deltaTime=0,S.props.frame++,S.props.frame<S.props.totalFrames?(S.props.time+=V,S.props.playhead=S._computePlayhead(S.props.time,S.props.duration),S._recordTimeout=setTimeout(K,0)):(console.log("Finished recording"),S._signalEnd(),S.endRecord(),S.stop(),S.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&typeof this.sketch.beginRecord=="function"&&this._wrapContextScale(function(re){return S.sketch.beginRecord(re)}),_(Q).catch(function(re){console.error(re)}).then(function(re){S._raf=window.requestAnimationFrame(K)})}},Fe.prototype._signalBegin=function(){var S=this;this.sketch&&typeof this.sketch.begin=="function"&&this._wrapContextScale(function(Q){return S.sketch.begin(Q)})},Fe.prototype._signalEnd=function(){var S=this;this.sketch&&typeof this.sketch.end=="function"&&this._wrapContextScale(function(Q){return S.sketch.end(Q)})},Fe.prototype.endRecord=function(){var S=this,Q=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,O().catch(function(V){console.error(V)}).then(function(){Q&&S.sketch&&typeof S.sketch.endRecord=="function"&&S._wrapContextScale(function(V){return S.sketch.endRecord(V)})})},Fe.prototype._createExportOptions=function(S){return S===void 0&&(S={}),{sequence:S.sequence,save:S.save,fps:this.props.fps,frame:S.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:S.timeStamp||ge(),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},Fe.prototype.exportFrame=function(S){var Q=this;if(S===void 0&&(S={}),!this.sketch)return Promise.all([]);typeof this.sketch.preExport=="function"&&this.sketch.preExport();var V=this._createExportOptions(S),K=M(),re=Promise.resolve();if(K&&S.commit&&typeof K.commit=="function"){var le=a({},V),we=K.commit(le);l(we)?re=we:re=Promise.resolve(we)}return re.then(function(pe){return Q._doExportFrame(a({},V,{hash:pe||""}))}).then(function(pe){return pe.length===1?pe[0]:pe})},Fe.prototype._doExportFrame=function(S){var Q=this;S===void 0&&(S={}),this._props.exporting=!0,this.resize();var V=this.render(),K=this.props.canvas;return typeof V=="undefined"&&(V=[K]),V=[].concat(V).filter(Boolean),V=V.map(function(re){var le=typeof re=="object"&&re&&("data"in re||"dataURL"in re),we=le?re.data:re,pe=le?a({},re,{data:we}):{data:we};if(q(we)){var d=pe.encoding||S.encoding,g=I(pe.encodingQuality,S.encodingQuality,.95),v=j(we,{encoding:d,encodingQuality:g}),k=v.dataURL,E=v.extension,N=v.type;return Object.assign(pe,{dataURL:k,extension:E,type:N})}else return pe}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(V.map(function(re,le,we){var pe=a({extension:"",prefix:"",suffix:""},S,re,{layer:le,totalLayers:we.length}),d=S.save===!1?!1:re.save;pe.save=d!==!1,pe.filename=Oe(pe),delete pe.encoding,delete pe.encodingQuality;for(var g in pe)typeof pe[g]=="undefined"&&delete pe[g];var v=Promise.resolve({});if(pe.save){var k=pe.data;if(pe.dataURL){var E=pe.dataURL;v=Y(E,pe)}else v=oe(k,pe)}return v.then(function(N){return Object.assign({},pe,N)})})).then(function(re){var le=re.filter(function(P){return P.save});if(le.length>0){var we=le.find(function(P){return P.outputName}),pe=le.some(function(P){return P.client}),d=le.some(function(P){return P.stream}),g;le.length>1?g=le.length:we?g=we.outputName+"/"+le[0].filename:g=""+le[0].filename;var v="";if(S.sequence){var k=isFinite(Q.props.totalFrames);v=k?" (frame "+(S.frame+1)+" / "+Q.props.totalFrames+")":" (frame "+S.frame+")"}else le.length>1&&(v=" files");var E=pe?"canvas-sketch-cli":"canvas-sketch",N=d?"Streaming into":"Exported";console.log("%c["+E+"]%c "+N+" %c"+g+"%c"+v,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return typeof Q.sketch.postExport=="function"&&Q.sketch.postExport(),re})},Fe.prototype._wrapContextScale=function(S){this._preRender(),S(this.props),this._postRender()},Fe.prototype._preRender=function(){var S=this.props;!this.props.gl&&S.context&&!S.p5?(S.context.save(),this.settings.scaleContext!==!1&&S.context.scale(S.scaleX,S.scaleY)):S.p5&&S.p5.scale(S.scaleX/S.pixelRatio,S.scaleY/S.pixelRatio)},Fe.prototype._postRender=function(){var S=this.props;!this.props.gl&&S.context&&!S.p5&&S.context.restore(),S.gl&&this.settings.flush!==!1&&!S.p5&&S.gl.flush()},Fe.prototype.tick=function(){this.sketch&&typeof this.sketch.tick=="function"&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},Fe.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},Fe.prototype.submitDrawCall=function(){if(!!this.sketch){var S=this.props;this._preRender();var Q;return typeof this.sketch=="function"?Q=this.sketch(S):typeof this.sketch.render=="function"&&(Q=this.sketch.render(S)),this._postRender(),Q}},Fe.prototype.update=function(S){var Q=this;S===void 0&&(S={});var V=["animate"];Object.keys(S).forEach(function(E){if(V.indexOf(E)>=0)throw new Error("Sorry, the { "+E+" } option is not yet supported with update().")});var K=this._settings.canvas,re=this._settings.context;for(var le in S){var we=S[le];typeof we!="undefined"&&(Q._settings[le]=we)}var pe=Object.assign({},this._settings,S);if("time"in S&&"frame"in S)throw new Error("You should specify { time } or { frame } but not both");if("time"in S?delete pe.frame:"frame"in S&&delete pe.time,"duration"in S&&"totalFrames"in S)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in S?delete pe.totalFrames:"totalFrames"in S&&delete pe.duration,"data"in S&&(this._props.data=S.data);var d=this.getTimeProps(pe);if(Object.assign(this._props,d),K!==this._settings.canvas||re!==this._settings.context){var g=ur(this._settings),v=g.canvas,k=g.context;this.props.canvas=v,this.props.context=k,this._setupGLKey(),this._appendCanvasIfNeeded()}return S.p5&&typeof S.p5!="function"&&(this.props.p5=S.p5,this.props.p5.draw=function(){Q._isP5Resizing||(Q._lastRedrawResult=Q.submitDrawCall())}),"playing"in S&&(S.playing?this.play():this.pause()),Ee(this._settings),this.resize(),this.render(),this.props},Fe.prototype.resize=function(){var S=this._getSizeProps(),Q=this.settings,V=this.props,K=st(V,Q);Object.assign(this._props,K);var re=this.props,le=re.pixelRatio,we=re.canvasWidth,pe=re.canvasHeight,d=re.styleWidth,g=re.styleHeight,v=this.props.canvas;v&&Q.resizeCanvas!==!1&&(V.p5?(v.width!==we||v.height!==pe)&&(this._isP5Resizing=!0,V.p5.pixelDensity(le),V.p5.resizeCanvas(we/le,pe/le,!1),this._isP5Resizing=!1):(v.width!==we&&(v.width=we),v.height!==pe&&(v.height=pe)),T()&&Q.styleCanvas!==!1&&(v.style.width=d+"px",v.style.height=g+"px"));var k=this._getSizeProps(),E=!se(S,k);return E&&this._sizeChanged(),E},Fe.prototype._sizeChanged=function(){this.sketch&&typeof this.sketch.resize=="function"&&this.sketch.resize(this.props)},Fe.prototype.animate=function(){if(!!this.props.playing){if(!T()){console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported");return}this._raf=window.requestAnimationFrame(this._animateHandler);var S=f(),Q=this.props.fps,V=1e3/Q,K=S-this._lastTime,re=this.props.duration,le=typeof re=="number"&&isFinite(re),we=!0,pe=this.settings.playbackRate;pe==="fixed"?K=V:pe==="throttle"?K>V?(S=S-K%V,this._lastTime=S):we=!1:this._lastTime=S;var d=K/1e3,g=this.props.time+d*this.props.timeScale;g<0&&le&&(g=re+g);var v=!1,k=!1,E=this.settings.loop!==!1;if(le&&g>=re&&(E?(we=!0,g=g%re,k=!0):(we=!1,g=re,v=!0),this._signalEnd()),we){this.props.deltaTime=d,this.props.time=g,this.props.playhead=this._computePlayhead(g,re);var N=this.props.frame;this.props.frame=this._computeCurrentFrame(),k&&this._signalBegin(),N!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}v&&this.pause()}},Fe.prototype.dispatch=function(S){if(typeof S!="function")throw new Error("must pass function into dispatch()");S(this.props),this.render()},Fe.prototype.mount=function(){this._appendCanvasIfNeeded()},Fe.prototype.unmount=function(){T()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},Fe.prototype._appendCanvasIfNeeded=function(){if(!!T()&&this.settings.parent!==!1&&this.props.canvas&&!this.props.canvas.parentElement){var S=this.settings.parent||document.body;S.appendChild(this.props.canvas)}},Fe.prototype._setupGLKey=function(){this.props.context&&(B(this.props.context)?this._props.gl=this.props.context:delete this._props.gl)},Fe.prototype.getTimeProps=function(S){S===void 0&&(S={});var Q=S.duration,V=S.totalFrames,K=I(S.timeScale,1),re=I(S.fps,24),le=typeof Q=="number"&&isFinite(Q),we=typeof V=="number"&&isFinite(V),pe=le?Math.floor(re*Q):void 0,d=we?V/re:void 0;if(le&&we&&pe!==V)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");typeof S.dimensions=="undefined"&&typeof S.units!="undefined"&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),V=I(V,pe,1/0),Q=I(Q,d,1/0);var g=S.time,v=S.frame,k=typeof g=="number"&&isFinite(g),E=typeof v=="number"&&isFinite(v),N=0,P=0,z=0;if(k&&E)throw new Error("You should specify either start frame or time, but not both.");return k?(N=g,z=this._computePlayhead(N,Q),P=this._computeFrame(z,N,V,re)):E&&(P=v,N=P/re,z=this._computePlayhead(N,Q)),{playhead:z,time:N,frame:P,duration:Q,totalFrames:V,fps:re,timeScale:K}},Fe.prototype.setup=function(S){var Q=this;if(S===void 0&&(S={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},S,this._settings),Ee(this._settings);var V=ur(this._settings),K=V.context,re=V.canvas,le=this.getTimeProps(this._settings);this._props=Object.assign({},le,{canvas:re,context:K,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return Q.render()},togglePlay:function(){return Q.togglePlay()},dispatch:function(we){return Q.dispatch(we)},tick:function(){return Q.tick()},resize:function(){return Q.resize()},update:function(we){return Q.update(we)},exportFrame:function(we){return Q.exportFrame(we)},record:function(){return Q.record()},play:function(){return Q.play()},pause:function(){return Q.pause()},stop:function(){return Q.stop()}}),this._setupGLKey(),this.resize()},Fe.prototype.loadAndRun=function(S,Q){var V=this;return this.load(S,Q).then(function(){return V.run(),V})},Fe.prototype.unload=function(){var S=this;this.pause(),!!this.sketch&&(typeof this.sketch.unload=="function"&&this._wrapContextScale(function(Q){return S.sketch.unload(Q)}),this._sketch=null)},Fe.prototype.destroy=function(){this.unload(),this.unmount()},Fe.prototype.load=function(S,Q){var V=this;if(typeof S!="function")throw new Error(`The function must take in a function as the first parameter. Example:
  canvasSketcher(() => { ... }, settings)`);this.sketch&&this.unload(),typeof Q!="undefined"&&this.update(Q),this._preRender();var K=Promise.resolve();if(this.settings.p5){if(!T())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");K=new Promise(function(re){var le=V.settings.p5,we;le.p5&&(we=le.preload,le=le.p5);var pe=function(d){we&&(d.preload=function(){return we(d)}),d.setup=function(){var g=V.props,v=V.settings.context==="webgl",k=v?d.WEBGL:d.P2D;d.noLoop(),d.pixelDensity(g.pixelRatio),d.createCanvas(g.viewportWidth,g.viewportHeight,k),v&&V.settings.attributes&&d.setAttributes(V.settings.attributes),V.update({p5:d,canvas:d.canvas,context:d._renderer.drawingContext}),re()}};if(typeof le=="function")new le(pe);else{if(typeof window.createCanvas!="function")throw new Error(`{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?
new p5(); // <-- attaches to global scope`);pe(window)}})}return K.then(function(){var re=S(V.props);return l(re)||(re=Promise.resolve(re)),re}).then(function(re){return re||(re={}),V._sketch=re,T()&&(V._keyboardShortcuts.attach(),window.addEventListener("resize",V._resizeHandler)),V._postRender(),V._sizeChanged(),V}).catch(function(re){throw console.warn(`Could not start sketch, the async loading function rejected with an error:
    Error: `+re.message),re})},Object.defineProperties(Fe.prototype,Wt);var Qe="hot-id-cache",Nt=[];function Ut(){var U=M();return U&&U.hot}function qt(U){var S=M();if(!!S)return S[Qe]=S[Qe]||{},S[Qe][U]}function Xt(U,S){var Q=M();!Q||(Q[Qe]=Q[Qe]||{},Q[Qe][U]=S)}function gt(U,S){return S.animate?{time:U.props.time}:void 0}function Yt(U,S){if(S===void 0&&(S={}),S.p5){if(S.canvas||S.context&&typeof S.context!="string")throw new Error(`In { p5 } mode, you can't pass your own canvas or context, unless the context is a "webgl" or "2d" string`);var Q=typeof S.context=="string"?S.context:!1;S=Object.assign({},S,{canvas:!1,context:Q})}var V=Ut(),K;V&&(K=I(S.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var re=V&&typeof K=="string";re&&Nt.includes(K)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",K),re=!1);var le=Promise.resolve();if(re){Nt.push(K);var we=qt(K);if(we){var pe=function(){var d=gt(we.manager,S);return we.manager.destroy(),d};le=we.load.then(pe).catch(pe)}}return le.then(function(d){var g=new Fe,v;return U?(S=Object.assign({},S,d),g.setup(S),g.mount(),v=g.loadAndRun(U)):v=Promise.resolve(g),re&&Xt(K,{load:v,manager:g}),v})}return Yt.canvasSketch=Yt,Yt.PaperSizes=qe,Yt})})(N0);var Gc={exports:{}},Vc={exports:{}};const R0="#f0f8ff",M0="#faebd7",D0="#00ffff",F0="#7fffd4",P0="#f0ffff",j0="#f5f5dc",L0="#ffe4c4",B0="#000000",U0="#ffebcd",q0="#0000ff",H0="#8a2be2",z0="#a52a2a",G0="#deb887",V0="#5f9ea0",Q0="#7fff00",W0="#d2691e",Y0="#ff7f50",J0="#6495ed",K0="#fff8dc",X0="#dc143c",Z0="#00ffff",$0="#00008b",ey="#008b8b",ty="#b8860b",ry="#a9a9a9",ny="#006400",iy="#a9a9a9",sy="#bdb76b",oy="#8b008b",ay="#556b2f",uy="#ff8c00",cy="#9932cc",ly="#8b0000",fy="#e9967a",hy="#8fbc8f",dy="#483d8b",py="#2f4f4f",yy="#2f4f4f",my="#00ced1",gy="#9400d3",vy="#ff1493",by="#00bfff",_y="#696969",wy="#696969",Sy="#1e90ff",ky="#b22222",Ey="#fffaf0",xy="#228b22",Cy="#ff00ff",Oy="#dcdcdc",Ty="#f8f8ff",Ay="#ffd700",Iy="#daa520",Ny="#808080",Ry="#008000",My="#adff2f",Dy="#808080",Fy="#f0fff0",Py="#ff69b4",jy="#cd5c5c",Ly="#4b0082",By="#fffff0",Uy="#f0e68c",qy="#e6e6fa",Hy="#fff0f5",zy="#7cfc00",Gy="#fffacd",Vy="#add8e6",Qy="#f08080",Wy="#e0ffff",Yy="#fafad2",Jy="#d3d3d3",Ky="#90ee90",Xy="#d3d3d3",Zy="#ffb6c1",$y="#ffa07a",em="#20b2aa",tm="#87cefa",rm="#778899",nm="#778899",im="#b0c4de",sm="#ffffe0",om="#00ff00",am="#32cd32",um="#faf0e6",cm="#ff00ff",lm="#800000",fm="#66cdaa",hm="#0000cd",dm="#ba55d3",pm="#9370db",ym="#3cb371",mm="#7b68ee",gm="#00fa9a",vm="#48d1cc",bm="#c71585",_m="#191970",wm="#f5fffa",Sm="#ffe4e1",km="#ffe4b5",Em="#ffdead",xm="#000080",Cm="#fdf5e6",Om="#808000",Tm="#6b8e23",Am="#ffa500",Im="#ff4500",Nm="#da70d6",Rm="#eee8aa",Mm="#98fb98",Dm="#afeeee",Fm="#db7093",Pm="#ffefd5",jm="#ffdab9",Lm="#cd853f",Bm="#ffc0cb",Um="#dda0dd",qm="#b0e0e6",Hm="#800080",zm="#663399",Gm="#ff0000",Vm="#bc8f8f",Qm="#4169e1",Wm="#8b4513",Ym="#fa8072",Jm="#f4a460",Km="#2e8b57",Xm="#fff5ee",Zm="#a0522d",$m="#c0c0c0",eg="#87ceeb",tg="#6a5acd",rg="#708090",ng="#708090",ig="#fffafa",sg="#00ff7f",og="#4682b4",ag="#d2b48c",ug="#008080",cg="#d8bfd8",lg="#ff6347",fg="#40e0d0",hg="#ee82ee",dg="#f5deb3",pg="#ffffff",yg="#f5f5f5",mg="#ffff00",gg="#9acd32";var Qc={aliceblue:R0,antiquewhite:M0,aqua:D0,aquamarine:F0,azure:P0,beige:j0,bisque:L0,black:B0,blanchedalmond:U0,blue:q0,blueviolet:H0,brown:z0,burlywood:G0,cadetblue:V0,chartreuse:Q0,chocolate:W0,coral:Y0,cornflowerblue:J0,cornsilk:K0,crimson:X0,cyan:Z0,darkblue:$0,darkcyan:ey,darkgoldenrod:ty,darkgray:ry,darkgreen:ny,darkgrey:iy,darkkhaki:sy,darkmagenta:oy,darkolivegreen:ay,darkorange:uy,darkorchid:cy,darkred:ly,darksalmon:fy,darkseagreen:hy,darkslateblue:dy,darkslategray:py,darkslategrey:yy,darkturquoise:my,darkviolet:gy,deeppink:vy,deepskyblue:by,dimgray:_y,dimgrey:wy,dodgerblue:Sy,firebrick:ky,floralwhite:Ey,forestgreen:xy,fuchsia:Cy,gainsboro:Oy,ghostwhite:Ty,gold:Ay,goldenrod:Iy,gray:Ny,green:Ry,greenyellow:My,grey:Dy,honeydew:Fy,hotpink:Py,indianred:jy,indigo:Ly,ivory:By,khaki:Uy,lavender:qy,lavenderblush:Hy,lawngreen:zy,lemonchiffon:Gy,lightblue:Vy,lightcoral:Qy,lightcyan:Wy,lightgoldenrodyellow:Yy,lightgray:Jy,lightgreen:Ky,lightgrey:Xy,lightpink:Zy,lightsalmon:$y,lightseagreen:em,lightskyblue:tm,lightslategray:rm,lightslategrey:nm,lightsteelblue:im,lightyellow:sm,lime:om,limegreen:am,linen:um,magenta:cm,maroon:lm,mediumaquamarine:fm,mediumblue:hm,mediumorchid:dm,mediumpurple:pm,mediumseagreen:ym,mediumslateblue:mm,mediumspringgreen:gm,mediumturquoise:vm,mediumvioletred:bm,midnightblue:_m,mintcream:wm,mistyrose:Sm,moccasin:km,navajowhite:Em,navy:xm,oldlace:Cm,olive:Om,olivedrab:Tm,orange:Am,orangered:Im,orchid:Nm,palegoldenrod:Rm,palegreen:Mm,paleturquoise:Dm,palevioletred:Fm,papayawhip:Pm,peachpuff:jm,peru:Lm,pink:Bm,plum:Um,powderblue:qm,purple:Hm,rebeccapurple:zm,red:Gm,rosybrown:Vm,royalblue:Qm,saddlebrown:Wm,salmon:Ym,sandybrown:Jm,seagreen:Km,seashell:Xm,sienna:Zm,silver:$m,skyblue:eg,slateblue:tg,slategray:rg,slategrey:ng,snow:ig,springgreen:sg,steelblue:og,tan:ag,teal:ug,thistle:cg,tomato:lg,turquoise:fg,violet:hg,wheat:dg,white:pg,whitesmoke:yg,yellow:mg,yellowgreen:gg},xs={},vg=bg;function bg(r){var e=r[0],t=r[1],n=r[2],i,s,o,a,u;if(t===0)return u=n,[u,u,u];n<.5?s=n*(1+t):s=n+t-n*t,i=2*n-s,a=[0,0,0];for(var c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?u=i+(s-i)*6*o:2*o<1?u=s:3*o<2?u=i+(s-i)*(2/3-o)*6:u=i,a[c]=u;return a}var _g=wg;function wg(r){var e=r[0],t=r[1],n=r[2],i=Math.min(e,t,n),s=Math.max(e,t,n),o=s-i,a,u,c;return s===i?a=0:e===s?a=(t-n)/o:t===s?a=2+(n-e)/o:n===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(i+s)/2,s===i?u=0:c<=.5?u=o/(s+i):u=o/(2-s-i),[a/360,u,c]}var Qo=Sg;function Sg(r,e,t){if(typeof e!="number"||typeof t!="number")throw new TypeError('Must specify "to" and "from" arguments as numbers');if(e>t){var n=e;e=t,t=n}var i=t-e;return i===0?t:r-i*Math.floor((r-e)/i)}var kg=vg,Eg=_g,xg=Qo;xs.RGBAToHSLA=Cg;function Cg(r){var e=Eg([r[0]/255,r[1]/255,r[2]/255]);return[Math.max(0,Math.min(360,Math.round(e[0]*360))),Math.max(0,Math.min(100,Math.round(e[1]*100))),Math.max(0,Math.min(100,Math.round(e[2]*100))),r[3]]}xs.HSLAToRGBA=Og;function Og(r){var e=xg(r[0],0,360),t=kg([e/360,r[1]/100,r[2]/100]);return[Math.max(0,Math.min(255,Math.round(t[0]*255))),Math.max(0,Math.min(255,Math.round(t[1]*255))),Math.max(0,Math.min(255,Math.round(t[2]*255))),r[3]]}var Wc=Tg;function Tg(r){if(typeof r!="string")throw new TypeError("Hex code parsing must be performed on a string parameter");if(r=r.toLowerCase(),!/^#[a-f0-9]+$/.test(r))return null;var e=r.replace(/^#/,""),t=1;e.length===8&&(t=parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),e.length===4&&(t=parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var n=parseInt(e,16),i=n>>16,s=n>>8&255,o=n&255;return[i,s,o,t]}var Yc=Ag;function Ag(r){if(!r||!Array.isArray(r))throw new TypeError("Must specify an array to convert into a hex code");var e=Math.max(0,Math.min(255,Math.round(r[0]||0))),t=Math.max(0,Math.min(255,Math.round(r[1]||0))),n=Math.max(0,Math.min(255,Math.round(r[2]||0))),i=r[3];(typeof i=="undefined"||!isFinite(i))&&(i=1);var s=Math.max(0,Math.min(255,Math.round(i*255))),o=s===255?"":(s|1<<8).toString(16).slice(1),a=(n|t<<8|e<<16|1<<24).toString(16).slice(1)+o;return"#"+a}(function(r){var e=Qc,t=xs,n=Wc,i=Yc,s=Qo;function o(l){if(typeof l!="string")throw new TypeError("Color parsing must be performed on a string parameter");l=l.toLowerCase(),l in e?l=e[l]:l==="transparent"&&(l="#00000000");var h,m,b;if(/^#[a-f0-9]+$/.test(l))h=n(l),b=i(h),m=t.RGBAToHSLA(h);else{var M=/^((?:rgb|hsl)a?)\s*\(([^)]*)\)/.exec(l);if(!M)return null;var I=M[1].replace(/a$/,""),T=M[2].replace(/^\s+|\s+$/g,"").split(/\s*,\s*/).map(function(q,F){return F<=2?Math.round(parseFloat(q)||0):(q=parseFloat(q),(typeof q!="number"||!isFinite(q))&&(q=1),q)});(typeof T[3]=="undefined"||!isFinite(T[3]))&&(T[3]=1),I==="rgb"?(m=t.RGBAToHSLA(T),h=T):I==="hsl"&&(h=t.HSLAToRGBA(T),T[0]=s(T[0],0,360),m=T),b=i(h)}if(!h&&!b&&!m)return null;var B={hex:b,alpha:h[3],rgb:h.slice(0,3),rgba:h,hsl:m.slice(0,3),hsla:m};return B}r.exports.parse=a;function a(l){if(typeof l=="string")return o(l);if(Array.isArray(l)&&l.length>=3){var h=c(l[0],l[1],l[2],l[3]);return o(h)}else if(l&&typeof l=="object"){var m;if(l.hex?m=l.hex:l.rgba?m=c(l.rgba[0],l.rgba[1],l.rgba[2],l.rgba[3]):l.hsla?m=f(l.hsla[0],l.hsla[1],l.hsla[2],l.hsla[3]):l.rgb?m=c(l.rgb[0],l.rgb[1],l.rgb[2]):l.hsl&&(m=f(l.hsl[0],l.hsl[1],l.hsl[2])),m)return o(m)}return null}r.exports.style=u;function u(l){var h=r.exports.parse(l);if(h){var m=h.rgba;return c(m[0],m[1],m[2],m[3])}return null}function c(l,h,m,b){return l=Math.max(0,Math.min(255,Math.round(l))),h=Math.max(0,Math.min(255,Math.round(h))),m=Math.max(0,Math.min(255,Math.round(m))),b===1||!isFinite(b)||typeof b=="undefined"?"rgb("+[l,h,m].join(", ")+")":(b=Math.max(0,Math.min(1,b)),"rgba("+[l,h,m,b].join(", ")+")")}function f(l,h,m,b){return l=s(l,0,360),l=Math.max(0,Math.min(360,Math.round(l))),h=Math.max(0,Math.min(100,Math.round(h))),m=Math.max(0,Math.min(100,Math.round(m))),b===1||!isFinite(b)||typeof b=="undefined"?"hsl("+[l,h,m].join(", ")+")":(b=Math.max(0,Math.min(1,b)),"hsla("+[l,h,m,b].join(", ")+")")}})(Vc);var Ig=.2126,Ng=.7152,Rg=.0722,Wo=1/12.92;function Yo(r){return Math.pow((r+.055)/1.055,2.4)}var Mg=Dg;function Dg(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,i=e<=.03928?e*Wo:Yo(e),s=t<=.03928?t*Wo:Yo(t),o=n<=.03928?n*Wo:Yo(n);return i*Ig+s*Ng+o*Rg}(function(r){var e=Vc.exports,t=Qc,n=Mg,i=xs,s=Wc,o=Yc;r.exports.parse=e.parse,r.exports.style=e.style,r.exports.names=t,r.exports.relativeLuminance=function(u){var c=r.exports.parse(u);return c?n(c.rgb):null},r.exports.contrastRatio=function(u,c){var f=r.exports.relativeLuminance(u),l=r.exports.relativeLuminance(c);if(f==null||l==null)return null;var h=Math.max(f,l),m=Math.min(f,l);return(h+.05)/(m+.05)},r.exports.offsetHSL=function(a,u,c,f){var l=r.exports.parse(a);return l?(l.hsla[0]+=u||0,l.hsla[1]=Math.max(0,Math.min(100,l.hsla[1]+(c||0))),l.hsla[2]=Math.max(0,Math.min(100,l.hsla[2]+(f||0))),r.exports.parse({hsla:l.hsla})):null},r.exports.blend=function(a,u,c){var f=r.exports.parse(a),l=r.exports.parse(u);if(f==null||l==null)return null;var h=f.rgba,m=l.rgba;c=typeof c=="number"&&isFinite(c)?c:1;var b=c*m[3];if(b>=1)return l;for(var M=0;M<3;M++)m[M]=m[M]*b+h[M]*(h[3]*(1-b));return m[3]=Math.max(0,Math.min(1,b+h[3]*(1-b))),r.exports.parse(m)},r.exports.hexToRGBA=s,r.exports.RGBAToHex=o,r.exports.RGBAToHSLA=i.RGBAToHSLA,r.exports.HSLAToRGBA=i.HSLAToRGBA})(Gc);var JA=Gc.exports;function Fg(r,e){const t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i={};return i.top=t.top<0,i.left=t.left<0,i.bottom=t.bottom+n.height>(window.innerHeight||document.documentElement.clientHeight),i.right=t.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function Pg(r){let e,t=r[0](r[1],r[2])+"",n;return{c(){e=ct("div"),this.h()},l(i){e=dt(i,"DIV",{class:!0});var s=$e(e);s.forEach(xe),this.h()},h(){be(e,"class",n="item "+r[3]+" svelte-3e0qet")},m(i,s){Xe(i,e,s),e.innerHTML=t},p(i,[s]){s&7&&t!==(t=i[0](i[1],i[2])+"")&&(e.innerHTML=t),s&8&&n!==(n="item "+i[3]+" svelte-3e0qet")&&be(e,"class",n)},i:yt,o:yt,d(i){i&&xe(e)}}}function jg(r,e,t){let{isActive:n=!1}=e,{isFirst:i=!1}=e,{isHover:s=!1}=e,{isSelectable:o=!1}=e,{getOptionLabel:a=void 0}=e,{item:u=void 0}=e,{filterText:c=""}=e,f="";return r.$$set=l=>{"isActive"in l&&t(4,n=l.isActive),"isFirst"in l&&t(5,i=l.isFirst),"isHover"in l&&t(6,s=l.isHover),"isSelectable"in l&&t(7,o=l.isSelectable),"getOptionLabel"in l&&t(0,a=l.getOptionLabel),"item"in l&&t(1,u=l.item),"filterText"in l&&t(2,c=l.filterText)},r.$$.update=()=>{if(r.$$.dirty&242){const l=[];n&&l.push("active"),i&&l.push("first"),s&&l.push("hover"),u.isGroupHeader&&l.push("groupHeader"),u.isGroupItem&&l.push("groupItem"),o||l.push("notSelectable"),t(3,f=l.join(" "))}},[a,u,c,f,n,i,s,o]}class Jc extends Cr{constructor(e){super();xr(this,e,jg,Pg,pr,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function Kc(r,e,t){const n=r.slice();return n[41]=e[t],n[42]=t,n}function Lg(r){let e,t,n=r[1],i=[];for(let a=0;a<n.length;a+=1)i[a]=$c(Kc(r,n,a));const s=a=>it(i[a],1,1,()=>{i[a]=null});let o=null;return n.length||(o=Xc(r)),{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=_t(),o&&o.c()},l(a){for(let u=0;u<i.length;u+=1)i[u].l(a);e=_t(),o&&o.l(a)},m(a,u){for(let c=0;c<i.length;c+=1)i[c].m(a,u);Xe(a,e,u),o&&o.m(a,u),t=!0},p(a,u){if(u[0]&114390){n=a[1];let c;for(c=0;c<n.length;c+=1){const f=Kc(a,n,c);i[c]?(i[c].p(f,u),Ge(i[c],1)):(i[c]=$c(f),i[c].c(),Ge(i[c],1),i[c].m(e.parentNode,e))}for(Mt(),c=n.length;c<i.length;c+=1)s(c);Dt(),!n.length&&o?o.p(a,u):n.length?o&&(o.d(1),o=null):(o=Xc(a),o.c(),o.m(e.parentNode,e))}},i(a){if(!t){for(let u=0;u<n.length;u+=1)Ge(i[u]);t=!0}},o(a){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)it(i[u]);t=!1},d(a){go(i,a),a&&xe(e),o&&o.d(a)}}}function Bg(r){let e,t,n;var i=r[3];function s(o){return{props:{items:o[1],itemHeight:o[8],$$slots:{default:[Hg,({item:a,i:u})=>({41:a,42:u}),({item:a,i:u})=>[0,(a?1024:0)|(u?2048:0)]]},$$scope:{ctx:o}}}}return i&&(e=new i(s(r))),{c(){e&&Vt(e.$$.fragment),t=_t()},l(o){e&&Br(e.$$.fragment,o),t=_t()},m(o,a){e&&Ft(e,o,a),Xe(o,t,a),n=!0},p(o,a){const u={};if(a[0]&2&&(u.items=o[1]),a[0]&256&&(u.itemHeight=o[8]),a[0]&9814|a[1]&11264&&(u.$$scope={dirty:a,ctx:o}),i!==(i=o[3])){if(e){Mt();const c=e;it(c.$$.fragment,1,0,()=>{Pt(c,1)}),Dt()}i?(e=new i(s(o)),Vt(e.$$.fragment),Ge(e.$$.fragment,1),Ft(e,t.parentNode,t)):e=null}else i&&e.$set(u)},i(o){n||(e&&Ge(e.$$.fragment,o),n=!0)},o(o){e&&it(e.$$.fragment,o),n=!1},d(o){o&&xe(t),e&&Pt(e,o)}}}function Xc(r){let e,t=!r[11]&&Zc(r);return{c(){t&&t.c(),e=_t()},l(n){t&&t.l(n),e=_t()},m(n,i){t&&t.m(n,i),Xe(n,e,i)},p(n,i){n[11]?t&&(t.d(1),t=null):t?t.p(n,i):(t=Zc(n),t.c(),t.m(e.parentNode,e))},d(n){t&&t.d(n),n&&xe(e)}}}function Zc(r){let e,t;return{c(){e=ct("div"),t=Mr(r[12]),this.h()},l(n){e=dt(n,"DIV",{class:!0});var i=$e(e);t=Zr(i,r[12]),i.forEach(xe),this.h()},h(){be(e,"class","empty svelte-1uyqfml")},m(n,i){Xe(n,e,i),rt(e,t)},p(n,i){i[0]&4096&&li(t,n[12])},d(n){n&&xe(e)}}}function Ug(r){let e,t,n,i,s,o;var a=r[4];function u(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:Jo(h[42]),isActive:Cs(h[41],h[9],h[10]),isHover:Os(h[2],h[41],h[42],h[1]),isSelectable:un(h[41])}}}a&&(t=new a(u(r)));function c(){return r[29](r[42])}function f(){return r[30](r[42])}function l(...h){return r[31](r[41],r[42],...h)}return{c(){e=ct("div"),t&&Vt(t.$$.fragment),n=Ht(),this.h()},l(h){e=dt(h,"DIV",{class:!0,tabindex:!0});var m=$e(e);t&&Br(t.$$.fragment,m),n=zt(m),m.forEach(xe),this.h()},h(){be(e,"class","listItem"),be(e,"tabindex","-1")},m(h,m){Xe(h,e,m),t&&Ft(t,e,null),rt(e,n),i=!0,s||(o=[wt(e,"mouseover",c),wt(e,"focus",f),wt(e,"click",l)],s=!0)},p(h,m){r=h;const b={};if(m[0]&2&&(b.item=r[41]),m[0]&8192&&(b.filterText=r[13]),m[0]&64&&(b.getOptionLabel=r[6]),m[0]&1538&&(b.isActive=Cs(r[41],r[9],r[10])),m[0]&6&&(b.isHover=Os(r[2],r[41],r[42],r[1])),m[0]&2&&(b.isSelectable=un(r[41])),a!==(a=r[4])){if(t){Mt();const M=t;it(M.$$.fragment,1,0,()=>{Pt(M,1)}),Dt()}a?(t=new a(u(r)),Vt(t.$$.fragment),Ge(t.$$.fragment,1),Ft(t,e,n)):t=null}else a&&t.$set(b)},i(h){i||(t&&Ge(t.$$.fragment,h),i=!0)},o(h){t&&it(t.$$.fragment,h),i=!1},d(h){h&&xe(e),t&&Pt(t),s=!1,Sr(o)}}}function qg(r){let e,t=r[7](r[41])+"",n;return{c(){e=ct("div"),n=Mr(t),this.h()},l(i){e=dt(i,"DIV",{class:!0});var s=$e(e);n=Zr(s,t),s.forEach(xe),this.h()},h(){be(e,"class","listGroupTitle svelte-1uyqfml")},m(i,s){Xe(i,e,s),rt(e,n)},p(i,s){s[0]&130&&t!==(t=i[7](i[41])+"")&&li(n,t)},i:yt,o:yt,d(i){i&&xe(e)}}}function $c(r){let e,t,n,i;const s=[qg,Ug],o=[];function a(u,c){return u[41].isGroupHeader&&!u[41].isSelectable?0:1}return e=a(r),t=o[e]=s[e](r),{c(){t.c(),n=_t()},l(u){t.l(u),n=_t()},m(u,c){o[e].m(u,c),Xe(u,n,c),i=!0},p(u,c){let f=e;e=a(u),e===f?o[e].p(u,c):(Mt(),it(o[f],1,1,()=>{o[f]=null}),Dt(),t=o[e],t?t.p(u,c):(t=o[e]=s[e](u),t.c()),Ge(t,1),t.m(n.parentNode,n))},i(u){i||(Ge(t),i=!0)},o(u){it(t),i=!1},d(u){o[e].d(u),u&&xe(n)}}}function Hg(r){let e,t,n,i,s;var o=r[4];function a(l){return{props:{item:l[41],filterText:l[13],getOptionLabel:l[6],isFirst:Jo(l[42]),isActive:Cs(l[41],l[9],l[10]),isHover:Os(l[2],l[41],l[42],l[1]),isSelectable:un(l[41])}}}o&&(t=new o(a(r)));function u(){return r[26](r[42])}function c(){return r[27](r[42])}function f(...l){return r[28](r[41],r[42],...l)}return{c(){e=ct("div"),t&&Vt(t.$$.fragment),this.h()},l(l){e=dt(l,"DIV",{class:!0});var h=$e(e);t&&Br(t.$$.fragment,h),h.forEach(xe),this.h()},h(){be(e,"class","listItem")},m(l,h){Xe(l,e,h),t&&Ft(t,e,null),n=!0,i||(s=[wt(e,"mouseover",u),wt(e,"focus",c),wt(e,"click",f)],i=!0)},p(l,h){r=l;const m={};if(h[1]&1024&&(m.item=r[41]),h[0]&8192&&(m.filterText=r[13]),h[0]&64&&(m.getOptionLabel=r[6]),h[1]&2048&&(m.isFirst=Jo(r[42])),h[0]&1536|h[1]&1024&&(m.isActive=Cs(r[41],r[9],r[10])),h[0]&6|h[1]&3072&&(m.isHover=Os(r[2],r[41],r[42],r[1])),h[1]&1024&&(m.isSelectable=un(r[41])),o!==(o=r[4])){if(t){Mt();const b=t;it(b.$$.fragment,1,0,()=>{Pt(b,1)}),Dt()}o?(t=new o(a(r)),Vt(t.$$.fragment),Ge(t.$$.fragment,1),Ft(t,e,null)):t=null}else o&&t.$set(m)},i(l){n||(t&&Ge(t.$$.fragment,l),n=!0)},o(l){t&&it(t.$$.fragment,l),n=!1},d(l){l&&xe(e),t&&Pt(t),i=!1,Sr(s)}}}function zg(r){let e,t,n,i,s,o;const a=[Bg,Lg],u=[];function c(f,l){return f[5]?0:1}return t=c(r),n=u[t]=a[t](r),{c(){e=ct("div"),n.c(),this.h()},l(f){e=dt(f,"DIV",{class:!0,style:!0});var l=$e(e);n.l(l),l.forEach(xe),this.h()},h(){be(e,"class","listContainer svelte-1uyqfml"),be(e,"style",r[14]),Gt(e,"virtualList",r[5])},m(f,l){Xe(f,e,l),u[t].m(e,null),r[32](e),i=!0,s||(o=[wt(window,"keydown",r[17]),wt(window,"resize",r[18])],s=!0)},p(f,l){let h=t;t=c(f),t===h?u[t].p(f,l):(Mt(),it(u[h],1,1,()=>{u[h]=null}),Dt(),n=u[t],n?n.p(f,l):(n=u[t]=a[t](f),n.c()),Ge(n,1),n.m(e,null)),(!i||l[0]&16384)&&be(e,"style",f[14]),l[0]&32&&Gt(e,"virtualList",f[5])},i(f){i||(Ge(n),i=!0)},o(f){it(n),i=!1},d(f){f&&xe(e),u[t].d(),r[32](null),s=!1,Sr(o)}}}function Cs(r,e,t){return e&&e[t]===r[t]}function Jo(r){return r===0}function Os(r,e,t,n){return un(e)&&(r===t||n.length===1)}function un(r){return r.isGroupHeader&&r.isSelectable||r.selectable||!r.hasOwnProperty("selectable")}function Gg(r,e,t){const n=di();let{container:i=void 0}=e,{VirtualList:s=null}=e,{Item:o=Jc}=e,{isVirtualList:a=!1}=e,{items:u=[]}=e,{labelIdentifier:c="label"}=e,{getOptionLabel:f=(ne,Ee)=>{if(ne)return ne.isCreator?`Create "${Ee}"`:ne[c]}}=e,{getGroupHeaderLabel:l=null}=e,{itemHeight:h=40}=e,{hoverItemIndex:m=0}=e,{value:b=void 0}=e,{optionIdentifier:M="value"}=e,{hideEmptyState:I=!1}=e,{noOptionsMessage:T="No options"}=e,{isMulti:B=!1}=e,{activeItemIndex:q=0}=e,{filterText:F=""}=e,{parent:R=null}=e,{listPlacement:se=null}=e,{listAutoWidth:X=null}=e,{listOffset:ee=5}=e,me=0,ue=!1,Se;bn(()=>{if(u.length>0&&!B&&b){const ne=u.findIndex(Ee=>Ee[M]===b[M]);ne&&t(2,m=ne)}_("active"),i.addEventListener("scroll",()=>{clearTimeout(me),me=setTimeout(()=>{ue=!1},100)},!1)}),$u(()=>{u||t(1,u=[]),u!==Se&&u.length>0&&t(2,m=0),Se=u});function W(ne){ne.isCreator||n("itemSelected",ne)}function Z(ne){ue||t(2,m=ne)}function C(ne){const{item:Ee,i:Be,event:Ve}=ne;if(Ve.stopPropagation(),b&&!B&&b[M]===Ee[M])return A();Ee.isCreator?n("itemCreated",F):un(Ee)&&(t(19,q=Be),t(2,m=Be),W(Ee))}function A(){n("closeList")}async function H(ne){if(a)return;let Ee=!0;for(;Ee;)ne>0&&m===u.length-1?t(2,m=0):ne<0&&m===0?t(2,m=u.length-1):t(2,m=m+ne),Ee=!un(u[m]);await ps(),_("hover")}function w(ne){switch(ne.key){case"Escape":ne.preventDefault(),A();break;case"ArrowDown":ne.preventDefault(),u.length&&H(1);break;case"ArrowUp":ne.preventDefault(),u.length&&H(-1);break;case"Enter":if(ne.preventDefault(),u.length===0)break;const Ee=u[m];if(b&&!B&&b[M]===Ee[M]){A();break}Ee.isCreator?n("itemCreated",F):(t(19,q=m),W(u[m]));break;case"Tab":if(ne.preventDefault(),u.length===0||b&&b[M]===u[m][M])return A();t(19,q=m),W(u[m]);break}}function _(ne){if(a||!i)return;let Ee;const Be=i.querySelector(`.listItem .${ne}`);Be&&(Ee=i.getBoundingClientRect().bottom-Be.getBoundingClientRect().bottom),t(0,i.scrollTop-=Ee,i)}let O;function j(){const{height:ne,width:Ee}=R.getBoundingClientRect();t(14,O=""),t(14,O+=`min-width:${Ee}px;width:${X?"auto":"100%"};`),se==="top"||se==="auto"&&Fg(R,i).bottom?t(14,O+=`bottom:${ne+ee}px;`):t(14,O+=`top:${ne+ee}px;`)}const G=ne=>Z(ne),Y=ne=>Z(ne),te=(ne,Ee,Be)=>C({item:ne,i:Ee,event:Be}),oe=ne=>Z(ne),ge=ne=>Z(ne),Oe=(ne,Ee,Be)=>C({item:ne,i:Ee,event:Be});function Re(ne){Er[ne?"unshift":"push"](()=>{i=ne,t(0,i)})}return r.$$set=ne=>{"container"in ne&&t(0,i=ne.container),"VirtualList"in ne&&t(3,s=ne.VirtualList),"Item"in ne&&t(4,o=ne.Item),"isVirtualList"in ne&&t(5,a=ne.isVirtualList),"items"in ne&&t(1,u=ne.items),"labelIdentifier"in ne&&t(20,c=ne.labelIdentifier),"getOptionLabel"in ne&&t(6,f=ne.getOptionLabel),"getGroupHeaderLabel"in ne&&t(7,l=ne.getGroupHeaderLabel),"itemHeight"in ne&&t(8,h=ne.itemHeight),"hoverItemIndex"in ne&&t(2,m=ne.hoverItemIndex),"value"in ne&&t(9,b=ne.value),"optionIdentifier"in ne&&t(10,M=ne.optionIdentifier),"hideEmptyState"in ne&&t(11,I=ne.hideEmptyState),"noOptionsMessage"in ne&&t(12,T=ne.noOptionsMessage),"isMulti"in ne&&t(21,B=ne.isMulti),"activeItemIndex"in ne&&t(19,q=ne.activeItemIndex),"filterText"in ne&&t(13,F=ne.filterText),"parent"in ne&&t(22,R=ne.parent),"listPlacement"in ne&&t(23,se=ne.listPlacement),"listAutoWidth"in ne&&t(24,X=ne.listAutoWidth),"listOffset"in ne&&t(25,ee=ne.listOffset)},r.$$.update=()=>{r.$$.dirty[0]&4194305&&R&&i&&j()},[i,u,m,s,o,a,f,l,h,b,M,I,T,F,O,Z,C,w,j,q,c,B,R,se,X,ee,G,Y,te,oe,ge,Oe,Re]}class Vg extends Cr{constructor(e){super();xr(this,e,Gg,zg,pr,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function Qg(r){let e,t=r[0](r[1])+"";return{c(){e=ct("div"),this.h()},l(n){e=dt(n,"DIV",{class:!0});var i=$e(e);i.forEach(xe),this.h()},h(){be(e,"class","selection svelte-pu1q1n")},m(n,i){Xe(n,e,i),e.innerHTML=t},p(n,[i]){i&3&&t!==(t=n[0](n[1])+"")&&(e.innerHTML=t)},i:yt,o:yt,d(n){n&&xe(e)}}}function Wg(r,e,t){let{getSelectionLabel:n=void 0}=e,{item:i=void 0}=e;return r.$$set=s=>{"getSelectionLabel"in s&&t(0,n=s.getSelectionLabel),"item"in s&&t(1,i=s.item)},[n,i]}class Yg extends Cr{constructor(e){super();xr(this,e,Wg,Qg,pr,{getSelectionLabel:0,item:1})}}function el(r,e,t){const n=r.slice();return n[9]=e[t],n[11]=t,n}function tl(r){let e,t,n,i,s;function o(...a){return r[6](r[11],...a)}return{c(){e=ct("div"),t=$t("svg"),n=$t("path"),this.h()},l(a){e=dt(a,"DIV",{class:!0});var u=$e(e);t=sr(u,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0,class:!0});var c=$e(t);n=sr(c,"path",{d:!0}),$e(n).forEach(xe),c.forEach(xe),u.forEach(xe),this.h()},h(){be(n,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),be(t,"width","100%"),be(t,"height","100%"),be(t,"viewBox","-2 -2 50 50"),be(t,"focusable","false"),be(t,"aria-hidden","true"),be(t,"role","presentation"),be(t,"class","svelte-liu9pa"),be(e,"class","multiSelectItem_clear svelte-liu9pa")},m(a,u){Xe(a,e,u),rt(e,t),rt(t,n),i||(s=wt(e,"click",o),i=!0)},p(a,u){r=a},d(a){a&&xe(e),i=!1,s()}}}function rl(r){let e,t,n=r[4](r[9])+"",i,s,o,a,u,c=!r[2]&&!r[3]&&tl(r);function f(...l){return r[7](r[11],...l)}return{c(){e=ct("div"),t=ct("div"),i=Ht(),c&&c.c(),s=Ht(),this.h()},l(l){e=dt(l,"DIV",{class:!0});var h=$e(e);t=dt(h,"DIV",{class:!0});var m=$e(t);m.forEach(xe),i=zt(h),c&&c.l(h),s=zt(h),h.forEach(xe),this.h()},h(){be(t,"class","multiSelectItem_label svelte-liu9pa"),be(e,"class",o="multiSelectItem "+(r[1]===r[11]?"active":"")+" "+(r[2]?"disabled":"")+" svelte-liu9pa")},m(l,h){Xe(l,e,h),rt(e,t),t.innerHTML=n,rt(e,i),c&&c.m(e,null),rt(e,s),a||(u=wt(e,"click",f),a=!0)},p(l,h){r=l,h&17&&n!==(n=r[4](r[9])+"")&&(t.innerHTML=n),!r[2]&&!r[3]?c?c.p(r,h):(c=tl(r),c.c(),c.m(e,s)):c&&(c.d(1),c=null),h&6&&o!==(o="multiSelectItem "+(r[1]===r[11]?"active":"")+" "+(r[2]?"disabled":"")+" svelte-liu9pa")&&be(e,"class",o)},d(l){l&&xe(e),c&&c.d(),a=!1,u()}}}function Jg(r){let e,t=r[0],n=[];for(let i=0;i<t.length;i+=1)n[i]=rl(el(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=_t()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=_t()},m(i,s){for(let o=0;o<n.length;o+=1)n[o].m(i,s);Xe(i,e,s)},p(i,[s]){if(s&63){t=i[0];let o;for(o=0;o<t.length;o+=1){const a=el(i,t,o);n[o]?n[o].p(a,s):(n[o]=rl(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:yt,o:yt,d(i){go(n,i),i&&xe(e)}}}function Kg(r,e,t){const n=di();let{value:i=[]}=e,{activeValue:s=void 0}=e,{isDisabled:o=!1}=e,{multiFullItemClearable:a=!1}=e,{getSelectionLabel:u=void 0}=e;function c(h,m){m.stopPropagation(),n("multiItemClear",{i:h})}const f=(h,m)=>c(h,m),l=(h,m)=>a?c(h,m):{};return r.$$set=h=>{"value"in h&&t(0,i=h.value),"activeValue"in h&&t(1,s=h.activeValue),"isDisabled"in h&&t(2,o=h.isDisabled),"multiFullItemClearable"in h&&t(3,a=h.multiFullItemClearable),"getSelectionLabel"in h&&t(4,u=h.getSelectionLabel)},[i,s,o,a,u,c,f,l]}class Xg extends Cr{constructor(e){super();xr(this,e,Kg,Jg,pr,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function nl(r,e,t){const n=r.slice();return n[23]=e[t],n}const Zg=r=>({item:r&32,i:r&32,hoverItemIndex:r&2}),il=r=>({item:r[23].data,i:r[23].index,hoverItemIndex:r[1]});function $g(r){let e;return{c(){e=Mr("Missing template")},l(t){e=Zr(t,"Missing template")},m(t,n){Xe(t,e,n)},d(t){t&&xe(e)}}}function sl(r,e){let t,n,i;const s=e[15].default,o=Pd(s,e,e[14],il),a=o||$g();return{key:r,first:null,c(){t=ct("svelte-virtual-list-row"),a&&a.c(),n=Ht(),this.h()},l(u){t=dt(u,"SVELTE-VIRTUAL-LIST-ROW",{class:!0});var c=$e(t);a&&a.l(c),n=zt(c),c.forEach(xe),this.h()},h(){vo(t,"class","svelte-g2cagw"),this.first=t},m(u,c){Xe(u,t,c),a&&a.m(t,null),rt(t,n),i=!0},p(u,c){e=u,o&&o.p&&(!i||c&16418)&&Ld(o,s,e,e[14],i?jd(s,e[14],c,Zg):Bd(e[14]),il)},i(u){i||(Ge(a,u),i=!0)},o(u){it(a,u),i=!1},d(u){u&&xe(t),a&&a.d(u)}}}function e1(r){let e,t,n=[],i=new Map,s,o,a,u,c=r[5];const f=l=>l[23].index;for(let l=0;l<c.length;l+=1){let h=nl(r,c,l),m=f(h);i.set(m,n[l]=sl(m,h))}return{c(){e=ct("svelte-virtual-list-viewport"),t=ct("svelte-virtual-list-contents");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=dt(l,"SVELTE-VIRTUAL-LIST-VIEWPORT",{style:!0,class:!0});var h=$e(e);t=dt(h,"SVELTE-VIRTUAL-LIST-CONTENTS",{style:!0,class:!0});var m=$e(t);for(let b=0;b<n.length;b+=1)n[b].l(m);m.forEach(xe),h.forEach(xe),this.h()},h(){kr(t,"padding-top",r[6]+"px"),kr(t,"padding-bottom",r[7]+"px"),vo(t,"class","svelte-g2cagw"),kr(e,"height",r[0]),vo(e,"class","svelte-g2cagw"),yi(()=>r[18].call(e))},m(l,h){Xe(l,e,h),rt(e,t);for(let m=0;m<n.length;m+=1)n[m].m(t,null);r[16](t),r[17](e),s=Kd(e,r[18].bind(e)),o=!0,a||(u=wt(e,"scroll",r[8]),a=!0)},p(l,[h]){h&16418&&(c=l[5],Mt(),n=cp(n,h,f,1,l,c,i,t,up,sl,null,nl),Dt()),(!o||h&64)&&kr(t,"padding-top",l[6]+"px"),(!o||h&128)&&kr(t,"padding-bottom",l[7]+"px"),(!o||h&1)&&kr(e,"height",l[0])},i(l){if(!o){for(let h=0;h<c.length;h+=1)Ge(n[h]);o=!0}},o(l){for(let h=0;h<n.length;h+=1)it(n[h]);o=!1},d(l){l&&xe(e);for(let h=0;h<n.length;h+=1)n[h].d();r[16](null),r[17](null),s(),a=!1,u()}}}function t1(r,e,t){let{$$slots:n={},$$scope:i}=e,{items:s=void 0}=e,{height:o="100%"}=e,{itemHeight:a=40}=e,{hoverItemIndex:u=0}=e,{start:c=0}=e,{end:f=0}=e,l=[],h,m,b,M=0,I,T,B=0,q=0,F;async function R(ue,Se,W){const{scrollTop:Z}=m;await ps();let C=B-Z,A=c;for(;C<Se&&A<ue.length;){let w=h[A-c];w||(t(10,f=A+1),await ps(),w=h[A-c]),C+=l[A]=W||w.offsetHeight,A+=1}t(10,f=A);const H=ue.length-f;F=(B+C)/f,t(7,q=H*F),l.length=ue.length,m&&t(3,m.scrollTop=0,m)}async function se(){const{scrollTop:ue}=m,Se=c;for(let A=0;A<h.length;A+=1)l[c+A]=a||h[A].offsetHeight;let W=0,Z=0;for(;W<s.length;){const A=l[W]||F;if(Z+A>ue){t(9,c=W),t(6,B=Z);break}Z+=A,W+=1}for(;W<s.length&&(Z+=l[W]||F,W+=1,!(Z>ue+M)););t(10,f=W);const C=s.length-f;for(F=Z/f;W<s.length;)l[W++]=F;if(t(7,q=C*F),c<Se){await ps();let A=0,H=0;for(let _=c;_<Se;_+=1)h[_-c]&&(A+=l[_],H+=a||h[_-c].offsetHeight);const w=H-A;m.scrollTo(0,ue+w)}}bn(()=>{h=b.getElementsByTagName("svelte-virtual-list-row"),t(13,T=!0)});function X(ue){Er[ue?"unshift":"push"](()=>{b=ue,t(4,b)})}function ee(ue){Er[ue?"unshift":"push"](()=>{m=ue,t(3,m)})}function me(){M=this.offsetHeight,t(2,M)}return r.$$set=ue=>{"items"in ue&&t(11,s=ue.items),"height"in ue&&t(0,o=ue.height),"itemHeight"in ue&&t(12,a=ue.itemHeight),"hoverItemIndex"in ue&&t(1,u=ue.hoverItemIndex),"start"in ue&&t(9,c=ue.start),"end"in ue&&t(10,f=ue.end),"$$scope"in ue&&t(14,i=ue.$$scope)},r.$$.update=()=>{r.$$.dirty&3584&&t(5,I=s.slice(c,f).map((ue,Se)=>({index:Se+c,data:ue}))),r.$$.dirty&14340&&T&&R(s,M,a)},[o,u,M,m,b,I,B,q,se,c,f,s,a,T,i,n,X,ee,me]}class r1 extends Cr{constructor(e){super();xr(this,e,t1,e1,pr,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function n1(r){let e,t;return{c(){e=$t("svg"),t=$t("path"),this.h()},l(n){e=sr(n,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,role:!0});var i=$e(e);t=sr(i,"path",{fill:!0,d:!0}),$e(t).forEach(xe),i.forEach(xe),this.h()},h(){be(t,"fill","currentColor"),be(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),be(e,"width","100%"),be(e,"height","100%"),be(e,"viewBox","-2 -2 50 50"),be(e,"focusable","false"),be(e,"aria-hidden","true"),be(e,"role","presentation")},m(n,i){Xe(n,e,i),rt(e,t)},p:yt,i:yt,o:yt,d(n){n&&xe(e)}}}class i1 extends Cr{constructor(e){super();xr(this,e,null,n1,pr,{})}}function s1(r,e,t){let n;return function(){let s=this,o=arguments,a=function(){n=null,t||r.apply(s,o)},u=t&&!n;clearTimeout(n),n=setTimeout(a,e),u&&r.apply(s,o)}}function ol(r,e,t){const n=r.slice();return n[103]=e[t],n}function al(r){let e,t,n,i,s;return{c(){e=ct("span"),t=Mr(r[33]),n=Ht(),i=ct("span"),s=Mr(r[32]),this.h()},l(o){e=dt(o,"SPAN",{id:!0});var a=$e(e);t=Zr(a,r[33]),a.forEach(xe),n=zt(o),i=dt(o,"SPAN",{id:!0});var u=$e(i);s=Zr(u,r[32]),u.forEach(xe),this.h()},h(){be(e,"id","aria-selection"),be(i,"id","aria-context")},m(o,a){Xe(o,e,a),rt(e,t),Xe(o,n,a),Xe(o,i,a),rt(i,s)},p(o,a){a[1]&4&&li(t,o[33]),a[1]&2&&li(s,o[32])},d(o){o&&xe(e),o&&xe(n),o&&xe(i)}}}function ul(r){let e,t,n;const i=[r[18]];var s=r[17];function o(a){let u={};for(let c=0;c<i.length;c+=1)u=Zt(u,i[c]);return{props:u}}return s&&(e=new s(o())),{c(){e&&Vt(e.$$.fragment),t=_t()},l(a){e&&Br(e.$$.fragment,a),t=_t()},m(a,u){e&&Ft(e,a,u),Xe(a,t,u),n=!0},p(a,u){const c=u[0]&262144?gi(i,[ic(a[18])]):{};if(s!==(s=a[17])){if(e){Mt();const f=e;it(f.$$.fragment,1,0,()=>{Pt(f,1)}),Dt()}s?(e=new s(o()),Vt(e.$$.fragment),Ge(e.$$.fragment,1),Ft(e,t.parentNode,t)):e=null}else s&&e.$set(c)},i(a){n||(e&&Ge(e.$$.fragment,a),n=!0)},o(a){e&&it(e.$$.fragment,a),n=!1},d(a){a&&xe(t),e&&Pt(e,a)}}}function cl(r){let e,t,n;var i=r[26];function s(o){return{props:{value:o[2],getSelectionLabel:o[12],activeValue:o[30],isDisabled:o[9],multiFullItemClearable:o[8]}}}return i&&(e=new i(s(r)),e.$on("multiItemClear",r[38]),e.$on("focus",r[40])),{c(){e&&Vt(e.$$.fragment),t=_t()},l(o){e&&Br(e.$$.fragment,o),t=_t()},m(o,a){e&&Ft(e,o,a),Xe(o,t,a),n=!0},p(o,a){const u={};if(a[0]&4&&(u.value=o[2]),a[0]&4096&&(u.getSelectionLabel=o[12]),a[0]&1073741824&&(u.activeValue=o[30]),a[0]&512&&(u.isDisabled=o[9]),a[0]&256&&(u.multiFullItemClearable=o[8]),i!==(i=o[26])){if(e){Mt();const c=e;it(c.$$.fragment,1,0,()=>{Pt(c,1)}),Dt()}i?(e=new i(s(o)),e.$on("multiItemClear",o[38]),e.$on("focus",o[40]),Vt(e.$$.fragment),Ge(e.$$.fragment,1),Ft(e,t.parentNode,t)):e=null}else i&&e.$set(u)},i(o){n||(e&&Ge(e.$$.fragment,o),n=!0)},o(o){e&&it(e.$$.fragment,o),n=!1},d(o){o&&xe(t),e&&Pt(e,o)}}}function ll(r){let e,t,n,i,s;var o=r[25];function a(u){return{props:{item:u[2],getSelectionLabel:u[12]}}}return o&&(t=new o(a(r))),{c(){e=ct("div"),t&&Vt(t.$$.fragment),this.h()},l(u){e=dt(u,"DIV",{class:!0});var c=$e(e);t&&Br(t.$$.fragment,c),c.forEach(xe),this.h()},h(){be(e,"class","selectedItem svelte-17l1npl")},m(u,c){Xe(u,e,c),t&&Ft(t,e,null),n=!0,i||(s=wt(e,"focus",r[40]),i=!0)},p(u,c){const f={};if(c[0]&4&&(f.item=u[2]),c[0]&4096&&(f.getSelectionLabel=u[12]),o!==(o=u[25])){if(t){Mt();const l=t;it(l.$$.fragment,1,0,()=>{Pt(l,1)}),Dt()}o?(t=new o(a(u)),Vt(t.$$.fragment),Ge(t.$$.fragment,1),Ft(t,e,null)):t=null}else o&&t.$set(f)},i(u){n||(t&&Ge(t.$$.fragment,u),n=!0)},o(u){t&&it(t.$$.fragment,u),n=!1},d(u){u&&xe(e),t&&Pt(t),i=!1,s()}}}function fl(r){let e,t,n,i,s;var o=r[23];function a(u){return{}}return o&&(t=new o(a())),{c(){e=ct("div"),t&&Vt(t.$$.fragment),this.h()},l(u){e=dt(u,"DIV",{class:!0,"aria-hidden":!0});var c=$e(e);t&&Br(t.$$.fragment,c),c.forEach(xe),this.h()},h(){be(e,"class","clearSelect svelte-17l1npl"),be(e,"aria-hidden","true")},m(u,c){Xe(u,e,c),t&&Ft(t,e,null),n=!0,i||(s=wt(e,"click",Wd(r[27])),i=!0)},p(u,c){if(o!==(o=u[23])){if(t){Mt();const f=t;it(f.$$.fragment,1,0,()=>{Pt(f,1)}),Dt()}o?(t=new o(a()),Vt(t.$$.fragment),Ge(t.$$.fragment,1),Ft(t,e,null)):t=null}},i(u){n||(t&&Ge(t.$$.fragment,u),n=!0)},o(u){t&&it(t.$$.fragment,u),n=!1},d(u){u&&xe(e),t&&Pt(t),i=!1,s()}}}function hl(r){let e;function t(s,o){return s[22]?a1:o1}let n=t(r),i=n(r);return{c(){e=ct("div"),i.c(),this.h()},l(s){e=dt(s,"DIV",{class:!0,"aria-hidden":!0});var o=$e(e);i.l(o),o.forEach(xe),this.h()},h(){be(e,"class","indicator svelte-17l1npl"),be(e,"aria-hidden","true")},m(s,o){Xe(s,e,o),i.m(e,null)},p(s,o){n===(n=t(s))&&i?i.p(s,o):(i.d(1),i=n(s),i&&(i.c(),i.m(e,null)))},d(s){s&&xe(e),i.d()}}}function o1(r){let e,t;return{c(){e=$t("svg"),t=$t("path"),this.h()},l(n){e=sr(n,"svg",{width:!0,height:!0,viewBox:!0,focusable:!0,"aria-hidden":!0,class:!0});var i=$e(e);t=sr(i,"path",{d:!0}),$e(t).forEach(xe),i.forEach(xe),this.h()},h(){be(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),be(e,"width","100%"),be(e,"height","100%"),be(e,"viewBox","0 0 20 20"),be(e,"focusable","false"),be(e,"aria-hidden","true"),be(e,"class","svelte-17l1npl")},m(n,i){Xe(n,e,i),rt(e,t)},p:yt,d(n){n&&xe(e)}}}function a1(r){let e,t;return{c(){e=new bo,t=_t(),this.h()},l(n){e=Yd(n),t=_t(),this.h()},h(){e.a=t},m(n,i){e.m(r[22],n,i),Xe(n,t,i)},p(n,i){i[0]&4194304&&e.p(n[22])},d(n){n&&xe(t),n&&e.d()}}}function dl(r){let e,t,n;return{c(){e=ct("div"),t=$t("svg"),n=$t("circle"),this.h()},l(i){e=dt(i,"DIV",{class:!0});var s=$e(e);t=sr(s,"svg",{class:!0,viewBox:!0});var o=$e(t);n=sr(o,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),$e(n).forEach(xe),o.forEach(xe),s.forEach(xe),this.h()},h(){be(n,"class","spinner_path svelte-17l1npl"),be(n,"cx","50"),be(n,"cy","50"),be(n,"r","20"),be(n,"fill","none"),be(n,"stroke","currentColor"),be(n,"stroke-width","5"),be(n,"stroke-miterlimit","10"),be(t,"class","spinner_icon svelte-17l1npl"),be(t,"viewBox","25 25 50 50"),be(e,"class","spinner svelte-17l1npl")},m(i,s){Xe(i,e,s),rt(e,t),rt(t,n)},d(i){i&&xe(e)}}}function pl(r){let e,t,n,i;const s=[r[34]];function o(c){r[84](c)}var a=r[24];function u(c){let f={};for(let l=0;l<s.length;l+=1)f=Zt(f,s[l]);return c[28]!==void 0&&(f.hoverItemIndex=c[28]),{props:f}}return a&&(e=new a(u(r)),Er.push(()=>sc(e,"hoverItemIndex",o)),e.$on("itemSelected",r[43]),e.$on("itemCreated",r[44]),e.$on("closeList",r[45])),{c(){e&&Vt(e.$$.fragment),n=_t()},l(c){e&&Br(e.$$.fragment,c),n=_t()},m(c,f){e&&Ft(e,c,f),Xe(c,n,f),i=!0},p(c,f){const l=f[1]&8?gi(s,[ic(c[34])]):{};if(!t&&f[0]&268435456&&(t=!0,l.hoverItemIndex=c[28],ip(()=>t=!1)),a!==(a=c[24])){if(e){Mt();const h=e;it(h.$$.fragment,1,0,()=>{Pt(h,1)}),Dt()}a?(e=new a(u(c)),Er.push(()=>sc(e,"hoverItemIndex",o)),e.$on("itemSelected",c[43]),e.$on("itemCreated",c[44]),e.$on("closeList",c[45]),Vt(e.$$.fragment),Ge(e.$$.fragment,1),Ft(e,n.parentNode,n)):e=null}else a&&e.$set(l)},i(c){i||(e&&Ge(e.$$.fragment,c),i=!0)},o(c){e&&it(e.$$.fragment,c),i=!1},d(c){c&&xe(n),e&&Pt(e,c)}}}function yl(r){let e,t,n;return{c(){e=ct("input"),this.h()},l(i){e=dt(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){be(e,"name",t=r[16].name),be(e,"type","hidden"),e.value=n=r[2]?r[12](r[2]):null,be(e,"class","svelte-17l1npl")},m(i,s){Xe(i,e,s)},p(i,s){s[0]&65536&&t!==(t=i[16].name)&&be(e,"name",t),s[0]&4100&&n!==(n=i[2]?i[12](i[2]):null)&&(e.value=n)},d(i){i&&xe(e)}}}function ml(r){let e,t=r[2],n=[];for(let i=0;i<t.length;i+=1)n[i]=gl(ol(r,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=_t()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=_t()},m(i,s){for(let o=0;o<n.length;o+=1)n[o].m(i,s);Xe(i,e,s)},p(i,s){if(s[0]&69636){t=i[2];let o;for(o=0;o<t.length;o+=1){const a=ol(i,t,o);n[o]?n[o].p(a,s):(n[o]=gl(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){go(n,i),i&&xe(e)}}}function gl(r){let e,t,n;return{c(){e=ct("input"),this.h()},l(i){e=dt(i,"INPUT",{name:!0,type:!0,class:!0}),this.h()},h(){be(e,"name",t=r[16].name),be(e,"type","hidden"),e.value=n=r[103]?r[12](r[103]):null,be(e,"class","svelte-17l1npl")},m(i,s){Xe(i,e,s)},p(i,s){s[0]&65536&&t!==(t=i[16].name)&&be(e,"name",t),s[0]&4100&&n!==(n=i[103]?i[12](i[103]):null)&&(e.value=n)},d(i){i&&xe(e)}}}function u1(r){let e,t,n,i,s,o,a,u,c,f,l,h,m,b,M,I,T,B,q=r[1]&&al(r),F=r[17]&&ul(r),R=r[35]&&cl(r),se=[{readOnly:a=!r[13]},r[31],{placeholder:r[36]},{style:r[14]},{disabled:r[9]}],X={};for(let A=0;A<se.length;A+=1)X=Zt(X,se[A]);let ee=!r[7]&&r[29]&&ll(r),me=r[37]&&fl(r),ue=!r[37]&&(r[20]||r[19]&&!r[2]||!r[13]&&!r[9]&&!r[4]&&(r[29]&&!r[15]||!r[29]))&&hl(r),Se=r[4]&&dl(),W=r[5]&&pl(r),Z=(!r[7]||r[7]&&!r[35])&&yl(r),C=r[7]&&r[35]&&ml(r);return{c(){e=ct("div"),t=ct("span"),q&&q.c(),n=Ht(),F&&F.c(),i=Ht(),R&&R.c(),s=Ht(),o=ct("input"),u=Ht(),ee&&ee.c(),c=Ht(),me&&me.c(),f=Ht(),ue&&ue.c(),l=Ht(),Se&&Se.c(),h=Ht(),W&&W.c(),m=Ht(),Z&&Z.c(),b=Ht(),C&&C.c(),this.h()},l(A){e=dt(A,"DIV",{class:!0,style:!0});var H=$e(e);t=dt(H,"SPAN",{"aria-live":!0,"aria-atomic":!0,"aria-relevant":!0,class:!0});var w=$e(t);q&&q.l(w),w.forEach(xe),n=zt(H),F&&F.l(H),i=zt(H),R&&R.l(H),s=zt(H),o=dt(H,"INPUT",{placeholder:!0,style:!0}),u=zt(H),ee&&ee.l(H),c=zt(H),me&&me.l(H),f=zt(H),ue&&ue.l(H),l=zt(H),Se&&Se.l(H),h=zt(H),W&&W.l(H),m=zt(H),Z&&Z.l(H),b=zt(H),C&&C.l(H),H.forEach(xe),this.h()},h(){be(t,"aria-live","polite"),be(t,"aria-atomic","false"),be(t,"aria-relevant","additions text"),be(t,"class","a11yText svelte-17l1npl"),cs(o,X),Gt(o,"svelte-17l1npl",!0),be(e,"class",M="selectContainer "+r[21]+" svelte-17l1npl"),be(e,"style",r[11]),Gt(e,"hasError",r[10]),Gt(e,"multiSelect",r[7]),Gt(e,"disabled",r[9]),Gt(e,"focused",r[1])},m(A,H){Xe(A,e,H),rt(e,t),q&&q.m(t,null),rt(e,n),F&&F.m(e,null),rt(e,i),R&&R.m(e,null),rt(e,s),rt(e,o),o.autofocus&&o.focus(),r[82](o),Ku(o,r[3]),rt(e,u),ee&&ee.m(e,null),rt(e,c),me&&me.m(e,null),rt(e,f),ue&&ue.m(e,null),rt(e,l),Se&&Se.m(e,null),rt(e,h),W&&W.m(e,null),rt(e,m),Z&&Z.m(e,null),rt(e,b),C&&C.m(e,null),r[85](e),I=!0,T||(B=[wt(window,"click",r[41]),wt(window,"focusin",r[41]),wt(window,"keydown",r[39]),wt(o,"focus",r[40]),wt(o,"input",r[83]),wt(e,"click",r[42])],T=!0)},p(A,H){A[1]?q?q.p(A,H):(q=al(A),q.c(),q.m(t,null)):q&&(q.d(1),q=null),A[17]?F?(F.p(A,H),H[0]&131072&&Ge(F,1)):(F=ul(A),F.c(),Ge(F,1),F.m(e,i)):F&&(Mt(),it(F,1,1,()=>{F=null}),Dt()),A[35]?R?(R.p(A,H),H[1]&16&&Ge(R,1)):(R=cl(A),R.c(),Ge(R,1),R.m(e,s)):R&&(Mt(),it(R,1,1,()=>{R=null}),Dt()),cs(o,X=gi(se,[(!I||H[0]&8192&&a!==(a=!A[13]))&&{readOnly:a},H[1]&1&&A[31],(!I||H[1]&32)&&{placeholder:A[36]},(!I||H[0]&16384)&&{style:A[14]},(!I||H[0]&512)&&{disabled:A[9]}])),H[0]&8&&o.value!==A[3]&&Ku(o,A[3]),Gt(o,"svelte-17l1npl",!0),!A[7]&&A[29]?ee?(ee.p(A,H),H[0]&536871040&&Ge(ee,1)):(ee=ll(A),ee.c(),Ge(ee,1),ee.m(e,c)):ee&&(Mt(),it(ee,1,1,()=>{ee=null}),Dt()),A[37]?me?(me.p(A,H),H[1]&64&&Ge(me,1)):(me=fl(A),me.c(),Ge(me,1),me.m(e,f)):me&&(Mt(),it(me,1,1,()=>{me=null}),Dt()),!A[37]&&(A[20]||A[19]&&!A[2]||!A[13]&&!A[9]&&!A[4]&&(A[29]&&!A[15]||!A[29]))?ue?ue.p(A,H):(ue=hl(A),ue.c(),ue.m(e,l)):ue&&(ue.d(1),ue=null),A[4]?Se||(Se=dl(),Se.c(),Se.m(e,h)):Se&&(Se.d(1),Se=null),A[5]?W?(W.p(A,H),H[0]&32&&Ge(W,1)):(W=pl(A),W.c(),Ge(W,1),W.m(e,m)):W&&(Mt(),it(W,1,1,()=>{W=null}),Dt()),!A[7]||A[7]&&!A[35]?Z?Z.p(A,H):(Z=yl(A),Z.c(),Z.m(e,b)):Z&&(Z.d(1),Z=null),A[7]&&A[35]?C?C.p(A,H):(C=ml(A),C.c(),C.m(e,null)):C&&(C.d(1),C=null),(!I||H[0]&2097152&&M!==(M="selectContainer "+A[21]+" svelte-17l1npl"))&&be(e,"class",M),(!I||H[0]&2048)&&be(e,"style",A[11]),H[0]&2098176&&Gt(e,"hasError",A[10]),H[0]&2097280&&Gt(e,"multiSelect",A[7]),H[0]&2097664&&Gt(e,"disabled",A[9]),H[0]&2097154&&Gt(e,"focused",A[1])},i(A){I||(Ge(F),Ge(R),Ge(ee),Ge(me),Ge(W),I=!0)},o(A){it(F),it(R),it(ee),it(me),it(W),I=!1},d(A){A&&xe(e),q&&q.d(),F&&F.d(),R&&R.d(),r[82](null),ee&&ee.d(),me&&me.d(),ue&&ue.d(),Se&&Se.d(),W&&W.d(),Z&&Z.d(),C&&C.d(),r[85](null),T=!1,Sr(B)}}}function vl(r){return r.map((e,t)=>({index:t,value:e,label:`${e}`}))}function c1(r,e,t){let n,i,s,o,a,u,c,f;const l=di();let{id:h=null}=e,{container:m=void 0}=e,{input:b=void 0}=e,{isMulti:M=!1}=e,{multiFullItemClearable:I=!1}=e,{isDisabled:T=!1}=e,{isCreatable:B=!1}=e,{isFocused:q=!1}=e,{value:F=null}=e,{filterText:R=""}=e,{placeholder:se="Select..."}=e,{placeholderAlwaysShow:X=!1}=e,{items:ee=null}=e,{itemFilter:me=(L,_e,$)=>`${L}`.toLowerCase().includes(_e.toLowerCase())}=e,{groupBy:ue=void 0}=e,{groupFilter:Se=L=>L}=e,{isGroupHeaderSelectable:W=!1}=e,{getGroupHeaderLabel:Z=L=>L[C]||L.id}=e,{labelIdentifier:C="label"}=e,{getOptionLabel:A=(L,_e)=>L.isCreator?`Create "${_e}"`:L[C]}=e,{optionIdentifier:H="value"}=e,{loadOptions:w=void 0}=e,{hasError:_=!1}=e,{containerStyles:O=""}=e,{getSelectionLabel:j=L=>L?L[C]:null}=e,{createGroupHeaderItem:G=L=>({value:L,label:L})}=e,{createItem:Y=L=>({value:L,label:L})}=e;const te=()=>n;let{isSearchable:oe=!0}=e,{inputStyles:ge=""}=e,{isClearable:Oe=!0}=e,{isWaiting:Re=!1}=e,{listPlacement:ne="auto"}=e,{listOpen:Ee=!1}=e,{isVirtualList:Be=!1}=e,{loadOptionsInterval:Ve=300}=e,{noOptionsMessage:Je="No options"}=e,{hideEmptyState:qe=!1}=e,{inputAttributes:ot={}}=e,{listAutoWidth:x=!0}=e,{itemHeight:p=40}=e,{Icon:y=void 0}=e,{iconProps:D={}}=e,{showChevron:J=!1}=e,{showIndicator:ce=!1}=e,{containerClasses:ae=""}=e,{indicatorSvg:je=void 0}=e,{listOffset:ze=5}=e,{ClearIcon:tt=i1}=e,{Item:lt=Jc}=e,{List:st=Vg}=e,{Selection:Lt=Yg}=e,{MultiSelection:Kt=Xg}=e,{VirtualList:Bt=r1}=e;function ur(L){if(L.loadOptions&&L.filterText.length>0)return;if(!L.items)return[];L.items&&L.items.length>0&&typeof L.items[0]!="object"&&(L.items=vl(L.items));let _e=L.items.filter($=>{let Ce=me(A($,L.filterText),L.filterText,$);return Ce&&L.isMulti&&L.value&&Array.isArray(L.value)&&(Ce=!L.value.some(De=>De[L.optionIdentifier]===$[L.optionIdentifier])),Ce});return L.groupBy&&(_e=V(_e)),L.isCreatable&&(_e=Fe(_e,L.filterText)),_e}function Fe(L,_e){if(_e.length===0)return L;const $=Y(_e);return L[0]&&_e===L[0][C]?L:($.isCreator=!0,[...L,$])}let{selectedValue:Wt=null}=e,Qe,Nt,Ut,qt,Xt,gt;const Yt=s1(async()=>{t(4,Re=!0);let L=await w(R).catch(_e=>{console.warn("svelte-select loadOptions error :>> ",_e),l("error",{type:"loadOptions",details:_e})});L&&!L.cancelled&&(L?(L&&L.length>0&&typeof L[0]!="object"&&(L=vl(L)),t(81,n=[...L]),l("loaded",{items:n})):t(81,n=[]),B&&t(81,n=Fe(n,R)),t(4,Re=!1),t(1,q=!0),t(5,Ee=!0))},Ve);function U(){typeof F=="string"?t(2,F={[H]:F,label:F}):M&&Array.isArray(F)&&F.length>0&&t(2,F=F.map(L=>typeof L=="string"?{value:L,label:L}:L))}let S;function Q(){t(31,S=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ot)),h&&t(31,S.id=h,S),oe||t(31,S.readonly=!0,S)}function V(L){const _e=[],$={};L.forEach(De=>{const Ue=ue(De);_e.includes(Ue)||(_e.push(Ue),$[Ue]=[],Ue&&$[Ue].push(Object.assign(G(Ue,De),{id:Ue,isGroupHeader:!0,isSelectable:W}))),$[Ue].push(Object.assign({isGroupItem:!!Ue},De))});const Ce=[];return Se(_e).forEach(De=>{Ce.push(...$[De])}),Ce}function K(){if(M){JSON.stringify(F)!==JSON.stringify(Nt)&&d()&&l("select",F);return}(!Nt||JSON.stringify(F[H])!==JSON.stringify(Nt[H]))&&l("select",F)}function re(){q||Ee?N():b&&b.blur()}function le(){F&&(Array.isArray(F)?t(2,F=[...F]):t(2,F=[F]))}function we(){F&&t(2,F=null)}function pe(){R.length!==0&&(t(1,q=!0),t(5,Ee=!0),w?Yt():(t(5,Ee=!0),M&&t(30,Qe=void 0)))}$u(async()=>{t(77,Nt=F),t(78,Ut=R),t(79,qt=q),t(80,Xt=M)});function d(){let L=!0;if(F){const _e=[],$=[];F.forEach(Ce=>{_e.includes(Ce[H])?L=!1:(_e.push(Ce[H]),$.push(Ce))}),L||t(2,F=$)}return L}function g(L){let _e=L?L[H]:F[H];return ee.find($=>$[H]===_e)}function v(L){!L||L.length===0||L.some(_e=>typeof _e!="object")||!F||(M?F.some(_e=>!_e||!_e[H]):!F[H])||(Array.isArray(F)?t(2,F=F.map(_e=>g(_e)||_e)):t(2,F=g()||F))}function k(L){const{detail:_e}=L,$=F[_e?_e.i:F.length-1];F.length===1?t(2,F=void 0):t(2,F=F.filter(Ce=>Ce!==$)),l("clear",$)}function E(L){if(!!q)switch(L.key){case"ArrowDown":L.preventDefault(),t(5,Ee=!0),t(30,Qe=void 0);break;case"ArrowUp":L.preventDefault(),t(5,Ee=!0),t(30,Qe=void 0);break;case"Tab":Ee||t(1,q=!1);break;case"Backspace":if(!M||R.length>0)return;if(M&&F&&F.length>0){if(k(Qe!==void 0?Qe:F.length-1),Qe===0||Qe===void 0)break;t(30,Qe=F.length>Qe?Qe-1:void 0)}break;case"ArrowLeft":if(!M||R.length>0)return;Qe===void 0?t(30,Qe=F.length-1):F.length>Qe&&Qe!==0&&t(30,Qe-=1);break;case"ArrowRight":if(!M||R.length>0||Qe===void 0)return;Qe===F.length-1?t(30,Qe=void 0):Qe<F.length-1&&t(30,Qe+=1);break}}function N(){t(1,q=!0),b&&b.focus()}function P(L){if(!m)return;const _e=L.path&&L.path.length>0?L.path[0]:L.target;m.contains(_e)||m.contains(L.relatedTarget)||(t(1,q=!1),t(5,Ee=!1),t(30,Qe=void 0),b&&b.blur())}function z(){T||(t(1,q=!0),t(5,Ee=!Ee))}function ie(){t(2,F=void 0),t(5,Ee=!1),l("clear",F),N()}bn(()=>{q&&b&&b.focus()});function de(L){const{detail:_e}=L;if(_e){t(3,R="");const $=Object.assign({},_e);(!$.isGroupHeader||$.isSelectable)&&(M?t(2,F=F?F.concat([$]):[$]):t(2,F=$),t(2,F),setTimeout(()=>{t(5,Ee=!1),t(30,Qe=void 0)}))}}function ye(L){const{detail:_e}=L;M?(t(2,F=F||[]),t(2,F=[...F,Y(_e)])):t(2,F=Y(_e)),l("itemCreated",_e),t(3,R=""),t(5,Ee=!1),t(30,Qe=void 0)}function Te(){t(3,R=""),t(5,Ee=!1)}let{ariaValues:ve=L=>`Option ${L}, selected.`}=e,{ariaListOpen:fe=(L,_e)=>`You are currently focused on option ${L}. There are ${_e} results available.`}=e,{ariaFocused:ke=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function Ne(){let L;return M&&F.length>0?L=F.map(_e=>j(_e)).join(", "):L=j(F),ve(L)}function Pe(){if(!q||!n||n.length===0)return"";let L=n[gt];if(Ee&&L){let _e=j(L),$=n?n.length:0;return fe(_e,$)}else return ke()}function Ae(L){Er[L?"unshift":"push"](()=>{b=L,t(6,b)})}function ht(){R=this.value,t(3,R)}function Ke(L){gt=L,t(28,gt)}function bt(L){Er[L?"unshift":"push"](()=>{m=L,t(0,m)})}return r.$$set=L=>{"id"in L&&t(46,h=L.id),"container"in L&&t(0,m=L.container),"input"in L&&t(6,b=L.input),"isMulti"in L&&t(7,M=L.isMulti),"multiFullItemClearable"in L&&t(8,I=L.multiFullItemClearable),"isDisabled"in L&&t(9,T=L.isDisabled),"isCreatable"in L&&t(47,B=L.isCreatable),"isFocused"in L&&t(1,q=L.isFocused),"value"in L&&t(2,F=L.value),"filterText"in L&&t(3,R=L.filterText),"placeholder"in L&&t(48,se=L.placeholder),"placeholderAlwaysShow"in L&&t(49,X=L.placeholderAlwaysShow),"items"in L&&t(50,ee=L.items),"itemFilter"in L&&t(51,me=L.itemFilter),"groupBy"in L&&t(52,ue=L.groupBy),"groupFilter"in L&&t(53,Se=L.groupFilter),"isGroupHeaderSelectable"in L&&t(54,W=L.isGroupHeaderSelectable),"getGroupHeaderLabel"in L&&t(55,Z=L.getGroupHeaderLabel),"labelIdentifier"in L&&t(56,C=L.labelIdentifier),"getOptionLabel"in L&&t(57,A=L.getOptionLabel),"optionIdentifier"in L&&t(58,H=L.optionIdentifier),"loadOptions"in L&&t(59,w=L.loadOptions),"hasError"in L&&t(10,_=L.hasError),"containerStyles"in L&&t(11,O=L.containerStyles),"getSelectionLabel"in L&&t(12,j=L.getSelectionLabel),"createGroupHeaderItem"in L&&t(60,G=L.createGroupHeaderItem),"createItem"in L&&t(61,Y=L.createItem),"isSearchable"in L&&t(13,oe=L.isSearchable),"inputStyles"in L&&t(14,ge=L.inputStyles),"isClearable"in L&&t(15,Oe=L.isClearable),"isWaiting"in L&&t(4,Re=L.isWaiting),"listPlacement"in L&&t(63,ne=L.listPlacement),"listOpen"in L&&t(5,Ee=L.listOpen),"isVirtualList"in L&&t(64,Be=L.isVirtualList),"loadOptionsInterval"in L&&t(65,Ve=L.loadOptionsInterval),"noOptionsMessage"in L&&t(66,Je=L.noOptionsMessage),"hideEmptyState"in L&&t(67,qe=L.hideEmptyState),"inputAttributes"in L&&t(16,ot=L.inputAttributes),"listAutoWidth"in L&&t(68,x=L.listAutoWidth),"itemHeight"in L&&t(69,p=L.itemHeight),"Icon"in L&&t(17,y=L.Icon),"iconProps"in L&&t(18,D=L.iconProps),"showChevron"in L&&t(19,J=L.showChevron),"showIndicator"in L&&t(20,ce=L.showIndicator),"containerClasses"in L&&t(21,ae=L.containerClasses),"indicatorSvg"in L&&t(22,je=L.indicatorSvg),"listOffset"in L&&t(70,ze=L.listOffset),"ClearIcon"in L&&t(23,tt=L.ClearIcon),"Item"in L&&t(71,lt=L.Item),"List"in L&&t(24,st=L.List),"Selection"in L&&t(25,Lt=L.Selection),"MultiSelection"in L&&t(26,Kt=L.MultiSelection),"VirtualList"in L&&t(72,Bt=L.VirtualList),"selectedValue"in L&&t(73,Wt=L.selectedValue),"ariaValues"in L&&t(74,ve=L.ariaValues),"ariaListOpen"in L&&t(75,fe=L.ariaListOpen),"ariaFocused"in L&&t(76,ke=L.ariaFocused)},r.$$.update=()=>{r.$$.dirty[0]&140|r.$$.dirty[1]&405340160&&t(81,n=ur({loadOptions:w,filterText:R,items:ee,value:F,isMulti:M,optionIdentifier:H,groupBy:ue,isCreatable:B})),r.$$.dirty[2]&2048&&Wt&&console.warn("selectedValue is no longer used. Please use value instead."),r.$$.dirty[1]&524288&&v(ee),r.$$.dirty[0]&4&&F&&U(),r.$$.dirty[0]&73728&&(ot||!oe)&&Q(),r.$$.dirty[0]&128|r.$$.dirty[2]&262144&&(M&&le(),Xt&&!M&&we()),r.$$.dirty[0]&132&&M&&F&&F.length>1&&d(),r.$$.dirty[0]&4&&F&&K(),r.$$.dirty[0]&132|r.$$.dirty[2]&32768&&!F&&M&&Nt&&l("select",F),r.$$.dirty[0]&2|r.$$.dirty[2]&131072&&q!==qt&&re(),r.$$.dirty[0]&8|r.$$.dirty[2]&65536&&R!==Ut&&pe(),r.$$.dirty[0]&12&&t(29,i=F&&R.length===0),r.$$.dirty[0]&536904208&&t(37,s=i&&Oe&&!T&&!Re),r.$$.dirty[0]&132|r.$$.dirty[1]&393216&&t(36,o=X&&M?se:F?"":se),r.$$.dirty[0]&132&&t(35,a=M&&F&&F.length>0),r.$$.dirty[0]&141|r.$$.dirty[1]&218103808|r.$$.dirty[2]&526326&&t(34,u={Item:lt,filterText:R,optionIdentifier:H,noOptionsMessage:Je,hideEmptyState:qe,isVirtualList:Be,VirtualList:Bt,value:F,isMulti:M,getGroupHeaderLabel:Z,items:n,itemHeight:p,getOptionLabel:A,listPlacement:ne,parent:m,listAutoWidth:x,listOffset:ze}),r.$$.dirty[0]&132&&t(33,c=F?Ne():""),r.$$.dirty[0]&268435490|r.$$.dirty[2]&524288&&t(32,f=Pe())},[m,q,F,R,Re,Ee,b,M,I,T,_,O,j,oe,ge,Oe,ot,y,D,J,ce,ae,je,tt,st,Lt,Kt,ie,gt,i,Qe,S,f,c,u,a,o,s,k,E,N,P,z,de,ye,Te,h,B,se,X,ee,me,ue,Se,W,Z,C,A,H,w,G,Y,te,ne,Be,Ve,Je,qe,x,p,ze,lt,Bt,Wt,ve,fe,ke,Nt,Ut,qt,Xt,n,Ae,ht,Ke,bt]}class KA extends Cr{constructor(e){super();xr(this,e,c1,u1,pr,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function bl(r){return Object.prototype.toString.call(r)==="[object Date]"}function Ko(r,e){if(r===e||r!==r)return()=>r;const t=typeof r;if(t!==typeof e||Array.isArray(r)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const n=e.map((i,s)=>Ko(r[s],i));return i=>n.map(s=>s(i))}if(t==="object"){if(!r||!e)throw new Error("Object cannot be null");if(bl(r)&&bl(e)){r=r.getTime(),e=e.getTime();const s=e-r;return o=>new Date(r+o*s)}const n=Object.keys(e),i={};return n.forEach(s=>{i[s]=Ko(r[s],e[s])}),s=>{const o={};return n.forEach(a=>{o[a]=i[a](s)}),o}}if(t==="number"){const n=e-r;return i=>r+i*n}throw new Error(`Cannot interpolate ${t} values`)}function l1(r,e={}){const t=oc(r);let n,i=r;function s(o,a){if(r==null)return t.set(r=o),Promise.resolve();i=o;let u=n,c=!1,{delay:f=0,duration:l=400,easing:h=yo,interpolate:m=Ko}=Zt(Zt({},e),a);if(l===0)return u&&(u.abort(),u=null),t.set(r=i),Promise.resolve();const b=Uu()+f;let M;return n=Hu(I=>{if(I<b)return!0;c||(M=m(r,o),typeof l=="function"&&(l=l(r,o)),c=!0),u&&(u.abort(),u=null);const T=I-b;return T>l?(t.set(r=o),!1):(t.set(r=M(h(T/l))),!0)}),n.promise}return{set:s,update:(o,a)=>s(o(i,r),a),subscribe:t.subscribe}}const _l=({from:r=0,to:e=1,reverse:t=!1,duration:n=300,delay:i=0,css:s={},onChange:o=()=>!1,onEnd:a=()=>!1,easing:u})=>{const c=l1(t?e:r,{duration:n,delay:i,easing:u});return c.subscribe(f=>{let l="";for(let h in s){const{input:m,output:b,onComplete:M=()=>!1,beforeStart:I=()=>!1}=s[h],T=m.filter(F=>F<=f).reverse()[0],B=m.indexOf(T);let q;if(!T&&T!==0)q=b[0],I();else if(m.length-1===B)q=b[b.length-1],m[m.length-1]<=f&&M();else{const F=m[B+1],R=(f-T)*100/(F-T),se=b[B],X=b[B+1];typeof X=="object"?(q="",X.map(ee=>{q+=se+(ee-se)*R/100,q+=" "})):q=se+(X-se)*R/100}l+=`${h}: ${q};`}o(l),(f===e||f===r)&&a()}),{play:()=>c.set(e),reverse:()=>c.set(r)}};function f1(r){let e,t,n,i,s,o,a,u,c,f;return{c(){e=ct("div"),t=ct("input"),n=Ht(),i=$t("svg"),s=$t("rect"),o=$t("rect"),a=$t("path"),this.h()},l(l){e=dt(l,"DIV",{id:!0,class:!0,style:!0});var h=$e(e);t=dt(h,"INPUT",{id:!0,type:!0,name:!0,class:!0}),n=zt(h),i=sr(h,"svg",{class:!0,preserveAspectRatio:!0,viewBox:!0});var m=$e(i);s=sr(m,"rect",{class:!0,rx:!0}),$e(s).forEach(xe),o=sr(m,"rect",{class:!0,style:!0,rx:!0}),$e(o).forEach(xe),a=sr(m,"path",{style:!0,class:!0,d:!0}),$e(a).forEach(xe),m.forEach(xe),h.forEach(xe),this.h()},h(){be(t,"id",r[4]),be(t,"type","checkbox"),be(t,"name",r[2]),be(t,"class","svelte-d8g7vy"),be(s,"class","checkbox__border svelte-d8g7vy"),be(s,"rx","15%"),be(o,"class","checkbox__border -active svelte-d8g7vy"),be(o,"style",r[8]),be(o,"rx","15%"),be(a,"style",r[9]),be(a,"class","checkbox__check svelte-d8g7vy"),be(a,"d","M 89.5 13 L 46 71 L 28 54"),be(i,"class","checkbox__svg svelte-d8g7vy"),be(i,"preserveAspectRatio","none"),be(i,"viewBox","0 0 100 100"),be(e,"id",r[3]),be(e,"class",u="checkbox "+r[11].class+" svelte-d8g7vy"),kr(e,"width",r[1]),kr(e,"height",r[1]),Gt(e,"-changeBg",r[7]),Gt(e,"-checked",r[0]||!r[6])},m(l,h){Xe(l,e,h),rt(e,t),rt(e,n),rt(e,i),rt(i,s),rt(i,o),rt(i,a),r[15](e),c||(f=wt(t,"change",r[10]),c=!0)},p(l,[h]){h&16&&be(t,"id",l[4]),h&4&&be(t,"name",l[2]),h&256&&be(o,"style",l[8]),h&512&&be(a,"style",l[9]),h&8&&be(e,"id",l[3]),h&2048&&u!==(u="checkbox "+l[11].class+" svelte-d8g7vy")&&be(e,"class",u),h&2&&kr(e,"width",l[1]),h&2&&kr(e,"height",l[1]),h&2176&&Gt(e,"-changeBg",l[7]),h&2113&&Gt(e,"-checked",l[0]||!l[6])},i:yt,o:yt,d(l){l&&xe(e),r[15](null),c=!1,f()}}}function h1(r,e,t){let n,i=!0,s=!1,o,a,{checked:u=!1,size:c="3rem",name:f="",id:l="",labelId:h="",duration:m=900,primaryColor:b="#242432",secondaryColor:M="#d8d8ea"}=e;const I=di(),T={to:100,duration:m,easing:I0,reverse:u},B=_l(po(Xr({},T),{duration:m,css:{"stroke-dashoffset":{input:[0,45,75],output:[342,-150,-307],onComplete:()=>t(7,s=!0)},"stroke-dasharray":{input:[0,45,75],output:[342,154,[0,310]]},opacity:{input:[0,5],output:[0,1]}},onChange:X=>t(8,o=X),onEnd:()=>t(6,i=!0)})),q=_l(po(Xr({},T),{css:{"stroke-dashoffset":{input:[65,100],output:[300,144],beforeStart:()=>t(7,s=!1)},"stroke-dasharray":{input:[65,100],output:[100,84]}},onChange:X=>t(9,a=X)})),F=()=>{if(!i)return!1;u?(B.reverse(),q.reverse()):(B.play(),q.play()),t(6,i=!1),t(0,u=!u),I("change",u)},R=(X,ee)=>n.style.setProperty(X,ee);bn(()=>{R("--checkbox-color-primary",b),R("--checkbox-color-secondary",M)});function se(X){Er[X?"unshift":"push"](()=>{n=X,t(5,n)})}return r.$$set=X=>{t(11,e=Zt(Zt({},e),ci(X))),"checked"in X&&t(0,u=X.checked),"size"in X&&t(1,c=X.size),"name"in X&&t(2,f=X.name),"id"in X&&t(3,l=X.id),"labelId"in X&&t(4,h=X.labelId),"duration"in X&&t(12,m=X.duration),"primaryColor"in X&&t(13,b=X.primaryColor),"secondaryColor"in X&&t(14,M=X.secondaryColor)},e=ci(e),[u,c,f,l,h,n,i,s,o,a,F,e,m,b,M,se]}class XA extends Cr{constructor(e){super();xr(this,e,h1,f1,pr,{checked:0,size:1,name:2,id:3,labelId:4,duration:12,primaryColor:13,secondaryColor:14})}}var ki=Fc,d1=Qo,wl=Number.EPSILON;function Ts(r,e,t){return e<t?r<e?e:r>t?t:r:r<t?t:r>e?e:r}function p1(r){return Ts(r,0,1)}function As(r,e,t){return r*(1-t)+e*t}function Sl(r,e,t){return Math.abs(r-e)<wl?0:(t-r)/(e-r)}function y1(r,e,t){var n=Ts(Sl(r,e,t),0,1);return n*n*(3-2*n)}function m1(r,e){return e=ki(e,0),typeof r=="number"&&isFinite(r)?r:e}function Xo(r){if(typeof r!="number")throw new TypeError("Expected dims argument");return function(e,t){t=ki(t,0);var n;e==null?n=t:typeof e=="number"&&isFinite(e)&&(n=e);var i=[],s;if(n==null)for(s=0;s<r;s++)i[s]=m1(e[s],t);else for(s=0;s<r;s++)i[s]=n;return i}}function kl(r,e,t,n){if(n=n||[],r.length!==e.length)throw new TypeError("min and max array are expected to have the same length");for(var i=0;i<r.length;i++)n[i]=As(r[i],e[i],t);return n}function El(r,e){if(r=ki(r,0),typeof r!="number")throw new TypeError("Expected n argument to be a number");for(var t=[],n=0;n<r;n++)t.push(e);return t}function g1(r,e){if(r=ki(r,0),typeof r!="number")throw new TypeError("Expected n argument to be a number");e=e||{},typeof e=="boolean"&&(e={endpoint:!0});var t=ki(e.offset,0);return e.endpoint?El(r).map(function(n,i){return r<=1?0:(i+t)/(r-1)}):El(r).map(function(n,i){return(i+t)/r})}function v1(r,e,t){e=Ts(e,0,1);var n=r.length-1,i=e*n,s=Math.floor(i),o=i-s,a=Math.min(s+1,n),u=r[s%r.length],c=r[a%r.length];if(typeof u=="number"&&typeof c=="number")return As(u,c,o);if(Array.isArray(u)&&Array.isArray(c))return kl(u,c,o,t);throw new TypeError("Mismatch in value type of two array elements: "+s+" and "+a)}function xl(r,e){return(r%e+e)%e}function b1(r){return r*Math.PI/180}function _1(r){return r*180/Math.PI}function w1(r){return r-Math.floor(r)}function S1(r){return r>0?1:r<0?-1:0}function k1(r,e){return r=xl(r,e*2),e-Math.abs(r-e)}function Cl(r,e,t,n){return As(r,e,1-Math.exp(-t*n))}function E1(r,e,t,n,i){i=i||[];for(var s=0;s<r.length;s++)i[s]=Cl(r[s],e[s],t,n);return i}function x1(r,e,t,n,i,s){if(Math.abs(e-t)<wl)return n;var o=(r-e)/(t-e)*(i-n)+n;return s&&(i<n?o<i?o=i:o>n&&(o=n):o>i?o=i:o<n&&(o=n)),o}var ZA={mod:xl,fract:w1,sign:S1,degToRad:b1,radToDeg:_1,wrap:d1,pingPong:k1,linspace:g1,lerp:As,lerpArray:kl,inverseLerp:Sl,lerpFrames:v1,clamp:Ts,clamp01:p1,smoothstep:y1,damp:Cl,dampArray:E1,mapRange:x1,expand2D:Xo(2),expand3D:Xo(3),expand4D:Xo(4)};const C1="1.30.3",Ol={"X-Client-Info":`supabase-js/${C1}`},O1="supabase.auth.token";function T1(r){return r.replace(/\/$/,"")}const A1=()=>typeof window!="undefined";var Is={exports:{}};(function(r,e){var t=typeof self!="undefined"?self:He,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(C){return C&&DataView.prototype.isPrototypeOf(C)}if(a.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(C){return C&&c.indexOf(Object.prototype.toString.call(C))>-1};function l(C){if(typeof C!="string"&&(C=String(C)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(C))throw new TypeError("Invalid character in header field name");return C.toLowerCase()}function h(C){return typeof C!="string"&&(C=String(C)),C}function m(C){var A={next:function(){var H=C.shift();return{done:H===void 0,value:H}}};return a.iterable&&(A[Symbol.iterator]=function(){return A}),A}function b(C){this.map={},C instanceof b?C.forEach(function(A,H){this.append(H,A)},this):Array.isArray(C)?C.forEach(function(A){this.append(A[0],A[1])},this):C&&Object.getOwnPropertyNames(C).forEach(function(A){this.append(A,C[A])},this)}b.prototype.append=function(C,A){C=l(C),A=h(A);var H=this.map[C];this.map[C]=H?H+", "+A:A},b.prototype.delete=function(C){delete this.map[l(C)]},b.prototype.get=function(C){return C=l(C),this.has(C)?this.map[C]:null},b.prototype.has=function(C){return this.map.hasOwnProperty(l(C))},b.prototype.set=function(C,A){this.map[l(C)]=h(A)},b.prototype.forEach=function(C,A){for(var H in this.map)this.map.hasOwnProperty(H)&&C.call(A,this.map[H],H,this)},b.prototype.keys=function(){var C=[];return this.forEach(function(A,H){C.push(H)}),m(C)},b.prototype.values=function(){var C=[];return this.forEach(function(A){C.push(A)}),m(C)},b.prototype.entries=function(){var C=[];return this.forEach(function(A,H){C.push([H,A])}),m(C)},a.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function M(C){if(C.bodyUsed)return Promise.reject(new TypeError("Already read"));C.bodyUsed=!0}function I(C){return new Promise(function(A,H){C.onload=function(){A(C.result)},C.onerror=function(){H(C.error)}})}function T(C){var A=new FileReader,H=I(A);return A.readAsArrayBuffer(C),H}function B(C){var A=new FileReader,H=I(A);return A.readAsText(C),H}function q(C){for(var A=new Uint8Array(C),H=new Array(A.length),w=0;w<A.length;w++)H[w]=String.fromCharCode(A[w]);return H.join("")}function F(C){if(C.slice)return C.slice(0);var A=new Uint8Array(C.byteLength);return A.set(new Uint8Array(C)),A.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(C){this._bodyInit=C,C?typeof C=="string"?this._bodyText=C:a.blob&&Blob.prototype.isPrototypeOf(C)?this._bodyBlob=C:a.formData&&FormData.prototype.isPrototypeOf(C)?this._bodyFormData=C:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)?this._bodyText=C.toString():a.arrayBuffer&&a.blob&&u(C)?(this._bodyArrayBuffer=F(C.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(C)||f(C))?this._bodyArrayBuffer=F(C):this._bodyText=C=Object.prototype.toString.call(C):this._bodyText="",this.headers.get("content-type")||(typeof C=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(C)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var C=M(this);if(C)return C;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?M(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(T)}),this.text=function(){var C=M(this);if(C)return C;if(this._bodyBlob)return B(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(q(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(me)}),this.json=function(){return this.text().then(JSON.parse)},this}var se=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function X(C){var A=C.toUpperCase();return se.indexOf(A)>-1?A:C}function ee(C,A){A=A||{};var H=A.body;if(C instanceof ee){if(C.bodyUsed)throw new TypeError("Already read");this.url=C.url,this.credentials=C.credentials,A.headers||(this.headers=new b(C.headers)),this.method=C.method,this.mode=C.mode,this.signal=C.signal,!H&&C._bodyInit!=null&&(H=C._bodyInit,C.bodyUsed=!0)}else this.url=String(C);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new b(A.headers)),this.method=X(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&H)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(H)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})};function me(C){var A=new FormData;return C.trim().split("&").forEach(function(H){if(H){var w=H.split("="),_=w.shift().replace(/\+/g," "),O=w.join("=").replace(/\+/g," ");A.append(decodeURIComponent(_),decodeURIComponent(O))}}),A}function ue(C){var A=new b,H=C.replace(/\r?\n[\t ]+/g," ");return H.split(/\r?\n/).forEach(function(w){var _=w.split(":"),O=_.shift().trim();if(O){var j=_.join(":").trim();A.append(O,j)}}),A}R.call(ee.prototype);function Se(C,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new b(A.headers),this.url=A.url||"",this._initBody(C)}R.call(Se.prototype),Se.prototype.clone=function(){return new Se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},Se.error=function(){var C=new Se(null,{status:0,statusText:""});return C.type="error",C};var W=[301,302,303,307,308];Se.redirect=function(C,A){if(W.indexOf(A)===-1)throw new RangeError("Invalid status code");return new Se(null,{status:A,headers:{location:C}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,H){this.message=A,this.name=H;var w=Error(A);this.stack=w.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Z(C,A){return new Promise(function(H,w){var _=new ee(C,A);if(_.signal&&_.signal.aborted)return w(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function j(){O.abort()}O.onload=function(){var G={status:O.status,statusText:O.statusText,headers:ue(O.getAllResponseHeaders()||"")};G.url="responseURL"in O?O.responseURL:G.headers.get("X-Request-URL");var Y="response"in O?O.response:O.responseText;H(new Se(Y,G))},O.onerror=function(){w(new TypeError("Network request failed"))},O.ontimeout=function(){w(new TypeError("Network request failed"))},O.onabort=function(){w(new o.DOMException("Aborted","AbortError"))},O.open(_.method,_.url,!0),_.credentials==="include"?O.withCredentials=!0:_.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&a.blob&&(O.responseType="blob"),_.headers.forEach(function(G,Y){O.setRequestHeader(Y,G)}),_.signal&&(_.signal.addEventListener("abort",j),O.onreadystatechange=function(){O.readyState===4&&_.signal.removeEventListener("abort",j)}),O.send(typeof _._bodyInit=="undefined"?null:_._bodyInit)})}return Z.polyfill=!0,s.fetch||(s.fetch=Z,s.Headers=b,s.Request=ee,s.Response=Se),o.Headers=b,o.Request=ee,o.Response=Se,o.fetch=Z,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(Is,Is.exports);var Ns=Rc(Is.exports),Ei=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const I1=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),N1=(r,e)=>{if(typeof r.json!="function")return e(r);r.json().then(t=>e({message:I1(t),status:(r==null?void 0:r.status)||500}))},R1=(r,e,t)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||(n.headers=Object.assign({"Content-Type":"text/plain;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(t)),n};function Rs(r=Ns,e,t,n,i){return Ei(this,void 0,void 0,function*(){return new Promise((s,o)=>{r(t,R1(e,n,i)).then(a=>{if(!a.ok)throw a;return(n==null?void 0:n.noResolveJson)?s:a.json()}).then(a=>s(a)).catch(a=>N1(a,o))})})}function Zo(r,e,t){return Ei(this,void 0,void 0,function*(){return Rs(r,"GET",e,t)})}function er(r,e,t,n){return Ei(this,void 0,void 0,function*(){return Rs(r,"POST",e,n,t)})}function Tl(r,e,t,n){return Ei(this,void 0,void 0,function*(){return Rs(r,"PUT",e,n,t)})}function M1(r,e,t,n){return Ei(this,void 0,void 0,function*(){return Rs(r,"DELETE",e,n,t)})}const D1="1.22.1",F1="http://localhost:9999",P1={"X-Client-Info":`gotrue-js/${D1}`},xi="supabase.auth.token",j1={name:"sb",lifetime:60*60*8,domain:"",path:"/",sameSite:"lax"};function L1(r,e,t){const n=t||{},i=encodeURIComponent,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!s.test(r))throw new TypeError("argument name is invalid");const o=i(e);if(o&&!s.test(o))throw new TypeError("argument val is invalid");let a=r+"="+o;if(n.maxAge!=null){const u=n.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(u)}if(n.domain){if(!s.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!s.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a}function B1(r){if(!r||!r.headers||!r.headers.host)throw new Error('The "host" request header is not available');const e=r.headers.host.indexOf(":")>-1&&r.headers.host.split(":")[0]||r.headers.host;return!(["localhost","127.0.0.1"].indexOf(e)>-1||e.endsWith(".local"))}function U1(r,e){var t,n,i;return L1(r.name,r.value,{maxAge:r.maxAge,expires:new Date(Date.now()+r.maxAge*1e3),httpOnly:!0,secure:e,path:(t=r.path)!==null&&t!==void 0?t:"/",domain:(n=r.domain)!==null&&n!==void 0?n:"",sameSite:(i=r.sameSite)!==null&&i!==void 0?i:"lax"})}function $o(r,e,t){const n=t.map(s=>U1(s,B1(r))),i=e.getHeader("Set-Cookie");return i&&(i instanceof Array?Array.prototype.push.apply(n,i):typeof i=="string"&&n.push(i)),n}function Ms(r,e,t){e.setHeader("Set-Cookie",$o(r,e,t))}function En(r){return Math.round(Date.now()/1e3)+r}function q1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const qr=()=>typeof window!="undefined";function Hr(r,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),r=r.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+r+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}var Ot=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};class H1{constructor({url:e="",headers:t={},cookieOptions:n,fetch:i}){this.url=e,this.headers=t,this.cookieOptions=Object.assign(Object.assign({},j1),n),this.fetch=i}_createRequestHeaders(e){const t=Object.assign({},this.headers);return t.Authorization=`Bearer ${e}`,t}cookieName(){var e;return(e=this.cookieOptions.name)!==null&&e!==void 0?e:""}getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];return(t==null?void 0:t.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(t==null?void 0:t.scopes)&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),`${this.url}/authorize?${n.join("&")}`}signUpWithEmail(e,t,n={}){return Ot(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers);let s="";n.redirectTo&&(s="?redirect_to="+encodeURIComponent(n.redirectTo));const o=yield er(this.fetch,`${this.url}/signup${s}`,{email:e,password:t,data:n.data,gotrue_meta_security:{hcaptcha_token:n.captchaToken}},{headers:i}),a=Object.assign({},o);return a.expires_in&&(a.expires_at=En(o.expires_in)),{data:a,error:null}}catch(i){return{data:null,error:i}}})}signInWithEmail(e,t,n={}){return Ot(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers);let s="?grant_type=password";n.redirectTo&&(s+="&redirect_to="+encodeURIComponent(n.redirectTo));const o=yield er(this.fetch,`${this.url}/token${s}`,{email:e,password:t},{headers:i}),a=Object.assign({},o);return a.expires_in&&(a.expires_at=En(o.expires_in)),{data:a,error:null}}catch(i){return{data:null,error:i}}})}signUpWithPhone(e,t,n={}){return Ot(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers),s=yield er(this.fetch,`${this.url}/signup`,{phone:e,password:t,data:n.data,gotrue_meta_security:{hcaptcha_token:n.captchaToken}},{headers:i}),o=Object.assign({},s);return o.expires_in&&(o.expires_at=En(s.expires_in)),{data:o,error:null}}catch(i){return{data:null,error:i}}})}signInWithPhone(e,t){return Ot(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers),i="?grant_type=password",s=yield er(this.fetch,`${this.url}/token${i}`,{phone:e,password:t},{headers:n}),o=Object.assign({},s);return o.expires_in&&(o.expires_at=En(s.expires_in)),{data:o,error:null}}catch(n){return{data:null,error:n}}})}signInWithOpenIDConnect({id_token:e,nonce:t,client_id:n,issuer:i,provider:s}){return Ot(this,void 0,void 0,function*(){try{const o=Object.assign({},this.headers),a="?grant_type=id_token",u=yield er(this.fetch,`${this.url}/token${a}`,{id_token:e,nonce:t,client_id:n,issuer:i,provider:s},{headers:o}),c=Object.assign({},u);return c.expires_in&&(c.expires_at=En(u.expires_in)),{data:c,error:null}}catch(o){return{data:null,error:o}}})}sendMagicLinkEmail(e,t={}){return Ot(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let i="";return t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield er(this.fetch,`${this.url}/magiclink${i}`,{email:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}sendMobileOTP(e,t={}){return Ot(this,void 0,void 0,function*(){try{let n=Object.assign({},this.headers);return{data:yield er(this.fetch,`${this.url}/otp`,{phone:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}signOut(e){return Ot(this,void 0,void 0,function*(){try{return yield er(this.fetch,`${this.url}/logout`,{},{headers:this._createRequestHeaders(e),noResolveJson:!0}),{error:null}}catch(t){return{error:t}}})}verifyMobileOTP(e,t,n={}){return Ot(this,void 0,void 0,function*(){try{const i=Object.assign({},this.headers);return{data:yield er(this.fetch,`${this.url}/verify`,{phone:e,token:t,type:"sms",redirect_to:n.redirectTo},{headers:i}),error:null}}catch(i){return{data:null,error:i}}})}inviteUserByEmail(e,t={}){return Ot(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let i="";return t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield er(this.fetch,`${this.url}/invite${i}`,{email:e,data:t.data},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}resetPasswordForEmail(e,t={}){return Ot(this,void 0,void 0,function*(){try{const n=Object.assign({},this.headers);let i="";return t.redirectTo&&(i+="?redirect_to="+encodeURIComponent(t.redirectTo)),{data:yield er(this.fetch,`${this.url}/recover${i}`,{email:e,gotrue_meta_security:{hcaptcha_token:t.captchaToken}},{headers:n}),error:null}}catch(n){return{data:null,error:n}}})}refreshAccessToken(e){return Ot(this,void 0,void 0,function*(){try{const t=yield er(this.fetch,`${this.url}/token?grant_type=refresh_token`,{refresh_token:e},{headers:this.headers}),n=Object.assign({},t);return n.expires_in&&(n.expires_at=En(t.expires_in)),{data:n,error:null}}catch(t){return{data:null,error:t}}})}setAuthCookie(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:n,session:i}=e.body;if(!n)throw new Error("Auth event missing!");if(n==="SIGNED_IN"){if(!i)throw new Error("Auth session missing!");Ms(e,t,[{key:"access-token",value:i.access_token},{key:"refresh-token",value:i.refresh_token}].map(s=>{var o;return{name:`${this.cookieName()}-${s.key}`,value:s.value,domain:this.cookieOptions.domain,maxAge:(o=this.cookieOptions.lifetime)!==null&&o!==void 0?o:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}n==="SIGNED_OUT"&&Ms(e,t,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))),t.status(200).json({})}deleteAuthCookie(e,t,{redirectTo:n="/"}){return Ms(e,t,["access-token","refresh-token"].map(i=>({name:`${this.cookieName()}-${i}`,value:"",maxAge:-1}))),t.redirect(307,n)}getAuthCookieString(e,t){e.method!=="POST"&&(t.setHeader("Allow","POST"),t.status(405).end("Method Not Allowed"));const{event:n,session:i}=e.body;if(!n)throw new Error("Auth event missing!");if(n==="SIGNED_IN"){if(!i)throw new Error("Auth session missing!");return $o(e,t,[{key:"access-token",value:i.access_token},{key:"refresh-token",value:i.refresh_token}].map(s=>{var o;return{name:`${this.cookieName()}-${s.key}`,value:s.value,domain:this.cookieOptions.domain,maxAge:(o=this.cookieOptions.lifetime)!==null&&o!==void 0?o:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}}))}return n==="SIGNED_OUT"?$o(e,t,["access-token","refresh-token"].map(s=>({name:`${this.cookieName()}-${s}`,value:"",maxAge:-1}))):t.getHeader("Set-Cookie")}generateLink(e,t,n={}){return Ot(this,void 0,void 0,function*(){try{return{data:yield er(this.fetch,`${this.url}/admin/generate_link`,{type:e,email:t,password:n.password,data:n.data,redirect_to:n.redirectTo},{headers:this.headers}),error:null}}catch(i){return{data:null,error:i}}})}createUser(e){return Ot(this,void 0,void 0,function*(){try{const t=yield er(this.fetch,`${this.url}/admin/users`,e,{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}listUsers(){return Ot(this,void 0,void 0,function*(){try{return{data:(yield Zo(this.fetch,`${this.url}/admin/users`,{headers:this.headers})).users,error:null}}catch(e){return{data:null,error:e}}})}getUserById(e){return Ot(this,void 0,void 0,function*(){try{return{data:yield Zo(this.fetch,`${this.url}/admin/users/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}getUserByCookie(e,t){return Ot(this,void 0,void 0,function*(){try{if(!e.cookies)throw new Error("Not able to parse cookies! When using Express make sure the cookie-parser middleware is in use!");const n=e.cookies[`${this.cookieName()}-access-token`],i=e.cookies[`${this.cookieName()}-refresh-token`];if(!n)throw new Error("No cookie found!");const{user:s,error:o}=yield this.getUser(n);if(o){if(!i)throw new Error("No refresh_token cookie found!");if(!t)throw new Error("You need to pass the res object to automatically refresh the session!");const{data:a,error:u}=yield this.refreshAccessToken(i);if(u)throw u;if(a)return Ms(e,t,[{key:"access-token",value:a.access_token},{key:"refresh-token",value:a.refresh_token}].map(c=>{var f;return{name:`${this.cookieName()}-${c.key}`,value:c.value,domain:this.cookieOptions.domain,maxAge:(f=this.cookieOptions.lifetime)!==null&&f!==void 0?f:0,path:this.cookieOptions.path,sameSite:this.cookieOptions.sameSite}})),{token:a.access_token,user:a.user,data:a.user,error:null}}return{token:n,user:s,data:s,error:null}}catch(n){return{token:null,user:null,data:null,error:n}}})}updateUserById(e,t){return Ot(this,void 0,void 0,function*(){try{const n=yield Tl(this.fetch,`${this.url}/admin/users/${e}`,t,{headers:this.headers});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}})}deleteUser(e){return Ot(this,void 0,void 0,function*(){try{const t=yield M1(this.fetch,`${this.url}/admin/users/${e}`,{},{headers:this.headers});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}getUser(e){return Ot(this,void 0,void 0,function*(){try{const t=yield Zo(this.fetch,`${this.url}/user`,{headers:this._createRequestHeaders(e)});return{user:t,data:t,error:null}}catch(t){return{user:null,data:null,error:t}}})}updateUser(e,t){return Ot(this,void 0,void 0,function*(){try{const n=yield Tl(this.fetch,`${this.url}/user`,t,{headers:this._createRequestHeaders(e)});return{user:n,data:n,error:null}}catch(n){return{user:null,data:null,error:n}}})}}function z1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}var tr=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};z1();const G1={url:F1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:P1};class V1{constructor(e){this.stateChangeEmitters=new Map;const t=Object.assign(Object.assign({},G1),e);this.currentUser=null,this.currentSession=null,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.multiTab=t.multiTab,this.localStorage=t.localStorage||globalThis.localStorage,this.api=new H1({url:t.url,headers:t.headers,cookieOptions:t.cookieOptions,fetch:t.fetch}),this._recoverSession(),this._recoverAndRefresh(),this._listenForMultiTabEvents(),t.detectSessionInUrl&&qr()&&!!Hr("access_token")&&this.getSessionFromUrl({storeSession:!0}).then(({error:n})=>{n&&console.error("Error getting session from URL.",n)})}signUp({email:e,password:t,phone:n},i={}){return tr(this,void 0,void 0,function*(){try{this._removeSession();const{data:s,error:o}=n&&t?yield this.api.signUpWithPhone(n,t,{data:i.data,captchaToken:i.captchaToken}):yield this.api.signUpWithEmail(e,t,{redirectTo:i.redirectTo,data:i.data,captchaToken:i.captchaToken});if(o)throw o;if(!s)throw"An error occurred on sign up.";let a=null,u=null;return s.access_token&&(a=s,u=a.user,this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN")),s.id&&(u=s),{user:u,session:a,error:null}}catch(s){return{user:null,session:null,error:s}}})}signIn({email:e,phone:t,password:n,refreshToken:i,provider:s,oidc:o},a={}){return tr(this,void 0,void 0,function*(){try{if(this._removeSession(),e&&!n){const{error:u}=yield this.api.sendMagicLinkEmail(e,{redirectTo:a.redirectTo,captchaToken:a.captchaToken});return{user:null,session:null,error:u}}if(e&&n)return this._handleEmailSignIn(e,n,{redirectTo:a.redirectTo});if(t&&!n){const{error:u}=yield this.api.sendMobileOTP(t,{captchaToken:a.captchaToken});return{user:null,session:null,error:u}}if(t&&n)return this._handlePhoneSignIn(t,n);if(i){const{error:u}=yield this._callRefreshToken(i);if(u)throw u;return{user:this.currentUser,session:this.currentSession,error:null}}if(s)return this._handleProviderSignIn(s,{redirectTo:a.redirectTo,scopes:a.scopes});if(o)return this._handleOpenIDConnectSignIn(o);throw new Error("You must provide either an email, phone number, a third-party provider or OpenID Connect.")}catch(u){return{user:null,session:null,error:u}}})}verifyOTP({phone:e,token:t},n={}){return tr(this,void 0,void 0,function*(){try{this._removeSession();const{data:i,error:s}=yield this.api.verifyMobileOTP(e,t,n);if(s)throw s;if(!i)throw"An error occurred on token verification.";let o=null,a=null;return i.access_token&&(o=i,a=o.user,this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),i.id&&(a=i),{user:a,session:o,error:null}}catch(i){return{user:null,session:null,error:i}}})}user(){return this.currentUser}session(){return this.currentSession}refreshSession(){var e;return tr(this,void 0,void 0,function*(){try{if(!((e=this.currentSession)===null||e===void 0?void 0:e.access_token))throw new Error("Not logged in.");const{error:t}=yield this._callRefreshToken();if(t)throw t;return{data:this.currentSession,user:this.currentUser,error:null}}catch(t){return{data:null,user:null,error:t}}})}update(e){var t;return tr(this,void 0,void 0,function*(){try{if(!((t=this.currentSession)===null||t===void 0?void 0:t.access_token))throw new Error("Not logged in.");const{user:n,error:i}=yield this.api.updateUser(this.currentSession.access_token,e);if(i)throw i;if(!n)throw Error("Invalid user data.");const s=Object.assign(Object.assign({},this.currentSession),{user:n});return this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED"),{data:n,user:n,error:null}}catch(n){return{data:null,user:null,error:n}}})}setSession(e){return tr(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:t,error:n}=yield this.api.refreshAccessToken(e);return n?{session:null,error:n}:(this._saveSession(t),this._notifyAllSubscribers("SIGNED_IN"),{session:t,error:null})}catch(t){return{error:t,session:null}}})}setAuth(e){return this.currentSession=Object.assign(Object.assign({},this.currentSession),{access_token:e,token_type:"bearer",user:null}),this.currentSession}getSessionFromUrl(e){return tr(this,void 0,void 0,function*(){try{if(!qr())throw new Error("No browser detected.");const t=Hr("error_description");if(t)throw new Error(t);const n=Hr("provider_token"),i=Hr("access_token");if(!i)throw new Error("No access_token detected.");const s=Hr("expires_in");if(!s)throw new Error("No expires_in detected.");const o=Hr("refresh_token");if(!o)throw new Error("No refresh_token detected.");const a=Hr("token_type");if(!a)throw new Error("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(s),{user:f,error:l}=yield this.api.getUser(i);if(l)throw l;const h={provider_token:n,access_token:i,expires_in:parseInt(s),expires_at:c,refresh_token:o,token_type:a,user:f};if(e==null?void 0:e.storeSession){this._saveSession(h);const m=Hr("type");this._notifyAllSubscribers("SIGNED_IN"),m==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY")}return window.location.hash="",{data:h,error:null}}catch(t){return{data:null,error:t}}})}signOut(){var e;return tr(this,void 0,void 0,function*(){const t=(e=this.currentSession)===null||e===void 0?void 0:e.access_token;if(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"),t){const{error:n}=yield this.api.signOut(t);if(n)return{error:n}}return{error:null}})}onAuthStateChange(e){try{const t=q1(),n={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),{data:n,error:null}}catch(t){return{data:null,error:t}}}_handleEmailSignIn(e,t,n={}){var i,s;return tr(this,void 0,void 0,function*(){try{const{data:o,error:a}=yield this.api.signInWithEmail(e,t,{redirectTo:n.redirectTo});return a||!o?{data:null,user:null,session:null,error:a}:((((i=o==null?void 0:o.user)===null||i===void 0?void 0:i.confirmed_at)||((s=o==null?void 0:o.user)===null||s===void 0?void 0:s.email_confirmed_at))&&(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN")),{data:o,user:o.user,session:o,error:null})}catch(o){return{data:null,user:null,session:null,error:o}}})}_handlePhoneSignIn(e,t){var n;return tr(this,void 0,void 0,function*(){try{const{data:i,error:s}=yield this.api.signInWithPhone(e,t);return s||!i?{data:null,user:null,session:null,error:s}:(((n=i==null?void 0:i.user)===null||n===void 0?void 0:n.phone_confirmed_at)&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN")),{data:i,user:i.user,session:i,error:null})}catch(i){return{data:null,user:null,session:null,error:i}}})}_handleProviderSignIn(e,t={}){const n=this.api.getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes});try{return qr()&&(window.location.href=n),{provider:e,url:n,data:null,session:null,user:null,error:null}}catch(i){return n?{provider:e,url:n,data:null,session:null,user:null,error:null}:{data:null,user:null,session:null,error:i}}}_handleOpenIDConnectSignIn({id_token:e,nonce:t,client_id:n,issuer:i,provider:s}){return tr(this,void 0,void 0,function*(){if(e&&t&&(n&&i||s))try{const{data:o,error:a}=yield this.api.signInWithOpenIDConnect({id_token:e,nonce:t,client_id:n,issuer:i,provider:s});return a||!o?{user:null,session:null,error:a}:(this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN"),{user:o.user,session:o,error:null})}catch(o){return{user:null,session:null,error:o}}throw new Error("You must provide a OpenID Connect provider with your id token and nonce.")})}_recoverSession(){var e;try{const t=qr()&&((e=this.localStorage)===null||e===void 0?void 0:e.getItem(xi));if(!t||typeof t!="string")return null;const n=JSON.parse(t),{currentSession:i,expiresAt:s}=n,o=Math.round(Date.now()/1e3);s>=o&&(i==null?void 0:i.user)&&(this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN"))}catch(t){console.log("error",t)}}_recoverAndRefresh(){return tr(this,void 0,void 0,function*(){try{const e=qr()&&(yield this.localStorage.getItem(xi));if(!e)return null;const t=JSON.parse(e),{currentSession:n,expiresAt:i}=t,s=Math.round(Date.now()/1e3);if(i<s)if(this.autoRefreshToken&&n.refresh_token){const{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.log(o.message),yield this._removeSession())}else this._removeSession();else!n||!n.user?(console.log("Current session is missing data."),this._removeSession()):(this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN"))}catch(e){return console.error(e),null}})}_callRefreshToken(e){var t;return e===void 0&&(e=(t=this.currentSession)===null||t===void 0?void 0:t.refresh_token),tr(this,void 0,void 0,function*(){try{if(!e)throw new Error("No current session.");const{data:n,error:i}=yield this.api.refreshAccessToken(e);if(i)throw i;if(!n)throw Error("Invalid session data.");return this._saveSession(n),this._notifyAllSubscribers("TOKEN_REFRESHED"),this._notifyAllSubscribers("SIGNED_IN"),{data:n,error:null}}catch(n){return{data:null,error:n}}})}_notifyAllSubscribers(e){this.stateChangeEmitters.forEach(t=>t.callback(e,this.currentSession))}_saveSession(e){this.currentSession=e,this.currentUser=e.user;const t=e.expires_at;if(t){const n=Math.round(Date.now()/1e3),i=t-n,s=i>60?60:.5;this._startAutoRefreshToken((i-s)*1e3)}this.persistSession&&e.expires_at&&this._persistSession(this.currentSession)}_persistSession(e){const t={currentSession:e,expiresAt:e.expires_at};qr()&&this.localStorage.setItem(xi,JSON.stringify(t))}_removeSession(){return tr(this,void 0,void 0,function*(){this.currentSession=null,this.currentUser=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),qr()&&(yield this.localStorage.removeItem(xi))})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>this._callRefreshToken(),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_listenForMultiTabEvents(){if(!this.multiTab||!qr()||!(window==null?void 0:window.addEventListener))return!1;try{window==null||window.addEventListener("storage",e=>{var t;if(e.key===xi){const n=JSON.parse(String(e.newValue));((t=n==null?void 0:n.currentSession)===null||t===void 0?void 0:t.access_token)?(this._recoverAndRefresh(),this._notifyAllSubscribers("SIGNED_IN")):(this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT"))}})}catch(e){console.error("_listenForMultiTabEvents",e)}}}class Q1 extends V1{constructor(e){super(e)}}var W1=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};class ea{constructor(e){this.shouldThrowOnError=!1,Object.assign(this,e),this.fetch=e.fetch||Ns}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){typeof this.schema=="undefined"||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let n=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(i=>W1(this,void 0,void 0,function*(){var s,o,a;let u=null,c=null,f=null;if(i.ok){const h=(s=this.headers.Prefer)===null||s===void 0?void 0:s.split(",").includes("return=minimal");if(this.method!=="HEAD"&&!h){const M=yield i.text();M&&(this.headers.Accept==="text/csv"?c=M:c=JSON.parse(M))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&b&&b.length>1&&(f=parseInt(b[1]))}else{const h=yield i.text();try{u=JSON.parse(h)}catch{u={message:h}}if(u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:f,status:i.status,statusText:i.statusText,body:c}}));return this.shouldThrowOnError||(n=n.catch(i=>({error:{message:`FetchError: ${i.message}`,details:"",hint:"",code:i.code||""},data:null,body:null,count:null,status:400,statusText:"Bad Request"}))),n.then(e,t)}}class ta extends ea{select(e="*"){let t=!1;const n=e.split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this}order(e,{ascending:t=!0,nullsFirst:n=!1,foreignTable:i}={}){const s=typeof i=="undefined"?"order":`${i}.order`,o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}.${n?"nullsfirst":"nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t=="undefined"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const i=typeof n=="undefined"?"offset":`${n}.offset`,s=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){this.headers.Accept="application/vnd.pgrst.object+json";const e=new ta(this);return e.then=(t,n)=>this.then(i=>{var s,o;return((o=(s=i.error)===null||s===void 0?void 0:s.details)===null||o===void 0?void 0:o.includes("Results contain 0 rows"))?t({error:null,data:null,count:i.count,status:200,statusText:"OK",body:null}):t(i)},n),e}csv(){return this.headers.Accept="text/csv",this}}class xn extends ta{constructor(){super(...arguments);this.cs=this.contains,this.cd=this.containedBy,this.sl=this.rangeLt,this.sr=this.rangeGt,this.nxl=this.rangeGte,this.nxr=this.rangeLte,this.adj=this.rangeAdjacent,this.ov=this.overlaps}not(e,t,n){return this.url.searchParams.append(`${e}`,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=typeof t=="undefined"?"or":`${t}.or`;return this.url.searchParams.append(n,`(${e})`),this}eq(e,t){return this.url.searchParams.append(`${e}`,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(`${e}`,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(`${e}`,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(`${e}`,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(`${e}`,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(`${e}`,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(`${e}`,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(`${e}`,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(`${e}`,`is.${t}`),this}in(e,t){const n=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(`${e}`,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cs.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(`${e}`,`cd.{${t.join(",")}}`):this.url.searchParams.append(`${e}`,`cd.${JSON.stringify(t)}`),this}rangeLt(e,t){return this.url.searchParams.append(`${e}`,`sl.${t}`),this}rangeGt(e,t){return this.url.searchParams.append(`${e}`,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(`${e}`,`nxl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(`${e}`,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(`${e}`,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(`${e}`,`ov.${t}`):this.url.searchParams.append(`${e}`,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i=null}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(`${e}`,`${s}fts${o}.${t}`),this}fts(e,t,{config:n}={}){const i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`fts${i}.${t}`),this}plfts(e,t,{config:n}={}){const i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`plfts${i}.${t}`),this}phfts(e,t,{config:n}={}){const i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`phfts${i}.${t}`),this}wfts(e,t,{config:n}={}){const i=typeof n=="undefined"?"":`(${n})`;return this.url.searchParams.append(`${e}`,`wfts${i}.${t}`),this}filter(e,t,n){return this.url.searchParams.append(`${e}`,`${t}.${n}`),this}match(e){return Object.keys(e).forEach(t=>{this.url.searchParams.append(`${t}`,`eq.${e[t]}`)}),this}}class Al extends ea{constructor(e,{headers:t={},schema:n,fetch:i}={}){super({fetch:i});this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}select(e="*",{head:t=!1,count:n=null}={}){this.method="GET";let i=!1;const s=e.split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),t&&(this.method="HEAD"),new xn(this)}insert(e,{upsert:t=!1,onConflict:n,returning:i="representation",count:s=null}={}){this.method="POST";const o=[`return=${i}`];if(t&&o.push("resolution=merge-duplicates"),t&&n!==void 0&&this.url.searchParams.set("on_conflict",n),this.body=e,s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new xn(this)}upsert(e,{onConflict:t,returning:n="representation",count:i=null,ignoreDuplicates:s=!1}={}){this.method="POST";const o=[`resolution=${s?"ignore":"merge"}-duplicates`,`return=${n}`];return t!==void 0&&this.url.searchParams.set("on_conflict",t),this.body=e,i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new xn(this)}update(e,{returning:t="representation",count:n=null}={}){this.method="PATCH";const i=[`return=${t}`];return this.body=e,n&&i.push(`count=${n}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new xn(this)}delete({returning:e="representation",count:t=null}={}){this.method="DELETE";const n=[`return=${e}`];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new xn(this)}}class Y1 extends ea{constructor(e,{headers:t={},schema:n,fetch:i}={}){super({fetch:i});this.url=new URL(e),this.headers=Object.assign({},t),this.schema=n}rpc(e,{head:t=!1,count:n=null}={}){return t?(this.method="HEAD",e&&Object.entries(e).forEach(([i,s])=>{this.url.searchParams.append(i,s)})):(this.method="POST",this.body=e),n&&(this.headers.Prefer!==void 0?this.headers.Prefer+=`,count=${n}`:this.headers.Prefer=`count=${n}`),new xn(this)}}const J1="0.36.0",K1={"X-Client-Info":`postgrest-js/${J1}`};class X1{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},K1),t),this.schema=n,this.fetch=i}auth(e){return this.headers.Authorization=`Bearer ${e}`,this}from(e){const t=`${this.url}/${e}`;return new Al(t,{headers:this.headers,schema:this.schema,fetch:this.fetch})}rpc(e,t,{head:n=!1,count:i=null}={}){const s=`${this.url}/rpc/${e}`;return new Y1(s,{headers:this.headers,schema:this.schema,fetch:this.fetch}).rpc(t,{head:n,count:i})}}var mt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(mt||(mt={}));const Il=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=Z1(o,r,e,i),s),{})},Z1=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?Nl(s,o):ra(o)},Nl=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return rv(e,t)}switch(r){case mt.bool:return $1(e);case mt.float4:case mt.float8:case mt.int2:case mt.int4:case mt.int8:case mt.numeric:case mt.oid:return ev(e);case mt.json:case mt.jsonb:return tv(e);case mt.timestamp:return nv(e);case mt.abstime:case mt.date:case mt.daterange:case mt.int4range:case mt.int8range:case mt.money:case mt.reltime:case mt.text:case mt.time:case mt.timestamptz:case mt.timetz:case mt.tsrange:case mt.tstzrange:return ra(e);default:return ra(e)}},ra=r=>r,$1=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ev=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},tv=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},rv=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Nl(e,a))}return r},nv=r=>typeof r=="string"?r.replace(" ","T"):r,iv="1.3.5",sv={"X-Client-Info":`realtime-js/${iv}`},ov="1.0.0",Rl=1e4,av=1e3;var Ci;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Ci||(Ci={}));var rr;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(rr||(rr={}));var yr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(yr||(yr={}));var na;(function(r){r.websocket="websocket"})(na||(na={}));class Ml{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class ia{constructor(e,t,n={},i=Rl){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(e,t){this.refEvent&&this.channel.trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}class uv{constructor(e,t={},n){this.topic=e,this.params=t,this.socket=n,this.bindings=[],this.state=rr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.timeout=this.socket.timeout,this.joinPush=new ia(this,yr.join,this.params,this.timeout),this.rejoinTimer=new Ml(()=>this.rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=rr.closed,this.socket.remove(this)}),this.onError(i=>{this.isLeaving()||this.isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this.isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rr.errored,this.rejoinTimer.scheduleTimeout())}),this.on(yr.reply,(i,s)=>{this.trigger(this.replyEventName(s),i)})}rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this.rejoin()}subscribe(e=this.timeout){if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";return this.joinedOnce=!0,this.rejoin(e),this.joinPush}onClose(e){this.on(yr.close,e)}onError(e){this.on(yr.error,t=>e(t))}on(e,t){this.bindings.push({event:e,callback:t})}off(e){this.bindings=this.bindings.filter(t=>t.event!==e)}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ia(this,e,t,n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rr.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this.trigger(yr.close,"leave",this.joinRef())};this.joinPush.destroy();let n=new ia(this,yr.leave,{},e);return n.receive("ok",()=>t()).receive("timeout",()=>t()),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isMember(e){return this.topic===e}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=rr.joining,this.joinPush.resend(e))}trigger(e,t,n){let{close:i,error:s,leave:o,join:a}=yr;if(n&&[i,s,o,a].indexOf(e)>=0&&n!==this.joinRef())return;let c=this.onMessage(e,t,n);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";this.bindings.filter(f=>f.event==="*"?e===(t==null?void 0:t.type):f.event===e).map(f=>f.callback(c,n))}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===rr.closed}isErrored(){return this.state===rr.errored}isJoined(){return this.state===rr.joined}isJoining(){return this.state===rr.joining}isLeaving(){return this.state===rr.leaving}}const cv="websocket",lv="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",fv=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],hv="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",dv=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],pv="1.0.34",yv={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},mv="https://github.com/theturtle32/WebSocket-Node",gv={node:">=4.0.0"},vv={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},bv={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},_v={verbose:!1},wv={test:"tape test/unit/*.js",gulp:"gulp"},Sv="index",kv={lib:"./lib"},Ev="lib/browser.js",xv="Apache-2.0";var Cv={name:cv,description:lv,keywords:fv,author:hv,contributors:dv,version:pv,repository:yv,homepage:mv,engines:gv,dependencies:vv,devDependencies:bv,config:_v,scripts:wv,main:Sv,directories:kv,browser:Ev,license:xv},Ov=Cv.version,cn;if(typeof globalThis=="object")cn=globalThis;else try{cn=require("es5-ext/global")}catch{}finally{if(!cn&&typeof window!="undefined"&&(cn=window),!cn)throw new Error("Could not determine global this")}var Oi=cn.WebSocket||cn.MozWebSocket,Tv=Ov;function Dl(r,e){var t;return e?t=new Oi(r,e):t=new Oi(r),t}Oi&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(Dl,r,{get:function(){return Oi[r]}})});var Av={w3cwebsocket:Oi?Dl:null,version:Tv};class Iv{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const u=n.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:u,payload:c}}}var Nv=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const Rv=()=>{};class Mv{constructor(e,t){this.accessToken=null,this.channels=[],this.endPoint="",this.headers=sv,this.params={},this.timeout=Rl,this.transport=Av.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.longpollerTimeout=2e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Rv,this.conn=null,this.sendBuffer=[],this.serializer=new Iv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.endPoint=`${e}/${na.websocket}`,(t==null?void 0:t.params)&&(this.params=t.params),(t==null?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(t==null?void 0:t.timeout)&&(this.timeout=t.timeout),(t==null?void 0:t.logger)&&(this.logger=t.logger),(t==null?void 0:t.transport)&&(this.transport=t.transport),(t==null?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs),(t==null?void 0:t.longpollerTimeout)&&(this.longpollerTimeout=t.longpollerTimeout),this.reconnectAfterMs=(t==null?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=(t==null?void 0:t.encode)?t.encode:(n,i)=>i(JSON.stringify(n)),this.decode=(t==null?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ml(()=>Nv(this,void 0,void 0,function*(){yield this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this.endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){return new Promise((n,i)=>{try{this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t||""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset()),n({error:null,data:!0})}catch(s){n({error:s,data:!1})}})}log(e,t,n){this.logger(e,t,n)}onOpen(e){this.stateChangeCallbacks.open.push(e)}onClose(e){this.stateChangeCallbacks.close.push(e)}onError(e){this.stateChangeCallbacks.error.push(e)}onMessage(e){this.stateChangeCallbacks.message.push(e)}connectionState(){switch(this.conn&&this.conn.readyState){case Ci.connecting:return"connecting";case Ci.open:return"open";case Ci.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}channel(e,t={}){let n=new uv(e,t,this);return this.channels.push(n),n}push(e){let{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef?this.pendingHeartbeatRef=null:i===(s==null?void 0:s.type)&&this._resetHeartbeat(),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a.isMember(n)).forEach(a=>a.trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ov}))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}setAuth(e){this.accessToken=e;try{this.channels.forEach(t=>{e&&t.updateJoinPayload({user_token:e}),t.joinedOnce&&t.isJoined()&&t.push(yr.access_token,{access_token:e})})}catch(t){console.log("setAuth error",t)}}leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n.isJoined()||n.isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_onConnOpen(){this.log("transport",`connected to ${this.endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this._resetHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e.trigger(yr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_resetHeartbeat(){this.pendingHeartbeatRef=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs)}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(av,"hearbeat timeout");return}this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Dv{constructor(e,t,n,i){const s={},o=i==="*"?`realtime:${n}`:`realtime:${n}:${i}`,a=t.Authorization.split(" ")[1];a&&(s.user_token=a),this.subscription=e.channel(o,s)}getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Il(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Il(e.columns,e.old_record)),t}on(e,t){return this.subscription.on(e,n=>{let i={schema:n.schema,table:n.table,commit_timestamp:n.commit_timestamp,eventType:n.type,new:{},old:{},errors:n.errors};i=Object.assign(Object.assign({},i),this.getPayloadRecords(n)),t(i)}),this}subscribe(e=()=>{}){return this.subscription.onError(t=>e("SUBSCRIPTION_ERROR",t)),this.subscription.onClose(()=>e("CLOSED")),this.subscription.subscribe().receive("ok",()=>e("SUBSCRIBED")).receive("error",t=>e("SUBSCRIPTION_ERROR",t)).receive("timeout",()=>e("RETRYING_AFTER_TIMEOUT")),this.subscription}}class Fv extends Al{constructor(e,{headers:t={},schema:n,realtime:i,table:s,fetch:o}){super(e,{headers:t,schema:n,fetch:o});this._subscription=null,this._realtime=i,this._headers=t,this._schema=n,this._table=s}on(e,t){return this._realtime.isConnected()||this._realtime.connect(),this._subscription||(this._subscription=new Dv(this._realtime,this._headers,this._schema,this._table)),this._subscription.on(e,t)}}var Ti=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const Pv=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),jv=(r,e)=>{if(typeof r.json!="function")return e(r);r.json().then(t=>e({message:Pv(t),status:(r==null?void 0:r.status)||500}))},Lv=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};function Ds(r=Ns,e,t,n,i,s){return Ti(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Lv(e,n,i,s)).then(u=>{if(!u.ok)throw u;return(n==null?void 0:n.noResolveJson)?o(u):u.json()}).then(u=>o(u)).catch(u=>jv(u,a))})})}function sa(r,e,t,n){return Ti(this,void 0,void 0,function*(){return Ds(r,"GET",e,t,n)})}function ln(r,e,t,n,i){return Ti(this,void 0,void 0,function*(){return Ds(r,"POST",e,n,i,t)})}function Bv(r,e,t,n,i){return Ti(this,void 0,void 0,function*(){return Ds(r,"PUT",e,n,i,t)})}function Fl(r,e,t,n,i){return Ti(this,void 0,void 0,function*(){return Ds(r,"DELETE",e,n,i,t)})}const Uv="0.0.0",qv={"X-Client-Info":`storage-js/${Uv}`};var Cn=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};class Hv{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},qv),t),this.fetch=n}listBuckets(){return Cn(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){return{data:null,error:e}}})}getBucket(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield sa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}createBucket(e,t={public:!1}){return Cn(this,void 0,void 0,function*(){try{return{data:(yield ln(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers})).name,error:null}}catch(n){return{data:null,error:n}}})}updateBucket(e,t){return Cn(this,void 0,void 0,function*(){try{return{data:yield Bv(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}emptyBucket(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}deleteBucket(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield Fl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}}var Or=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const zv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vv{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=i}uploadOrUpdate(e,t,n,i){var s;return Or(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},Gv),i),u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob!="undefined"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),o.append("",n)):typeof FormData!="undefined"&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl)):(o=n,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType);const c=this._removeEmptyFolders(t),f=this._getFinalPath(c),h=yield((s=this.fetch)!==null&&s!==void 0?s:Ns)(`${this.url}/object/${f}`,{method:e,body:o,headers:u});if(h.ok)return{data:{Key:f},error:null};{const m=yield h.json();return{data:null,error:m}}}catch(o){return{data:null,error:o}}})}upload(e,t,n){return Or(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}update(e,t,n){return Or(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return Or(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}copy(e,t){return Or(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}createSignedUrl(e,t){return Or(this,void 0,void 0,function*(){try{const n=this._getFinalPath(e);let i=yield ln(this.fetch,`${this.url}/object/sign/${n}`,{expiresIn:t},{headers:this.headers});const s=`${this.url}${i.signedURL}`;return i={signedURL:s},{data:i,error:null,signedURL:s}}catch(n){return{data:null,error:n,signedURL:null}}})}createSignedUrls(e,t){return Or(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),error:null}}catch(n){return{data:null,error:n}}})}download(e){return Or(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield sa(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){return{data:null,error:t}}})}getPublicUrl(e){try{const t=this._getFinalPath(e),n=`${this.url}/object/public/${t}`;return{data:{publicURL:n},error:null,publicURL:n}}catch(t){return{data:null,error:t,publicURL:null}}}remove(e){return Or(this,void 0,void 0,function*(){try{return{data:yield Fl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){return{data:null,error:t}}})}list(e,t,n){return Or(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},zv),t),{prefix:e||""});return{data:yield ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){return{data:null,error:i}}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}class Qv extends Hv{constructor(e,t={},n){super(e,t,n)}from(e){return new Vv(this.url,this.headers,e,this.fetch)}}var oa=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};const Wv={schema:"public",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,multiTab:!0,headers:Ol};class Yv{constructor(e,t,n){if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=T1(e),s=Object.assign(Object.assign({},Wv),n);this.restUrl=`${i}/rest/v1`,this.realtimeUrl=`${i}/realtime/v1`.replace("http","ws"),this.authUrl=`${i}/auth/v1`,this.storageUrl=`${i}/storage/v1`,this.schema=s.schema,this.multiTab=s.multiTab,this.fetch=s.fetch,this.headers=Object.assign(Object.assign({},Ol),n==null?void 0:n.headers),this.auth=this._initSupabaseAuthClient(s),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},s.realtime)),this._listenForAuthEvents(),this._listenForMultiTabEvents()}get storage(){return new Qv(this.storageUrl,this._getAuthHeaders(),this.fetch)}from(e){const t=`${this.restUrl}/${e}`;return new Fv(t,{headers:this._getAuthHeaders(),schema:this.schema,realtime:this.realtime,table:e,fetch:this.fetch})}rpc(e,t,{head:n=!1,count:i=null}={}){return this._initPostgRESTClient().rpc(e,t,{head:n,count:i})}removeAllSubscriptions(){return oa(this,void 0,void 0,function*(){const e=this.getSubscriptions().slice(),t=e.map(i=>this.removeSubscription(i));return(yield Promise.all(t)).map(({error:i},s)=>({data:{subscription:e[s]},error:i}))})}removeSubscription(e){return oa(this,void 0,void 0,function*(){const{error:t}=yield this._closeSubscription(e),n=this.getSubscriptions(),i=n.filter(s=>s.isJoined()).length;return n.length===0&&(yield this.realtime.disconnect()),{data:{openSubscriptions:i},error:t}})}_closeSubscription(e){return oa(this,void 0,void 0,function*(){let t=null;if(!e.isClosed()){const{error:n}=yield this._unsubscribeSubscription(e);t=n}return this.realtime.remove(e),{error:t}})}_unsubscribeSubscription(e){return new Promise(t=>{e.unsubscribe().receive("ok",()=>t({error:null})).receive("error",n=>t({error:n})).receive("timeout",()=>t({error:new Error("timed out")}))})}getSubscriptions(){return this.realtime.channels}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:i,headers:s,fetch:o}){const a={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Q1({url:this.authUrl,headers:Object.assign(Object.assign({},s),a),autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,localStorage:i,fetch:o})}_initRealtimeClient(e){return new Mv(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign(Object.assign({},e==null?void 0:e.params),{apikey:this.supabaseKey})}))}_initPostgRESTClient(){return new X1(this.restUrl,{headers:this._getAuthHeaders(),schema:this.schema,fetch:this.fetch})}_getAuthHeaders(){var e,t;const n=this.headers,i=(t=(e=this.auth.session())===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey;return n.apikey=this.supabaseKey,n.Authorization=`Bearer ${i}`,n}_listenForMultiTabEvents(){if(!this.multiTab||!A1()||!(window==null?void 0:window.addEventListener))return null;try{return window==null?void 0:window.addEventListener("storage",e=>{var t,n,i;if(e.key===O1){const s=JSON.parse(String(e.newValue)),o=(n=(t=s==null?void 0:s.currentSession)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0,a=(i=this.auth.session())===null||i===void 0?void 0:i.access_token;o?!a&&o?this._handleTokenChanged("SIGNED_IN",o,"STORAGE"):a!==o&&this._handleTokenChanged("TOKEN_REFRESHED",o,"STORAGE"):this._handleTokenChanged("SIGNED_OUT",o,"STORAGE")}})}catch(e){return console.error("_listenForMultiTabEvents",e),null}}_listenForAuthEvents(){let{data:e}=this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,n==null?void 0:n.access_token,"CLIENT")});return e}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t),n=="STORAGE"&&this.auth.setAuth(t),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut())}}const $A=(r,e,t)=>new Yv(r,e,t);var aa={exports:{}},zr={},Tr={},Pl=9007199254740991,Jv="[object Arguments]",Kv="[object Function]",Xv="[object GeneratorFunction]",Zv=/^(?:0|[1-9]\d*)$/;function jl(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function $v(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var Ai=Object.prototype,Ii=Ai.hasOwnProperty,Ll=Ai.toString,eb=Ai.propertyIsEnumerable,Bl=Math.max;function tb(r,e){var t=fb(r)||lb(r)?$v(r.length,String):[],n=t.length,i=!!n;for(var s in r)(e||Ii.call(r,s))&&!(i&&(s=="length"||ql(s,n)))&&t.push(s);return t}function rb(r,e,t,n){return r===void 0||ua(r,Ai[t])&&!Ii.call(n,t)?e:r}function nb(r,e,t){var n=r[e];(!(Ii.call(r,e)&&ua(n,t))||t===void 0&&!(e in r))&&(r[e]=t)}function ib(r){if(!la(r))return cb(r);var e=ub(r),t=[];for(var n in r)n=="constructor"&&(e||!Ii.call(r,n))||t.push(n);return t}function Ul(r,e){return e=Bl(e===void 0?r.length-1:e,0),function(){for(var t=arguments,n=-1,i=Bl(t.length-e,0),s=Array(i);++n<i;)s[n]=t[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=t[n];return o[e]=s,jl(r,this,o)}}function sb(r,e,t,n){t||(t={});for(var i=-1,s=e.length;++i<s;){var o=e[i],a=n?n(t[o],r[o],o,t,r):void 0;nb(t,o,a===void 0?r[o]:a)}return t}function ob(r){return Ul(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(i--,s):void 0,o&&ab(t[0],t[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var a=t[n];a&&r(e,a,n,s)}return e})}function ql(r,e){return e=e==null?Pl:e,!!e&&(typeof r=="number"||Zv.test(r))&&r>-1&&r%1==0&&r<e}function ab(r,e,t){if(!la(t))return!1;var n=typeof e;return(n=="number"?ca(t)&&ql(e,t.length):n=="string"&&e in t)?ua(t[e],r):!1}function ub(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Ai;return r===t}function cb(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}function ua(r,e){return r===e||r!==r&&e!==e}function lb(r){return hb(r)&&Ii.call(r,"callee")&&(!eb.call(r,"callee")||Ll.call(r)==Jv)}var fb=Array.isArray;function ca(r){return r!=null&&pb(r.length)&&!db(r)}function hb(r){return yb(r)&&ca(r)}function db(r){var e=la(r)?Ll.call(r):"";return e==Kv||e==Xv}function pb(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Pl}function la(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function yb(r){return!!r&&typeof r=="object"}var mb=ob(function(r,e,t,n){sb(e,vb(e),r,n)}),gb=Ul(function(r){return r.push(void 0,rb),jl(mb,void 0,r)});function vb(r){return ca(r)?tb(r,!0):ib(r)}var bb=gb,_b=9007199254740991,wb="[object Arguments]",Sb="[object Function]",kb="[object GeneratorFunction]",Eb=typeof He=="object"&&He&&He.Object===Object&&He,xb=typeof self=="object"&&self&&self.Object===Object&&self,Cb=Eb||xb||Function("return this")();function Ob(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var fa=Object.prototype,Tb=fa.hasOwnProperty,Hl=fa.toString,zl=Cb.Symbol,Ab=fa.propertyIsEnumerable,Gl=zl?zl.isConcatSpreadable:void 0;function Vl(r,e,t,n,i){var s=-1,o=r.length;for(t||(t=Ib),i||(i=[]);++s<o;){var a=r[s];e>0&&t(a)?e>1?Vl(a,e-1,t,n,i):Ob(i,a):n||(i[i.length]=a)}return i}function Ib(r){return Mb(r)||Rb(r)||!!(Gl&&r&&r[Gl])}function Nb(r){var e=r?r.length:0;return e?Vl(r,1):[]}function Rb(r){return Fb(r)&&Tb.call(r,"callee")&&(!Ab.call(r,"callee")||Hl.call(r)==wb)}var Mb=Array.isArray;function Db(r){return r!=null&&jb(r.length)&&!Pb(r)}function Fb(r){return Bb(r)&&Db(r)}function Pb(r){var e=Lb(r)?Hl.call(r):"";return e==Sb||e==kb}function jb(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=_b}function Lb(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function Bb(r){return!!r&&typeof r=="object"}var Ub=Nb,qb=9007199254740991,Hb="[object Arguments]",zb="[object Function]",Gb="[object GeneratorFunction]",ha=Object.prototype,Vb=ha.hasOwnProperty,Ql=ha.toString,Qb=ha.propertyIsEnumerable;function Wb(r){return Jb(r)&&Vb.call(r,"callee")&&(!Qb.call(r,"callee")||Ql.call(r)==Hb)}function Yb(r){return r!=null&&Xb(r.length)&&!Kb(r)}function Jb(r){return $b(r)&&Yb(r)}function Kb(r){var e=Zb(r)?Ql.call(r):"";return e==zb||e==Gb}function Xb(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=qb}function Zb(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function $b(r){return!!r&&typeof r=="object"}var e_=Wb;Object.defineProperty(Tr,"__esModule",{value:!0});const t_=bb;Tr.defaults=t_;const r_=Ub;Tr.flatten=r_;const n_=e_;Tr.isArguments=n_;function i_(){}Tr.noop=i_;var Fs={},s_=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},da={exports:{}};typeof Object.create=="function"?da.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:da.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};(function(r){var e=/%[sdj%]/g;r.format=function(w){if(!q(w)){for(var _=[],O=0;O<arguments.length;O++)_.push(i(arguments[O]));return _.join(" ")}for(var O=1,j=arguments,G=j.length,Y=String(w).replace(e,function(oe){if(oe==="%%")return"%";if(O>=G)return oe;switch(oe){case"%s":return String(j[O++]);case"%d":return Number(j[O++]);case"%j":try{return JSON.stringify(j[O++])}catch{return"[Circular]"}default:return oe}}),te=j[O];O<G;te=j[++O])I(te)||!X(te)?Y+=" "+te:Y+=" "+i(te);return Y},r.deprecate=function(w,_){if(R(He.process))return function(){return r.deprecate(w,_).apply(this,arguments)};if(process.noDeprecation===!0)return w;var O=!1;function j(){if(!O){if(process.throwDeprecation)throw new Error(_);process.traceDeprecation?console.trace(_):console.error(_),O=!0}return w.apply(this,arguments)}return j};var t={},n;r.debuglog=function(w){if(R(n)&&(n=""),w=w.toUpperCase(),!t[w])if(new RegExp("\\b"+w+"\\b","i").test(n)){var _=process.pid;t[w]=function(){var O=r.format.apply(r,arguments);console.error("%s %d: %s",w,_,O)}}else t[w]=function(){};return t[w]};function i(w,_){var O={seen:[],stylize:o};return arguments.length>=3&&(O.depth=arguments[2]),arguments.length>=4&&(O.colors=arguments[3]),M(_)?O.showHidden=_:_&&r._extend(O,_),R(O.showHidden)&&(O.showHidden=!1),R(O.depth)&&(O.depth=2),R(O.colors)&&(O.colors=!1),R(O.customInspect)&&(O.customInspect=!0),O.colors&&(O.stylize=s),u(O,w,O.depth)}r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(w,_){var O=i.styles[_];return O?"["+i.colors[O][0]+"m"+w+"["+i.colors[O][1]+"m":w}function o(w,_){return w}function a(w){var _={};return w.forEach(function(O,j){_[O]=!0}),_}function u(w,_,O){if(w.customInspect&&_&&ue(_.inspect)&&_.inspect!==r.inspect&&!(_.constructor&&_.constructor.prototype===_)){var j=_.inspect(O,w);return q(j)||(j=u(w,j,O)),j}var G=c(w,_);if(G)return G;var Y=Object.keys(_),te=a(Y);if(w.showHidden&&(Y=Object.getOwnPropertyNames(_)),me(_)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return f(_);if(Y.length===0){if(ue(_)){var oe=_.name?": "+_.name:"";return w.stylize("[Function"+oe+"]","special")}if(se(_))return w.stylize(RegExp.prototype.toString.call(_),"regexp");if(ee(_))return w.stylize(Date.prototype.toString.call(_),"date");if(me(_))return f(_)}var ge="",Oe=!1,Re=["{","}"];if(b(_)&&(Oe=!0,Re=["[","]"]),ue(_)){var ne=_.name?": "+_.name:"";ge=" [Function"+ne+"]"}if(se(_)&&(ge=" "+RegExp.prototype.toString.call(_)),ee(_)&&(ge=" "+Date.prototype.toUTCString.call(_)),me(_)&&(ge=" "+f(_)),Y.length===0&&(!Oe||_.length==0))return Re[0]+ge+Re[1];if(O<0)return se(_)?w.stylize(RegExp.prototype.toString.call(_),"regexp"):w.stylize("[Object]","special");w.seen.push(_);var Ee;return Oe?Ee=l(w,_,O,te,Y):Ee=Y.map(function(Be){return h(w,_,O,te,Be,Oe)}),w.seen.pop(),m(Ee,ge,Re)}function c(w,_){if(R(_))return w.stylize("undefined","undefined");if(q(_)){var O="'"+JSON.stringify(_).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return w.stylize(O,"string")}if(B(_))return w.stylize(""+_,"number");if(M(_))return w.stylize(""+_,"boolean");if(I(_))return w.stylize("null","null")}function f(w){return"["+Error.prototype.toString.call(w)+"]"}function l(w,_,O,j,G){for(var Y=[],te=0,oe=_.length;te<oe;++te)H(_,String(te))?Y.push(h(w,_,O,j,String(te),!0)):Y.push("");return G.forEach(function(ge){ge.match(/^\d+$/)||Y.push(h(w,_,O,j,ge,!0))}),Y}function h(w,_,O,j,G,Y){var te,oe,ge;if(ge=Object.getOwnPropertyDescriptor(_,G)||{value:_[G]},ge.get?ge.set?oe=w.stylize("[Getter/Setter]","special"):oe=w.stylize("[Getter]","special"):ge.set&&(oe=w.stylize("[Setter]","special")),H(j,G)||(te="["+G+"]"),oe||(w.seen.indexOf(ge.value)<0?(I(O)?oe=u(w,ge.value,null):oe=u(w,ge.value,O-1),oe.indexOf(`
`)>-1&&(Y?oe=oe.split(`
`).map(function(Oe){return"  "+Oe}).join(`
`).substr(2):oe=`
`+oe.split(`
`).map(function(Oe){return"   "+Oe}).join(`
`))):oe=w.stylize("[Circular]","special")),R(te)){if(Y&&G.match(/^\d+$/))return oe;te=JSON.stringify(""+G),te.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.substr(1,te.length-2),te=w.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=w.stylize(te,"string"))}return te+": "+oe}function m(w,_,O){var j=w.reduce(function(G,Y){return Y.indexOf(`
`)>=0,G+Y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return j>60?O[0]+(_===""?"":_+`
 `)+" "+w.join(`,
  `)+" "+O[1]:O[0]+_+" "+w.join(", ")+" "+O[1]}function b(w){return Array.isArray(w)}r.isArray=b;function M(w){return typeof w=="boolean"}r.isBoolean=M;function I(w){return w===null}r.isNull=I;function T(w){return w==null}r.isNullOrUndefined=T;function B(w){return typeof w=="number"}r.isNumber=B;function q(w){return typeof w=="string"}r.isString=q;function F(w){return typeof w=="symbol"}r.isSymbol=F;function R(w){return w===void 0}r.isUndefined=R;function se(w){return X(w)&&W(w)==="[object RegExp]"}r.isRegExp=se;function X(w){return typeof w=="object"&&w!==null}r.isObject=X;function ee(w){return X(w)&&W(w)==="[object Date]"}r.isDate=ee;function me(w){return X(w)&&(W(w)==="[object Error]"||w instanceof Error)}r.isError=me;function ue(w){return typeof w=="function"}r.isFunction=ue;function Se(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||typeof w=="undefined"}r.isPrimitive=Se,r.isBuffer=s_;function W(w){return Object.prototype.toString.call(w)}function Z(w){return w<10?"0"+w.toString(10):w.toString(10)}var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var w=new Date,_=[Z(w.getHours()),Z(w.getMinutes()),Z(w.getSeconds())].join(":");return[w.getDate(),C[w.getMonth()],_].join(" ")}r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=da.exports,r._extend=function(w,_){if(!_||!X(_))return w;for(var O=Object.keys(_),j=O.length;j--;)w[O[j]]=_[O[j]];return w};function H(w,_){return Object.prototype.hasOwnProperty.call(w,_)}})(Fs);var On=Object.create||m_,o_=Object.keys||g_,a_=Function.prototype.bind||v_;function vt(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=On(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}var pa=vt;vt.EventEmitter=vt;vt.prototype._events=void 0;vt.prototype._maxListeners=void 0;var ya=10,ma;try{var Wl={};Object.defineProperty&&Object.defineProperty(Wl,"x",{value:0}),ma=Wl.x===0}catch{ma=!1}ma?Object.defineProperty(vt,"defaultMaxListeners",{enumerable:!0,get:function(){return ya},set:function(r){if(typeof r!="number"||r<0||r!==r)throw new TypeError('"defaultMaxListeners" must be a positive number');ya=r}}):vt.defaultMaxListeners=ya;vt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function Yl(r){return r._maxListeners===void 0?vt.defaultMaxListeners:r._maxListeners}vt.prototype.getMaxListeners=function(){return Yl(this)};function u_(r,e,t){if(e)r.call(t);else for(var n=r.length,i=Tn(r,n),s=0;s<n;++s)i[s].call(t)}function c_(r,e,t,n){if(e)r.call(t,n);else for(var i=r.length,s=Tn(r,i),o=0;o<i;++o)s[o].call(t,n)}function l_(r,e,t,n,i){if(e)r.call(t,n,i);else for(var s=r.length,o=Tn(r,s),a=0;a<s;++a)o[a].call(t,n,i)}function f_(r,e,t,n,i,s){if(e)r.call(t,n,i,s);else for(var o=r.length,a=Tn(r,o),u=0;u<o;++u)a[u].call(t,n,i,s)}function h_(r,e,t,n){if(e)r.apply(t,n);else for(var i=r.length,s=Tn(r,i),o=0;o<i;++o)s[o].apply(t,n)}vt.prototype.emit=function(e){var t,n,i,s,o,a,u=e==="error";if(a=this._events,a)u=u&&a.error==null;else if(!u)return!1;if(u){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(n=a[e],!n)return!1;var f=typeof n=="function";switch(i=arguments.length,i){case 1:u_(n,f,this);break;case 2:c_(n,f,this,arguments[1]);break;case 3:l_(n,f,this,arguments[1],arguments[2]);break;case 4:f_(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(i-1),o=1;o<i;o++)s[o-1]=arguments[o];h_(n,f,this,s)}return!0};function Jl(r,e,t,n){var i,s,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(s=r._events,s?(s.newListener&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]):(s=r._events=On(null),r._eventsCount=0),!o)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),!o.warned&&(i=Yl(r),i&&i>0&&o.length>i)){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=o.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",a.name,a.message)}return r}vt.prototype.addListener=function(e,t){return Jl(this,e,t,!1)};vt.prototype.on=vt.prototype.addListener;vt.prototype.prependListener=function(e,t){return Jl(this,e,t,!0)};function d_(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var r=new Array(arguments.length),e=0;e<r.length;++e)r[e]=arguments[e];this.listener.apply(this.target,r)}}function Kl(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=a_.call(d_,n);return i.listener=t,n.wrapFn=i,i}vt.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,Kl(this,e,t)),this};vt.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Kl(this,e,t)),this};vt.prototype.removeListener=function(e,t){var n,i,s,o,a;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(i=this._events,!i)return this;if(n=i[e],!n)return this;if(n===t||n.listener===t)--this._eventsCount==0?this._events=On(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():p_(n,s),n.length===1&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,a||t)}return this};vt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,!n)return this;if(!n.removeListener)return arguments.length===0?(this._events=On(null),this._eventsCount=0):n[e]&&(--this._eventsCount==0?this._events=On(null):delete n[e]),this;if(arguments.length===0){var s=o_(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=On(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Xl(r,e,t){var n=r._events;if(!n)return[];var i=n[e];return i?typeof i=="function"?t?[i.listener||i]:[i]:t?y_(i):Tn(i,i.length):[]}vt.prototype.listeners=function(e){return Xl(this,e,!0)};vt.prototype.rawListeners=function(e){return Xl(this,e,!1)};vt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Zl.call(r,e)};vt.prototype.listenerCount=Zl;function Zl(r){var e=this._events;if(e){var t=e[r];if(typeof t=="function")return 1;if(t)return t.length}return 0}vt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function p_(r,e){for(var t=e,n=t+1,i=r.length;n<i;t+=1,n+=1)r[t]=r[n];r.pop()}function Tn(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function y_(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function m_(r){var e=function(){};return e.prototype=r,new e}function g_(r){for(var e in r)Object.prototype.hasOwnProperty.call(r,e);return e}function v_(r){var e=this;return function(){return e.apply(r,arguments)}}function St(r,e){var e=e||{};this._head=0,this._tail=0,this._capacity=e.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(r)&&this._fromArray(r)}St.prototype.peekAt=function(e){var t=e;if(t===(t|0)){var n=this.size();if(!(t>=n||t<-n))return t<0&&(t+=n),t=this._head+t&this._capacityMask,this._list[t]}};St.prototype.get=function(e){return this.peekAt(e)};St.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]};St.prototype.peekFront=function(){return this.peek()};St.prototype.peekBack=function(){return this.peekAt(-1)};Object.defineProperty(St.prototype,"length",{get:function(){return this.size()}});St.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};St.prototype.unshift=function(e){if(e===void 0)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};St.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}};St.prototype.push=function(e){if(e===void 0)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};St.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),n}};St.prototype.removeOne=function(e){var t=e;if(t===(t|0)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(t>=n||t<-n)){t<0&&(t+=n),t=this._head+t&this._capacityMask;var s=this._list[t],o;if(e<n/2){for(o=e;o>0;o--)this._list[t]=this._list[t=t-1+i&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(o=n-1-e;o>0;o--)this._list[t]=this._list[t=t+1+i&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}};St.prototype.remove=function(e,t){var n=e,i,s=t;if(n===(n|0)&&this._head!==this._tail){var o=this.size(),a=this._list.length;if(!(n>=o||n<-o||t<1)){if(n<0&&(n+=o),t===1||!t)return i=new Array(1),i[0]=this.removeOne(n),i;if(n===0&&n+t>=o)return i=this.toArray(),this.clear(),i;n+t>o&&(t=o-n);var u;for(i=new Array(t),u=0;u<t;u++)i[u]=this._list[this._head+n+u&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===o){for(this._tail=this._tail-t+a&this._capacityMask,u=t;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(e===0){for(this._head=this._head+t+a&this._capacityMask,u=t-1;u>0;u--)this._list[n=n+1+a&this._capacityMask]=void 0;return i}if(n<o/2){for(this._head=this._head+e+t+a&this._capacityMask,u=e;u>0;u--)this.unshift(this._list[n=n-1+a&this._capacityMask]);for(n=this._head-1+a&this._capacityMask;s>0;)this._list[n=n-1+a&this._capacityMask]=void 0,s--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+a&this._capacityMask,u=o-(t+e);u>0;u--)this.push(this._list[n++]);for(n=this._tail;s>0;)this._list[n=n+1+a&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=a>>>2&&this._shrinkArray(),i}}};St.prototype.splice=function(e,t){var n=e;if(n===(n|0)){var i=this.size();if(n<0&&(n+=i),!(n>i))if(arguments.length>2){var s,o,a,u=arguments.length,c=this._list.length,f=2;if(!i||n<i/2){for(o=new Array(n),s=0;s<n;s++)o[s]=this._list[this._head+s&this._capacityMask];for(t===0?(a=[],n>0&&(this._head=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._head=this._head+n+c&this._capacityMask);u>f;)this.unshift(arguments[--u]);for(s=n;s>0;s--)this.unshift(o[s-1])}else{o=new Array(i-(n+t));var l=o.length;for(s=0;s<l;s++)o[s]=this._list[this._head+n+t+s&this._capacityMask];for(t===0?(a=[],n!=i&&(this._tail=this._head+n+c&this._capacityMask)):(a=this.remove(n,t),this._tail=this._tail-l+c&this._capacityMask);f<u;)this.push(arguments[f++]);for(s=0;s<l;s++)this.push(o[s])}return a}else return this.remove(n,t)}};St.prototype.clear=function(){this._head=0,this._tail=0};St.prototype.isEmpty=function(){return this._head===this._tail};St.prototype.toArray=function(){return this._copyArray(!1)};St.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])};St.prototype._copyArray=function(e){var t=[],n=this._list,i=n.length,s;if(e||this._head>this._tail){for(s=this._head;s<i;s++)t.push(n[s]);for(s=0;s<this._tail;s++)t.push(n[s])}else for(s=this._head;s<this._tail;s++)t.push(n[s]);return t};St.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};St.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1};var ga=St,Ar={},An={};const b_={arity:-2,flags:["admin","noscript","loading","stale","skip_slowlog"],keyStart:0,keyStop:0,step:0},__={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},w_={arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},S_={arity:-2,flags:["noscript","loading","stale","skip_monitor","skip_slowlog","fast","no_auth"],keyStart:0,keyStop:0,step:0},k_={arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},E_={arity:-1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},x_={arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},C_={arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},O_={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},T_={arity:-4,flags:["write","denyoom"],keyStart:2,keyStop:-1,step:1},A_={arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},I_={arity:6,flags:["write","denyoom","noscript"],keyStart:1,keyStop:2,step:1},N_={arity:-3,flags:["write","noscript"],keyStart:1,keyStop:-2,step:1},R_={arity:-3,flags:["write","noscript"],keyStart:1,keyStop:-2,step:1},M_={arity:4,flags:["write","denyoom","noscript"],keyStart:1,keyStop:2,step:1},D_={arity:-3,flags:["write","noscript","fast"],keyStart:1,keyStop:-2,step:1},F_={arity:-3,flags:["write","noscript","fast"],keyStart:1,keyStop:-2,step:1},P_={arity:-2,flags:["admin","noscript","random","loading","stale"],keyStart:0,keyStop:0,step:0},j_={arity:-2,flags:["admin","random","stale"],keyStart:0,keyStop:0,step:0},L_={arity:-1,flags:["random","loading","stale"],keyStart:0,keyStop:0,step:0},B_={arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},U_={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},q_={arity:1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},H_={arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},z_={arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},G_={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},V_={arity:-2,flags:["write"],keyStart:1,keyStop:-1,step:1},Q_={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},W_={arity:2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Y_={arity:2,flags:["fast"],keyStart:0,keyStop:0,step:0},J_={arity:-3,flags:["noscript","may_replicate","movablekeys"],keyStart:0,keyStop:0,step:0},K_={arity:1,flags:["noscript","loading","stale","skip_monitor","skip_slowlog"],keyStart:0,keyStop:0,step:0},X_={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},Z_={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},$_={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},ew={arity:-1,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},tw={arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},rw={arity:-1,flags:["write"],keyStart:0,keyStop:0,step:0},nw={arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},iw={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},sw={arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},ow={arity:-2,flags:["readonly"],keyStart:1,keyStop:1,step:1},aw={arity:-6,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},uw={arity:-6,flags:["readonly"],keyStart:1,keyStop:1,step:1},cw={arity:-5,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},lw={arity:-5,flags:["readonly"],keyStart:1,keyStop:1,step:1},fw={arity:-7,flags:["readonly"],keyStart:1,keyStop:1,step:1},hw={arity:-8,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},dw={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},pw={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},yw={arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mw={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},gw={arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},vw={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},bw={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},_w={arity:-1,flags:["noscript","loading","stale","skip_monitor","skip_slowlog","fast","no_auth"],keyStart:0,keyStop:0,step:0},ww={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Sw={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},kw={arity:2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Ew={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},xw={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Cw={arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},Ow={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Tw={arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Aw={arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Iw={arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Nw={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},Rw={arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Mw={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Dw={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Fw={arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},Pw={arity:2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},jw={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Lw={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Bw={arity:-1,flags:["random","loading","stale"],keyStart:0,keyStop:0,step:0},Uw={arity:2,flags:["readonly","sort_for_script"],keyStart:0,keyStop:0,step:0},qw={arity:1,flags:["random","loading","stale","fast"],keyStart:0,keyStop:0,step:0},Hw={arity:-2,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},zw={arity:3,flags:["readonly"],keyStart:1,keyStop:1,step:1},Gw={arity:5,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},Vw={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Qw={arity:5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},Ww={arity:-1,flags:["readonly","fast"],keyStart:0,keyStop:0,step:0},Yw={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Jw={arity:-3,flags:["readonly"],keyStart:1,keyStop:1,step:1},Kw={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Xw={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Zw={arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},$w={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},eS={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},tS={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},rS={arity:-2,flags:["readonly","random","movablekeys"],keyStart:0,keyStop:0,step:0},nS={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},iS={arity:-6,flags:["write","random","movablekeys"],keyStart:0,keyStop:0,step:0},sS={arity:-2,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},oS={arity:1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},aS={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},uS={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},cS={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:2},lS={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},fS={arity:-2,flags:["readonly","random"],keyStart:2,keyStop:2,step:1},hS={arity:2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},dS={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},pS={arity:3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},yS={arity:-2,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},mS={arity:-2,flags:["readonly","may_replicate"],keyStart:1,keyStop:-1,step:1},gS={arity:-3,flags:["write","denyoom","admin"],keyStart:2,keyStop:2,step:1},vS={arity:-2,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},bS={arity:1,flags:["admin"],keyStart:0,keyStop:0,step:0},_S={arity:-1,flags:["stale","fast"],keyStart:0,keyStop:0,step:0},wS={arity:-1,flags:["readonly","loading","stale"],keyStart:0,keyStop:0,step:0},SS={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},kS={arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},ES={arity:-3,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},xS={arity:2,flags:["readonly","random","fast"],keyStart:1,keyStop:1,step:1},CS={arity:3,flags:["pubsub","loading","stale","fast","may_replicate"],keyStart:0,keyStop:0,step:0},OS={arity:-2,flags:["pubsub","random","loading","stale"],keyStart:0,keyStop:0,step:0},TS={arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},AS={arity:1,flags:["loading","stale","readonly"],keyStart:0,keyStop:0,step:0},IS={arity:1,flags:["readonly","random"],keyStart:0,keyStop:0,step:0},NS={arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},RS={arity:1,flags:["fast"],keyStart:0,keyStop:0,step:0},MS={arity:3,flags:["write"],keyStart:1,keyStop:2,step:1},DS={arity:3,flags:["write","fast"],keyStart:1,keyStop:2,step:1},FS={arity:-1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},PS={arity:3,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},jS={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},LS={arity:-4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},BS={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},US={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},qS={arity:3,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},HS={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},zS={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},GS={arity:-3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},VS={arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},QS={arity:-2,flags:["readonly","random"],keyStart:0,keyStop:0,step:0},WS={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},YS={arity:-2,flags:["noscript","may_replicate"],keyStart:0,keyStop:0,step:0},JS={arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},KS={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},XS={arity:2,flags:["loading","stale","fast"],keyStart:0,keyStop:0,step:0},ZS={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},$S={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},ek={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},tk={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},rk={arity:4,flags:["write","denyoom"],keyStart:1,keyStop:1,step:1},nk={arity:-1,flags:["admin","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},ik={arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},sk={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},ok={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},ak={arity:3,flags:["admin","noscript","stale"],keyStart:0,keyStop:0,step:0},uk={arity:-2,flags:["admin","random","loading","stale"],keyStart:0,keyStop:0,step:0},ck={arity:2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:1,step:1},lk={arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},fk={arity:4,flags:["write","fast"],keyStart:1,keyStop:2,step:1},hk={arity:-2,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},dk={arity:-2,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},pk={arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},yk={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},mk={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},gk={arity:-2,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},vk={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},bk={arity:-2,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},_k={arity:4,flags:["readonly"],keyStart:1,keyStop:1,step:1},wk={arity:-2,flags:["readonly","sort_for_script"],keyStart:1,keyStop:-1,step:1},Sk={arity:-3,flags:["write","denyoom"],keyStart:1,keyStop:-1,step:1},kk={arity:3,flags:["write","fast"],keyStart:0,keyStop:0,step:0},Ek={arity:1,flags:["admin","noscript"],keyStart:0,keyStop:0,step:0},xk={arity:1,flags:["random","loading","stale","fast"],keyStart:0,keyStop:0,step:0},Ck={arity:-2,flags:["readonly","fast"],keyStart:1,keyStop:-1,step:1},Ok={arity:2,flags:["readonly","random","fast"],keyStart:1,keyStop:1,step:1},Tk={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Ak={arity:-2,flags:["write","fast"],keyStart:1,keyStop:-1,step:1},Ik={arity:-1,flags:["pubsub","noscript","loading","stale"],keyStart:0,keyStop:0,step:0},Nk={arity:1,flags:["noscript","loading","stale","fast"],keyStart:0,keyStop:0,step:0},Rk={arity:3,flags:["noscript"],keyStart:0,keyStop:0,step:0},Mk={arity:-2,flags:["noscript","loading","stale","fast"],keyStart:1,keyStop:-1,step:1},Dk={arity:-4,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},Fk={arity:-5,flags:["write","denyoom","random","fast"],keyStart:1,keyStop:1,step:1},Pk={arity:-6,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},jk={arity:-6,flags:["write","random","fast"],keyStart:1,keyStop:1,step:1},Lk={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},Bk={arity:-2,flags:["write","denyoom"],keyStart:2,keyStop:2,step:1},Uk={arity:-2,flags:["readonly","random"],keyStart:2,keyStop:2,step:1},qk={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Hk={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},zk={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Gk={arity:-4,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},Vk={arity:-7,flags:["write","movablekeys"],keyStart:0,keyStop:0,step:0},Qk={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},Wk={arity:3,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Yk={arity:-2,flags:["write","random"],keyStart:1,keyStop:1,step:1},Jk={arity:-4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},Kk={arity:2,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Xk={arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},Zk={arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},$k={arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},e2={arity:4,flags:["write","denyoom","fast"],keyStart:1,keyStop:1,step:1},t2={arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},r2={arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1},n2={arity:4,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},i2={arity:-3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},s2={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},o2={arity:-2,flags:["write","fast"],keyStart:1,keyStop:1,step:1},a2={arity:-2,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},u2={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},c2={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},l2={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},f2={arity:-5,flags:["write","denyoom"],keyStart:1,keyStop:2,step:1},h2={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},d2={arity:-3,flags:["write","fast"],keyStart:1,keyStop:1,step:1},p2={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},y2={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},m2={arity:4,flags:["write"],keyStart:1,keyStop:1,step:1},g2={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},v2={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},b2={arity:-4,flags:["readonly"],keyStart:1,keyStop:1,step:1},_2={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},w2={arity:-3,flags:["readonly","random"],keyStart:1,keyStop:1,step:1},S2={arity:3,flags:["readonly","fast"],keyStart:1,keyStop:1,step:1},k2={arity:-3,flags:["readonly","movablekeys"],keyStart:0,keyStop:0,step:0},E2={arity:-4,flags:["write","denyoom","movablekeys"],keyStart:1,keyStop:1,step:1};var x2={acl:b_,append:__,asking:w_,auth:S_,bgrewriteaof:k_,bgsave:E_,bitcount:x_,bitfield:C_,bitfield_ro:O_,bitop:T_,bitpos:A_,blmove:I_,blpop:N_,brpop:R_,brpoplpush:M_,bzpopmax:D_,bzpopmin:F_,client:P_,cluster:j_,command:L_,config:B_,copy:U_,dbsize:q_,debug:H_,decr:z_,decrby:G_,del:V_,discard:Q_,dump:W_,echo:Y_,eval:{arity:-3,flags:["noscript","may_replicate","movablekeys"],keyStart:0,keyStop:0,step:0},evalsha:J_,exec:K_,exists:X_,expire:Z_,expireat:$_,failover:ew,flushall:tw,flushdb:rw,geoadd:nw,geodist:iw,geohash:sw,geopos:ow,georadius:aw,georadius_ro:uw,georadiusbymember:cw,georadiusbymember_ro:lw,geosearch:fw,geosearchstore:hw,get:dw,getbit:pw,getdel:yw,getex:mw,getrange:gw,getset:vw,hdel:bw,hello:_w,hexists:ww,hget:Sw,hgetall:kw,hincrby:Ew,hincrbyfloat:xw,hkeys:Cw,hlen:Ow,hmget:Tw,hmset:Aw,"host:":{arity:-1,flags:["readonly","loading","stale"],keyStart:0,keyStop:0,step:0},hrandfield:Iw,hscan:Nw,hset:Rw,hsetnx:Mw,hstrlen:Dw,hvals:Fw,incr:Pw,incrby:jw,incrbyfloat:Lw,info:Bw,keys:Uw,lastsave:qw,latency:Hw,lindex:zw,linsert:Gw,llen:Vw,lmove:Qw,lolwut:Ww,lpop:Yw,lpos:Jw,lpush:Kw,lpushx:Xw,lrange:Zw,lrem:$w,lset:eS,ltrim:tS,memory:rS,mget:nS,migrate:iS,module:sS,monitor:oS,move:aS,mset:uS,msetnx:cS,multi:lS,object:fS,persist:hS,pexpire:dS,pexpireat:pS,pfadd:yS,pfcount:mS,pfdebug:gS,pfmerge:vS,pfselftest:bS,ping:_S,post:wS,psetex:SS,psubscribe:kS,psync:ES,pttl:xS,publish:CS,pubsub:OS,punsubscribe:TS,quit:AS,randomkey:IS,readonly:NS,readwrite:RS,rename:MS,renamenx:DS,replconf:FS,replicaof:PS,reset:jS,restore:LS,"restore-asking":{arity:-4,flags:["write","denyoom","asking"],keyStart:1,keyStop:1,step:1},role:BS,rpop:US,rpoplpush:qS,rpush:HS,rpushx:zS,sadd:GS,save:VS,scan:QS,scard:WS,script:YS,sdiff:JS,sdiffstore:KS,select:XS,set:ZS,setbit:$S,setex:ek,setnx:tk,setrange:rk,shutdown:nk,sinter:ik,sinterstore:sk,sismember:ok,slaveof:ak,slowlog:uk,smembers:ck,smismember:lk,smove:fk,sort:hk,spop:dk,srandmember:pk,srem:yk,sscan:mk,stralgo:gk,strlen:vk,subscribe:bk,substr:_k,sunion:wk,sunionstore:Sk,swapdb:kk,sync:Ek,time:xk,touch:Ck,ttl:Ok,type:Tk,unlink:Ak,unsubscribe:Ik,unwatch:Nk,wait:Rk,watch:Mk,xack:Dk,xadd:Fk,xautoclaim:Pk,xclaim:jk,xdel:Lk,xgroup:Bk,xinfo:Uk,xlen:qk,xpending:Hk,xrange:zk,xread:Gk,xreadgroup:Vk,xrevrange:Qk,xsetid:Wk,xtrim:Yk,zadd:Jk,zcard:Kk,zcount:Xk,zdiff:Zk,zdiffstore:$k,zincrby:e2,zinter:t2,zinterstore:r2,zlexcount:n2,zmscore:i2,zpopmax:s2,zpopmin:o2,zrandmember:a2,zrange:u2,zrangebylex:c2,zrangebyscore:l2,zrangestore:f2,zrank:h2,zrem:d2,zremrangebylex:p2,zremrangebyrank:y2,zremrangebyscore:m2,zrevrange:g2,zrevrangebylex:v2,zrevrangebyscore:b2,zrevrank:_2,zscan:w2,zscore:S2,zunion:k2,zunionstore:E2};(function(r){var e=x2;r.list=Object.keys(e);var t={};r.list.forEach(function(i){t[i]=e[i].flags.reduce(function(s,o){return s[o]=!0,s},{})}),r.exists=function(i){return Boolean(e[i])},r.hasFlag=function(i,s){if(!t[i])throw new Error("Unknown command "+i);return Boolean(t[i][s])},r.getKeyIndexes=function(i,s,o){var a=e[i];if(!a)throw new Error("Unknown command "+i);if(!Array.isArray(s))throw new Error("Expect args to be an array");var u=[],c,f,l,h;switch(i){case"zunionstore":case"zinterstore":u.push(0);case"eval":case"evalsha":for(l=Number(s[1])+2,c=2;c<l;c++)u.push(c);break;case"sort":for(h=o&&o.parseExternalKey,u.push(0),c=1;c<s.length-1;c++)if(typeof s[c]=="string"){var m=s[c].toUpperCase();m==="GET"?(c+=1,s[c]!=="#"&&(h?u.push([c,n(s[c])]):u.push(c))):m==="BY"?(c+=1,h?u.push([c,n(s[c])]):u.push(c)):m==="STORE"&&(c+=1,u.push(c))}break;case"migrate":if(s[2]===""){for(c=5;c<s.length-1;c++)if(s[c].toUpperCase()==="KEYS"){for(var b=c+1;b<s.length;b++)u.push(b);break}}else u.push(2);break;case"xreadgroup":case"xread":for(c=i==="xread"?0:3;c<s.length-1;c++)if(String(s[c]).toUpperCase()==="STREAMS"){for(b=c+1;b<=c+(s.length-1-c)/2;b++)u.push(b);break}break;default:if(a.step>0)for(f=a.keyStart-1,l=a.keyStop>0?a.keyStop:s.length+a.keyStop+1,c=f;c<l;c+=a.step)u.push(c);break}return u};function n(i){typeof i!="string"&&(i=String(i));var s=i.indexOf("->");return s===-1?i.length:s}})(An);var Ni={exports:{}},$l=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920],C2=function(e){for(var t,n=0,i=0,s=[],o=e.length;n<o;n++)t=e.charCodeAt(n),t<128?s[i++]=t:t<2048?(s[i++]=t>>6|192,s[i++]=t&63|128):(t&64512)==55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)==56320?(t=65536+((t&1023)<<10)+(e.charCodeAt(++n)&1023),s[i++]=t>>18|240,s[i++]=t>>12&63|128,s[i++]=t>>6&63|128,s[i++]=t&63|128):(s[i++]=t>>12|224,s[i++]=t>>6&63|128,s[i++]=t&63|128);return s},ef=Ni.exports=function(e){for(var t,n=0,i=-1,s=0,o=0,a=typeof e=="string"?C2(e):e,u=a.length;n<u;){if(t=a[n++],i===-1)t===123&&(i=n);else if(t!==125)o=$l[(t^o>>8)&255]^o<<8;else if(n-1!==i)return o&16383;s=$l[(t^s>>8)&255]^s<<8}return s&16383};Ni.exports.generateMulti=function(e){for(var t=1,n=e.length,i=ef(e[0]);t<n;)if(ef(e[t++])!==i)return-1;return i};var Ir={},tf={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.tryCatch=r.errorObj=void 0,r.errorObj={e:{}};let e;function t(i,s){try{const o=e;return e=null,o.apply(this,arguments)}catch(o){return r.errorObj.e=o,r.errorObj}}function n(i){return e=i,t}r.tryCatch=n})(tf);Object.defineProperty(Ir,"__esModule",{value:!0});const In=tf;function rf(r){setTimeout(function(){throw r},0)}function O2(r,e,t){return typeof e=="function"&&r.then(n=>{let i;t!==void 0&&Object(t).spread&&Array.isArray(n)?i=In.tryCatch(e).apply(void 0,[null].concat(n)):i=n===void 0?In.tryCatch(e)(null):In.tryCatch(e)(null,n),i===In.errorObj&&rf(i.e)},n=>{if(!n){const s=new Error(n+"");Object.assign(s,{cause:n}),n=s}const i=In.tryCatch(e)(n);i===In.errorObj&&rf(i.e)}),r}Ir.default=O2;var et={},Nn={},va={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof He=="object"&&He;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,u=36,c=1,f=26,l=38,h=700,m=72,b=128,M="-",I=/^xn--/,T=/[^\x20-\x7E]/,B=/[\x2E\u3002\uFF0E\uFF61]/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=u-c,R=Math.floor,se=String.fromCharCode,X;function ee(j){throw RangeError(q[j])}function me(j,G){for(var Y=j.length,te=[];Y--;)te[Y]=G(j[Y]);return te}function ue(j,G){var Y=j.split("@"),te="";Y.length>1&&(te=Y[0]+"@",j=Y[1]),j=j.replace(B,".");var oe=j.split("."),ge=me(oe,G).join(".");return te+ge}function Se(j){for(var G=[],Y=0,te=j.length,oe,ge;Y<te;)oe=j.charCodeAt(Y++),oe>=55296&&oe<=56319&&Y<te?(ge=j.charCodeAt(Y++),(ge&64512)==56320?G.push(((oe&1023)<<10)+(ge&1023)+65536):(G.push(oe),Y--)):G.push(oe);return G}function W(j){return me(j,function(G){var Y="";return G>65535&&(G-=65536,Y+=se(G>>>10&1023|55296),G=56320|G&1023),Y+=se(G),Y}).join("")}function Z(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:u}function C(j,G){return j+22+75*(j<26)-((G!=0)<<5)}function A(j,G,Y){var te=0;for(j=Y?R(j/h):j>>1,j+=R(j/G);j>F*f>>1;te+=u)j=R(j/F);return R(te+(F+1)*j/(j+l))}function H(j){var G=[],Y=j.length,te,oe=0,ge=b,Oe=m,Re,ne,Ee,Be,Ve,Je,qe,ot,x;for(Re=j.lastIndexOf(M),Re<0&&(Re=0),ne=0;ne<Re;++ne)j.charCodeAt(ne)>=128&&ee("not-basic"),G.push(j.charCodeAt(ne));for(Ee=Re>0?Re+1:0;Ee<Y;){for(Be=oe,Ve=1,Je=u;Ee>=Y&&ee("invalid-input"),qe=Z(j.charCodeAt(Ee++)),(qe>=u||qe>R((a-oe)/Ve))&&ee("overflow"),oe+=qe*Ve,ot=Je<=Oe?c:Je>=Oe+f?f:Je-Oe,!(qe<ot);Je+=u)x=u-ot,Ve>R(a/x)&&ee("overflow"),Ve*=x;te=G.length+1,Oe=A(oe-Be,te,Be==0),R(oe/te)>a-ge&&ee("overflow"),ge+=R(oe/te),oe%=te,G.splice(oe++,0,ge)}return W(G)}function w(j){var G,Y,te,oe,ge,Oe,Re,ne,Ee,Be,Ve,Je=[],qe,ot,x,p;for(j=Se(j),qe=j.length,G=b,Y=0,ge=m,Oe=0;Oe<qe;++Oe)Ve=j[Oe],Ve<128&&Je.push(se(Ve));for(te=oe=Je.length,oe&&Je.push(M);te<qe;){for(Re=a,Oe=0;Oe<qe;++Oe)Ve=j[Oe],Ve>=G&&Ve<Re&&(Re=Ve);for(ot=te+1,Re-G>R((a-Y)/ot)&&ee("overflow"),Y+=(Re-G)*ot,G=Re,Oe=0;Oe<qe;++Oe)if(Ve=j[Oe],Ve<G&&++Y>a&&ee("overflow"),Ve==G){for(ne=Y,Ee=u;Be=Ee<=ge?c:Ee>=ge+f?f:Ee-ge,!(ne<Be);Ee+=u)p=ne-Be,x=u-Be,Je.push(se(C(Be+p%x,0))),ne=R(p/x);Je.push(se(C(ne,0))),ge=A(Y,ot,te==oe),Y=0,++te}++Y,++G}return Je.join("")}function _(j){return ue(j,function(G){return I.test(G)?H(G.slice(4).toLowerCase()):G})}function O(j){return ue(j,function(G){return T.test(G)?"xn--"+w(G):G})}if(o={version:"1.3.2",ucs2:{decode:Se,encode:W},decode:H,encode:w,toASCII:O,toUnicode:_},n&&i)if(r.exports==n)i.exports=o;else for(X in o)o.hasOwnProperty(X)&&(n[X]=o[X]);else t.punycode=o})(He)})(va,va.exports);var T2={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ri={};function A2(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var I2=function(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var s=/\+/g;r=r.split(e);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=r.length;o>0&&a>o&&(a=o);for(var u=0;u<a;++u){var c=r[u].replace(s,"%20"),f=c.indexOf(t),l,h,m,b;f>=0?(l=c.substr(0,f),h=c.substr(f+1)):(l=c,h=""),m=decodeURIComponent(l),b=decodeURIComponent(h),A2(i,m)?Array.isArray(i[m])?i[m].push(b):i[m]=[i[m],b]:i[m]=b}return i},Mi=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},N2=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Object.keys(r).map(function(i){var s=encodeURIComponent(Mi(i))+t;return Array.isArray(r[i])?r[i].map(function(o){return s+encodeURIComponent(Mi(o))}).join(e):s+encodeURIComponent(Mi(r[i]))}).join(e):n?encodeURIComponent(Mi(n))+t+encodeURIComponent(Mi(r)):""};Ri.decode=Ri.parse=I2;Ri.encode=Ri.stringify=N2;var R2=va.exports,Nr=T2;Nn.parse=Di;Nn.resolve=H2;Nn.resolveObject=z2;Nn.format=q2;Nn.Url=lr;function lr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var M2=/^([a-z0-9.+-]+:)/i,D2=/:[0-9]*$/,F2=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,P2=["<",">",'"',"`"," ","\r",`
`,"	"],j2=["{","}","|","\\","^","`"].concat(P2),ba=["'"].concat(j2),nf=["%","/","?",";","#"].concat(ba),sf=["/","?","#"],L2=255,of=/^[+a-z0-9A-Z_-]{0,63}$/,B2=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,U2={javascript:!0,"javascript:":!0},_a={javascript:!0,"javascript:":!0},Rn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wa=Ri;function Di(r,e,t){if(r&&Nr.isObject(r)&&r instanceof lr)return r;var n=new lr;return n.parse(r,e,t),n}lr.prototype.parse=function(r,e,t){if(!Nr.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(i);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var u=F2.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=wa.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=M2.exec(a);if(c){c=c[0];var f=c.toLowerCase();this.protocol=f,a=a.substr(c.length)}if(t||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l=a.substr(0,2)==="//";l&&!(c&&_a[c])&&(a=a.substr(2),this.slashes=!0)}if(!_a[c]&&(l||c&&!Rn[c])){for(var h=-1,m=0;m<sf.length;m++){var b=a.indexOf(sf[m]);b!==-1&&(h===-1||b<h)&&(h=b)}var M,I;h===-1?I=a.lastIndexOf("@"):I=a.lastIndexOf("@",h),I!==-1&&(M=a.slice(0,I),a=a.slice(I+1),this.auth=decodeURIComponent(M)),h=-1;for(var m=0;m<nf.length;m++){var b=a.indexOf(nf[m]);b!==-1&&(h===-1||b<h)&&(h=b)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var T=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!T)for(var B=this.hostname.split(/\./),m=0,q=B.length;m<q;m++){var F=B[m];if(!!F&&!F.match(of)){for(var R="",se=0,X=F.length;se<X;se++)F.charCodeAt(se)>127?R+="x":R+=F[se];if(!R.match(of)){var ee=B.slice(0,m),me=B.slice(m+1),ue=F.match(B2);ue&&(ee.push(ue[1]),me.unshift(ue[2])),me.length&&(a="/"+me.join(".")+a),this.hostname=ee.join(".");break}}}this.hostname.length>L2?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=R2.toASCII(this.hostname));var Se=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+Se,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!U2[f])for(var m=0,q=ba.length;m<q;m++){var Z=ba[m];if(a.indexOf(Z)!==-1){var C=encodeURIComponent(Z);C===Z&&(C=escape(Z)),a=a.split(Z).join(C)}}var A=a.indexOf("#");A!==-1&&(this.hash=a.substr(A),a=a.slice(0,A));var H=a.indexOf("?");if(H!==-1?(this.search=a.substr(H),this.query=a.substr(H+1),e&&(this.query=wa.parse(this.query)),a=a.slice(0,H)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Rn[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Se=this.pathname||"",w=this.search||"";this.path=Se+w}return this.href=this.format(),this};function q2(r){return Nr.isString(r)&&(r=Di(r)),r instanceof lr?r.format():lr.prototype.format.call(r)}lr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Nr.isObject(this.query)&&Object.keys(this.query).length&&(s=wa.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Rn[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+n};function H2(r,e){return Di(r,!1,!0).resolve(e)}lr.prototype.resolve=function(r){return this.resolveObject(Di(r,!1,!0)).format()};function z2(r,e){return r?Di(r,!1,!0).resolveObject(e):e}lr.prototype.resolveObject=function(r){if(Nr.isString(r)){var e=new lr;e.parse(r,!1,!0),r=e}for(var t=new lr,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(t[u]=r[u])}return Rn[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Rn[r.protocol]){for(var c=Object.keys(r),f=0;f<c.length;f++){var l=c[f];t[l]=r[l]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!_a[r.protocol]){for(var q=(r.pathname||"").split("/");q.length&&!(r.host=q.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),q[0]!==""&&q.unshift(""),q.length<2&&q.unshift(""),t.pathname=q.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var h=t.pathname||"",m=t.search||"";t.path=h+m}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var b=t.pathname&&t.pathname.charAt(0)==="/",M=r.host||r.pathname&&r.pathname.charAt(0)==="/",I=M||b||t.host&&r.pathname,T=I,B=t.pathname&&t.pathname.split("/")||[],q=r.pathname&&r.pathname.split("/")||[],F=t.protocol&&!Rn[t.protocol];if(F&&(t.hostname="",t.port=null,t.host&&(B[0]===""?B[0]=t.host:B.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(q[0]===""?q[0]=r.host:q.unshift(r.host)),r.host=null),I=I&&(q[0]===""||B[0]==="")),M)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,B=q;else if(q.length)B||(B=[]),B.pop(),B=B.concat(q),t.search=r.search,t.query=r.query;else if(!Nr.isNullOrUndefined(r.search)){if(F){t.hostname=t.host=B.shift();var R=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;R&&(t.auth=R.shift(),t.host=t.hostname=R.shift())}return t.search=r.search,t.query=r.query,(!Nr.isNull(t.pathname)||!Nr.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!B.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var se=B.slice(-1)[0],X=(t.host||r.host||B.length>1)&&(se==="."||se==="..")||se==="",ee=0,me=B.length;me>=0;me--)se=B[me],se==="."?B.splice(me,1):se===".."?(B.splice(me,1),ee++):ee&&(B.splice(me,1),ee--);if(!I&&!T)for(;ee--;ee)B.unshift("..");I&&B[0]!==""&&(!B[0]||B[0].charAt(0)!=="/")&&B.unshift(""),X&&B.join("/").substr(-1)!=="/"&&B.push("");var ue=B[0]===""||B[0]&&B[0].charAt(0)==="/";if(F){t.hostname=t.host=ue?"":B.length?B.shift():"";var R=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;R&&(t.auth=R.shift(),t.host=t.hostname=R.shift())}return I=I||t.host&&B.length,I&&!ue&&B.unshift(""),B.length?t.pathname=B.join("/"):(t.pathname=null,t.path=null),(!Nr.isNull(t.pathname)||!Nr.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};lr.prototype.parseHost=function(){var r=this.host,e=D2.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};var Mn={},Sa={exports:{}},Dn=1e3,Fn=Dn*60,Pn=Fn*60,fn=Pn*24,G2=fn*7,V2=fn*365.25,Q2=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return W2(r);if(t==="number"&&isFinite(r))return e.long?J2(r):Y2(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function W2(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*V2;case"weeks":case"week":case"w":return t*G2;case"days":case"day":case"d":return t*fn;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Pn;case"minutes":case"minute":case"mins":case"min":case"m":return t*Fn;case"seconds":case"second":case"secs":case"sec":case"s":return t*Dn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Y2(r){var e=Math.abs(r);return e>=fn?Math.round(r/fn)+"d":e>=Pn?Math.round(r/Pn)+"h":e>=Fn?Math.round(r/Fn)+"m":e>=Dn?Math.round(r/Dn)+"s":r+"ms"}function J2(r){var e=Math.abs(r);return e>=fn?Ps(r,e,fn,"day"):e>=Pn?Ps(r,e,Pn,"hour"):e>=Fn?Ps(r,e,Fn,"minute"):e>=Dn?Ps(r,e,Dn,"second"):r+" ms"}function Ps(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}function K2(r){t.debug=t,t.default=t,t.coerce=u,t.disable=s,t.enable=i,t.enabled=o,t.humanize=Q2,t.destroy=c,Object.keys(r).forEach(f=>{t[f]=r[f]}),t.names=[],t.skips=[],t.formatters={};function e(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return t.colors[Math.abs(l)%t.colors.length]}t.selectColor=e;function t(f){let l,h=null,m,b;function M(...I){if(!M.enabled)return;const T=M,B=Number(new Date),q=B-(l||B);T.diff=q,T.prev=l,T.curr=B,l=B,I[0]=t.coerce(I[0]),typeof I[0]!="string"&&I.unshift("%O");let F=0;I[0]=I[0].replace(/%([a-zA-Z%])/g,(se,X)=>{if(se==="%%")return"%";F++;const ee=t.formatters[X];if(typeof ee=="function"){const me=I[F];se=ee.call(T,me),I.splice(F,1),F--}return se}),t.formatArgs.call(T,I),(T.log||t.log).apply(T,I)}return M.namespace=f,M.useColors=t.useColors(),M.color=t.selectColor(f),M.extend=n,M.destroy=t.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==t.namespaces&&(m=t.namespaces,b=t.enabled(f)),b),set:I=>{h=I}}),typeof t.init=="function"&&t.init(M),M}function n(f,l){const h=t(this.namespace+(typeof l=="undefined"?":":l)+f);return h.log=this.log,h}function i(f){t.save(f),t.namespaces=f,t.names=[],t.skips=[];let l;const h=(typeof f=="string"?f:"").split(/[\s,]+/),m=h.length;for(l=0;l<m;l++)!h[l]||(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?t.skips.push(new RegExp("^"+f.substr(1)+"$")):t.names.push(new RegExp("^"+f+"$")))}function s(){const f=[...t.names.map(a),...t.skips.map(a).map(l=>"-"+l)].join(",");return t.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=t.skips.length;l<h;l++)if(t.skips[l].test(f))return!1;for(l=0,h=t.names.length;l<h;l++)if(t.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var X2=K2;(function(r,e){e.formatArgs=n,e.save=i,e.load=s,e.useColors=t,e.storage=o(),e.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;u.splice(1,0,c,"color: inherit");let f=0,l=0;u[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(f++,h==="%c"&&(l=f))}),u.splice(l,0,c)}e.log=console.debug||console.log||(()=>{});function i(u){try{u?e.storage.setItem("debug",u):e.storage.removeItem("debug")}catch{}}function s(){let u;try{u=e.storage.getItem("debug")}catch{}return!u&&typeof process!="undefined"&&"env"in process&&(u={}.DEBUG),u}function o(){try{return localStorage}catch{}}r.exports=X2(e);const{formatters:a}=r.exports;a.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}})(Sa,Sa.exports);Object.defineProperty(Mn,"__esModule",{value:!0});const Z2=Sa.exports,ka=200;Mn.MAX_ARGUMENT_LENGTH=ka;const $2="ioredis";function af(r){if(r!==null)switch(typeof r){case"boolean":return;case"number":return;case"object":if(Buffer.isBuffer(r))return r.toString("hex");if(Array.isArray(r))return r.join(",");try{return JSON.stringify(r)}catch{return}case"string":return r}}Mn.getStringValue=af;function uf(r,e){const{length:t}=r;return t<=e?r:r.slice(0,e)+' ... <REDACTED full-length="'+t+'">'}Mn.genRedactedString=uf;function eE(r){const e=Z2.default(`${$2}:${r}`);function t(...n){if(!!e.enabled){for(let i=1;i<n.length;i++){const s=af(n[i]);typeof s=="string"&&s.length>ka&&(n[i]=uf(s,ka))}return e.apply(null,n)}}return Object.defineProperties(t,{namespace:{get(){return e.namespace}},enabled:{get(){return e.enabled}},destroy:{get(){return e.destroy}},log:{get(){return e.log},set(n){e.log=n}}}),t}Mn.default=eE;var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.default={RedisCloudFixed:{ca:`-----BEGIN CERTIFICATE-----
MIIDTzCCAjegAwIBAgIJAKSVpiDswLcwMA0GCSqGSIb3DQEBBQUAMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTAeFw0xMzEwMDExMjE0NTVaFw0yMzA5MjkxMjE0NTVaMD4xFjAUBgNV
BAoMDUdhcmFudGlhIERhdGExJDAiBgNVBAMMG1NTTCBDZXJ0aWZpY2F0aW9uIEF1
dGhvcml0eTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALZqkh/DczWP
JnxnHLQ7QL0T4B4CDKWBKCcisriGbA6ZePWVNo4hfKQC6JrzfR+081NeD6VcWUiz
rmd+jtPhIY4c+WVQYm5PKaN6DT1imYdxQw7aqO5j2KUCEh/cznpLxeSHoTxlR34E
QwF28Wl3eg2vc5ct8LjU3eozWVk3gb7alx9mSA2SgmuX5lEQawl++rSjsBStemY2
BDwOpAMXIrdEyP/cVn8mkvi/BDs5M5G+09j0gfhyCzRWMQ7Hn71u1eolRxwVxgi3
TMn+/vTaFSqxKjgck6zuAYjBRPaHe7qLxHNr1So/Mc9nPy+3wHebFwbIcnUojwbp
4nctkWbjb2cCAwEAAaNQME4wHQYDVR0OBBYEFP1whtcrydmW3ZJeuSoKZIKjze3w
MB8GA1UdIwQYMBaAFP1whtcrydmW3ZJeuSoKZIKjze3wMAwGA1UdEwQFMAMBAf8w
DQYJKoZIhvcNAQEFBQADggEBAG2erXhwRAa7+ZOBs0B6X57Hwyd1R4kfmXcs0rta
lbPpvgULSiB+TCbf3EbhJnHGyvdCY1tvlffLjdA7HJ0PCOn+YYLBA0pTU/dyvrN6
Su8NuS5yubnt9mb13nDGYo1rnt0YRfxN+8DM3fXIVr038A30UlPX2Ou1ExFJT0MZ
uFKY6ZvLdI6/1cbgmguMlAhM+DhKyV6Sr5699LM3zqeI816pZmlREETYkGr91q7k
BpXJu/dtHaGxg1ZGu6w/PCsYGUcECWENYD4VQPd8N32JjOfu6vEgoEAwfPP+3oGp
Z4m3ewACcWOAenqflb+cQYC4PsF7qbXDmRaWrbKntOlZ3n0=
-----END CERTIFICATE-----
`},RedisCloudFlexible:{ca:`-----BEGIN CERTIFICATE-----
MIIGMTCCBBmgAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwajELMAkGA1UEBhMCVVMx
CzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJzMS0w
KwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcN
MTgwMjI1MTUzNzM3WhcNMjgwMjIzMTUzNzM3WjBfMQswCQYDVQQGEwJVUzELMAkG
A1UECAwCQ0ExEjAQBgNVBAoMCVJlZGlzTGFiczEvMC0GA1UEAwwmUkNQIEludGVy
bWVkaWF0ZSBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEBAQUA
A4ICDwAwggIKAoICAQDf9dqbxc8Bq7Ctq9rWcxrGNKKHivqLAFpPq02yLPx6fsOv
Tq7GsDChAYBBc4v7Y2Ap9RD5Vs3dIhEANcnolf27QwrG9RMnnvzk8pCvp1o6zSU4
VuOE1W66/O1/7e2rVxyrnTcP7UgK43zNIXu7+tiAqWsO92uSnuMoGPGpeaUm1jym
hjWKtkAwDFSqvHY+XL5qDVBEjeUe+WHkYUg40cAXjusAqgm2hZt29c2wnVrxW25W
P0meNlzHGFdA2AC5z54iRiqj57dTfBTkHoBczQxcyw6hhzxZQ4e5I5zOKjXXEhZN
r0tA3YC14CTabKRus/JmZieyZzRgEy2oti64tmLYTqSlAD78pRL40VNoaSYetXLw
hhNsXCHgWaY6d5bLOc/aIQMAV5oLvZQKvuXAF1IDmhPA+bZbpWipp0zagf1P1H3s
UzsMdn2KM0ejzgotbtNlj5TcrVwpmvE3ktvUAuA+hi3FkVx1US+2Gsp5x4YOzJ7u
P1WPk6ShF0JgnJH2ILdj6kttTWwFzH17keSFICWDfH/+kM+k7Y1v3EXMQXE7y0T9
MjvJskz6d/nv+sQhY04xt64xFMGTnZjlJMzfQNi7zWFLTZnDD0lPowq7l3YiPoTT
t5Xky83lu0KZsZBo0WlWaDG00gLVdtRgVbcuSWxpi5BdLb1kRab66JptWjxwXQID
AQABo4HrMIHoMDoGA1UdHwQzMDEwL6AtoCuGKWh0dHBzOi8vcmwtY2Etc2VydmVy
LnJlZGlzbGFicy5jb20vdjEvY3JsMEYGCCsGAQUFBwEBBDowODA2BggrBgEFBQcw
AYYqaHR0cHM6Ly9ybC1jYS1zZXJ2ZXIucmVkaXNsYWJzLmNvbS92MS9vY3NwMB0G
A1UdDgQWBBQHar5OKvQUpP2qWt6mckzToeCOHDAfBgNVHSMEGDAWgBQi42wH6hM4
L2sujEvLM0/u8lRXTzASBgNVHRMBAf8ECDAGAQH/AgEAMA4GA1UdDwEB/wQEAwIB
hjANBgkqhkiG9w0BAQsFAAOCAgEAirEn/iTsAKyhd+pu2W3Z5NjCko4NPU0EYUbr
AP7+POK2rzjIrJO3nFYQ/LLuC7KCXG+2qwan2SAOGmqWst13Y+WHp44Kae0kaChW
vcYLXXSoGQGC8QuFSNUdaeg3RbMDYFT04dOkqufeWVccoHVxyTSg9eD8LZuHn5jw
7QDLiEECBmIJHk5Eeo2TAZrx4Yx6ufSUX5HeVjlAzqwtAqdt99uCJ/EL8bgpWbe+
XoSpvUv0SEC1I1dCAhCKAvRlIOA6VBcmzg5Am12KzkqTul12/VEFIgzqu0Zy2Jbc
AUPrYVu/+tOGXQaijy7YgwH8P8n3s7ZeUa1VABJHcxrxYduDDJBLZi+MjheUDaZ1
jQRHYevI2tlqeSBqdPKG4zBY5lS0GiAlmuze5oENt0P3XboHoZPHiqcK3VECgTVh
/BkJcuudETSJcZDmQ8YfoKfBzRQNg2sv/hwvUv73Ss51Sco8GEt2lD8uEdib1Q6z
zDT5lXJowSzOD5ZA9OGDjnSRL+2riNtKWKEqvtEG3VBJoBzu9GoxbAc7wIZLxmli
iF5a/Zf5X+UXD3s4TMmy6C4QZJpAA2egsSQCnraWO2ULhh7iXMysSkF/nzVfZn43
iqpaB8++9a37hWq14ZmOv0TJIDz//b2+KC4VFXWQ5W5QC6whsjT+OlG4p5ZYG0jo
616pxqo=
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIFujCCA6KgAwIBAgIJAJ1aTT1lu2ScMA0GCSqGSIb3DQEBCwUAMGoxCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTELMAkGA1UEBwwCQ0ExEjAQBgNVBAoMCVJlZGlz
TGFiczEtMCsGA1UEAwwkUmVkaXNMYWJzIFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MB4XDTE4MDIyNTE1MjA0MloXDTM4MDIyMDE1MjA0MlowajELMAkGA1UEBhMC
VVMxCzAJBgNVBAgMAkNBMQswCQYDVQQHDAJDQTESMBAGA1UECgwJUmVkaXNMYWJz
MS0wKwYDVQQDDCRSZWRpc0xhYnMgUm9vdCBDZXJ0aWZpY2F0ZSBBdXRob3JpdHkw
ggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDLEjXy7YrbN5Waau5cd6g1
G5C2tMmeTpZ0duFAPxNU4oE3RHS5gGiok346fUXuUxbZ6QkuzeN2/2Z+RmRcJhQY
Dm0ZgdG4x59An1TJfnzKKoWj8ISmoHS/TGNBdFzXV7FYNLBuqZouqePI6ReC6Qhl
pp45huV32Q3a6IDrrvx7Wo5ZczEQeFNbCeCOQYNDdTmCyEkHqc2AGo8eoIlSTutT
ULOC7R5gzJVTS0e1hesQ7jmqHjbO+VQS1NAL4/5K6cuTEqUl+XhVhPdLWBXJQ5ag
54qhX4v+ojLzeU1R/Vc6NjMvVtptWY6JihpgplprN0Yh2556ewcXMeturcKgXfGJ
xeYzsjzXerEjrVocX5V8BNrg64NlifzTMKNOOv4fVZszq1SIHR8F9ROrqiOdh8iC
JpUbLpXH9hWCSEO6VRMB2xJoKu3cgl63kF30s77x7wLFMEHiwsQRKxooE1UhgS9K
2sO4TlQ1eWUvFvHSTVDQDlGQ6zu4qjbOpb3Q8bQwoK+ai2alkXVR4Ltxe9QlgYK3
StsnPhruzZGA0wbXdpw0bnM+YdlEm5ffSTpNIfgHeaa7Dtb801FtA71ZlH7A6TaI
SIQuUST9EKmv7xrJyx0W1pGoPOLw5T029aTjnICSLdtV9bLwysrLhIYG5bnPq78B
cS+jZHFGzD7PUVGQD01nOQIDAQABo2MwYTAdBgNVHQ4EFgQUIuNsB+oTOC9rLoxL
yzNP7vJUV08wHwYDVR0jBBgwFoAUIuNsB+oTOC9rLoxLyzNP7vJUV08wDwYDVR0T
AQH/BAUwAwEB/zAOBgNVHQ8BAf8EBAMCAYYwDQYJKoZIhvcNAQELBQADggIBAHfg
z5pMNUAKdMzK1aS1EDdK9yKz4qicILz5czSLj1mC7HKDRy8cVADUxEICis++CsCu
rYOvyCVergHQLREcxPq4rc5Nq1uj6J6649NEeh4WazOOjL4ZfQ1jVznMbGy+fJm3
3Hoelv6jWRG9iqeJZja7/1s6YC6bWymI/OY1e4wUKeNHAo+Vger7MlHV+RuabaX+
hSJ8bJAM59NCM7AgMTQpJCncrcdLeceYniGy5Q/qt2b5mJkQVkIdy4TPGGB+AXDJ
D0q3I/JDRkDUFNFdeW0js7fHdsvCR7O3tJy5zIgEV/o/BCkmJVtuwPYOrw/yOlKj
TY/U7ATAx9VFF6/vYEOMYSmrZlFX+98L6nJtwDqfLB5VTltqZ4H/KBxGE3IRSt9l
FXy40U+LnXzhhW+7VBAvyYX8GEXhHkKU8Gqk1xitrqfBXY74xKgyUSTolFSfFVgj
mcM/X4K45bka+qpkj7Kfv/8D4j6aZekwhN2ly6hhC1SmQ8qjMjpG/mrWOSSHZFmf
ybu9iD2AYHeIOkshIl6xYIa++Q/00/vs46IzAbQyriOi0XxlSMMVtPx0Q3isp+ji
n8Mq9eOuxYOEQ4of8twUkUDd528iwGtEdwf0Q01UyT84S62N8AySl1ZBKXJz6W4F
UhWfa/HQYOAPDdEjNgnVwLI23b8t0TozyCWw7q8h
-----END CERTIFICATE-----
`}};Object.defineProperty(et,"__esModule",{value:!0});const cf=Nn,js=Tr;et.defaults=js.defaults;et.noop=js.noop;et.flatten=js.flatten;const tE=Mn;et.Debug=tE.default;const rE=Ea;function nE(r,e){if(typeof r.equals=="function")return r.equals(e);if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}et.bufferEqual=nE;function lf(r,e){if(r instanceof Buffer)return r.toString(e);if(Array.isArray(r)){const t=r.length,n=Array(t);for(let i=0;i<t;++i)n[i]=r[i]instanceof Buffer&&e==="utf8"?r[i].toString():lf(r[i],e);return n}return r}et.convertBufferToString=lf;function iE(r){if(!r)return null;const e=[],t=r.length;for(let n=0;n<t;++n){const i=r[n];i instanceof Error?e.push([i]):e.push([null,i])}return e}et.wrapMultiResult=iE;function ff(r){const e=parseFloat(r);return!isNaN(r)&&(e|0)===e}et.isInt=ff;function sE(r){const e={},t=r.length;for(let n=1;n<t;n+=2)e[r[n-1]]=r[n];return e}et.packObject=sE;function oE(r,e){let t;const n=function(){t&&(clearTimeout(t),t=null,r.apply(this,arguments))};return t=setTimeout(n,e,new Error("timeout")),n}et.timeout=oE;function aE(r){const e=[],t=Object.keys(r);for(let n=0,i=t.length;n<i;n++)e.push(t[n],r[t[n]]);return e}et.convertObjectToArray=aE;function uE(r){const e=[];let t=0;return r.forEach(function(n,i){e[t]=i,e[t+1]=n,t+=2}),e}et.convertMapToArray=uE;function cE(r){return r===null||typeof r=="undefined"?"":String(r)}et.toArg=cE;function lE(r,e,t){const n=e.split(`
`);let i="",s;for(s=1;s<n.length&&n[s].indexOf(t)!==-1;++s);for(let a=s;a<n.length;++a)i+=`
`+n[a];const o=r.stack.indexOf(`
`);return r.stack=r.stack.slice(0,o)+i,r}et.optimizeErrorStack=lE;function fE(r){if(ff(r))return{port:r};let e=cf.parse(r,!0,!0);!e.slashes&&r[0]!=="/"&&(r="//"+r,e=cf.parse(r,!0,!0));const t=e.query||{},n=t.allowUsernameInURI&&t.allowUsernameInURI!=="false";delete t.allowUsernameInURI;const i={};if(e.auth){const s=e.auth.indexOf(":");n&&(i.username=s===-1?e.auth:e.auth.slice(0,s)),i.password=s===-1?"":e.auth.slice(s+1)}return e.pathname&&(e.protocol==="redis:"||e.protocol==="rediss:"?e.pathname.length>1&&(i.db=e.pathname.slice(1)):i.path=e.pathname),e.host&&(i.host=e.hostname),e.port&&(i.port=e.port),js.defaults(i,t),i}et.parseURL=fE;function hE(r){let e=r==null?void 0:r.tls;typeof e=="string"&&(e={profile:e});const t=rE.default[e==null?void 0:e.profile];return t&&(e=Object.assign({},t,e),delete e.profile,r=Object.assign({},r,{tls:e})),r}et.resolveTLSProfile=hE;function dE(r,e=0){const t=r.length;if(!(e>=t))return r[e+Math.floor(Math.random()*(t-e))]}et.sample=dE;function pE(r){let e=r.length;for(;e>0;){const t=Math.floor(Math.random()*e);e--,[r[e],r[t]]=[r[t],r[e]]}return r}et.shuffle=pE;et.CONNECTION_CLOSED_ERROR_MSG="Connection is closed.";function yE(r,e){const t=new Map;return r.forEach((n,i)=>{t.set(n,e[i])}),t}et.zipMap=yE;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});function mE(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}fr.isPromise=mE;let hf=Promise;function gE(){return hf}fr.get=gE;function vE(r){if(typeof r!="function")throw new Error(`Provided Promise must be a function, got ${r}`);hf=r}fr.set=vE;Object.defineProperty(Ar,"__esModule",{value:!0});const df=An,bE=Ni.exports,_E=Ir,hn=et,wE=Tr,SE=fr;class or{constructor(e,t=[],n={},i){this.name=e,this.transformed=!1,this.isCustomCommand=!1,this.inTransaction=!1,this.isResolved=!1,this.replyEncoding=n.replyEncoding,this.errorStack=n.errorStack,this.args=wE.flatten(t),this.callback=i,this.initPromise(),n.keyPrefix&&this._iterateKeys(s=>n.keyPrefix+s),n.readOnly&&(this.isReadOnly=!0)}static getFlagMap(){return this.flagMap||(this.flagMap=Object.keys(or.FLAGS).reduce((e,t)=>(e[t]={},or.FLAGS[t].forEach(n=>{e[t][n]=!0}),e),{})),this.flagMap}static checkFlag(e,t){return!!this.getFlagMap()[e][t]}static setArgumentTransformer(e,t){this._transformer.argument[e]=t}static setReplyTransformer(e,t){this._transformer.reply[e]=t}initPromise(){const e=SE.get(),t=new e((n,i)=>{if(!this.transformed){this.transformed=!0;const s=or._transformer.argument[this.name];s&&(this.args=s(this.args)),this.stringifyArguments()}this.resolve=this._convertValue(n),this.errorStack?this.reject=s=>{i(hn.optimizeErrorStack(s,this.errorStack.stack,__dirname))}:this.reject=i});this.promise=_E.default(t,this.callback)}getSlot(){if(typeof this.slot=="undefined"){const e=this.getKeys()[0];this.slot=e==null?null:bE(e)}return this.slot}getKeys(){return this._iterateKeys()}_iterateKeys(e=t=>t){if(typeof this.keys=="undefined"&&(this.keys=[],df.exists(this.name))){const t=df.getKeyIndexes(this.name,this.args);for(const n of t)this.args[n]=e(this.args[n]),this.keys.push(this.args[n])}return this.keys}toWritable(){let e=!1;for(const i of this.args)if(i instanceof Buffer){e=!0;break}let t;const n="*"+(this.args.length+1)+`\r
$`+Buffer.byteLength(this.name)+`\r
`+this.name+`\r
`;if(e){const i=new kE;i.push(n);for(const s of this.args)s instanceof Buffer?s.length===0?i.push(`$0\r
\r
`):(i.push("$"+s.length+`\r
`),i.push(s),i.push(`\r
`)):i.push("$"+Buffer.byteLength(s)+`\r
`+s+`\r
`);t=i.toBuffer()}else{t=n;for(const i of this.args)t+="$"+Buffer.byteLength(i)+`\r
`+i+`\r
`}return t}stringifyArguments(){for(let e=0;e<this.args.length;++e){const t=this.args[e];!(t instanceof Buffer)&&typeof t!="string"&&(this.args[e]=hn.toArg(t))}}_convertValue(e){return t=>{try{const n=this._commandTimeoutTimer;n&&(clearTimeout(n),delete this._commandTimeoutTimer),e(this.transformReply(t)),this.isResolved=!0}catch(n){this.reject(n)}return this.promise}}transformReply(e){this.replyEncoding&&(e=hn.convertBufferToString(e,this.replyEncoding));const t=or._transformer.reply[this.name];return t&&(e=t(e)),e}setTimeout(e){this._commandTimeoutTimer||(this._commandTimeoutTimer=setTimeout(()=>{this.isResolved||this.reject(new Error("Command timed out"))},e))}}Ar.default=or;or.FLAGS={VALID_IN_SUBSCRIBER_MODE:["subscribe","psubscribe","unsubscribe","punsubscribe","ping","quit"],VALID_IN_MONITOR_MODE:["monitor","auth"],ENTER_SUBSCRIBER_MODE:["subscribe","psubscribe"],EXIT_SUBSCRIBER_MODE:["unsubscribe","punsubscribe"],WILL_DISCONNECT:["quit"]};or._transformer={argument:{},reply:{}};const pf=function(r){if(r.length===1){if(typeof Map!="undefined"&&r[0]instanceof Map)return hn.convertMapToArray(r[0]);if(typeof r[0]=="object"&&r[0]!==null)return hn.convertObjectToArray(r[0])}return r},yf=function(r){if(r.length===2){if(typeof Map!="undefined"&&r[1]instanceof Map)return[r[0]].concat(hn.convertMapToArray(r[1]));if(typeof r[1]=="object"&&r[1]!==null)return[r[0]].concat(hn.convertObjectToArray(r[1]))}return r};or.setArgumentTransformer("mset",pf);or.setArgumentTransformer("msetnx",pf);or.setArgumentTransformer("hset",yf);or.setArgumentTransformer("hmset",yf);or.setReplyTransformer("hgetall",function(r){if(Array.isArray(r)){const e={};for(let t=0;t<r.length;t+=2){const n=r[t],i=r[t+1];n in e?Object.defineProperty(e,n,{value:i,configurable:!0,enumerable:!0,writable:!0}):e[n]=i}return e}return r});class kE{constructor(){this.length=0,this.items=[]}push(e){this.length+=Buffer.byteLength(e),this.items.push(e)}toBuffer(){const e=Buffer.allocUnsafe(this.length);let t=0;for(const n of this.items){const i=Buffer.byteLength(n);Buffer.isBuffer(n)?n.copy(e,t):e.write(n,t,i),t+=i}return e}}var Fi={},xa={},EE={},xE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:EE}),Gr=Mc(xE);Object.defineProperty(xa,"__esModule",{value:!0});const CE=Gr,OE=fr,mf=Ar,gf=Ir;class TE{constructor(e,t=null,n="",i=!1){this.lua=e,this.numberOfKeys=t,this.keyPrefix=n,this.readOnly=i,this.sha=CE.createHash("sha1").update(e).digest("hex")}execute(e,t,n,i){typeof this.numberOfKeys=="number"&&t.unshift(this.numberOfKeys),this.keyPrefix&&(n.keyPrefix=this.keyPrefix),this.readOnly&&(n.readOnly=!0);const s=new mf.default("evalsha",[this.sha].concat(t),n);s.isCustomCommand=!0;const o=e.sendCommand(s);return OE.isPromise(o)?gf.default(o.catch(a=>{if(a.toString().indexOf("NOSCRIPT")===-1)throw a;return e.sendCommand(new mf.default("eval",[this.lua].concat(t),n))}),i):(gf.default(s.promise,i),o)}}xa.default=TE;var vf={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=fr,t=Tr,n=Ni.exports,i=Ir;r.kExec=Symbol("exec"),r.kCallbacks=Symbol("callbacks"),r.notAllowedAutoPipelineCommands=["auth","info","script","quit","cluster","pipeline","multi","subscribe","psubscribe","unsubscribe","unpsubscribe"];function s(c,f){if(c._runningAutoPipelines.has(f)||!c._autoPipelines.has(f))return;c._runningAutoPipelines.add(f);const l=c._autoPipelines.get(f);c._autoPipelines.delete(f);const h=l[r.kCallbacks];l[r.kCallbacks]=null,l.exec(function(m,b){if(c._runningAutoPipelines.delete(f),m)for(let M=0;M<h.length;M++)process.nextTick(h[M],m);else for(let M=0;M<h.length;M++)process.nextTick(h[M],...b[M]);c._autoPipelines.has(f)&&s(c,f)})}function o(c,f,l){return f&&c.options.enableAutoPipelining&&!c.isPipeline&&!r.notAllowedAutoPipelineCommands.includes(l)&&!c.options.autoPipeliningIgnoredCommands.includes(l)}r.shouldUseAutoPipelining=o;function a(c){for(let f=0;f<c.length;f++){const l=c[f];if(typeof l=="string")return l;if(Array.isArray(l)||t.isArguments(l)){if(l.length===0)continue;return l[0]}const h=t.flatten([l]);if(h.length>0)return h[0]}}r.getFirstValueInFlattenedArray=a;function u(c,f,l,h,m){const b=e.get();if(c.isCluster&&!c.slots.length)return c.status==="wait"&&c.connect().catch(t.noop),i.default(new b(function(q,F){c.delayUntilReady(R=>{if(R){F(R);return}u(c,f,l,h,null).then(q,F)})}),m);const M=c.options.keyPrefix||"",I=c.isCluster?c.slots[n(`${M}${a(h)}`)].join(","):"main";if(!c._autoPipelines.has(I)){const q=c.pipeline();q[r.kExec]=!1,q[r.kCallbacks]=[],c._autoPipelines.set(I,q)}const T=c._autoPipelines.get(I);T[r.kExec]||(T[r.kExec]=!0,setImmediate(s,c,I));const B=new b(function(q,F){T[r.kCallbacks].push(function(R,se){if(R){F(R);return}q(se)}),T[f](...h)});return i.default(B,m)}r.executeWithAutoPipelining=u})(vf);Object.defineProperty(Fi,"__esModule",{value:!0});const AE=Tr,IE=Ar,NE=xa,bf=fr,_f=Ir,Ls=vf,wf='*Buffer methods are not available because "dropBufferSupport" option is enabled.Refer to https://github.com/luin/ioredis/wiki/Improve-Performance for more details.';function hr(){this.options=AE.defaults({},this.options||{},{showFriendlyErrorStack:!1}),this.scriptsSet={},this.addedBuiltinSet=new Set}Fi.default=hr;const Ca=An.list.filter(function(r){return r!=="monitor"});Ca.push("sentinel");hr.prototype.getBuiltinCommands=function(){return Ca.slice(0)};hr.prototype.createBuiltinCommand=function(r){return{string:Vr(null,r,"utf8"),buffer:Vr(null,r,null)}};hr.prototype.addBuiltinCommand=function(r){this.addedBuiltinSet.add(r),this[r]=Vr(r,r,"utf8"),this[r+"Buffer"]=Vr(r+"Buffer",r,null)};Ca.forEach(function(r){hr.prototype[r]=Vr(r,r,"utf8"),hr.prototype[r+"Buffer"]=Vr(r+"Buffer",r,null)});hr.prototype.call=Vr("call","utf8");hr.prototype.callBuffer=Vr("callBuffer",null);hr.prototype.send_command=hr.prototype.call;hr.prototype.defineCommand=function(r,e){const t=new NE.default(e.lua,e.numberOfKeys,this.options.keyPrefix,e.readOnly);this.scriptsSet[r]=t,this[r]=Sf(r,r,t,"utf8"),this[r+"Buffer"]=Sf(r+"Buffer",r,t,null)};hr.prototype.sendCommand=function(){};function Vr(r,e,t){return typeof t=="undefined"&&(t=e,e=null),function(...n){const i=e||n.shift();let s=n[n.length-1];typeof s=="function"?n.pop():s=void 0;const o={errorStack:this.options.showFriendlyErrorStack?new Error:void 0,keyPrefix:this.options.keyPrefix,replyEncoding:t};return this.options.dropBufferSupport&&!t?_f.default(bf.get().reject(new Error(wf)),s):Ls.shouldUseAutoPipelining(this,r,i)?Ls.executeWithAutoPipelining(this,r,i,n,s):this.sendCommand(new IE.default(i,n,o,s))}}function Sf(r,e,t,n){return function(){let i=arguments.length;const s=i-1;let o=arguments[s];typeof o!="function"?o=void 0:i=s;const a=new Array(i);for(let c=0;c<i;c++)a[c]=arguments[c];let u;if(this.options.dropBufferSupport){if(!n)return _f.default(bf.get().reject(new Error(wf)),o);u={replyEncoding:null}}else u={replyEncoding:n};return this.options.showFriendlyErrorStack&&(u.errorStack=new Error),Ls.shouldUseAutoPipelining(this,r,e)?Ls.executeWithAutoPipelining(this,r,e,a,o):t.execute(this,a,u,o)}}var kf={},Oa={exports:{}};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Ef=Object.getOwnPropertySymbols,RE=Object.prototype.hasOwnProperty,ME=Object.prototype.propertyIsEnumerable;function DE(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}function FE(){try{if(!Object.assign)return!1;var r=new String("abc");if(r[5]="de",Object.getOwnPropertyNames(r)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var PE=FE()?Object.assign:function(r,e){for(var t,n=DE(r),i,s=1;s<arguments.length;s++){t=Object(arguments[s]);for(var o in t)RE.call(t,o)&&(n[o]=t[o]);if(Ef){i=Ef(t);for(var a=0;a<i.length;a++)ME.call(t,i[a])&&(n[i[a]]=t[i[a]])}}return n},xf={},jE=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},Ta={exports:{}};typeof Object.create=="function"?Ta.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:Ta.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};(function(r){var e=/%[sdj%]/g;r.format=function(w){if(!q(w)){for(var _=[],O=0;O<arguments.length;O++)_.push(i(arguments[O]));return _.join(" ")}for(var O=1,j=arguments,G=j.length,Y=String(w).replace(e,function(oe){if(oe==="%%")return"%";if(O>=G)return oe;switch(oe){case"%s":return String(j[O++]);case"%d":return Number(j[O++]);case"%j":try{return JSON.stringify(j[O++])}catch{return"[Circular]"}default:return oe}}),te=j[O];O<G;te=j[++O])I(te)||!X(te)?Y+=" "+te:Y+=" "+i(te);return Y},r.deprecate=function(w,_){if(R(He.process))return function(){return r.deprecate(w,_).apply(this,arguments)};if(process.noDeprecation===!0)return w;var O=!1;function j(){if(!O){if(process.throwDeprecation)throw new Error(_);process.traceDeprecation?console.trace(_):console.error(_),O=!0}return w.apply(this,arguments)}return j};var t={},n;r.debuglog=function(w){if(R(n)&&(n=""),w=w.toUpperCase(),!t[w])if(new RegExp("\\b"+w+"\\b","i").test(n)){var _=process.pid;t[w]=function(){var O=r.format.apply(r,arguments);console.error("%s %d: %s",w,_,O)}}else t[w]=function(){};return t[w]};function i(w,_){var O={seen:[],stylize:o};return arguments.length>=3&&(O.depth=arguments[2]),arguments.length>=4&&(O.colors=arguments[3]),M(_)?O.showHidden=_:_&&r._extend(O,_),R(O.showHidden)&&(O.showHidden=!1),R(O.depth)&&(O.depth=2),R(O.colors)&&(O.colors=!1),R(O.customInspect)&&(O.customInspect=!0),O.colors&&(O.stylize=s),u(O,w,O.depth)}r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function s(w,_){var O=i.styles[_];return O?"["+i.colors[O][0]+"m"+w+"["+i.colors[O][1]+"m":w}function o(w,_){return w}function a(w){var _={};return w.forEach(function(O,j){_[O]=!0}),_}function u(w,_,O){if(w.customInspect&&_&&ue(_.inspect)&&_.inspect!==r.inspect&&!(_.constructor&&_.constructor.prototype===_)){var j=_.inspect(O,w);return q(j)||(j=u(w,j,O)),j}var G=c(w,_);if(G)return G;var Y=Object.keys(_),te=a(Y);if(w.showHidden&&(Y=Object.getOwnPropertyNames(_)),me(_)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return f(_);if(Y.length===0){if(ue(_)){var oe=_.name?": "+_.name:"";return w.stylize("[Function"+oe+"]","special")}if(se(_))return w.stylize(RegExp.prototype.toString.call(_),"regexp");if(ee(_))return w.stylize(Date.prototype.toString.call(_),"date");if(me(_))return f(_)}var ge="",Oe=!1,Re=["{","}"];if(b(_)&&(Oe=!0,Re=["[","]"]),ue(_)){var ne=_.name?": "+_.name:"";ge=" [Function"+ne+"]"}if(se(_)&&(ge=" "+RegExp.prototype.toString.call(_)),ee(_)&&(ge=" "+Date.prototype.toUTCString.call(_)),me(_)&&(ge=" "+f(_)),Y.length===0&&(!Oe||_.length==0))return Re[0]+ge+Re[1];if(O<0)return se(_)?w.stylize(RegExp.prototype.toString.call(_),"regexp"):w.stylize("[Object]","special");w.seen.push(_);var Ee;return Oe?Ee=l(w,_,O,te,Y):Ee=Y.map(function(Be){return h(w,_,O,te,Be,Oe)}),w.seen.pop(),m(Ee,ge,Re)}function c(w,_){if(R(_))return w.stylize("undefined","undefined");if(q(_)){var O="'"+JSON.stringify(_).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return w.stylize(O,"string")}if(B(_))return w.stylize(""+_,"number");if(M(_))return w.stylize(""+_,"boolean");if(I(_))return w.stylize("null","null")}function f(w){return"["+Error.prototype.toString.call(w)+"]"}function l(w,_,O,j,G){for(var Y=[],te=0,oe=_.length;te<oe;++te)H(_,String(te))?Y.push(h(w,_,O,j,String(te),!0)):Y.push("");return G.forEach(function(ge){ge.match(/^\d+$/)||Y.push(h(w,_,O,j,ge,!0))}),Y}function h(w,_,O,j,G,Y){var te,oe,ge;if(ge=Object.getOwnPropertyDescriptor(_,G)||{value:_[G]},ge.get?ge.set?oe=w.stylize("[Getter/Setter]","special"):oe=w.stylize("[Getter]","special"):ge.set&&(oe=w.stylize("[Setter]","special")),H(j,G)||(te="["+G+"]"),oe||(w.seen.indexOf(ge.value)<0?(I(O)?oe=u(w,ge.value,null):oe=u(w,ge.value,O-1),oe.indexOf(`
`)>-1&&(Y?oe=oe.split(`
`).map(function(Oe){return"  "+Oe}).join(`
`).substr(2):oe=`
`+oe.split(`
`).map(function(Oe){return"   "+Oe}).join(`
`))):oe=w.stylize("[Circular]","special")),R(te)){if(Y&&G.match(/^\d+$/))return oe;te=JSON.stringify(""+G),te.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.substr(1,te.length-2),te=w.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=w.stylize(te,"string"))}return te+": "+oe}function m(w,_,O){var j=w.reduce(function(G,Y){return Y.indexOf(`
`)>=0,G+Y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return j>60?O[0]+(_===""?"":_+`
 `)+" "+w.join(`,
  `)+" "+O[1]:O[0]+_+" "+w.join(", ")+" "+O[1]}function b(w){return Array.isArray(w)}r.isArray=b;function M(w){return typeof w=="boolean"}r.isBoolean=M;function I(w){return w===null}r.isNull=I;function T(w){return w==null}r.isNullOrUndefined=T;function B(w){return typeof w=="number"}r.isNumber=B;function q(w){return typeof w=="string"}r.isString=q;function F(w){return typeof w=="symbol"}r.isSymbol=F;function R(w){return w===void 0}r.isUndefined=R;function se(w){return X(w)&&W(w)==="[object RegExp]"}r.isRegExp=se;function X(w){return typeof w=="object"&&w!==null}r.isObject=X;function ee(w){return X(w)&&W(w)==="[object Date]"}r.isDate=ee;function me(w){return X(w)&&(W(w)==="[object Error]"||w instanceof Error)}r.isError=me;function ue(w){return typeof w=="function"}r.isFunction=ue;function Se(w){return w===null||typeof w=="boolean"||typeof w=="number"||typeof w=="string"||typeof w=="symbol"||typeof w=="undefined"}r.isPrimitive=Se,r.isBuffer=jE;function W(w){return Object.prototype.toString.call(w)}function Z(w){return w<10?"0"+w.toString(10):w.toString(10)}var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var w=new Date,_=[Z(w.getHours()),Z(w.getMinutes()),Z(w.getSeconds())].join(":");return[w.getDate(),C[w.getMonth()],_].join(" ")}r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=Ta.exports,r._extend=function(w,_){if(!_||!X(_))return w;for(var O=Object.keys(_),j=O.length;j--;)w[O[j]]=_[O[j]];return w};function H(w,_){return Object.prototype.hasOwnProperty.call(w,_)}})(xf);var LE=PE;/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function Cf(r,e){if(r===e)return 0;for(var t=r.length,n=e.length,i=0,s=Math.min(t,n);i<s;++i)if(r[i]!==e[i]){t=r[i],n=e[i];break}return t<n?-1:n<t?1:0}function Pi(r){return He.Buffer&&typeof He.Buffer.isBuffer=="function"?He.Buffer.isBuffer(r):!!(r!=null&&r._isBuffer)}var mr=xf,BE=Object.prototype.hasOwnProperty,Of=Array.prototype.slice,Tf=function(){return function(){}.name==="foo"}();function Af(r){return Object.prototype.toString.call(r)}function If(r){return Pi(r)||typeof He.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r?!!(r instanceof DataView||r.buffer&&r.buffer instanceof ArrayBuffer):!1}var at=Oa.exports=Df,UE=/\s*function\s+([^\(\s]*)\s*/;function Nf(r){if(!!mr.isFunction(r)){if(Tf)return r.name;var e=r.toString(),t=e.match(UE);return t&&t[1]}}at.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=qE(this),this.generatedMessage=!0);var t=e.stackStartFunction||nr;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var i=n.stack,s=Nf(t),o=i.indexOf(`
`+s);if(o>=0){var a=i.indexOf(`
`,o+1);i=i.substring(a+1)}this.stack=i}}};mr.inherits(at.AssertionError,Error);function Rf(r,e){return typeof r=="string"?r.length<e?r:r.slice(0,e):r}function Mf(r){if(Tf||!mr.isFunction(r))return mr.inspect(r);var e=Nf(r),t=e?": "+e:"";return"[Function"+t+"]"}function qE(r){return Rf(Mf(r.actual),128)+" "+r.operator+" "+Rf(Mf(r.expected),128)}function nr(r,e,t,n,i){throw new at.AssertionError({message:t,actual:r,expected:e,operator:n,stackStartFunction:i})}at.fail=nr;function Df(r,e){r||nr(r,!0,e,"==",at.ok)}at.ok=Df;at.equal=function(e,t,n){e!=t&&nr(e,t,n,"==",at.equal)};at.notEqual=function(e,t,n){e==t&&nr(e,t,n,"!=",at.notEqual)};at.deepEqual=function(e,t,n){jn(e,t,!1)||nr(e,t,n,"deepEqual",at.deepEqual)};at.deepStrictEqual=function(e,t,n){jn(e,t,!0)||nr(e,t,n,"deepStrictEqual",at.deepStrictEqual)};function jn(r,e,t,n){if(r===e)return!0;if(Pi(r)&&Pi(e))return Cf(r,e)===0;if(mr.isDate(r)&&mr.isDate(e))return r.getTime()===e.getTime();if(mr.isRegExp(r)&&mr.isRegExp(e))return r.source===e.source&&r.global===e.global&&r.multiline===e.multiline&&r.lastIndex===e.lastIndex&&r.ignoreCase===e.ignoreCase;if((r===null||typeof r!="object")&&(e===null||typeof e!="object"))return t?r===e:r==e;if(If(r)&&If(e)&&Af(r)===Af(e)&&!(r instanceof Float32Array||r instanceof Float64Array))return Cf(new Uint8Array(r.buffer),new Uint8Array(e.buffer))===0;if(Pi(r)!==Pi(e))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(r);return i!==-1&&i===n.expected.indexOf(e)?!0:(n.actual.push(r),n.expected.push(e),HE(r,e,t,n))}function Ff(r){return Object.prototype.toString.call(r)=="[object Arguments]"}function HE(r,e,t,n){if(r==null||e===null||e===void 0)return!1;if(mr.isPrimitive(r)||mr.isPrimitive(e))return r===e;if(t&&Object.getPrototypeOf(r)!==Object.getPrototypeOf(e))return!1;var i=Ff(r),s=Ff(e);if(i&&!s||!i&&s)return!1;if(i)return r=Of.call(r),e=Of.call(e),jn(r,e,t);var o=Uf(r),a=Uf(e),u,c;if(o.length!==a.length)return!1;for(o.sort(),a.sort(),c=o.length-1;c>=0;c--)if(o[c]!==a[c])return!1;for(c=o.length-1;c>=0;c--)if(u=o[c],!jn(r[u],e[u],t,n))return!1;return!0}at.notDeepEqual=function(e,t,n){jn(e,t,!1)&&nr(e,t,n,"notDeepEqual",at.notDeepEqual)};at.notDeepStrictEqual=Pf;function Pf(r,e,t){jn(r,e,!0)&&nr(r,e,t,"notDeepStrictEqual",Pf)}at.strictEqual=function(e,t,n){e!==t&&nr(e,t,n,"===",at.strictEqual)};at.notStrictEqual=function(e,t,n){e===t&&nr(e,t,n,"!==",at.notStrictEqual)};function jf(r,e){if(!r||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(r);try{if(r instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},r)===!0}function zE(r){var e;try{r()}catch(t){e=t}return e}function Lf(r,e,t,n){var i;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof t=="string"&&(n=t,t=null),i=zE(e),n=(t&&t.name?" ("+t.name+").":".")+(n?" "+n:"."),r&&!i&&nr(i,t,"Missing expected exception"+n);var s=typeof n=="string",o=!r&&mr.isError(i),a=!r&&i&&!t;if((o&&s&&jf(i,t)||a)&&nr(i,t,"Got unwanted exception"+n),r&&i&&t&&!jf(i,t)||!r&&i)throw i}at.throws=function(r,e,t){Lf(!0,r,e,t)};at.doesNotThrow=function(r,e,t){Lf(!1,r,e,t)};at.ifError=function(r){if(r)throw r};function Bf(r,e){r||nr(r,!0,e,"==",Bf)}at.strict=LE(Bf,at,{equal:at.strictEqual,deepEqual:at.deepStrictEqual,notEqual:at.notStrictEqual,notDeepEqual:at.notDeepStrictEqual});at.strict.strict=at.strict;var Uf=Object.keys||function(r){var e=[];for(var t in r)BE.call(r,t)&&e.push(t);return e};const qf=Oa.exports,ji=Fs;function Ln(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ji.inherits(Ln,Error);Object.defineProperty(Ln.prototype,"name",{value:"RedisError",configurable:!0,writable:!0});function Aa(r,e,t){qf(e),qf.strictEqual(typeof t,"number"),Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0});const n=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=n,this.offset=t,this.buffer=e}ji.inherits(Aa,Ln);Object.defineProperty(Aa.prototype,"name",{value:"ParserError",configurable:!0,writable:!0});function Ia(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0});const e=Error.stackTraceLimit;Error.stackTraceLimit=2,Error.captureStackTrace(this,this.constructor),Error.stackTraceLimit=e}ji.inherits(Ia,Ln);Object.defineProperty(Ia.prototype,"name",{value:"ReplyError",configurable:!0,writable:!0});function Bs(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ji.inherits(Bs,Ln);Object.defineProperty(Bs.prototype,"name",{value:"AbortError",configurable:!0,writable:!0});function Na(r){Object.defineProperty(this,"message",{value:r||"",configurable:!0,writable:!0}),Error.captureStackTrace(this,this.constructor)}ji.inherits(Na,Bs);Object.defineProperty(Na.prototype,"name",{value:"InterruptError",configurable:!0,writable:!0});var GE={RedisError:Ln,ParserError:Aa,ReplyError:Ia,AbortError:Bs,InterruptError:Na};const Hf=Oa.exports;class Us extends Error{get name(){return this.constructor.name}}class VE extends Us{constructor(e,t,n){Hf(t),Hf.strictEqual(typeof n,"number");const i=Error.stackTraceLimit;Error.stackTraceLimit=2;super(e);Error.stackTraceLimit=i,this.offset=n,this.buffer=t}get name(){return this.constructor.name}}class QE extends Us{constructor(e){const t=Error.stackTraceLimit;Error.stackTraceLimit=2;super(e);Error.stackTraceLimit=t}get name(){return this.constructor.name}}class zf extends Us{get name(){return this.constructor.name}}class WE extends zf{get name(){return this.constructor.name}}var YE={RedisError:Us,ParserError:VE,ReplyError:QE,AbortError:zf,InterruptError:WE};const JE=process.version.charCodeAt(1)<55&&process.version.charCodeAt(2)===46?GE:YE;var Bn=JE,Ra={},Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});const KE=Bn;class XE extends KE.AbortError{constructor(e){const t=`Reached the max retries per request limit (which is ${e}). Refer to "maxRetriesPerRequest" option for details.`;super(t);Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}Ma.default=XE;Object.defineProperty(Ra,"__esModule",{value:!0});const ZE=Ma;Ra.MaxRetriesPerRequestError=ZE.default;var Da={},Fa={},qs={};qs.byteLength=tx;qs.toByteArray=nx;qs.fromByteArray=ox;var Rr=[],dr=[],$E=typeof Uint8Array!="undefined"?Uint8Array:Array,Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Un=0,ex=Pa.length;Un<ex;++Un)Rr[Un]=Pa[Un],dr[Pa.charCodeAt(Un)]=Un;dr["-".charCodeAt(0)]=62;dr["_".charCodeAt(0)]=63;function Gf(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function tx(r){var e=Gf(r),t=e[0],n=e[1];return(t+n)*3/4-n}function rx(r,e,t){return(e+t)*3/4-t}function nx(r){var e,t=Gf(r),n=t[0],i=t[1],s=new $E(rx(r,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=dr[r.charCodeAt(u)]<<18|dr[r.charCodeAt(u+1)]<<12|dr[r.charCodeAt(u+2)]<<6|dr[r.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=dr[r.charCodeAt(u)]<<2|dr[r.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=dr[r.charCodeAt(u)]<<10|dr[r.charCodeAt(u+1)]<<4|dr[r.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function ix(r){return Rr[r>>18&63]+Rr[r>>12&63]+Rr[r>>6&63]+Rr[r&63]}function sx(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(ix(n));return i.join("")}function ox(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(sx(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(Rr[e>>2]+Rr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Rr[e>>10]+Rr[e>>4&63]+Rr[e<<2&63]+"=")),i.join("")}var ja={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ja.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,l=t?i-1:0,h=t?-1:1,m=r[e+l];for(l+=h,s=m&(1<<-f)-1,m>>=-f,f+=a;f>0;s=s*256+r[e+l],l+=h,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+r[e+l],l+=h,f-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(m?-1:1)*o*Math.pow(2,s-n)};ja.write=function(r,e,t,n,i,s){var o,a,u,c=s*8-i-1,f=(1<<c)-1,l=f>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:s-1,b=n?1:-1,M=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+l>=1?e+=h/u:e+=h*Math.pow(2,1-l),e*u>=2&&(o++,u/=2),o+l>=f?(a=0,o=f):o+l>=1?(a=(e*u-1)*Math.pow(2,i),o=o+l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;r[t+m]=a&255,m+=b,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;r[t+m]=o&255,m+=b,o/=256,c-=8);r[t+m-b]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){var e=qs,t=ja;r.Buffer=o,r.SlowBuffer=I,r.INSPECT_MAX_BYTES=50;var n=2147483647;r.kMaxLength=n,o.TYPED_ARRAY_SUPPORT=i(),!o.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var x=new Uint8Array(1);return x.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},x.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function s(x){if(x>n)throw new RangeError('The value "'+x+'" is invalid for option "size"');var p=new Uint8Array(x);return p.__proto__=o.prototype,p}function o(x,p,y){if(typeof x=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return a(x,p,y)}typeof Symbol!="undefined"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192;function a(x,p,y){if(typeof x=="string")return l(x,p);if(ArrayBuffer.isView(x))return h(x);if(x==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(qe(x,ArrayBuffer)||x&&qe(x.buffer,ArrayBuffer))return m(x,p,y);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var D=x.valueOf&&x.valueOf();if(D!=null&&D!==x)return o.from(D,p,y);var J=b(x);if(J)return J;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return o.from(x[Symbol.toPrimitive]("string"),p,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}o.from=function(x,p,y){return a(x,p,y)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array;function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function c(x,p,y){return u(x),x<=0?s(x):p!==void 0?typeof y=="string"?s(x).fill(p,y):s(x).fill(p):s(x)}o.alloc=function(x,p,y){return c(x,p,y)};function f(x){return u(x),s(x<0?0:M(x)|0)}o.allocUnsafe=function(x){return f(x)},o.allocUnsafeSlow=function(x){return f(x)};function l(x,p){if((typeof p!="string"||p==="")&&(p="utf8"),!o.isEncoding(p))throw new TypeError("Unknown encoding: "+p);var y=T(x,p)|0,D=s(y),J=D.write(x,p);return J!==y&&(D=D.slice(0,J)),D}function h(x){for(var p=x.length<0?0:M(x.length)|0,y=s(p),D=0;D<p;D+=1)y[D]=x[D]&255;return y}function m(x,p,y){if(p<0||x.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<p+(y||0))throw new RangeError('"length" is outside of buffer bounds');var D;return p===void 0&&y===void 0?D=new Uint8Array(x):y===void 0?D=new Uint8Array(x,p):D=new Uint8Array(x,p,y),D.__proto__=o.prototype,D}function b(x){if(o.isBuffer(x)){var p=M(x.length)|0,y=s(p);return y.length===0||x.copy(y,0,0,p),y}if(x.length!==void 0)return typeof x.length!="number"||ot(x.length)?s(0):h(x);if(x.type==="Buffer"&&Array.isArray(x.data))return h(x.data)}function M(x){if(x>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return x|0}function I(x){return+x!=x&&(x=0),o.alloc(+x)}o.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==o.prototype},o.compare=function(p,y){if(qe(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),qe(y,Uint8Array)&&(y=o.from(y,y.offset,y.byteLength)),!o.isBuffer(p)||!o.isBuffer(y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===y)return 0;for(var D=p.length,J=y.length,ce=0,ae=Math.min(D,J);ce<ae;++ce)if(p[ce]!==y[ce]){D=p[ce],J=y[ce];break}return D<J?-1:J<D?1:0},o.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(p,y){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return o.alloc(0);var D;if(y===void 0)for(y=0,D=0;D<p.length;++D)y+=p[D].length;var J=o.allocUnsafe(y),ce=0;for(D=0;D<p.length;++D){var ae=p[D];if(qe(ae,Uint8Array)&&(ae=o.from(ae)),!o.isBuffer(ae))throw new TypeError('"list" argument must be an Array of Buffers');ae.copy(J,ce),ce+=ae.length}return J};function T(x,p){if(o.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||qe(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);var y=x.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&y===0)return 0;for(var J=!1;;)switch(p){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return ne(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Ve(x).length;default:if(J)return D?-1:ne(x).length;p=(""+p).toLowerCase(),J=!0}}o.byteLength=T;function B(x,p,y){var D=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,p>>>=0,y<=p))return"";for(x||(x="utf8");;)switch(x){case"hex":return _(this,p,y);case"utf8":case"utf-8":return Z(this,p,y);case"ascii":return H(this,p,y);case"latin1":case"binary":return w(this,p,y);case"base64":return W(this,p,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,p,y);default:if(D)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),D=!0}}o.prototype._isBuffer=!0;function q(x,p,y){var D=x[p];x[p]=x[y],x[y]=D}o.prototype.swap16=function(){var p=this.length;if(p%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var y=0;y<p;y+=2)q(this,y,y+1);return this},o.prototype.swap32=function(){var p=this.length;if(p%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var y=0;y<p;y+=4)q(this,y,y+3),q(this,y+1,y+2);return this},o.prototype.swap64=function(){var p=this.length;if(p%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var y=0;y<p;y+=8)q(this,y,y+7),q(this,y+1,y+6),q(this,y+2,y+5),q(this,y+3,y+4);return this},o.prototype.toString=function(){var p=this.length;return p===0?"":arguments.length===0?Z(this,0,p):B.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(p){if(!o.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:o.compare(this,p)===0},o.prototype.inspect=function(){var p="",y=r.INSPECT_MAX_BYTES;return p=this.toString("hex",0,y).replace(/(.{2})/g,"$1 ").trim(),this.length>y&&(p+=" ... "),"<Buffer "+p+">"},o.prototype.compare=function(p,y,D,J,ce){if(qe(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),!o.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(y===void 0&&(y=0),D===void 0&&(D=p?p.length:0),J===void 0&&(J=0),ce===void 0&&(ce=this.length),y<0||D>p.length||J<0||ce>this.length)throw new RangeError("out of range index");if(J>=ce&&y>=D)return 0;if(J>=ce)return-1;if(y>=D)return 1;if(y>>>=0,D>>>=0,J>>>=0,ce>>>=0,this===p)return 0;for(var ae=ce-J,je=D-y,ze=Math.min(ae,je),tt=this.slice(J,ce),lt=p.slice(y,D),st=0;st<ze;++st)if(tt[st]!==lt[st]){ae=tt[st],je=lt[st];break}return ae<je?-1:je<ae?1:0};function F(x,p,y,D,J){if(x.length===0)return-1;if(typeof y=="string"?(D=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,ot(y)&&(y=J?0:x.length-1),y<0&&(y=x.length+y),y>=x.length){if(J)return-1;y=x.length-1}else if(y<0)if(J)y=0;else return-1;if(typeof p=="string"&&(p=o.from(p,D)),o.isBuffer(p))return p.length===0?-1:R(x,p,y,D,J);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call(x,p,y):Uint8Array.prototype.lastIndexOf.call(x,p,y):R(x,[p],y,D,J);throw new TypeError("val must be string, number or Buffer")}function R(x,p,y,D,J){var ce=1,ae=x.length,je=p.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(x.length<2||p.length<2)return-1;ce=2,ae/=2,je/=2,y/=2}function ze(Kt,Bt){return ce===1?Kt[Bt]:Kt.readUInt16BE(Bt*ce)}var tt;if(J){var lt=-1;for(tt=y;tt<ae;tt++)if(ze(x,tt)===ze(p,lt===-1?0:tt-lt)){if(lt===-1&&(lt=tt),tt-lt+1===je)return lt*ce}else lt!==-1&&(tt-=tt-lt),lt=-1}else for(y+je>ae&&(y=ae-je),tt=y;tt>=0;tt--){for(var st=!0,Lt=0;Lt<je;Lt++)if(ze(x,tt+Lt)!==ze(p,Lt)){st=!1;break}if(st)return tt}return-1}o.prototype.includes=function(p,y,D){return this.indexOf(p,y,D)!==-1},o.prototype.indexOf=function(p,y,D){return F(this,p,y,D,!0)},o.prototype.lastIndexOf=function(p,y,D){return F(this,p,y,D,!1)};function se(x,p,y,D){y=Number(y)||0;var J=x.length-y;D?(D=Number(D),D>J&&(D=J)):D=J;var ce=p.length;D>ce/2&&(D=ce/2);for(var ae=0;ae<D;++ae){var je=parseInt(p.substr(ae*2,2),16);if(ot(je))return ae;x[y+ae]=je}return ae}function X(x,p,y,D){return Je(ne(p,x.length-y),x,y,D)}function ee(x,p,y,D){return Je(Ee(p),x,y,D)}function me(x,p,y,D){return ee(x,p,y,D)}function ue(x,p,y,D){return Je(Ve(p),x,y,D)}function Se(x,p,y,D){return Je(Be(p,x.length-y),x,y,D)}o.prototype.write=function(p,y,D,J){if(y===void 0)J="utf8",D=this.length,y=0;else if(D===void 0&&typeof y=="string")J=y,D=this.length,y=0;else if(isFinite(y))y=y>>>0,isFinite(D)?(D=D>>>0,J===void 0&&(J="utf8")):(J=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ce=this.length-y;if((D===void 0||D>ce)&&(D=ce),p.length>0&&(D<0||y<0)||y>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");for(var ae=!1;;)switch(J){case"hex":return se(this,p,y,D);case"utf8":case"utf-8":return X(this,p,y,D);case"ascii":return ee(this,p,y,D);case"latin1":case"binary":return me(this,p,y,D);case"base64":return ue(this,p,y,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,p,y,D);default:if(ae)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),ae=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(x,p,y){return p===0&&y===x.length?e.fromByteArray(x):e.fromByteArray(x.slice(p,y))}function Z(x,p,y){y=Math.min(x.length,y);for(var D=[],J=p;J<y;){var ce=x[J],ae=null,je=ce>239?4:ce>223?3:ce>191?2:1;if(J+je<=y){var ze,tt,lt,st;switch(je){case 1:ce<128&&(ae=ce);break;case 2:ze=x[J+1],(ze&192)==128&&(st=(ce&31)<<6|ze&63,st>127&&(ae=st));break;case 3:ze=x[J+1],tt=x[J+2],(ze&192)==128&&(tt&192)==128&&(st=(ce&15)<<12|(ze&63)<<6|tt&63,st>2047&&(st<55296||st>57343)&&(ae=st));break;case 4:ze=x[J+1],tt=x[J+2],lt=x[J+3],(ze&192)==128&&(tt&192)==128&&(lt&192)==128&&(st=(ce&15)<<18|(ze&63)<<12|(tt&63)<<6|lt&63,st>65535&&st<1114112&&(ae=st))}}ae===null?(ae=65533,je=1):ae>65535&&(ae-=65536,D.push(ae>>>10&1023|55296),ae=56320|ae&1023),D.push(ae),J+=je}return A(D)}var C=4096;function A(x){var p=x.length;if(p<=C)return String.fromCharCode.apply(String,x);for(var y="",D=0;D<p;)y+=String.fromCharCode.apply(String,x.slice(D,D+=C));return y}function H(x,p,y){var D="";y=Math.min(x.length,y);for(var J=p;J<y;++J)D+=String.fromCharCode(x[J]&127);return D}function w(x,p,y){var D="";y=Math.min(x.length,y);for(var J=p;J<y;++J)D+=String.fromCharCode(x[J]);return D}function _(x,p,y){var D=x.length;(!p||p<0)&&(p=0),(!y||y<0||y>D)&&(y=D);for(var J="",ce=p;ce<y;++ce)J+=Re(x[ce]);return J}function O(x,p,y){for(var D=x.slice(p,y),J="",ce=0;ce<D.length;ce+=2)J+=String.fromCharCode(D[ce]+D[ce+1]*256);return J}o.prototype.slice=function(p,y){var D=this.length;p=~~p,y=y===void 0?D:~~y,p<0?(p+=D,p<0&&(p=0)):p>D&&(p=D),y<0?(y+=D,y<0&&(y=0)):y>D&&(y=D),y<p&&(y=p);var J=this.subarray(p,y);return J.__proto__=o.prototype,J};function j(x,p,y){if(x%1!=0||x<0)throw new RangeError("offset is not uint");if(x+p>y)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUIntLE=function(p,y,D){p=p>>>0,y=y>>>0,D||j(p,y,this.length);for(var J=this[p],ce=1,ae=0;++ae<y&&(ce*=256);)J+=this[p+ae]*ce;return J},o.prototype.readUIntBE=function(p,y,D){p=p>>>0,y=y>>>0,D||j(p,y,this.length);for(var J=this[p+--y],ce=1;y>0&&(ce*=256);)J+=this[p+--y]*ce;return J},o.prototype.readUInt8=function(p,y){return p=p>>>0,y||j(p,1,this.length),this[p]},o.prototype.readUInt16LE=function(p,y){return p=p>>>0,y||j(p,2,this.length),this[p]|this[p+1]<<8},o.prototype.readUInt16BE=function(p,y){return p=p>>>0,y||j(p,2,this.length),this[p]<<8|this[p+1]},o.prototype.readUInt32LE=function(p,y){return p=p>>>0,y||j(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},o.prototype.readUInt32BE=function(p,y){return p=p>>>0,y||j(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},o.prototype.readIntLE=function(p,y,D){p=p>>>0,y=y>>>0,D||j(p,y,this.length);for(var J=this[p],ce=1,ae=0;++ae<y&&(ce*=256);)J+=this[p+ae]*ce;return ce*=128,J>=ce&&(J-=Math.pow(2,8*y)),J},o.prototype.readIntBE=function(p,y,D){p=p>>>0,y=y>>>0,D||j(p,y,this.length);for(var J=y,ce=1,ae=this[p+--J];J>0&&(ce*=256);)ae+=this[p+--J]*ce;return ce*=128,ae>=ce&&(ae-=Math.pow(2,8*y)),ae},o.prototype.readInt8=function(p,y){return p=p>>>0,y||j(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},o.prototype.readInt16LE=function(p,y){p=p>>>0,y||j(p,2,this.length);var D=this[p]|this[p+1]<<8;return D&32768?D|4294901760:D},o.prototype.readInt16BE=function(p,y){p=p>>>0,y||j(p,2,this.length);var D=this[p+1]|this[p]<<8;return D&32768?D|4294901760:D},o.prototype.readInt32LE=function(p,y){return p=p>>>0,y||j(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},o.prototype.readInt32BE=function(p,y){return p=p>>>0,y||j(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},o.prototype.readFloatLE=function(p,y){return p=p>>>0,y||j(p,4,this.length),t.read(this,p,!0,23,4)},o.prototype.readFloatBE=function(p,y){return p=p>>>0,y||j(p,4,this.length),t.read(this,p,!1,23,4)},o.prototype.readDoubleLE=function(p,y){return p=p>>>0,y||j(p,8,this.length),t.read(this,p,!0,52,8)},o.prototype.readDoubleBE=function(p,y){return p=p>>>0,y||j(p,8,this.length),t.read(this,p,!1,52,8)};function G(x,p,y,D,J,ce){if(!o.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>J||p<ce)throw new RangeError('"value" argument is out of bounds');if(y+D>x.length)throw new RangeError("Index out of range")}o.prototype.writeUIntLE=function(p,y,D,J){if(p=+p,y=y>>>0,D=D>>>0,!J){var ce=Math.pow(2,8*D)-1;G(this,p,y,D,ce,0)}var ae=1,je=0;for(this[y]=p&255;++je<D&&(ae*=256);)this[y+je]=p/ae&255;return y+D},o.prototype.writeUIntBE=function(p,y,D,J){if(p=+p,y=y>>>0,D=D>>>0,!J){var ce=Math.pow(2,8*D)-1;G(this,p,y,D,ce,0)}var ae=D-1,je=1;for(this[y+ae]=p&255;--ae>=0&&(je*=256);)this[y+ae]=p/je&255;return y+D},o.prototype.writeUInt8=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,1,255,0),this[y]=p&255,y+1},o.prototype.writeUInt16LE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,2,65535,0),this[y]=p&255,this[y+1]=p>>>8,y+2},o.prototype.writeUInt16BE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,2,65535,0),this[y]=p>>>8,this[y+1]=p&255,y+2},o.prototype.writeUInt32LE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,4,4294967295,0),this[y+3]=p>>>24,this[y+2]=p>>>16,this[y+1]=p>>>8,this[y]=p&255,y+4},o.prototype.writeUInt32BE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,4,4294967295,0),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4},o.prototype.writeIntLE=function(p,y,D,J){if(p=+p,y=y>>>0,!J){var ce=Math.pow(2,8*D-1);G(this,p,y,D,ce-1,-ce)}var ae=0,je=1,ze=0;for(this[y]=p&255;++ae<D&&(je*=256);)p<0&&ze===0&&this[y+ae-1]!==0&&(ze=1),this[y+ae]=(p/je>>0)-ze&255;return y+D},o.prototype.writeIntBE=function(p,y,D,J){if(p=+p,y=y>>>0,!J){var ce=Math.pow(2,8*D-1);G(this,p,y,D,ce-1,-ce)}var ae=D-1,je=1,ze=0;for(this[y+ae]=p&255;--ae>=0&&(je*=256);)p<0&&ze===0&&this[y+ae+1]!==0&&(ze=1),this[y+ae]=(p/je>>0)-ze&255;return y+D},o.prototype.writeInt8=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,1,127,-128),p<0&&(p=255+p+1),this[y]=p&255,y+1},o.prototype.writeInt16LE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,2,32767,-32768),this[y]=p&255,this[y+1]=p>>>8,y+2},o.prototype.writeInt16BE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,2,32767,-32768),this[y]=p>>>8,this[y+1]=p&255,y+2},o.prototype.writeInt32LE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,4,2147483647,-2147483648),this[y]=p&255,this[y+1]=p>>>8,this[y+2]=p>>>16,this[y+3]=p>>>24,y+4},o.prototype.writeInt32BE=function(p,y,D){return p=+p,y=y>>>0,D||G(this,p,y,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[y]=p>>>24,this[y+1]=p>>>16,this[y+2]=p>>>8,this[y+3]=p&255,y+4};function Y(x,p,y,D,J,ce){if(y+D>x.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function te(x,p,y,D,J){return p=+p,y=y>>>0,J||Y(x,p,y,4),t.write(x,p,y,D,23,4),y+4}o.prototype.writeFloatLE=function(p,y,D){return te(this,p,y,!0,D)},o.prototype.writeFloatBE=function(p,y,D){return te(this,p,y,!1,D)};function oe(x,p,y,D,J){return p=+p,y=y>>>0,J||Y(x,p,y,8),t.write(x,p,y,D,52,8),y+8}o.prototype.writeDoubleLE=function(p,y,D){return oe(this,p,y,!0,D)},o.prototype.writeDoubleBE=function(p,y,D){return oe(this,p,y,!1,D)},o.prototype.copy=function(p,y,D,J){if(!o.isBuffer(p))throw new TypeError("argument should be a Buffer");if(D||(D=0),!J&&J!==0&&(J=this.length),y>=p.length&&(y=p.length),y||(y=0),J>0&&J<D&&(J=D),J===D||p.length===0||this.length===0)return 0;if(y<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),p.length-y<J-D&&(J=p.length-y+D);var ce=J-D;if(this===p&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(y,D,J);else if(this===p&&D<y&&y<J)for(var ae=ce-1;ae>=0;--ae)p[ae+y]=this[ae+D];else Uint8Array.prototype.set.call(p,this.subarray(D,J),y);return ce},o.prototype.fill=function(p,y,D,J){if(typeof p=="string"){if(typeof y=="string"?(J=y,y=0,D=this.length):typeof D=="string"&&(J=D,D=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!o.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(p.length===1){var ce=p.charCodeAt(0);(J==="utf8"&&ce<128||J==="latin1")&&(p=ce)}}else typeof p=="number"&&(p=p&255);if(y<0||this.length<y||this.length<D)throw new RangeError("Out of range index");if(D<=y)return this;y=y>>>0,D=D===void 0?this.length:D>>>0,p||(p=0);var ae;if(typeof p=="number")for(ae=y;ae<D;++ae)this[ae]=p;else{var je=o.isBuffer(p)?p:o.from(p,J),ze=je.length;if(ze===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(ae=0;ae<D-y;++ae)this[ae+y]=je[ae%ze]}return this};var ge=/[^+/0-9A-Za-z-_]/g;function Oe(x){if(x=x.split("=")[0],x=x.trim().replace(ge,""),x.length<2)return"";for(;x.length%4!=0;)x=x+"=";return x}function Re(x){return x<16?"0"+x.toString(16):x.toString(16)}function ne(x,p){p=p||1/0;for(var y,D=x.length,J=null,ce=[],ae=0;ae<D;++ae){if(y=x.charCodeAt(ae),y>55295&&y<57344){if(!J){if(y>56319){(p-=3)>-1&&ce.push(239,191,189);continue}else if(ae+1===D){(p-=3)>-1&&ce.push(239,191,189);continue}J=y;continue}if(y<56320){(p-=3)>-1&&ce.push(239,191,189),J=y;continue}y=(J-55296<<10|y-56320)+65536}else J&&(p-=3)>-1&&ce.push(239,191,189);if(J=null,y<128){if((p-=1)<0)break;ce.push(y)}else if(y<2048){if((p-=2)<0)break;ce.push(y>>6|192,y&63|128)}else if(y<65536){if((p-=3)<0)break;ce.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((p-=4)<0)break;ce.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return ce}function Ee(x){for(var p=[],y=0;y<x.length;++y)p.push(x.charCodeAt(y)&255);return p}function Be(x,p){for(var y,D,J,ce=[],ae=0;ae<x.length&&!((p-=2)<0);++ae)y=x.charCodeAt(ae),D=y>>8,J=y%256,ce.push(J),ce.push(D);return ce}function Ve(x){return e.toByteArray(Oe(x))}function Je(x,p,y,D){for(var J=0;J<D&&!(J+y>=p.length||J>=x.length);++J)p[J+y]=x[J];return J}function qe(x,p){return x instanceof p||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===p.name}function ot(x){return x!==x}})(Fa);var Vf={},La={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,e){var t=Fa,n=t.Buffer;function i(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(o,a,u){return n(o,a,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=n(o);return a!==void 0?typeof u=="string"?c.fill(a,u):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(La,La.exports);var Ba=La.exports.Buffer,Qf=Ba.isEncoding||function(r){switch(r=""+r,r&&r.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ax(r){if(!r)return"utf8";for(var e;;)switch(r){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return r;default:if(e)return;r=(""+r).toLowerCase(),e=!0}}function ux(r){var e=ax(r);if(typeof e!="string"&&(Ba.isEncoding===Qf||!Qf(r)))throw new Error("Unknown encoding: "+r);return e||r}Vf.StringDecoder=Li;function Li(r){this.encoding=ux(r);var e;switch(this.encoding){case"utf16le":this.text=px,this.end=yx,e=4;break;case"utf8":this.fillLast=fx,e=4;break;case"base64":this.text=mx,this.end=gx,e=3;break;default:this.write=vx,this.end=bx;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ba.allocUnsafe(e)}Li.prototype.write=function(r){if(r.length===0)return"";var e,t;if(this.lastNeed){if(e=this.fillLast(r),e===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<r.length?e?e+this.text(r,t):this.text(r,t):e||""};Li.prototype.end=dx;Li.prototype.text=hx;Li.prototype.fillLast=function(r){if(this.lastNeed<=r.length)return r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,this.lastTotal-this.lastNeed,0,r.length),this.lastNeed-=r.length};function Ua(r){return r<=127?0:r>>5==6?2:r>>4==14?3:r>>3==30?4:r>>6==2?-1:-2}function cx(r,e,t){var n=e.length-1;if(n<t)return 0;var i=Ua(e[n]);return i>=0?(i>0&&(r.lastNeed=i-1),i):--n<t||i===-2?0:(i=Ua(e[n]),i>=0?(i>0&&(r.lastNeed=i-2),i):--n<t||i===-2?0:(i=Ua(e[n]),i>=0?(i>0&&(i===2?i=0:r.lastNeed=i-3),i):0))}function lx(r,e,t){if((e[0]&192)!=128)return r.lastNeed=0,"\uFFFD";if(r.lastNeed>1&&e.length>1){if((e[1]&192)!=128)return r.lastNeed=1,"\uFFFD";if(r.lastNeed>2&&e.length>2&&(e[2]&192)!=128)return r.lastNeed=2,"\uFFFD"}}function fx(r){var e=this.lastTotal-this.lastNeed,t=lx(this,r);if(t!==void 0)return t;if(this.lastNeed<=r.length)return r.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);r.copy(this.lastChar,e,0,r.length),this.lastNeed-=r.length}function hx(r,e){var t=cx(this,r,e);if(!this.lastNeed)return r.toString("utf8",e);this.lastTotal=t;var n=r.length-(t-this.lastNeed);return r.copy(this.lastChar,0,n),r.toString("utf8",e,n)}function dx(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+"\uFFFD":e}function px(r,e){if((r.length-e)%2==0){var t=r.toString("utf16le",e);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=r[r.length-1],r.toString("utf16le",e,r.length-1)}function yx(r){var e=r&&r.length?this.write(r):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,t)}return e}function mx(r,e){var t=(r.length-e)%3;return t===0?r.toString("base64",e):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=r[r.length-1]:(this.lastChar[0]=r[r.length-2],this.lastChar[1]=r[r.length-1]),r.toString("base64",e,r.length-t))}function gx(r){var e=r&&r.length?this.write(r):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function vx(r){return r.toString(this.encoding)}function bx(r){return r&&r.length?this.write(r):""}const qa=Fa.Buffer,_x=Vf.StringDecoder,Ha=new _x,Wf=Bn,wx=Wf.ReplyError,Sx=Wf.ParserError;var gr=qa.allocUnsafe(32*1024),Jt=0,Hs=null,Bi=0,za=0;function kx(r){const e=r.buffer.length-1;var t=r.offset,n=0,i=1;for(r.buffer[t]===45&&(i=-1,t++);t<e;){const s=r.buffer[t++];if(s===13)return r.offset=t+1,i*n;n=n*10+(s-48)}}function Ex(r){const e=r.buffer.length-1;var t=r.offset,n=0,i="";for(r.buffer[t]===45&&(i+="-",t++);t<e;){var s=r.buffer[t++];if(s===13)return r.offset=t+1,n!==0&&(i+=n),i;n>429496728?(i+=n*10+(s-48),n=0):s===48&&n===0?i+=0:n=n*10+(s-48)}}function Yf(r){const e=r.offset,t=r.buffer,n=t.length-1;for(var i=e;i<n;)if(t[i++]===13)return r.offset=i+1,r.optionReturnBuffers===!0?r.buffer.slice(e,i-1):r.buffer.toString("utf8",e,i-1)}function Jf(r){const e=r.buffer.length-1;for(var t=r.offset,n=0;t<e;){const i=r.buffer[t++];if(i===13)return r.offset=t+1,n;n=n*10+(i-48)}}function xx(r){return r.optionStringNumbers===!0?Ex(r):kx(r)}function Cx(r){const e=Jf(r);if(e===void 0)return;if(e<0)return null;const t=r.offset+e;if(t+2>r.buffer.length){r.bigStrSize=t+2,r.totalChunkSize=r.buffer.length,r.bufferCache.push(r.buffer);return}const n=r.offset;return r.offset=t+2,r.optionReturnBuffers===!0?r.buffer.slice(n,t):r.buffer.toString("utf8",n,t)}function Ox(r){var e=Yf(r);if(e!==void 0)return r.optionReturnBuffers===!0&&(e=e.toString()),new wx(e)}function Tx(r,e){const t=new Sx("Protocol error, got "+JSON.stringify(String.fromCharCode(e))+" as reply type byte",JSON.stringify(r.buffer),r.offset);r.buffer=null,r.returnFatalError(t)}function Ax(r){const e=Jf(r);if(e===void 0)return;if(e<0)return null;const t=new Array(e);return Kf(r,t,0)}function Ga(r,e,t){r.arrayCache.push(e),r.arrayPos.push(t)}function Va(r){const e=r.arrayCache.pop();var t=r.arrayPos.pop();if(r.arrayCache.length){const n=Va(r);if(n===void 0){Ga(r,e,t);return}e[t++]=n}return Kf(r,e,t)}function Kf(r,e,t){const n=r.buffer.length;for(;t<e.length;){const i=r.offset;if(r.offset>=n){Ga(r,e,t);return}const s=Xf(r,r.buffer[r.offset++]);if(s===void 0){r.arrayCache.length||r.bufferCache.length||(r.offset=i),Ga(r,e,t);return}e[t]=s,t++}return e}function Xf(r,e){switch(e){case 36:return Cx(r);case 43:return Yf(r);case 42:return Ax(r);case 58:return xx(r);case 45:return Ox(r);default:return Tx(r,e)}}function Ix(){if(gr.length>50*1024)if(Bi===1||za>Bi*2){const r=Math.floor(gr.length/10),e=r<Jt?Jt:r;Jt=0,gr=gr.slice(e,gr.length)}else za++,Bi--;else clearInterval(Hs),Bi=0,za=0,Hs=null}function Nx(r){if(gr.length<r+Jt){const e=r>1024*1024*75?2:3;Jt>1024*1024*111&&(Jt=1024*1024*50),gr=qa.allocUnsafe(r*e+Jt),Jt=0,Bi++,Hs===null&&(Hs=setInterval(Ix,50))}}function Rx(r){const e=r.bufferCache,t=r.offset;var n=e.length,i=r.bigStrSize-r.totalChunkSize;if(r.offset=i,i<=2){if(n===2)return e[0].toString("utf8",t,e[0].length+i-2);n--,i=e[e.length-2].length+i}for(var s=Ha.write(e[0].slice(t)),o=1;o<n-1;o++)s+=Ha.write(e[o]);return s+=Ha.end(e[o].slice(0,i-2)),s}function Mx(r){const e=r.bufferCache,t=r.offset,n=r.bigStrSize-t-2;var i=e.length,s=r.bigStrSize-r.totalChunkSize;if(r.offset=s,s<=2){if(i===2)return e[0].slice(t,e[0].length+s-2);i--,s=e[e.length-2].length+s}Nx(n);const o=Jt;e[0].copy(gr,o,t,e[0].length),Jt+=e[0].length-t;for(var a=1;a<i-1;a++)e[a].copy(gr,Jt),Jt+=e[a].length;return e[a].copy(gr,Jt,0,s-2),Jt+=s-2,gr.slice(o,Jt)}class Dx{constructor(e){if(!e)throw new TypeError("Options are mandatory.");if(typeof e.returnError!="function"||typeof e.returnReply!="function")throw new TypeError("The returnReply and returnError options have to be functions.");this.setReturnBuffers(!!e.returnBuffers),this.setStringNumbers(!!e.stringNumbers),this.returnError=e.returnError,this.returnFatalError=e.returnFatalError||e.returnError,this.returnReply=e.returnReply,this.reset()}reset(){this.offset=0,this.buffer=null,this.bigStrSize=0,this.totalChunkSize=0,this.bufferCache=[],this.arrayCache=[],this.arrayPos=[]}setReturnBuffers(e){if(typeof e!="boolean")throw new TypeError("The returnBuffers argument has to be a boolean");this.optionReturnBuffers=e}setStringNumbers(e){if(typeof e!="boolean")throw new TypeError("The stringNumbers argument has to be a boolean");this.optionStringNumbers=e}execute(e){if(this.buffer===null)this.buffer=e,this.offset=0;else if(this.bigStrSize===0){const n=this.buffer.length,i=n-this.offset,s=qa.allocUnsafe(i+e.length);if(this.buffer.copy(s,0,this.offset,n),e.copy(s,i,0,e.length),this.buffer=s,this.offset=0,this.arrayCache.length){const o=Va(this);if(o===void 0)return;this.returnReply(o)}}else if(this.totalChunkSize+e.length>=this.bigStrSize){this.bufferCache.push(e);var t=this.optionReturnBuffers?Mx(this):Rx(this);if(this.bigStrSize=0,this.bufferCache=[],this.buffer=e,this.arrayCache.length&&(this.arrayCache[0][this.arrayPos[0]++]=t,t=Va(this),t===void 0))return;this.returnReply(t)}else{this.bufferCache.push(e),this.totalChunkSize+=e.length;return}for(;this.offset<this.buffer.length;){const n=this.offset,i=this.buffer[this.offset++],s=Xf(this,i);if(s===void 0){this.arrayCache.length||this.bufferCache.length||(this.offset=n);return}i===45?this.returnError(s):this.returnReply(s)}this.buffer=null}}var Fx=Dx,Px=Fx,Qa={};Object.defineProperty(Qa,"__esModule",{value:!0});class jx{constructor(){this.set={subscribe:{},psubscribe:{}}}add(e,t){this.set[Wa(e)][t]=!0}del(e,t){delete this.set[Wa(e)][t]}channels(e){return Object.keys(this.set[Wa(e)])}isEmpty(){return this.channels("subscribe").length===0&&this.channels("psubscribe").length===0}}Qa.default=jx;function Wa(r){return r==="unsubscribe"?"subscribe":r==="punsubscribe"?"psubscribe":r}Object.defineProperty(Da,"__esModule",{value:!0});const Zf=Ar,Lx=et,Bx=Px,Ux=Qa,qx=Lx.Debug("dataHandler");class Hx{constructor(e,t){this.redis=e;const n=new Bx({stringNumbers:t.stringNumbers,returnBuffers:!t.dropBufferSupport,returnError:i=>{this.returnError(i)},returnFatalError:i=>{this.returnFatalError(i)},returnReply:i=>{this.returnReply(i)}});e.stream.on("data",i=>{n.execute(i)})}returnFatalError(e){e.message+=". Please report this.",this.redis.recoverFromFatalError(e,e,{offlineQueue:!1})}returnError(e){const t=this.shiftCommand(e);!t||(e.command={name:t.command.name,args:t.command.args},this.redis.handleReconnection(e,t))}returnReply(e){if(this.handleMonitorReply(e)||this.handleSubscriberReply(e))return;const t=this.shiftCommand(e);!t||(Zf.default.checkFlag("ENTER_SUBSCRIBER_MODE",t.command.name)?(this.redis.condition.subscriber=new Ux.default,this.redis.condition.subscriber.add(t.command.name,e[1].toString()),$f(t.command,e[2])||this.redis.commandQueue.unshift(t)):Zf.default.checkFlag("EXIT_SUBSCRIBER_MODE",t.command.name)?eh(t.command,e[2])||this.redis.commandQueue.unshift(t):t.command.resolve(e))}handleSubscriberReply(e){if(!this.redis.condition.subscriber)return!1;const t=Array.isArray(e)?e[0].toString():null;switch(qx('receive reply "%s" in subscriber mode',t),t){case"message":this.redis.listeners("message").length>0&&this.redis.emit("message",e[1].toString(),e[2]?e[2].toString():""),this.redis.emit("messageBuffer",e[1],e[2]);break;case"pmessage":{const n=e[1].toString();this.redis.listeners("pmessage").length>0&&this.redis.emit("pmessage",n,e[2].toString(),e[3].toString()),this.redis.emit("pmessageBuffer",n,e[2],e[3]);break}case"subscribe":case"psubscribe":{const n=e[1].toString();this.redis.condition.subscriber.add(t,n);const i=this.shiftCommand(e);if(!i)return;$f(i.command,e[2])||this.redis.commandQueue.unshift(i);break}case"unsubscribe":case"punsubscribe":{const n=e[1]?e[1].toString():null;n&&this.redis.condition.subscriber.del(t,n);const i=e[2];i===0&&(this.redis.condition.subscriber=!1);const s=this.shiftCommand(e);if(!s)return;eh(s.command,i)||this.redis.commandQueue.unshift(s);break}default:{const n=this.shiftCommand(e);if(!n)return;n.command.resolve(e)}}return!0}handleMonitorReply(e){if(this.redis.status!=="monitoring")return!1;const t=e.toString();if(t==="OK")return!1;const n=t.indexOf(" "),i=t.slice(0,n),s=t.indexOf('"'),o=t.slice(s+1,-1).split('" "').map(u=>u.replace(/\\"/g,'"')),a=t.slice(n+2,s-2).split(" ");return this.redis.emit("monitor",i,o,a[1],a[0]),!0}shiftCommand(e){const t=this.redis.commandQueue.shift();if(!t){const n="Command queue state error. If you can reproduce this, please report it.",i=new Error(n+(e instanceof Error?` Last error: ${e.message}`:` Last reply: ${e.toString()}`));return this.redis.emit("error",i),null}return t}}Da.default=Hx;function $f(r,e){return typeof r.remainReplies=="undefined"&&(r.remainReplies=r.args.length),--r.remainReplies==0?(r.resolve(e),!0):!1}function eh(r,e){return typeof r.remainReplies=="undefined"&&(r.remainReplies=r.args.length),r.remainReplies===0?e===0?(r.resolve(e),!0):!1:--r.remainReplies==0?(r.resolve(e),!0):!1}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Bn,t=Ar,n=Ra,i=et,s=Da,o=i.Debug("connection");function a(b){return function(){b.setStatus("connect"),b.resetCommandQueue();let M=!1;const{connectionEpoch:I}=b;b.condition.auth&&b.auth(b.condition.auth,function(T){I===b.connectionEpoch&&T&&(T.message.indexOf("no password is set")!==-1?console.warn("[WARN] Redis server does not require a password, but a password was supplied."):T.message.indexOf("without any password configured for the default user")!==-1?console.warn("[WARN] This Redis server's `default` user does not require a password, but a password was supplied"):T.message.indexOf("wrong number of arguments for 'auth' command")!==-1?console.warn(`[ERROR] The server returned "wrong number of arguments for 'auth' command". You are probably passing both username and password to Redis version 5 or below. You should only pass the 'password' option for Redis version 5 and under.`):(M=!0,b.recoverFromFatalError(T,T)))}),b.condition.select&&b.select(b.condition.select).catch(T=>{b.silentEmit("error",T)}),b.options.enableReadyCheck||r.readyHandler(b)(),new s.default(b,{stringNumbers:b.options.stringNumbers,dropBufferSupport:b.options.dropBufferSupport}),b.options.enableReadyCheck&&b._readyCheck(function(T,B){I===b.connectionEpoch&&(T?M||b.recoverFromFatalError(new Error("Ready check failed: "+T.message),T):(b.serverInfo=B,b.connector.check(B)?r.readyHandler(b)():b.disconnect(!0)))})}}r.connectHandler=a;function u(b){const M=new e.AbortError("Command aborted due to connection close");return M.command={name:b.name,args:b.args},M}function c(b){let M=0;for(let I=0;I<b.length;){const T=b.peekAt(I).command,B=T.pipelineIndex;if((B===void 0||B===0)&&(M=0),B!==void 0&&B!==M++){b.remove(I,1),T.reject(u(T));continue}I++}}function f(b){for(let M=0;M<b.length;){const I=b.peekAt(M).command;if(I.name==="multi")break;if(I.name==="exec"){b.remove(M,1),I.reject(u(I));break}I.inTransaction?(b.remove(M,1),I.reject(u(I))):M++}}function l(b){return function(){if(b.setStatus("close"),b.prevCondition||(b.prevCondition=b.condition),b.commandQueue.length&&(c(b.commandQueue),b.prevCommandQueue=b.commandQueue),b.offlineQueue.length&&f(b.offlineQueue),b.clearAddedScriptHashesCleanInterval(),b.manuallyClosing)return b.manuallyClosing=!1,o("skip reconnecting since the connection is manually closed."),M();if(typeof b.options.retryStrategy!="function")return o("skip reconnecting because `retryStrategy` is not a function"),M();const I=b.options.retryStrategy(++b.retryAttempts);if(typeof I!="number")return o("skip reconnecting because `retryStrategy` doesn't return a number"),M();o("reconnect in %sms",I),b.setStatus("reconnecting",I),b.reconnectTimeout=setTimeout(function(){b.reconnectTimeout=null,b.connect().catch(i.noop)},I);const{maxRetriesPerRequest:T}=b.options;typeof T=="number"&&(T<0?o("maxRetriesPerRequest is negative, ignoring..."):b.retryAttempts%(T+1)===0&&(o("reach maxRetriesPerRequest limitation, flushing command queue..."),b.flushQueue(new n.MaxRetriesPerRequestError(T))))};function M(){b.setStatus("end"),b.flushQueue(new Error(i.CONNECTION_CLOSED_ERROR_MSG))}}r.closeHandler=l;function h(b){return function(M){o("error: %s",M),b.silentEmit("error",M)}}r.errorHandler=h;function m(b){return function(){if(b.setStatus("ready"),b.retryAttempts=0,b.options.monitor){b.call("monitor");const{sendCommand:I}=b;b.sendCommand=function(T){return t.default.checkFlag("VALID_IN_MONITOR_MODE",T.name)?I.call(b,T):(T.reject(new Error("Connection is in monitoring mode, can't process commands.")),T.promise)},b.once("close",function(){delete b.sendCommand}),b.setStatus("monitoring");return}const M=b.prevCondition?b.prevCondition.select:b.condition.select;if(b.options.connectionName&&(o("set the connection name [%s]",b.options.connectionName),b.client("setname",b.options.connectionName).catch(i.noop)),b.options.readOnly&&(o("set the connection to readonly mode"),b.readonly().catch(i.noop)),b.prevCondition){const I=b.prevCondition;if(b.prevCondition=null,I.subscriber&&b.options.autoResubscribe){b.condition.select!==M&&(o("connect to db [%d]",M),b.select(M));const T=I.subscriber.channels("subscribe");T.length&&(o("subscribe %d channels",T.length),b.subscribe(T));const B=I.subscriber.channels("psubscribe");B.length&&(o("psubscribe %d channels",B.length),b.psubscribe(B))}}if(b.prevCommandQueue)if(b.options.autoResendUnfulfilledCommands)for(o("resend %d unfulfilled commands",b.prevCommandQueue.length);b.prevCommandQueue.length>0;){const I=b.prevCommandQueue.shift();I.select!==b.condition.select&&I.command.name!=="select"&&b.select(I.select),b.sendCommand(I.command,I.stream)}else b.prevCommandQueue=null;if(b.offlineQueue.length){o("send %d commands in offline queue",b.offlineQueue.length);const I=b.offlineQueue;for(b.resetOfflineQueue();I.length>0;){const T=I.shift();T.select!==b.condition.select&&T.command.name!=="select"&&b.select(T.select),b.sendCommand(T.command,T.stream)}}b.condition.select!==M&&(o("connect to db [%d]",M),b.select(M))}}r.readyHandler=m})(kf);var zs={},Ui={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});const zx=et,Gx=zx.Debug("AbstractConnector");class Vx{constructor(e){this.connecting=!1,this.disconnectTimeout=e}check(e){return!0}disconnect(){if(this.connecting=!1,this.stream){const e=this.stream,t=setTimeout(()=>{Gx("stream %s:%s still open, destroying it",e.remoteAddress,e.remotePort),e.destroy()},this.disconnectTimeout);e.on("close",()=>clearTimeout(t)),e.end()}}}qi.default=Vx;Object.defineProperty(Ui,"__esModule",{value:!0});const Qx=Gr,Wx=Gr,Yx=et,Jx=qi;function th(r){return r.path}Ui.isIIpcConnectionOptions=th;class Kx extends Jx.default{constructor(e){super(e.disconnectTimeout);this.options=e}connect(e){const{options:t}=this;this.connecting=!0;let n;return th(t)?n={path:t.path}:(n={},t.port!=null&&(n.port=t.port),t.host!=null&&(n.host=t.host),t.family!=null&&(n.family=t.family)),t.tls&&Object.assign(n,t.tls),new Promise((i,s)=>{process.nextTick(()=>{if(!this.connecting){s(new Error(Yx.CONNECTION_CLOSED_ERROR_MSG));return}try{t.tls?this.stream=Wx.connect(n):this.stream=Qx.createConnection(n)}catch(o){s(o);return}this.stream.once("error",o=>{this.firstError=o}),i(this.stream)})})}}Ui.default=Kx;var Hi={},Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});function Xx(r,e){return(r.host||"127.0.0.1")===(e.host||"127.0.0.1")&&(r.port||26379)===(e.port||26379)}class Zx{constructor(e){this.cursor=0,this.sentinels=e.slice(0)}next(){const e=this.cursor>=this.sentinels.length;return{done:e,value:e?void 0:this.sentinels[this.cursor++]}}reset(e){e&&this.sentinels.length>1&&this.cursor!==1&&this.sentinels.unshift(...this.sentinels.splice(this.cursor-1)),this.cursor=0}add(e){for(let t=0;t<this.sentinels.length;t++)if(Xx(e,this.sentinels[t]))return!1;return this.sentinels.push(e),!0}toString(){return`${JSON.stringify(this.sentinels)} @${this.cursor}`}}Ya.default=Zx;var Ja={},$x=He&&He.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Ja,"__esModule",{value:!0});const eC=et,Ka=eC.Debug("FailoverDetector"),rh="+switch-master";class tC{constructor(e,t){this.isDisconnected=!1,this.connector=e,this.sentinels=t}cleanup(){this.isDisconnected=!0;for(const e of this.sentinels)e.client.disconnect()}subscribe(){return $x(this,void 0,void 0,function*(){Ka("Starting FailoverDetector");const e=[];for(const t of this.sentinels){const n=t.client.subscribe(rh).catch(i=>{Ka("Failed to subscribe to failover messages on sentinel %s:%s (%s)",t.address.host||"127.0.0.1",t.address.port||26739,i.message)});e.push(n),t.client.on("message",i=>{!this.isDisconnected&&i===rh&&this.disconnect()})}yield Promise.all(e)})}disconnect(){this.isDisconnected=!0,Ka("Failover detected, disconnecting"),this.connector.disconnect()}}Ja.FailoverDetector=tC;var qn=He&&He.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{c(n.next(f))}catch(l){o(l)}}function u(f){try{c(n.throw(f))}catch(l){o(l)}}function c(f){f.done?s(f.value):i(f.value).then(a,u)}c((n=n.apply(r,e||[])).next())})};Object.defineProperty(Hi,"__esModule",{value:!0});const rC=Gr,zi=et,nC=Gr,iC=Ui,nh=Ya;Hi.SentinelIterator=nh.default;const sC=qi,oC=zr,aC=Ja,Hn=zi.Debug("SentinelConnector");class uC extends sC.default{constructor(e){super(e.disconnectTimeout);if(this.options=e,this.failoverDetector=null,this.emitter=null,!this.options.sentinels.length)throw new Error("Requires at least one sentinel to connect to.");if(!this.options.name)throw new Error("Requires the name of master.");this.sentinelIterator=new nh.default(this.options.sentinels)}check(e){const t=!e.role||this.options.role===e.role;return t||(Hn("role invalid, expected %s, but got %s",this.options.role,e.role),this.sentinelIterator.next(),this.sentinelIterator.next(),this.sentinelIterator.reset(!0)),t}disconnect(){super.disconnect(),this.failoverDetector&&this.failoverDetector.cleanup()}connect(e){this.connecting=!0,this.retryAttempts=0;let t;const n=()=>qn(this,void 0,void 0,function*(){const i=this.sentinelIterator.next();if(i.done){this.sentinelIterator.reset(!1);const u=typeof this.options.sentinelRetryStrategy=="function"?this.options.sentinelRetryStrategy(++this.retryAttempts):null;let c=typeof u!="number"?"All sentinels are unreachable and retry is disabled.":`All sentinels are unreachable. Retrying from scratch after ${u}ms.`;t&&(c+=` Last error: ${t.message}`),Hn(c);const f=new Error(c);if(typeof u=="number")return e("error",f),yield new Promise(l=>setTimeout(l,u)),n();throw f}let s=null,o=null;try{s=yield this.resolve(i.value)}catch(u){o=u}if(!this.connecting)throw new Error(zi.CONNECTION_CLOSED_ERROR_MSG);const a=i.value.host+":"+i.value.port;if(s)return Hn("resolved: %s:%s from sentinel %s",s.host,s.port,a),this.options.enableTLSForSentinelMode&&this.options.tls?(Object.assign(s,this.options.tls),this.stream=nC.connect(s)):this.stream=rC.createConnection(s),this.stream.once("connect",()=>this.initFailoverDetector()),this.stream.once("error",u=>{this.firstError=u}),this.stream;{const u=o?"failed to connect to sentinel "+a+" because "+o.message:"connected to sentinel "+a+" successfully, but got an invalid reply: "+s;return Hn(u),e("sentinelError",new Error(u)),o&&(t=o),n()}});return n()}updateSentinels(e){return qn(this,void 0,void 0,function*(){if(!this.options.updateSentinels)return;const t=yield e.sentinel("sentinels",this.options.name);!Array.isArray(t)||(t.map(zi.packObject).forEach(n=>{if((n.flags?n.flags.split(","):[]).indexOf("disconnected")===-1&&n.ip&&n.port){const s=this.sentinelNatResolve(ih(n));this.sentinelIterator.add(s)&&Hn("adding sentinel %s:%s",s.host,s.port)}}),Hn("Updated internal sentinels: %s",this.sentinelIterator))})}resolveMaster(e){return qn(this,void 0,void 0,function*(){const t=yield e.sentinel("get-master-addr-by-name",this.options.name);return yield this.updateSentinels(e),this.sentinelNatResolve(Array.isArray(t)?{host:t[0],port:Number(t[1])}:null)})}resolveSlave(e){return qn(this,void 0,void 0,function*(){const t=yield e.sentinel("slaves",this.options.name);if(!Array.isArray(t))return null;const n=t.map(zi.packObject).filter(i=>i.flags&&!i.flags.match(/(disconnected|s_down|o_down)/));return this.sentinelNatResolve(cC(n,this.options.preferredSlaves))})}sentinelNatResolve(e){return!e||!this.options.natMap?e:this.options.natMap[`${e.host}:${e.port}`]||e}connectToSentinel(e,t){return new oC.default(Object.assign({port:e.port||26379,host:e.host,username:this.options.sentinelUsername||null,password:this.options.sentinelPassword||null,family:e.family||(iC.isIIpcConnectionOptions(this.options)?void 0:this.options.family),tls:this.options.sentinelTLS,retryStrategy:null,enableReadyCheck:!1,connectTimeout:this.options.connectTimeout,commandTimeout:this.options.sentinelCommandTimeout,dropBufferSupport:!0},t))}resolve(e){return qn(this,void 0,void 0,function*(){const t=this.connectToSentinel(e);t.on("error",lC);try{return this.options.role==="slave"?yield this.resolveSlave(t):yield this.resolveMaster(t)}finally{t.disconnect()}})}initFailoverDetector(){var e;return qn(this,void 0,void 0,function*(){if(!this.options.failoverDetector)return;this.sentinelIterator.reset(!0);const t=[];for(;t.length<this.options.sentinelMaxConnections;){const{done:n,value:i}=this.sentinelIterator.next();if(n)break;const s=this.connectToSentinel(i,{lazyConnect:!0,retryStrategy:this.options.sentinelReconnectStrategy});s.on("reconnecting",()=>{var o;(o=this.emitter)===null||o===void 0||o.emit("sentinelReconnecting")}),t.push({address:i,client:s})}this.sentinelIterator.reset(!1),this.failoverDetector&&this.failoverDetector.cleanup(),this.failoverDetector=new aC.FailoverDetector(this,t),yield this.failoverDetector.subscribe(),(e=this.emitter)===null||e===void 0||e.emit("failoverSubscribed")})}}Hi.default=uC;function cC(r,e){if(r.length===0)return null;let t;if(typeof e=="function")t=e(r);else if(e!==null&&typeof e=="object"){const n=Array.isArray(e)?e:[e];n.sort((i,s)=>(i.prio||(i.prio=1),s.prio||(s.prio=1),i.prio<s.prio?-1:i.prio>s.prio?1:0));for(let i=0;i<n.length;i++){for(let s=0;s<r.length;s++){const o=r[s];if(o.ip===n[i].ip&&o.port===n[i].port){t=o;break}}if(t)break}}return t||(t=zi.sample(r)),ih(t)}function ih(r){return{host:r.ip,port:Number(r.port)}}function lC(){}Object.defineProperty(zs,"__esModule",{value:!0});const fC=Ui;zs.StandaloneConnector=fC.default;const hC=Hi;zs.SentinelConnector=hC.default;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});const dC=Gr;class pC extends dC.Readable{constructor(e){super(e);this.opt=e,this._redisCursor="0",this._redisDrained=!1}_read(){if(this._redisDrained){this.push(null);return}const e=[this._redisCursor];this.opt.key&&e.unshift(this.opt.key),this.opt.match&&e.push("MATCH",this.opt.match),this.opt.type&&e.push("TYPE",this.opt.type),this.opt.count&&e.push("COUNT",String(this.opt.count)),this.opt.redis[this.opt.command](e,(t,n)=>{if(t){this.emit("error",t);return}this._redisCursor=n[0]instanceof Buffer?n[0].toString():n[0],this._redisCursor==="0"&&(this._redisDrained=!0),this.push(n[1])})}close(){this._redisDrained=!0}}Gi.default=pC;var Gs={},Vs={},Xa={exports:{}};const sh=(r,e,t)=>new Promise((n,i)=>{if(t=Object.assign({concurrency:1/0},t),typeof e!="function")throw new TypeError("Mapper function is required");const{concurrency:s}=t;if(!(typeof s=="number"&&s>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${s}\` (${typeof s})`);const o=[],a=r[Symbol.iterator]();let u=!1,c=!1,f=0,l=0;const h=()=>{if(u)return;const m=a.next(),b=l;if(l++,m.done){c=!0,f===0&&n(o);return}f++,Promise.resolve(m.value).then(M=>e(M,b)).then(M=>{o[b]=M,f--,h()},M=>{u=!0,i(M)})};for(let m=0;m<s&&(h(),!c);m++);});Xa.exports=sh;Xa.exports.default=sh;Object.defineProperty(Vs,"__esModule",{value:!0});const yC=Ar,mC=Fs,gC=Ir,oh=An,Za=Ni.exports,vC=Xa.exports,ah=fr,uh=Fi,bC=et;function _C(r,e){const t=Za(e[0]),n=r._groupsBySlot[t];for(let i=1;i<e.length;i++)if(r._groupsBySlot[Za(e[i])]!==n)return-1;return t}function vr(r){uh.default.call(this),this.redis=r,this.isCluster=this.redis.constructor.name==="Cluster"||this.redis.isCluster,this.isPipeline=!0,this.options=r.options,this._queue=[],this._result=[],this._transactions=0,this._shaToScript={},Object.keys(r.scriptsSet).forEach(n=>{const i=r.scriptsSet[n];this._shaToScript[i.sha]=i,this[n]=r[n],this[n+"Buffer"]=r[n+"Buffer"]}),r.addedBuiltinSet.forEach(n=>{this[n]=r[n],this[n+"Buffer"]=r[n+"Buffer"]});const e=ah.get();this.promise=new e((n,i)=>{this.resolve=n,this.reject=i});const t=this;Object.defineProperty(this,"length",{get:function(){return t._queue.length}})}Vs.default=vr;Object.assign(vr.prototype,uh.default.prototype);vr.prototype.fillResult=function(r,e){if(this._queue[e].name==="exec"&&Array.isArray(r[1])){const n=r[1].length;for(let i=0;i<n;i++){if(r[1][i]instanceof Error)continue;const s=this._queue[e-(n-i)];try{r[1][i]=s.transformReply(r[1][i])}catch(o){r[1][i]=o}}}if(this._result[e]=r,--this.replyPending)return;if(this.isCluster){let n=!0,i;for(let s=0;s<this._result.length;++s){const o=this._result[s][0],a=this._queue[s];if(o){if(a.name==="exec"&&o.message==="EXECABORT Transaction discarded because of previous errors.")continue;if(!i)i={name:o.name,message:o.message};else if(i.name!==o.name||i.message!==o.message){n=!1;break}}else if(!a.inTransaction&&!(oh.exists(a.name)&&oh.hasFlag(a.name,"readonly"))){n=!1;break}}if(i&&n){const s=this,o=i.message.split(" "),a=this._queue;let u=!1;this._queue=[];for(let l=0;l<a.length;++l){if(o[0]==="ASK"&&!u&&a[l].name!=="asking"&&(!a[l-1]||a[l-1].name!=="asking")){const h=new yC.default("asking");h.ignore=!0,this.sendCommand(h)}a[l].initPromise(),this.sendCommand(a[l]),u=a[l].inTransaction}let c=!0;typeof this.leftRedirections=="undefined"&&(this.leftRedirections={});const f=function(){s.exec()};if(this.redis.handleError(i,this.leftRedirections,{moved:function(l,h){s.preferKey=h,s.redis.slots[o[1]]=[h],s.redis._groupsBySlot[o[1]]=s.redis._groupsIds[s.redis.slots[o[1]].join(";")],s.redis.refreshSlotsCache(),s.exec()},ask:function(l,h){s.preferKey=h,s.exec()},tryagain:f,clusterDown:f,connectionClosed:f,maxRedirections:()=>{c=!1},defaults:()=>{c=!1}}),c)return}}let t=0;for(let n=0;n<this._queue.length-t;++n)this._queue[n+t].ignore&&(t+=1),this._result[n]=this._result[n+t];this.resolve(this._result.slice(0,this._result.length-t))};vr.prototype.sendCommand=function(r){this._transactions>0&&(r.inTransaction=!0);const e=this._queue.length;return r.pipelineIndex=e,r.promise.then(t=>{this.fillResult([null,t],e)}).catch(t=>{this.fillResult([t],e)}),this._queue.push(r),this};vr.prototype.addBatch=function(r){let e,t,n;for(let i=0;i<r.length;++i)e=r[i],t=e[0],n=e.slice(1),this[t].apply(this,n);return this};const wC=vr.prototype.multi;vr.prototype.multi=function(){return this._transactions+=1,wC.apply(this,arguments)};const ch=vr.prototype.execBuffer,SC=vr.prototype.exec;vr.prototype.execBuffer=mC.deprecate(function(){return this._transactions>0&&(this._transactions-=1),ch.apply(this,arguments)},"Pipeline#execBuffer: Use Pipeline#exec instead");vr.prototype.exec=function(r){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch(bC.noop),this.redis.delayUntilReady(s=>{if(s){r(s);return}this.exec(r)}),this.promise;if(this._transactions>0)return this._transactions-=1,(this.options.dropBufferSupport?SC:ch).apply(this,arguments);this.nodeifiedPromise||(this.nodeifiedPromise=!0,gC.default(this.promise,r)),this._queue.length||this.resolve([]);let e;if(this.isCluster){const s=[];for(let o=0;o<this._queue.length;o++){const a=this._queue[o].getKeys();if(a.length&&s.push(a[0]),a.length&&Za.generateMulti(a)<0)return this.reject(new Error("All the keys in a pipeline command should belong to the same slot")),this.promise}if(s.length){if(e=_C(this.redis,s),e<0)return this.reject(new Error("All keys in the pipeline should belong to the same slots allocation group")),this.promise}else e=Math.random()*16384|0}const t=[];for(let s=0;s<this._queue.length;++s){const o=this._queue[s];if(o.name!=="evalsha")continue;const a=this._shaToScript[o.args[0]];!a||this.redis._addedScriptHashes[a.sha]||t.includes(a)||t.push(a)}const n=this;if(!t.length)return i();if(this.isCluster)return vC(t,s=>n.redis.script("load",s.lua),{concurrency:10}).then(function(){for(let s=0;s<t.length;s++)n.redis._addedScriptHashes[t[s].sha]=!0}).then(i,this.reject),this.promise;return this.redis.script("exists",t.map(({sha:s})=>s)).then(function(s){const o=[];for(let u=0;u<s.length;++u)s[u]||o.push(t[u]);return ah.get().all(o.map(function(u){return n.redis.script("load",u.lua)}))}).then(function(){for(let s=0;s<t.length;s++)n.redis._addedScriptHashes[t[s].sha]=!0}).then(i,this.reject),this.promise;function i(){let s="",o,a=n.replyPending=n._queue.length,u;n.isCluster&&(u={slot:e,redis:n.redis.connectionPool.nodes.all[n.preferKey]});let c=!1;const f={write:function(l){if(l instanceof Buffer&&(c=!0),c?(o||(o=[]),typeof s=="string"&&(o.push(Buffer.from(s,"utf8")),s=void 0),o.push(typeof l=="string"?Buffer.from(l,"utf8"):l)):s+=l,!--a){let h;o?h=Buffer.concat(o):h=s,n.isCluster?u.redis.stream.write(h):n.redis.stream.write(h),a=n._queue.length,s="",o=void 0,c=!1}}};for(let l=0;l<n._queue.length;++l)n.redis.sendCommand(n._queue[l],f,u);return n.promise}};Object.defineProperty(Gs,"__esModule",{value:!0});const $a=et,eu=Ir,lh=Vs;function kC(r){r.pipeline=function(n){const i=new lh.default(this);return Array.isArray(n)&&i.addBatch(n),i};const{multi:e}=r;r.multi=function(n,i){if(typeof i=="undefined"&&!Array.isArray(n)&&(i=n,n=null),i&&i.pipeline===!1)return e.call(this);const s=new lh.default(this);s.multi(),Array.isArray(n)&&s.addBatch(n);const o=s.exec;s.exec=function(u){if(this.isCluster&&!this.redis.slots.length)return this.redis.status==="wait"&&this.redis.connect().catch($a.noop),eu.default(new Promise((f,l)=>{this.redis.delayUntilReady(h=>{if(h){l(h);return}this.exec(s).then(f,l)})}),u);if(this._transactions>0&&o.call(s),this.nodeifiedPromise)return o.call(s);const c=o.call(s);return eu.default(c.then(function(f){const l=f[f.length-1];if(typeof l=="undefined")throw new Error("Pipeline cannot be used to send any commands when the `exec()` has been called on it.");if(l[0]){l[0].previousErrors=[];for(let h=0;h<f.length-1;++h)f[h][0]&&l[0].previousErrors.push(f[h][0]);throw l[0]}return $a.wrapMultiResult(l[1])}),u)};const{execBuffer:a}=s;return s.execBuffer=function(u){return this._transactions>0&&a.call(s),s.exec(u)},s};const{exec:t}=r;r.exec=function(n){return eu.default(t.call(this).then(function(i){return Array.isArray(i)&&(i=$a.wrapMultiResult(i)),i}),n)}}Gs.addTransactionSupport=kC;var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.DEFAULT_REDIS_OPTIONS={port:6379,host:"localhost",family:4,connectTimeout:1e4,disconnectTimeout:2e3,retryStrategy:function(r){return Math.min(r*50,2e3)},keepAlive:0,noDelay:!0,connectionName:null,sentinels:null,name:null,role:"master",sentinelRetryStrategy:function(r){return Math.min(r*10,1e3)},sentinelReconnectStrategy:function(){return 6e4},natMap:null,enableTLSForSentinelMode:!1,updateSentinels:!0,failoverDetector:!1,username:null,password:null,db:0,dropBufferSupport:!1,enableOfflineQueue:!0,enableReadyCheck:!0,autoResubscribe:!0,autoResendUnfulfilledCommands:!0,lazyConnect:!1,keyPrefix:"",reconnectOnError:null,readOnly:!1,stringNumbers:!1,maxRetriesPerRequest:20,maxLoadingRetryTime:1e4,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],maxScriptsCachingTime:6e4,sentinelMaxConnections:10};Object.defineProperty(zr,"__esModule",{value:!0});const Qr=Tr,EC=Fs,fh=pa,hh=ga,dh=Ar,ph=Fi,dn=et,ru=Ir,Wr=kf,yh=zs,xC=Gi,mh=An,gh=fr,CC=Gs,OC=tu,Yr=dn.Debug("redis");zr.default=ft;function ft(){if(!(this instanceof ft))return console.error(new Error("Calling `Redis()` like a function is deprecated. Using `new Redis()` instead.").stack.replace("Error","Warning")),new ft(arguments[0],arguments[1],arguments[2]);if(this.parseOptions(arguments[0],arguments[1],arguments[2]),fh.EventEmitter.call(this),ph.default.call(this),this.resetCommandQueue(),this.resetOfflineQueue(),this.connectionEpoch=0,this.options.Connector)this.connector=new this.options.Connector(this.options);else if(this.options.sentinels){const r=new yh.SentinelConnector(this.options);r.emitter=this,this.connector=r}else this.connector=new yh.StandaloneConnector(this.options);this.retryAttempts=0,this._addedScriptHashes={},this._autoPipelines=new Map,this._runningAutoPipelines=new Set,Object.defineProperty(this,"autoPipelineQueueSize",{get(){let r=0;for(const e of this._autoPipelines.values())r+=e.length;return r}}),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(Qr.noop)}EC.inherits(ft,fh.EventEmitter);Object.assign(ft.prototype,ph.default.prototype);ft.createClient=function(...r){return new ft(...r)};ft.defaultOptions=OC.DEFAULT_REDIS_OPTIONS;ft.prototype.resetCommandQueue=function(){this.commandQueue=new hh};ft.prototype.resetOfflineQueue=function(){this.offlineQueue=new hh};ft.prototype.parseOptions=function(){this.options={};let r=!1;for(let e=0;e<arguments.length;++e){const t=arguments[e];if(!(t===null||typeof t=="undefined"))if(typeof t=="object")Qr.defaults(this.options,t);else if(typeof t=="string")Qr.defaults(this.options,dn.parseURL(t)),t.startsWith("rediss://")&&(r=!0);else if(typeof t=="number")this.options.port=t;else throw new Error("Invalid argument "+t)}r&&Qr.defaults(this.options,{tls:!0}),Qr.defaults(this.options,ft.defaultOptions),typeof this.options.port=="string"&&(this.options.port=parseInt(this.options.port,10)),typeof this.options.db=="string"&&(this.options.db=parseInt(this.options.db,10)),this.options.parser==="hiredis"&&console.warn("Hiredis parser is abandoned since ioredis v3.0, and JavaScript parser will be used"),this.options=dn.resolveTLSProfile(this.options)};ft.prototype.setStatus=function(r,e){Yr.enabled&&Yr("status[%s]: %s -> %s",this._getDescription(),this.status||"[empty]",r),this.status=r,process.nextTick(this.emit.bind(this,r,e))};ft.prototype.clearAddedScriptHashesCleanInterval=function(){this._addedScriptHashesCleanInterval&&(clearInterval(this._addedScriptHashesCleanInterval),this._addedScriptHashesCleanInterval=null)};ft.prototype.connect=function(r){const e=gh.get(),t=new e((n,i)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){i(new Error("Redis is already connecting/connected"));return}this.clearAddedScriptHashesCleanInterval(),this._addedScriptHashesCleanInterval=setInterval(()=>{this._addedScriptHashes={}},this.options.maxScriptsCachingTime),this.connectionEpoch+=1,this.setStatus("connecting");const{options:s}=this;this.condition={select:s.db,auth:s.username?[s.username,s.password]:s.password,subscriber:!1};const o=this;ru.default(this.connector.connect(function(a,u){o.silentEmit(a,u)}),function(a,u){if(a){o.flushQueue(a),o.silentEmit("error",a),i(a),o.setStatus("end");return}let c=s.tls?"secureConnect":"connect";if(s.sentinels&&!s.enableTLSForSentinelMode&&(c="connect"),o.stream=u,typeof s.keepAlive=="number"&&u.setKeepAlive(!0,s.keepAlive),u.connecting){if(u.once(c,Wr.connectHandler(o)),s.connectTimeout){let h=!1;u.setTimeout(s.connectTimeout,function(){if(h)return;u.setTimeout(0),u.destroy();const m=new Error("connect ETIMEDOUT");m.errorno="ETIMEDOUT",m.code="ETIMEDOUT",m.syscall="connect",Wr.errorHandler(o)(m)}),u.once(c,function(){h=!0,u.setTimeout(0)})}}else if(u.destroyed){const h=o.connector.firstError;h&&process.nextTick(()=>{Wr.errorHandler(o)(h)}),process.nextTick(Wr.closeHandler(o))}else process.nextTick(Wr.connectHandler(o));u.destroyed||(u.once("error",Wr.errorHandler(o)),u.once("close",Wr.closeHandler(o))),s.noDelay&&u.setNoDelay(!0);const f=function(){o.removeListener("close",l),n()};var l=function(){o.removeListener("ready",f),i(new Error(dn.CONNECTION_CLOSED_ERROR_MSG))};o.once("ready",f),o.once("close",l)})});return ru.default(t,r)};ft.prototype.disconnect=function(r){this.clearAddedScriptHashesCleanInterval(),r||(this.manuallyClosing=!0),this.reconnectTimeout&&!r&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.status==="wait"?Wr.closeHandler(this)():this.connector.disconnect()};ft.prototype.end=function(){this.disconnect()};ft.prototype.duplicate=function(r){return new ft(Object.assign({},this.options,r||{}))};ft.prototype.recoverFromFatalError=function(r,e,t){this.flushQueue(e,t),this.silentEmit("error",e),this.disconnect(!0)};ft.prototype.handleReconnection=function(e,t){let n=!1;switch(this.options.reconnectOnError&&(n=this.options.reconnectOnError(e)),n){case 1:case!0:this.status!=="reconnecting"&&this.disconnect(!0),t.command.reject(e);break;case 2:this.status!=="reconnecting"&&this.disconnect(!0),this.condition.select!==t.select&&t.command.name!=="select"&&this.select(t.select),this.sendCommand(t.command);break;default:t.command.reject(e)}};ft.prototype.flushQueue=function(r,e){e=Qr.defaults({},e,{offlineQueue:!0,commandQueue:!0});let t;if(e.offlineQueue)for(;this.offlineQueue.length>0;)t=this.offlineQueue.shift(),t.command.reject(r);if(e.commandQueue&&this.commandQueue.length>0)for(this.stream&&this.stream.removeAllListeners("data");this.commandQueue.length>0;)t=this.commandQueue.shift(),t.command.reject(r)};ft.prototype._readyCheck=function(r){const e=this;this.info(function(t,n){if(t)return r(t);if(typeof n!="string")return r(null,n);const i={},s=n.split(`\r
`);for(let o=0;o<s.length;++o){const[a,...u]=s[o].split(":"),c=u.join(":");c&&(i[a]=c)}if(!i.loading||i.loading==="0")r(null,i);else{const o=(i.loading_eta_seconds||1)*1e3,a=e.options.maxLoadingRetryTime&&e.options.maxLoadingRetryTime<o?e.options.maxLoadingRetryTime:o;Yr("Redis server still loading, trying again in "+a+"ms"),setTimeout(function(){e._readyCheck(r)},a)}})};ft.prototype.silentEmit=function(r){let e;if(!(r==="error"&&(e=arguments[1],this.status==="end"||this.manuallyClosing&&e instanceof Error&&(e.message===dn.CONNECTION_CLOSED_ERROR_MSG||e.syscall==="connect"||e.syscall==="read"))))return this.listeners(r).length>0?this.emit.apply(this,arguments):(e&&e instanceof Error&&console.error("[ioredis] Unhandled error event:",e.stack),!1)};ft.prototype.monitor=function(r){const e=this.duplicate({monitor:!0,lazyConnect:!1}),t=gh.get();return ru.default(new t(function(n){e.once("monitoring",function(){n(e)})}),r)};CC.addTransactionSupport(ft.prototype);ft.prototype.sendCommand=function(r,e){if(this.status==="wait"&&this.connect().catch(Qr.noop),this.status==="end")return r.reject(new Error(dn.CONNECTION_CLOSED_ERROR_MSG)),r.promise;if(this.condition.subscriber&&!dh.default.checkFlag("VALID_IN_SUBSCRIBER_MODE",r.name))return r.reject(new Error("Connection in subscriber mode, only subscriber commands may be used")),r.promise;typeof this.options.commandTimeout=="number"&&r.setTimeout(this.options.commandTimeout),r.name==="quit"&&this.clearAddedScriptHashesCleanInterval();let t=this.status==="ready"||!e&&this.status==="connect"&&mh.exists(r.name)&&mh.hasFlag(r.name,"loading");if(this.stream&&this.stream.writable?this.stream._writableState&&this.stream._writableState.ended&&(t=!1):t=!1,!t&&!this.options.enableOfflineQueue)return r.reject(new Error("Stream isn't writeable and enableOfflineQueue options is false")),r.promise;if(!t&&r.name==="quit"&&this.offlineQueue.length===0)return this.disconnect(),r.resolve(Buffer.from("OK")),r.promise;if(t?(Yr.enabled&&Yr("write command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,r.name,r.args),(e||this.stream).write(r.toWritable()),this.commandQueue.push({command:r,stream:e,select:this.condition.select}),dh.default.checkFlag("WILL_DISCONNECT",r.name)&&(this.manuallyClosing=!0)):this.options.enableOfflineQueue&&(Yr.enabled&&Yr("queue command[%s]: %d -> %s(%o)",this._getDescription(),this.condition.select,r.name,r.args),this.offlineQueue.push({command:r,stream:e,select:this.condition.select})),r.name==="select"&&dn.isInt(r.args[0])){const n=parseInt(r.args[0],10);this.condition.select!==n&&(this.condition.select=n,this.emit("select",n),Yr("switch to db [%d]",this.condition.select))}return r.promise};ft.prototype._getDescription=function(){let r;return this.options.path?r=this.options.path:this.stream&&this.stream.remoteAddress&&this.stream.remotePort?r=this.stream.remoteAddress+":"+this.stream.remotePort:r=this.options.host+":"+this.options.port,this.options.connectionName&&(r+=` (${this.options.connectionName})`),r};["scan","sscan","hscan","zscan","scanBuffer","sscanBuffer","hscanBuffer","zscanBuffer"].forEach(function(r){ft.prototype[r+"Stream"]=function(e,t){return(r==="scan"||r==="scanBuffer")&&(t=e,e=null),new xC.default(Qr.defaults({objectMode:!0,key:e,redis:this,command:r},t))}});var nu={},iu={};Object.defineProperty(iu,"__esModule",{value:!0});const TC=Bn;class AC extends TC.RedisError{constructor(e,t){super(e);this.lastNodeError=t,Error.captureStackTrace(this,this.constructor)}get name(){return this.constructor.name}}iu.default=AC;var su={},br={};Object.defineProperty(br,"__esModule",{value:!0});const vh=et,IC=Gr;function NC(r){return r.port=r.port||6379,r.host=r.host||"127.0.0.1",r.host+":"+r.port}br.getNodeKey=NC;function RC(r){const e=r.lastIndexOf(":");if(e===-1)throw new Error(`Invalid node key ${r}`);return{host:r.slice(0,e),port:Number(r.slice(e+1))}}br.nodeKeyToRedisOptions=RC;function MC(r){return r.map(e=>{const t={};if(typeof e=="object")Object.assign(t,e);else if(typeof e=="string")Object.assign(t,vh.parseURL(e));else if(typeof e=="number")t.port=e;else throw new Error("Invalid argument "+e);return typeof t.port=="string"&&(t.port=parseInt(t.port,10)),delete t.db,t.port||(t.port=6379),t.host||(t.host="127.0.0.1"),vh.resolveTLSProfile(t)})}br.normalizeNodeOptions=MC;function DC(r){const e={};return r.forEach(t=>{e[t.host]=!0}),Object.keys(e).filter(t=>!IC.isIP(t))}br.getUniqueHostnamesFromOptions=DC;function FC(r){const e={};for(const t of r)e.hasOwnProperty(t.priority)?(e[t.priority].totalWeight+=t.weight,e[t.priority].records.push(t)):e[t.priority]={totalWeight:t.weight,records:[t]};return e}br.groupSrvRecords=FC;function PC(r){if(r.records.length===1)return r.totalWeight=0,r.records.shift();const e=Math.floor(Math.random()*(r.totalWeight+r.records.length));let t=0;for(const[n,i]of r.records.entries())if(t+=1+i.weight,t>e)return r.totalWeight-=i.weight,r.records.splice(n,1),i}br.weightSrvRecords=PC;function jC(r,e){const t=`ioredis-cluster(${r})`;return e?`${t}:${e}`:t}br.getConnectionName=jC;Object.defineProperty(su,"__esModule",{value:!0});const LC=pa,Qs=et,bh=br,BC=zr,Vi=Qs.Debug("cluster:connectionPool");class UC extends LC.EventEmitter{constructor(e){super();this.redisOptions=e,this.nodes={all:{},master:{},slave:{}},this.specifiedOptions={}}getNodes(e="all"){const t=this.nodes[e];return Object.keys(t).map(n=>t[n])}getInstanceByKey(e){return this.nodes.all[e]}getSampleInstance(e){const t=Object.keys(this.nodes[e]),n=Qs.sample(t);return this.nodes[e][n]}findOrCreate(e,t=!1){const n=bh.getNodeKey(e);t=Boolean(t),this.specifiedOptions[n]?Object.assign(e,this.specifiedOptions[n]):this.specifiedOptions[n]=e;let i;return this.nodes.all[n]?(i=this.nodes.all[n],i.options.readOnly!==t&&(i.options.readOnly=t,Vi("Change role of %s to %s",n,t?"slave":"master"),i[t?"readonly":"readwrite"]().catch(Qs.noop),t?(delete this.nodes.master[n],this.nodes.slave[n]=i):(delete this.nodes.slave[n],this.nodes.master[n]=i))):(Vi("Connecting to %s as %s",n,t?"slave":"master"),i=new BC.default(Qs.defaults({retryStrategy:null,enableOfflineQueue:!0,readOnly:t},e,this.redisOptions,{lazyConnect:!0})),this.nodes.all[n]=i,this.nodes[t?"slave":"master"][n]=i,i.once("end",()=>{this.removeNode(n),this.emit("-node",i,n),Object.keys(this.nodes.all).length||this.emit("drain")}),this.emit("+node",i,n),i.on("error",function(s){this.emit("nodeError",s,n)})),i}removeNode(e){const{nodes:t}=this;t.all[e]&&(Vi("Remove %s from the pool",e),delete t.all[e]),delete t.master[e],delete t.slave[e]}reset(e){Vi("Reset with %O",e);const t={};e.forEach(n=>{const i=bh.getNodeKey(n);n.readOnly&&t[i]||(t[i]=n)}),Object.keys(this.nodes.all).forEach(n=>{t[n]||(Vi("Disconnect %s because the node does not hold any slot",n),this.nodes.all[n].disconnect(),this.removeNode(n))}),Object.keys(t).forEach(n=>{const i=t[n];this.findOrCreate(i,i.readOnly)})}}su.default=UC;var ou={};Object.defineProperty(ou,"__esModule",{value:!0});const _h=br,au=et,qC=zr,Jr=au.Debug("cluster:subscriber");class HC{constructor(e,t){this.connectionPool=e,this.emitter=t,this.started=!1,this.subscriber=null,this.connectionPool.on("-node",(n,i)=>{!this.started||!this.subscriber||_h.getNodeKey(this.subscriber.options)===i&&(Jr("subscriber has left, selecting a new one..."),this.selectSubscriber())}),this.connectionPool.on("+node",()=>{!this.started||this.subscriber||(Jr("a new node is discovered and there is no subscriber, selecting a new one..."),this.selectSubscriber())})}getInstance(){return this.subscriber}selectSubscriber(){const e=this.lastActiveSubscriber;e&&e.disconnect(),this.subscriber&&this.subscriber.disconnect();const t=au.sample(this.connectionPool.getNodes());if(!t){Jr("selecting subscriber failed since there is no node discovered in the cluster yet"),this.subscriber=null;return}const{options:n}=t;Jr("selected a subscriber %s:%s",n.host,n.port),this.subscriber=new qC.default({port:n.port,host:n.host,username:n.username,password:n.password,enableReadyCheck:!0,connectionName:_h.getConnectionName("subscriber",n.connectionName),lazyConnect:!0,tls:n.tls}),this.subscriber.on("error",au.noop);const i={subscribe:[],psubscribe:[]};if(e){const s=e.condition||e.prevCondition;s&&s.subscriber&&(i.subscribe=s.subscriber.channels("subscribe"),i.psubscribe=s.subscriber.channels("psubscribe"))}if(i.subscribe.length||i.psubscribe.length){let s=0;for(const o of["subscribe","psubscribe"]){const a=i[o];a.length&&(s+=1,Jr("%s %d channels",o,a.length),this.subscriber[o](a).then(()=>{--s||(this.lastActiveSubscriber=this.subscriber)}).catch(()=>{Jr("failed to %s %d channels",o,a.length)}))}}else this.lastActiveSubscriber=this.subscriber;for(const s of["message","messageBuffer"])this.subscriber.on(s,(o,a)=>{this.emitter.emit(s,o,a)});for(const s of["pmessage","pmessageBuffer"])this.subscriber.on(s,(o,a,u)=>{this.emitter.emit(s,o,a,u)})}start(){this.started=!0,this.selectSubscriber(),Jr("started")}stop(){this.started=!1,this.subscriber&&(this.subscriber.disconnect(),this.subscriber=null),Jr("stopped")}}ou.default=HC;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});const zC=et,GC=ga,VC=zC.Debug("delayqueue");class QC{constructor(){this.queues={},this.timeouts={}}push(e,t,n){const i=n.callback||process.nextTick;this.queues[e]||(this.queues[e]=new GC),this.queues[e].push(t),this.timeouts[e]||(this.timeouts[e]=setTimeout(()=>{i(()=>{this.timeouts[e]=null,this.execute(e)})},n.timeout))}execute(e){const t=this.queues[e];if(!t)return;const{length:n}=t;if(!!n)for(VC("send %d commands in %s queue",n,e),this.queues[e]=null;t.length>0;)t.shift()()}}uu.default=QC;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});const wh=Gr;cu.DEFAULT_CLUSTER_OPTIONS={clusterRetryStrategy:r=>Math.min(100+r*2,2e3),enableOfflineQueue:!0,enableReadyCheck:!0,scaleReads:"master",maxRedirections:16,retryDelayOnMoved:0,retryDelayOnFailover:100,retryDelayOnClusterDown:100,retryDelayOnTryAgain:100,slotsRefreshTimeout:1e3,slotsRefreshInterval:5e3,useSRVRecords:!1,resolveSrv:wh.resolveSrv,dnsLookup:wh.lookup,enableAutoPipelining:!1,autoPipeliningIgnoredCommands:[],maxScriptsCachingTime:6e4};Object.defineProperty(nu,"__esModule",{value:!0});const WC=pa,YC=iu,Qi=et,JC=su,zn=br,KC=ou,XC=uu,ZC=Gi,Ws=Bn,Sh=Ir,kh=fr,$C=cu,jr=et,Eh=An,xh=Ar,eO=zr,lu=Fi,Ch=ga,kt=Qi.Debug("cluster");class pn extends WC.EventEmitter{constructor(e,t={}){super();if(this.slots=[],this.retryAttempts=0,this.delayQueue=new XC.default,this.offlineQueue=new Ch,this.isRefreshing=!1,this.isCluster=!0,this._autoPipelines=new Map,this._groupsIds={},this._groupsBySlot=Array(16384),this._runningAutoPipelines=new Set,this._readyDelayedCallbacks=[],this._addedScriptHashes={},this.connectionEpoch=0,lu.default.call(this),this.startupNodes=e,this.options=Qi.defaults({},t,$C.DEFAULT_CLUSTER_OPTIONS,this.options),typeof this.options.scaleReads!="function"&&["all","master","slave"].indexOf(this.options.scaleReads)===-1)throw new Error('Invalid option scaleReads "'+this.options.scaleReads+'". Expected "all", "master", "slave" or a custom function');this.connectionPool=new JC.default(this.options.redisOptions),this.connectionPool.on("-node",(n,i)=>{this.emit("-node",n)}),this.connectionPool.on("+node",n=>{this.emit("+node",n)}),this.connectionPool.on("drain",()=>{this.setStatus("close")}),this.connectionPool.on("nodeError",(n,i)=>{this.emit("node error",n,i)}),this.subscriber=new KC.default(this.connectionPool,this),this.options.lazyConnect?this.setStatus("wait"):this.connect().catch(n=>{kt("connecting failed: %s",n)})}resetOfflineQueue(){this.offlineQueue=new Ch}clearNodesRefreshInterval(){this.slotsTimer&&(clearTimeout(this.slotsTimer),this.slotsTimer=null)}clearAddedScriptHashesCleanInterval(){this._addedScriptHashesCleanInterval&&(clearInterval(this._addedScriptHashesCleanInterval),this._addedScriptHashesCleanInterval=null)}resetNodesRefreshInterval(){if(this.slotsTimer)return;const e=()=>{this.slotsTimer=setTimeout(()=>{kt('refreshing slot caches... (triggered by "slotsRefreshInterval" option)'),this.refreshSlotsCache(()=>{e()})},this.options.slotsRefreshInterval)};e()}connect(){const e=kh.get();return new e((t,n)=>{if(this.status==="connecting"||this.status==="connect"||this.status==="ready"){n(new Error("Redis is already connecting/connected"));return}this.clearAddedScriptHashesCleanInterval(),this._addedScriptHashesCleanInterval=setInterval(()=>{this._addedScriptHashes={}},this.options.maxScriptsCachingTime);const i=++this.connectionEpoch;this.setStatus("connecting"),this.resolveStartupNodeHostnames().then(s=>{if(this.connectionEpoch!==i){kt("discard connecting after resolving startup nodes because epoch not match: %d != %d",i,this.connectionEpoch),n(new Ws.RedisError("Connection is discarded because a new connection is made"));return}if(this.status!=="connecting"){kt("discard connecting after resolving startup nodes because the status changed to %s",this.status),n(new Ws.RedisError("Connection is aborted"));return}this.connectionPool.reset(s);function o(){this.setStatus("ready"),this.retryAttempts=0,this.executeOfflineCommands(),this.resetNodesRefreshInterval(),t()}let a;const u=()=>{this.invokeReadyDelayedCallbacks(void 0),this.removeListener("close",a),this.manuallyClosing=!1,this.setStatus("connect"),this.options.enableReadyCheck?this.readyCheck((c,f)=>{c||f?(kt("Ready check failed (%s). Reconnecting...",c||f),this.status==="connect"&&this.disconnect(!0)):o.call(this)}):o.call(this)};a=function(){const c=new Error("None of startup nodes is available");this.removeListener("refresh",u),this.invokeReadyDelayedCallbacks(c),n(c)},this.once("refresh",u),this.once("close",a),this.once("close",this.handleCloseEvent.bind(this)),this.refreshSlotsCache(function(c){c&&c.message==="Failed to refresh slots cache."&&(eO.default.prototype.silentEmit.call(this,"error",c),this.connectionPool.reset([]))}.bind(this)),this.subscriber.start()}).catch(s=>{this.setStatus("close"),this.handleCloseEvent(s),this.invokeReadyDelayedCallbacks(s),n(s)})})}handleCloseEvent(e){e&&kt("closed because %s",e),this.clearAddedScriptHashesCleanInterval();let t;!this.manuallyClosing&&typeof this.options.clusterRetryStrategy=="function"&&(t=this.options.clusterRetryStrategy.call(this,++this.retryAttempts,e)),typeof t=="number"?(this.setStatus("reconnecting"),this.reconnectTimeout=setTimeout(function(){this.reconnectTimeout=null,kt("Cluster is disconnected. Retrying after %dms",t),this.connect().catch(function(n){kt("Got error %s when reconnecting. Ignoring...",n)})}.bind(this),t)):(this.setStatus("end"),this.flushQueue(new Error("None of startup nodes is available")))}disconnect(e=!1){const t=this.status;this.setStatus("disconnecting"),this.clearAddedScriptHashesCleanInterval(),e||(this.manuallyClosing=!0),this.reconnectTimeout&&!e&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null,kt("Canceled reconnecting attempts")),this.clearNodesRefreshInterval(),this.subscriber.stop(),t==="wait"?(this.setStatus("close"),this.handleCloseEvent()):this.connectionPool.reset([])}quit(e){const t=this.status;this.setStatus("disconnecting"),this.clearAddedScriptHashesCleanInterval(),this.manuallyClosing=!0,this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.clearNodesRefreshInterval(),this.subscriber.stop();const n=kh.get();if(t==="wait"){const i=Sh.default(n.resolve("OK"),e);return setImmediate(function(){this.setStatus("close"),this.handleCloseEvent()}.bind(this)),i}return Sh.default(n.all(this.nodes().map(i=>i.quit().catch(s=>{if(s.message===jr.CONNECTION_CLOSED_ERROR_MSG)return"OK";throw s}))).then(()=>"OK"),e)}duplicate(e=[],t={}){const n=e.length>0?e:this.startupNodes.slice(0),i=Object.assign({},this.options,t);return new pn(n,i)}nodes(e="all"){if(e!=="all"&&e!=="master"&&e!=="slave")throw new Error('Invalid role "'+e+'". Expected "all", "master" or "slave"');return this.connectionPool.getNodes(e)}delayUntilReady(e){this._readyDelayedCallbacks.push(e)}get autoPipelineQueueSize(){let e=0;for(const t of this._autoPipelines.values())e+=t.length;return e}setStatus(e){kt("status: %s -> %s",this.status||"[empty]",e),this.status=e,process.nextTick(()=>{this.emit(e)})}refreshSlotsCache(e){if(this.isRefreshing){typeof e=="function"&&process.nextTick(e);return}this.isRefreshing=!0;const t=this,n=function(a){t.isRefreshing=!1,typeof e=="function"&&e(a)},i=jr.shuffle(this.connectionPool.getNodes());let s=null;function o(a){if(a===i.length){const f=new YC.default("Failed to refresh slots cache.",s);return n(f)}const u=i[a],c=`${u.options.host}:${u.options.port}`;kt("getting slot cache from %s",c),t.getInfoFromNode(u,function(f){switch(t.status){case"close":case"end":return n(new Error("Cluster is disconnected."));case"disconnecting":return n(new Error("Cluster is disconnecting."))}f?(t.emit("node error",f,c),s=f,o(a+1)):(t.emit("refresh"),n())})}o(0)}flushQueue(e){let t;for(;this.offlineQueue.length>0;)t=this.offlineQueue.shift(),t.command.reject(e)}executeOfflineCommands(){if(this.offlineQueue.length){kt("send %d commands in offline queue",this.offlineQueue.length);const e=this.offlineQueue;for(this.resetOfflineQueue();e.length>0;){const t=e.shift();this.sendCommand(t.command,t.stream,t.node)}}}natMapper(e){if(this.options.natMap&&typeof this.options.natMap=="object"){const t=typeof e=="string"?e:`${e.host}:${e.port}`,n=this.options.natMap[t];if(n)return kt("NAT mapping %s -> %O",t,n),Object.assign({},n)}return typeof e=="string"?zn.nodeKeyToRedisOptions(e):e}sendCommand(e,t,n){if(this.status==="wait"&&this.connect().catch(Qi.noop),this.status==="end")return e.reject(new Error(jr.CONNECTION_CLOSED_ERROR_MSG)),e.promise;let i=this.options.scaleReads;i!=="master"&&(e.isReadOnly||Eh.exists(e.name)&&Eh.hasFlag(e.name,"readonly")||(i="master"));let s=n?n.slot:e.getSlot();const o={},a=this;if(!n&&!e.__is_reject_overwritten){e.__is_reject_overwritten=!0;const c=e.reject;e.reject=function(f){const l=u.bind(null,!0);a.handleError(f,o,{moved:function(h,m){kt("command %s is moved to %s",e.name,m),s=Number(h),a.slots[h]?a.slots[h][0]=m:a.slots[h]=[m],a._groupsBySlot[h]=a._groupsIds[a.slots[h].join(";")],a.connectionPool.findOrCreate(a.natMapper(m)),u(),kt("refreshing slot caches... (triggered by MOVED error)"),a.refreshSlotsCache()},ask:function(h,m){kt("command %s is required to ask %s:%s",e.name,m);const b=a.natMapper(m);a.connectionPool.findOrCreate(b),u(!1,`${b.host}:${b.port}`)},tryagain:l,clusterDown:l,connectionClosed:l,maxRedirections:function(h){c.call(e,h)},defaults:function(){c.call(e,f)}})}}u();function u(c,f){if(a.status==="end"){e.reject(new Ws.AbortError("Cluster is ended."));return}let l;if(a.status==="ready"||e.name==="cluster"){if(n&&n.redis)l=n.redis;else if(xh.default.checkFlag("ENTER_SUBSCRIBER_MODE",e.name)||xh.default.checkFlag("EXIT_SUBSCRIBER_MODE",e.name)){if(l=a.subscriber.getInstance(),!l){e.reject(new Ws.AbortError("No subscriber for the cluster"));return}}else{if(!c){if(typeof s=="number"&&a.slots[s]){const h=a.slots[s];if(typeof i=="function"){const m=h.map(function(b){return a.connectionPool.getInstanceByKey(b)});l=i(m,e),Array.isArray(l)&&(l=jr.sample(l)),l||(l=m[0])}else{let m;i==="all"?m=jr.sample(h):i==="slave"&&h.length>1?m=jr.sample(h,1):m=h[0],l=a.connectionPool.getInstanceByKey(m)}}f&&(l=a.connectionPool.getInstanceByKey(f),l.asking())}l||(l=(typeof i=="function"?null:a.connectionPool.getSampleInstance(i))||a.connectionPool.getSampleInstance("all"))}n&&!n.redis&&(n.redis=l)}l?l.sendCommand(e,t):a.options.enableOfflineQueue?a.offlineQueue.push({command:e,stream:t,node:n}):e.reject(new Error("Cluster isn't ready and enableOfflineQueue options is false"))}return e.promise}handleError(e,t,n){if(typeof t.value=="undefined"?t.value=this.options.maxRedirections:t.value-=1,t.value<=0){n.maxRedirections(new Error("Too many Cluster redirections. Last error: "+e));return}const i=e.message.split(" ");if(i[0]==="MOVED"){const s=this.options.retryDelayOnMoved;s&&typeof s=="number"?this.delayQueue.push("moved",n.moved.bind(null,i[1],i[2]),{timeout:s}):n.moved(i[1],i[2])}else i[0]==="ASK"?n.ask(i[1],i[2]):i[0]==="TRYAGAIN"?this.delayQueue.push("tryagain",n.tryagain,{timeout:this.options.retryDelayOnTryAgain}):i[0]==="CLUSTERDOWN"&&this.options.retryDelayOnClusterDown>0?this.delayQueue.push("clusterdown",n.connectionClosed,{timeout:this.options.retryDelayOnClusterDown,callback:this.refreshSlotsCache.bind(this)}):e.message===jr.CONNECTION_CLOSED_ERROR_MSG&&this.options.retryDelayOnFailover>0&&this.status==="ready"?this.delayQueue.push("failover",n.connectionClosed,{timeout:this.options.retryDelayOnFailover,callback:this.refreshSlotsCache.bind(this)}):n.defaults()}getInfoFromNode(e,t){if(!e)return t(new Error("Node is disconnected"));const n=e.duplicate({enableOfflineQueue:!0,enableReadyCheck:!1,retryStrategy:null,connectionName:zn.getConnectionName("refresher",this.options.redisOptions&&this.options.redisOptions.connectionName)});n.on("error",Qi.noop),n.cluster("slots",jr.timeout((i,s)=>{if(n.disconnect(),i)return t(i);if(this.status==="disconnecting"||this.status==="close"||this.status==="end"){kt("ignore CLUSTER.SLOTS results (count: %d) since cluster status is %s",s.length,this.status),t();return}const o=[];kt("cluster slots result count: %d",s.length);for(let u=0;u<s.length;++u){const c=s[u],f=c[0],l=c[1],h=[];for(let m=2;m<c.length;m++)!c[m][0]||(c[m]=this.natMapper({host:c[m][0],port:c[m][1]}),c[m].readOnly=m!==2,o.push(c[m]),h.push(c[m].host+":"+c[m].port));kt("cluster slots result [%d]: slots %d~%d served by %s",u,f,l,h);for(let m=f;m<=l;m++)this.slots[m]=h}this._groupsIds=Object.create(null);let a=0;for(let u=0;u<16384;u++){const c=(this.slots[u]||[]).join(";");if(!c.length){this._groupsBySlot[u]=void 0;continue}this._groupsIds[c]||(this._groupsIds[c]=++a),this._groupsBySlot[u]=this._groupsIds[c]}this.connectionPool.reset(o),t()},this.options.slotsRefreshTimeout))}invokeReadyDelayedCallbacks(e){for(const t of this._readyDelayedCallbacks)process.nextTick(t,e);this._readyDelayedCallbacks=[]}readyCheck(e){this.cluster("info",function(t,n){if(t)return e(t);if(typeof n!="string")return e();let i;const s=n.split(`\r
`);for(let o=0;o<s.length;++o){const a=s[o].split(":");if(a[0]==="cluster_state"){i=a[1];break}}i==="fail"?(kt("cluster state not ok (%s)",i),e(null,i)):e()})}resolveSrv(e){return new Promise((t,n)=>{this.options.resolveSrv(e,(i,s)=>{if(i)return n(i);const o=this,a=zn.groupSrvRecords(s),u=Object.keys(a).sort((f,l)=>parseInt(f)-parseInt(l));function c(f){if(!u.length)return n(f);const l=u[0],h=a[l],m=zn.weightSrvRecords(h);h.records.length||u.shift(),o.dnsLookup(m.name).then(b=>t({host:b,port:m.port}),c)}c()})})}dnsLookup(e){return new Promise((t,n)=>{this.options.dnsLookup(e,(i,s)=>{i?(kt("failed to resolve hostname %s to IP: %s",e,i.message),n(i)):(kt("resolved hostname %s to IP %s",e,s),t(s))})})}resolveStartupNodeHostnames(){if(!Array.isArray(this.startupNodes)||this.startupNodes.length===0)return Promise.reject(new Error("`startupNodes` should contain at least one node."));const e=zn.normalizeNodeOptions(this.startupNodes),t=zn.getUniqueHostnamesFromOptions(e);return t.length===0?Promise.resolve(e):Promise.all(t.map((this.options.useSRVRecords?this.resolveSrv:this.dnsLookup).bind(this))).then(n=>{const i=jr.zipMap(t,n);return e.map(s=>{const o=i.get(s.host);return o?this.options.useSRVRecords?Object.assign({},s,o):Object.assign({},s,{host:o}):s})})}}Object.getOwnPropertyNames(lu.default.prototype).forEach(r=>{pn.prototype.hasOwnProperty(r)||(pn.prototype[r]=lu.default.prototype[r])});const tO=["sscan","hscan","zscan","sscanBuffer","hscanBuffer","zscanBuffer"];tO.forEach(r=>{pn.prototype[r+"Stream"]=function(e,t){return new ZC.default(Qi.defaults({objectMode:!0,key:e,redis:this,command:r},t))}});Gs.addTransactionSupport(pn.prototype);nu.default=pn;(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e=r.exports=zr.default;var t=zr;e.default=t.default;var n=nu;e.Cluster=n.default;var i=Ar;e.Command=i.default;var s=Gi;e.ScanStream=s.default;var o=Vs;e.Pipeline=o.default;var a=qi;e.AbstractConnector=a.default;var u=Hi;e.SentinelConnector=u.default,e.SentinelIterator=u.SentinelIterator,e.ReplyError=Bn.ReplyError;const c=fr;Object.defineProperty(e,"Promise",{get(){return c.get()},set(l){c.set(l)}});function f(l,h){console.log(l?"Error: "+l:"Reply: "+h)}e.print=f})(aa,aa.exports);var e3=Rc(aa.exports),rO={};const nO=10,Oh=2;function Th(r){return Ys(r,[])}function Ys(r,e){switch(typeof r){case"string":return JSON.stringify(r);case"function":return r.name?`[function ${r.name}]`:"[function]";case"object":return iO(r,e);default:return String(r)}}function iO(r,e){if(r===null)return"null";if(e.includes(r))return"[Circular]";const t=[...e,r];if(sO(r)){const n=r.toJSON();if(n!==r)return typeof n=="string"?n:Ys(n,t)}else if(Array.isArray(r))return aO(r,t);return oO(r,t)}function sO(r){return typeof r.toJSON=="function"}function oO(r,e){const t=Object.entries(r);if(t.length===0)return"{}";if(e.length>Oh)return"["+uO(r)+"]";const n=t.map(([i,s])=>i+": "+Ys(s,e));return"{ "+n.join(", ")+" }"}function aO(r,e){if(r.length===0)return"[]";if(e.length>Oh)return"[Array]";const t=Math.min(nO,r.length),n=r.length-t,i=[];for(let s=0;s<t;++s)i.push(Ys(r[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function uO(r){const e=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof r.constructor=="function"){const t=r.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}function Js(r,e){if(!Boolean(r))throw new Error(e)}class cO{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Ah{constructor(e,t,n,i,s,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const Ih={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},lO=new Set(Object.keys(Ih));function Nh(r){const e=r==null?void 0:r.kind;return typeof e=="string"&&lO.has(e)}let Gn;(function(r){r.QUERY="query",r.MUTATION="mutation",r.SUBSCRIPTION="subscription"})(Gn||(Gn={}));let Me;(function(r){r.NAME="Name",r.DOCUMENT="Document",r.OPERATION_DEFINITION="OperationDefinition",r.VARIABLE_DEFINITION="VariableDefinition",r.SELECTION_SET="SelectionSet",r.FIELD="Field",r.ARGUMENT="Argument",r.FRAGMENT_SPREAD="FragmentSpread",r.INLINE_FRAGMENT="InlineFragment",r.FRAGMENT_DEFINITION="FragmentDefinition",r.VARIABLE="Variable",r.INT="IntValue",r.FLOAT="FloatValue",r.STRING="StringValue",r.BOOLEAN="BooleanValue",r.NULL="NullValue",r.ENUM="EnumValue",r.LIST="ListValue",r.OBJECT="ObjectValue",r.OBJECT_FIELD="ObjectField",r.DIRECTIVE="Directive",r.NAMED_TYPE="NamedType",r.LIST_TYPE="ListType",r.NON_NULL_TYPE="NonNullType",r.SCHEMA_DEFINITION="SchemaDefinition",r.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",r.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",r.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",r.FIELD_DEFINITION="FieldDefinition",r.INPUT_VALUE_DEFINITION="InputValueDefinition",r.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",r.UNION_TYPE_DEFINITION="UnionTypeDefinition",r.ENUM_TYPE_DEFINITION="EnumTypeDefinition",r.ENUM_VALUE_DEFINITION="EnumValueDefinition",r.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",r.DIRECTIVE_DEFINITION="DirectiveDefinition",r.SCHEMA_EXTENSION="SchemaExtension",r.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",r.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",r.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",r.UNION_TYPE_EXTENSION="UnionTypeExtension",r.ENUM_TYPE_EXTENSION="EnumTypeExtension",r.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Me||(Me={}));const fO=Object.freeze({});function Rh(r,e,t=Ih){const n=new Map;for(const B of Object.values(Me))n.set(B,hO(e,B));let i,s=Array.isArray(r),o=[r],a=-1,u=[],c,f,l;const h=[],m=[];let b=r;do{a++;const B=a===o.length,q=B&&u.length!==0;if(B){if(f=m.length===0?void 0:h[h.length-1],c=l,l=m.pop(),q)if(s){c=c.slice();let R=0;for(const[se,X]of u){const ee=se-R;X===null?(c.splice(ee,1),R++):c[ee]=X}}else{c=Object.defineProperties({},Object.getOwnPropertyDescriptors(c));for(const[R,se]of u)c[R]=se}a=i.index,o=i.keys,u=i.edits,s=i.inArray,i=i.prev}else{if(f=l?s?a:o[a]:void 0,c=l?l[f]:b,c==null)continue;l&&h.push(f)}let F;if(!Array.isArray(c)){var M,I;Nh(c)||Js(!1,`Invalid AST Node: ${Th(c)}.`);const R=B?(M=n.get(c.kind))===null||M===void 0?void 0:M.leave:(I=n.get(c.kind))===null||I===void 0?void 0:I.enter;if(F=R==null?void 0:R.call(e,c,f,l,h,m),F===fO)break;if(F===!1){if(!B){h.pop();continue}}else if(F!==void 0&&(u.push([f,F]),!B))if(Nh(F))c=F;else{h.pop();continue}}if(F===void 0&&q&&u.push([f,c]),B)h.pop();else{var T;i={inArray:s,index:a,keys:o,edits:u,prev:i},s=Array.isArray(c),o=s?c:(T=t[c.kind])!==null&&T!==void 0?T:[],a=-1,u=[],l&&m.push(l),l=c}}while(i!==void 0);return u.length!==0&&(b=u[u.length-1][1]),b}function hO(r,e){const t=r[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:r.enter,leave:r.leave}}function fu(r){return r===9||r===32}function Wi(r){return r>=48&&r<=57}function Mh(r){return r>=97&&r<=122||r>=65&&r<=90}function Dh(r){return Mh(r)||r===95}function dO(r){return Mh(r)||Wi(r)||r===95}function pO(r){var e;let t=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<r.length;++o){var s;const a=r[o],u=yO(a);u!==a.length&&(n=(s=n)!==null&&s!==void 0?s:o,i=o,o!==0&&u<t&&(t=u))}return r.map((o,a)=>a===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function yO(r){let e=0;for(;e<r.length&&fu(r.charCodeAt(e));)++e;return e}function mO(r,e){const t=r.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),i=n.length===1,s=n.length>1&&n.slice(1).every(m=>m.length===0||fu(m.charCodeAt(0))),o=t.endsWith('\\"""'),a=r.endsWith('"')&&!o,u=r.endsWith("\\"),c=a||u,f=!(e!=null&&e.minimize)&&(!i||r.length>70||c||s||o);let l="";const h=i&&fu(r.charCodeAt(0));return(f&&!h||s)&&(l+=`
`),l+=t,(f||c)&&(l+=`
`),'"""'+l+'"""'}function gO(r){return`"${r.replace(vO,bO)}"`}const vO=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function bO(r){return _O[r.charCodeAt(0)]}const _O=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];function hu(r){return Rh(r,SO)}const wO=80,SO={Name:{leave:r=>r.value},Variable:{leave:r=>"$"+r.name},Document:{leave:r=>Ie(r.definitions,`

`)},OperationDefinition:{leave(r){const e=nt("(",Ie(r.variableDefinitions,", "),")"),t=Ie([r.operation,Ie([r.name,e]),Ie(r.directives," ")]," ");return(t==="query"?"":t+" ")+r.selectionSet}},VariableDefinition:{leave:({variable:r,type:e,defaultValue:t,directives:n})=>r+": "+e+nt(" = ",t)+nt(" ",Ie(n," "))},SelectionSet:{leave:({selections:r})=>_r(r)},Field:{leave({alias:r,name:e,arguments:t,directives:n,selectionSet:i}){const s=nt("",r,": ")+e;let o=s+nt("(",Ie(t,", "),")");return o.length>wO&&(o=s+nt(`(
`,Ks(Ie(t,`
`)),`
)`)),Ie([o,Ie(n," "),i]," ")}},Argument:{leave:({name:r,value:e})=>r+": "+e},FragmentSpread:{leave:({name:r,directives:e})=>"..."+r+nt(" ",Ie(e," "))},InlineFragment:{leave:({typeCondition:r,directives:e,selectionSet:t})=>Ie(["...",nt("on ",r),Ie(e," "),t]," ")},FragmentDefinition:{leave:({name:r,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:i})=>`fragment ${r}${nt("(",Ie(t,", "),")")} on ${e} ${nt("",Ie(n," ")," ")}`+i},IntValue:{leave:({value:r})=>r},FloatValue:{leave:({value:r})=>r},StringValue:{leave:({value:r,block:e})=>e?mO(r):gO(r)},BooleanValue:{leave:({value:r})=>r?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:r})=>r},ListValue:{leave:({values:r})=>"["+Ie(r,", ")+"]"},ObjectValue:{leave:({fields:r})=>"{"+Ie(r,", ")+"}"},ObjectField:{leave:({name:r,value:e})=>r+": "+e},Directive:{leave:({name:r,arguments:e})=>"@"+r+nt("(",Ie(e,", "),")")},NamedType:{leave:({name:r})=>r},ListType:{leave:({type:r})=>"["+r+"]"},NonNullType:{leave:({type:r})=>r+"!"},SchemaDefinition:{leave:({description:r,directives:e,operationTypes:t})=>nt("",r,`
`)+Ie(["schema",Ie(e," "),_r(t)]," ")},OperationTypeDefinition:{leave:({operation:r,type:e})=>r+": "+e},ScalarTypeDefinition:{leave:({description:r,name:e,directives:t})=>nt("",r,`
`)+Ie(["scalar",e,Ie(t," ")]," ")},ObjectTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>nt("",r,`
`)+Ie(["type",e,nt("implements ",Ie(t," & ")),Ie(n," "),_r(i)]," ")},FieldDefinition:{leave:({description:r,name:e,arguments:t,type:n,directives:i})=>nt("",r,`
`)+e+(Fh(t)?nt(`(
`,Ks(Ie(t,`
`)),`
)`):nt("(",Ie(t,", "),")"))+": "+n+nt(" ",Ie(i," "))},InputValueDefinition:{leave:({description:r,name:e,type:t,defaultValue:n,directives:i})=>nt("",r,`
`)+Ie([e+": "+t,nt("= ",n),Ie(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>nt("",r,`
`)+Ie(["interface",e,nt("implements ",Ie(t," & ")),Ie(n," "),_r(i)]," ")},UnionTypeDefinition:{leave:({description:r,name:e,directives:t,types:n})=>nt("",r,`
`)+Ie(["union",e,Ie(t," "),nt("= ",Ie(n," | "))]," ")},EnumTypeDefinition:{leave:({description:r,name:e,directives:t,values:n})=>nt("",r,`
`)+Ie(["enum",e,Ie(t," "),_r(n)]," ")},EnumValueDefinition:{leave:({description:r,name:e,directives:t})=>nt("",r,`
`)+Ie([e,Ie(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:r,name:e,directives:t,fields:n})=>nt("",r,`
`)+Ie(["input",e,Ie(t," "),_r(n)]," ")},DirectiveDefinition:{leave:({description:r,name:e,arguments:t,repeatable:n,locations:i})=>nt("",r,`
`)+"directive @"+e+(Fh(t)?nt(`(
`,Ks(Ie(t,`
`)),`
)`):nt("(",Ie(t,", "),")"))+(n?" repeatable":"")+" on "+Ie(i," | ")},SchemaExtension:{leave:({directives:r,operationTypes:e})=>Ie(["extend schema",Ie(r," "),_r(e)]," ")},ScalarTypeExtension:{leave:({name:r,directives:e})=>Ie(["extend scalar",r,Ie(e," ")]," ")},ObjectTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>Ie(["extend type",r,nt("implements ",Ie(e," & ")),Ie(t," "),_r(n)]," ")},InterfaceTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>Ie(["extend interface",r,nt("implements ",Ie(e," & ")),Ie(t," "),_r(n)]," ")},UnionTypeExtension:{leave:({name:r,directives:e,types:t})=>Ie(["extend union",r,Ie(e," "),nt("= ",Ie(t," | "))]," ")},EnumTypeExtension:{leave:({name:r,directives:e,values:t})=>Ie(["extend enum",r,Ie(e," "),_r(t)]," ")},InputObjectTypeExtension:{leave:({name:r,directives:e,fields:t})=>Ie(["extend input",r,Ie(e," "),_r(t)]," ")}};function Ie(r,e=""){var t;return(t=r==null?void 0:r.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function _r(r){return nt(`{
`,Ks(Ie(r,`
`)),`
}`)}function nt(r,e,t=""){return e!=null&&e!==""?r+e+t:""}function Ks(r){return nt("  ",r.replace(/\n/g,`
  `))}function Fh(r){var e;return(e=r==null?void 0:r.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}var kO=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",print:hu}),EO=Mc(kO),du={},Xs={},Ph=function(e){var t=e.uri,n=e.name,i=e.type;this.uri=t,this.name=n,this.type=i},xO=Ph,jh=function(e){return typeof File!="undefined"&&e instanceof File||typeof Blob!="undefined"&&e instanceof Blob||e instanceof xO},CO=jh,OO=function r(e,t,n){t===void 0&&(t=""),n===void 0&&(n=CO);var i,s=new Map;function o(f,l){var h=s.get(l);h?h.push.apply(h,f):s.set(l,f)}if(n(e))i=null,o([t],e);else{var a=t?t+".":"";if(typeof FileList!="undefined"&&e instanceof FileList)i=Array.prototype.map.call(e,function(f,l){return o([""+a+l],f),null});else if(Array.isArray(e))i=e.map(function(f,l){var h=r(f,""+a+l,n);return h.files.forEach(o),h.clone});else if(e&&e.constructor===Object){i={};for(var u in e){var c=r(e[u],""+a+u,n);c.files.forEach(o),i[u]=c.clone}}else i=e}return{clone:i,files:s}};Xs.ReactNativeFile=Ph;Xs.extractFiles=OO;Xs.isExtractableFile=jh;var TO=typeof self=="object"?self.FormData:window.FormData,AO=He&&He.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(du,"__esModule",{value:!0});var Lh=Xs,IO=AO(TO),NO=function(r){return Lh.isExtractableFile(r)||r!==null&&typeof r=="object"&&typeof r.pipe=="function"};function RO(r,e,t){var n=Lh.extractFiles({query:r,variables:e,operationName:t},"",NO),i=n.clone,s=n.files;if(s.size===0){if(!Array.isArray(r))return JSON.stringify(i);if(typeof e!="undefined"&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");var o=r.reduce(function(l,h,m){return l.push({query:h,variables:e?e[m]:void 0}),l},[]);return JSON.stringify(o)}var a=typeof FormData=="undefined"?IO.default:FormData,u=new a;u.append("operations",JSON.stringify(i));var c={},f=0;return s.forEach(function(l){c[++f]=l}),u.append("map",JSON.stringify(c)),f=0,s.forEach(function(l,h){u.append(""+ ++f,h)}),u}du.default=RO;var Zs={},MO=He&&He.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Zs,"__esModule",{value:!0});Zs.ClientError=void 0;var DO=function(r){MO(e,r);function e(t,n){var i=this,s=e.extractMessage(t)+": "+JSON.stringify({response:t,request:n});return i=r.call(this,s)||this,Object.setPrototypeOf(i,e.prototype),i.response=t,i.request=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(i,e),i}return e.extractMessage=function(t){try{return t.errors[0].message}catch{return"GraphQL Error (Code: "+t.status+")"}},e}(Error);Zs.ClientError=DO;(function(r){var e=He&&He.__assign||function(){return e=Object.assign||function(W){for(var Z,C=1,A=arguments.length;C<A;C++){Z=arguments[C];for(var H in Z)Object.prototype.hasOwnProperty.call(Z,H)&&(W[H]=Z[H])}return W},e.apply(this,arguments)},t=He&&He.__createBinding||(Object.create?function(W,Z,C,A){A===void 0&&(A=C),Object.defineProperty(W,A,{enumerable:!0,get:function(){return Z[C]}})}:function(W,Z,C,A){A===void 0&&(A=C),W[A]=Z[C]}),n=He&&He.__setModuleDefault||(Object.create?function(W,Z){Object.defineProperty(W,"default",{enumerable:!0,value:Z})}:function(W,Z){W.default=Z}),i=He&&He.__importStar||function(W){if(W&&W.__esModule)return W;var Z={};if(W!=null)for(var C in W)C!=="default"&&Object.prototype.hasOwnProperty.call(W,C)&&t(Z,W,C);return n(Z,W),Z},s=He&&He.__awaiter||function(W,Z,C,A){function H(w){return w instanceof C?w:new C(function(_){_(w)})}return new(C||(C=Promise))(function(w,_){function O(Y){try{G(A.next(Y))}catch(te){_(te)}}function j(Y){try{G(A.throw(Y))}catch(te){_(te)}}function G(Y){Y.done?w(Y.value):H(Y.value).then(O,j)}G((A=A.apply(W,Z||[])).next())})},o=He&&He.__generator||function(W,Z){var C={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},A,H,w,_;return _={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function O(G){return function(Y){return j([G,Y])}}function j(G){if(A)throw new TypeError("Generator is already executing.");for(;C;)try{if(A=1,H&&(w=G[0]&2?H.return:G[0]?H.throw||((w=H.return)&&w.call(H),0):H.next)&&!(w=w.call(H,G[1])).done)return w;switch(H=0,w&&(G=[G[0]&2,w.value]),G[0]){case 0:case 1:w=G;break;case 4:return C.label++,{value:G[1],done:!1};case 5:C.label++,H=G[1],G=[0];continue;case 7:G=C.ops.pop(),C.trys.pop();continue;default:if(w=C.trys,!(w=w.length>0&&w[w.length-1])&&(G[0]===6||G[0]===2)){C=0;continue}if(G[0]===3&&(!w||G[1]>w[0]&&G[1]<w[3])){C.label=G[1];break}if(G[0]===6&&C.label<w[1]){C.label=w[1],w=G;break}if(w&&C.label<w[2]){C.label=w[2],C.ops.push(G);break}w[2]&&C.ops.pop(),C.trys.pop();continue}G=Z.call(W,C)}catch(Y){G=[6,Y],H=0}finally{A=w=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}},a=He&&He.__rest||function(W,Z){var C={};for(var A in W)Object.prototype.hasOwnProperty.call(W,A)&&Z.indexOf(A)<0&&(C[A]=W[A]);if(W!=null&&typeof Object.getOwnPropertySymbols=="function")for(var H=0,A=Object.getOwnPropertySymbols(W);H<A.length;H++)Z.indexOf(A[H])<0&&Object.prototype.propertyIsEnumerable.call(W,A[H])&&(C[A[H]]=W[A[H]]);return C},u=He&&He.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(r,"__esModule",{value:!0}),r.gql=r.batchRequests=r.request=r.rawRequest=r.GraphQLClient=r.ClientError=void 0;var c=i(Is.exports),f=c,l=EO,h=u(du),m=Zs;Object.defineProperty(r,"ClientError",{enumerable:!0,get:function(){return m.ClientError}});var b=function(W){var Z={};return W&&(typeof Headers!="undefined"&&W instanceof Headers||W instanceof f.Headers?Z=Se(W):Array.isArray(W)?W.forEach(function(C){var A=C[0],H=C[1];Z[A]=H}):Z=W),Z},M=function(W){return W.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},I=function(W){var Z=W.query,C=W.variables,A=W.operationName;if(!Array.isArray(Z)){var H=["query="+encodeURIComponent(M(Z))];return C&&H.push("variables="+encodeURIComponent(JSON.stringify(C))),A&&H.push("operationName="+encodeURIComponent(A)),H.join("&")}if(typeof C!="undefined"&&!Array.isArray(C))throw new Error("Cannot create query with given variable type, array expected");var w=Z.reduce(function(_,O,j){return _.push({query:M(O),variables:C?JSON.stringify(C[j]):void 0}),_},[]);return"query="+encodeURIComponent(JSON.stringify(w))},T=function(W){var Z=W.url,C=W.query,A=W.variables,H=W.operationName,w=W.headers,_=W.fetch,O=W.fetchOptions;return s(void 0,void 0,void 0,function(){var j;return o(this,function(G){switch(G.label){case 0:return j=h.default(C,A,H),[4,_(Z,e({method:"POST",headers:e(e({},typeof j=="string"?{"Content-Type":"application/json"}:{}),w),body:j},O))];case 1:return[2,G.sent()]}})})},B=function(W){var Z=W.url,C=W.query,A=W.variables,H=W.operationName,w=W.headers,_=W.fetch,O=W.fetchOptions;return s(void 0,void 0,void 0,function(){var j;return o(this,function(G){switch(G.label){case 0:return j=I({query:C,variables:A,operationName:H}),[4,_(Z+"?"+j,e({method:"GET",headers:w},O))];case 1:return[2,G.sent()]}})})},q=function(){function W(Z,C){this.url=Z,this.options=C||{}}return W.prototype.rawRequest=function(Z,C,A){var H=this.options,w=H.headers,_=H.fetch,O=_===void 0?c.default:_,j=H.method,G=j===void 0?"POST":j,Y=a(H,["headers","fetch","method"]),te=this.url;return F({url:te,query:Z,variables:C,headers:e(e({},b(w)),b(A)),operationName:void 0,fetch:O,method:G,fetchOptions:Y})},W.prototype.request=function(Z,C,A){return s(this,void 0,void 0,function(){var H,w,_,O,j,G,Y,te,oe,ge,Oe,Re;return o(this,function(ne){switch(ne.label){case 0:return H=this.options,w=H.headers,_=H.fetch,O=_===void 0?c.default:_,j=H.method,G=j===void 0?"POST":j,Y=a(H,["headers","fetch","method"]),te=this.url,oe=me(Z),ge=oe.query,Oe=oe.operationName,[4,F({url:te,query:ge,variables:C,headers:e(e({},b(w)),b(A)),operationName:Oe,fetch:O,method:G,fetchOptions:Y})];case 1:return Re=ne.sent().data,[2,Re]}})})},W.prototype.batchRequests=function(Z,C){return s(this,void 0,void 0,function(){var A,H,w,_,O,j,G,Y,te,oe,ge;return o(this,function(Oe){switch(Oe.label){case 0:return A=this.options,H=A.headers,w=A.fetch,_=w===void 0?c.default:w,O=A.method,j=O===void 0?"POST":O,G=a(A,["headers","fetch","method"]),Y=this.url,te=Z.map(function(Re){var ne=Re.document;return me(ne).query}),oe=Z.map(function(Re){var ne=Re.variables;return ne}),[4,F({url:Y,query:te,variables:oe,headers:e(e({},b(H)),b(C)),operationName:void 0,fetch:_,method:j,fetchOptions:G})];case 1:return ge=Oe.sent().data,[2,ge]}})})},W.prototype.setHeaders=function(Z){return this.options.headers=Z,this},W.prototype.setHeader=function(Z,C){var A,H=this.options.headers;return H?H[Z]=C:this.options.headers=(A={},A[Z]=C,A),this},W.prototype.setEndpoint=function(Z){return this.url=Z,this},W}();r.GraphQLClient=q;function F(W){var Z=W.url,C=W.query,A=W.variables,H=W.headers,w=W.operationName,_=W.fetch,O=W.method,j=O===void 0?"POST":O,G=W.fetchOptions;return s(this,void 0,void 0,function(){var Y,te,oe,ge,Oe,Re,ne,Ee;return o(this,function(Be){switch(Be.label){case 0:return Y=j.toUpperCase()==="POST"?T:B,te=Array.isArray(C),[4,Y({url:Z,query:C,variables:A,operationName:w,headers:H,fetch:_,fetchOptions:G})];case 1:return oe=Be.sent(),[4,ee(oe)];case 2:if(ge=Be.sent(),Oe=te&&Array.isArray(ge)?!ge.some(function(Ve){var Je=Ve.data;return!Je}):!!ge.data,oe.ok&&!ge.errors&&Oe)return Re=oe.headers,ne=oe.status,[2,e(e({},te?{data:ge}:ge),{headers:Re,status:ne})];throw Ee=typeof ge=="string"?{error:ge}:ge,new m.ClientError(e(e({},Ee),{status:oe.status,headers:oe.headers}),{query:C,variables:A})}})})}function R(W,Z,C,A){return s(this,void 0,void 0,function(){var H;return o(this,function(w){return H=new q(W),[2,H.rawRequest(Z,C,A)]})})}r.rawRequest=R;function se(W,Z,C,A){return s(this,void 0,void 0,function(){var H;return o(this,function(w){return H=new q(W),[2,H.request(Z,C,A)]})})}r.request=se;function X(W,Z,C){return s(this,void 0,void 0,function(){var A;return o(this,function(H){return A=new q(W),[2,A.batchRequests(Z,C)]})})}r.batchRequests=X,r.default=se;function ee(W){var Z=W.headers.get("Content-Type");return Z&&Z.startsWith("application/json")?W.json():W.text()}function me(W){var Z;if(typeof W=="string")return{query:W};var C=void 0,A=W.definitions.filter(function(H){return H.kind==="OperationDefinition"});return A.length===1&&(C=(Z=A[0].name)===null||Z===void 0?void 0:Z.value),{query:l.print(W),operationName:C}}function ue(W){for(var Z=[],C=1;C<arguments.length;C++)Z[C-1]=arguments[C];return W.reduce(function(A,H,w){return""+A+H+(w in Z?Z[w]:"")},"")}r.gql=ue;function Se(W){var Z={};return W.forEach(function(C,A){Z[A]=C}),Z}})(rO);function FO(r){return typeof r=="object"&&r!==null}function PO(r,e){if(!Boolean(r))throw new Error(e!=null?e:"Unexpected invariant triggered.")}const jO=/\r\n|[\n\r]/g;function pu(r,e){let t=0,n=1;for(const i of r.body.matchAll(jO)){if(typeof i.index=="number"||PO(!1),i.index>=e)break;t=i.index+i[0].length,n+=1}return{line:n,column:e+1-t}}function LO(r){return Bh(r.source,pu(r.source,r.start))}function Bh(r,e){const t=r.locationOffset.column-1,n="".padStart(t)+r.body,i=e.line-1,s=r.locationOffset.line-1,o=e.line+s,a=e.line===1?t:0,u=e.column+a,c=`${r.name}:${o}:${u}
`,f=n.split(/\r\n|[\n\r]/g),l=f[i];if(l.length>120){const h=Math.floor(u/80),m=u%80,b=[];for(let M=0;M<l.length;M+=80)b.push(l.slice(M,M+80));return c+Uh([[`${o} |`,b[0]],...b.slice(1,h+1).map(M=>["|",M]),["|","^".padStart(m)],["|",b[h+1]]])}return c+Uh([[`${o-1} |`,f[i-1]],[`${o} |`,l],["|","^".padStart(u)],[`${o+1} |`,f[i+1]]])}function Uh(r){const e=r.filter(([n,i])=>i!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,i])=>n.padStart(t)+(i?" "+i:"")).join(`
`)}class Yi extends Error{constructor(e,t,n,i,s,o,a){var u,c,f;super(e);this.name="GraphQLError",this.path=s!=null?s:void 0,this.originalError=o!=null?o:void 0,this.nodes=qh(Array.isArray(t)?t:t?[t]:void 0);const l=qh((u=this.nodes)===null||u===void 0?void 0:u.map(m=>m.loc).filter(m=>m!=null));this.source=n!=null?n:l==null||(c=l[0])===null||c===void 0?void 0:c.source,this.positions=i!=null?i:l==null?void 0:l.map(m=>m.start),this.locations=i&&n?i.map(m=>pu(n,m)):l==null?void 0:l.map(m=>pu(m.source,m.start));const h=FO(o==null?void 0:o.extensions)?o==null?void 0:o.extensions:void 0;this.extensions=(f=a!=null?a:h)!==null&&f!==void 0?f:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),o!=null&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Yi):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+LO(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Bh(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function qh(r){return r===void 0||r.length===0?void 0:r}function jt(r,e,t){return new Yi(`Syntax Error: ${t}`,void 0,r,[e])}let he;(function(r){r.SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment"})(he||(he={}));const BO=function(e,t){return e instanceof t};class Hh{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Js(!1,`Body must be a string. Received: ${Th(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Js(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Js(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function UO(r){return BO(r,Hh)}let yu;(function(r){r.QUERY="QUERY",r.MUTATION="MUTATION",r.SUBSCRIPTION="SUBSCRIPTION",r.FIELD="FIELD",r.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",r.FRAGMENT_SPREAD="FRAGMENT_SPREAD",r.INLINE_FRAGMENT="INLINE_FRAGMENT",r.VARIABLE_DEFINITION="VARIABLE_DEFINITION",r.SCHEMA="SCHEMA",r.SCALAR="SCALAR",r.OBJECT="OBJECT",r.FIELD_DEFINITION="FIELD_DEFINITION",r.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",r.INTERFACE="INTERFACE",r.UNION="UNION",r.ENUM="ENUM",r.ENUM_VALUE="ENUM_VALUE",r.INPUT_OBJECT="INPUT_OBJECT",r.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(yu||(yu={}));class qO{constructor(e){const t=new Ah(he.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==he.EOF)do if(e.next)e=e.next;else{const t=zO(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===he.COMMENT);return e}}function HO(r){return r===he.BANG||r===he.DOLLAR||r===he.AMP||r===he.PAREN_L||r===he.PAREN_R||r===he.SPREAD||r===he.COLON||r===he.EQUALS||r===he.AT||r===he.BRACKET_L||r===he.BRACKET_R||r===he.BRACE_L||r===he.PIPE||r===he.BRACE_R}function Vn(r){return r>=0&&r<=55295||r>=57344&&r<=1114111}function $s(r,e){return zh(r.charCodeAt(e))&&Gh(r.charCodeAt(e+1))}function zh(r){return r>=55296&&r<=56319}function Gh(r){return r>=56320&&r<=57343}function yn(r,e){const t=r.source.body.codePointAt(e);if(t===void 0)return he.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Tt(r,e,t,n,i){const s=r.line,o=1+t-r.lineStart;return new Ah(e,t,n,s,o,i)}function zO(r,e){const t=r.source.body,n=t.length;let i=e;for(;i<n;){const s=t.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++r.line,r.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++r.line,r.lineStart=i;continue;case 35:return GO(r,i);case 33:return Tt(r,he.BANG,i,i+1);case 36:return Tt(r,he.DOLLAR,i,i+1);case 38:return Tt(r,he.AMP,i,i+1);case 40:return Tt(r,he.PAREN_L,i,i+1);case 41:return Tt(r,he.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return Tt(r,he.SPREAD,i,i+3);break;case 58:return Tt(r,he.COLON,i,i+1);case 61:return Tt(r,he.EQUALS,i,i+1);case 64:return Tt(r,he.AT,i,i+1);case 91:return Tt(r,he.BRACKET_L,i,i+1);case 93:return Tt(r,he.BRACKET_R,i,i+1);case 123:return Tt(r,he.BRACE_L,i,i+1);case 124:return Tt(r,he.PIPE,i,i+1);case 125:return Tt(r,he.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?KO(r,i):QO(r,i)}if(Wi(s)||s===45)return VO(r,i,s);if(Dh(s))return XO(r,i);throw jt(r.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Vn(s)||$s(t,i)?`Unexpected character: ${yn(r,i)}.`:`Invalid character: ${yn(r,i)}.`)}return Tt(r,he.EOF,n,n)}function GO(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(s===10||s===13)break;if(Vn(s))++i;else if($s(t,i))i+=2;else break}return Tt(r,he.COMMENT,e,i,t.slice(e+1,i))}function VO(r,e,t){const n=r.source.body;let i=e,s=t,o=!1;if(s===45&&(s=n.charCodeAt(++i)),s===48){if(s=n.charCodeAt(++i),Wi(s))throw jt(r.source,i,`Invalid number, unexpected digit after 0: ${yn(r,i)}.`)}else i=mu(r,i,s),s=n.charCodeAt(i);if(s===46&&(o=!0,s=n.charCodeAt(++i),i=mu(r,i,s),s=n.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=n.charCodeAt(++i),(s===43||s===45)&&(s=n.charCodeAt(++i)),i=mu(r,i,s),s=n.charCodeAt(i)),s===46||Dh(s))throw jt(r.source,i,`Invalid number, expected digit but got: ${yn(r,i)}.`);return Tt(r,o?he.FLOAT:he.INT,e,i,n.slice(e,i))}function mu(r,e,t){if(!Wi(t))throw jt(r.source,e,`Invalid number, expected digit but got: ${yn(r,e)}.`);const n=r.source.body;let i=e+1;for(;Wi(n.charCodeAt(i));)++i;return i}function QO(r,e){const t=r.source.body,n=t.length;let i=e+1,s=i,o="";for(;i<n;){const a=t.charCodeAt(i);if(a===34)return o+=t.slice(s,i),Tt(r,he.STRING,e,i+1,o);if(a===92){o+=t.slice(s,i);const u=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?WO(r,i):YO(r,i):JO(r,i);o+=u.value,i+=u.size,s=i;continue}if(a===10||a===13)break;if(Vn(a))++i;else if($s(t,i))i+=2;else throw jt(r.source,i,`Invalid character within String: ${yn(r,i)}.`)}throw jt(r.source,i,"Unterminated string.")}function WO(r,e){const t=r.source.body;let n=0,i=3;for(;i<12;){const s=t.charCodeAt(e+i++);if(s===125){if(i<5||!Vn(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|Ji(s),n<0)break}throw jt(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function YO(r,e){const t=r.source.body,n=Vh(t,e+2);if(Vn(n))return{value:String.fromCodePoint(n),size:6};if(zh(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=Vh(t,e+8);if(Gh(i))return{value:String.fromCodePoint(n,i),size:12}}throw jt(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function Vh(r,e){return Ji(r.charCodeAt(e))<<12|Ji(r.charCodeAt(e+1))<<8|Ji(r.charCodeAt(e+2))<<4|Ji(r.charCodeAt(e+3))}function Ji(r){return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:-1}function JO(r,e){const t=r.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw jt(r.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function KO(r,e){const t=r.source.body,n=t.length;let i=r.lineStart,s=e+3,o=s,a="";const u=[];for(;s<n;){const c=t.charCodeAt(s);if(c===34&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34){a+=t.slice(o,s),u.push(a);const f=Tt(r,he.BLOCK_STRING,e,s+3,pO(u).join(`
`));return r.line+=u.length-1,r.lineStart=i,f}if(c===92&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34&&t.charCodeAt(s+3)===34){a+=t.slice(o,s),o=s+1,s+=4;continue}if(c===10||c===13){a+=t.slice(o,s),u.push(a),c===13&&t.charCodeAt(s+1)===10?s+=2:++s,a="",o=s,i=s;continue}if(Vn(c))++s;else if($s(t,s))s+=2;else throw jt(r.source,s,`Invalid character within String: ${yn(r,s)}.`)}throw jt(r.source,s,"Unterminated string.")}function XO(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(dO(s))++i;else break}return Tt(r,he.NAME,e,i,t.slice(e,i))}function ZO(r,e){return new $O(r,e).parseDocument()}class $O{constructor(e,t){const n=UO(e)?e:new Hh(e);this._lexer=new qO(n),this._options=t}parseName(){const e=this.expectToken(he.NAME);return this.node(e,{kind:Me.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:Me.DOCUMENT,definitions:this.many(he.SOF,this.parseDefinition,he.EOF)})}parseDefinition(){if(this.peek(he.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===he.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw jt(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(he.BRACE_L))return this.node(e,{kind:Me.OPERATION_DEFINITION,operation:Gn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(he.NAME)&&(n=this.parseName()),this.node(e,{kind:Me.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(he.NAME);switch(e.value){case"query":return Gn.QUERY;case"mutation":return Gn.MUTATION;case"subscription":return Gn.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(he.PAREN_L,this.parseVariableDefinition,he.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Me.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(he.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(he.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(he.DOLLAR),this.node(e,{kind:Me.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Me.SELECTION_SET,selections:this.many(he.BRACE_L,this.parseSelection,he.BRACE_R)})}parseSelection(){return this.peek(he.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(he.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:Me.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(he.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(he.PAREN_L,t,he.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(he.COLON),this.node(t,{kind:Me.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(he.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(he.NAME)?this.node(e,{kind:Me.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:Me.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){var e;const t=this._lexer.token;return this.expectKeyword("fragment"),((e=this._options)===null||e===void 0?void 0:e.allowLegacyFragmentVariables)===!0?this.node(t,{kind:Me.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:Me.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case he.BRACKET_L:return this.parseList(e);case he.BRACE_L:return this.parseObject(e);case he.INT:return this._lexer.advance(),this.node(t,{kind:Me.INT,value:t.value});case he.FLOAT:return this._lexer.advance(),this.node(t,{kind:Me.FLOAT,value:t.value});case he.STRING:case he.BLOCK_STRING:return this.parseStringLiteral();case he.NAME:switch(this._lexer.advance(),t.value){case"true":return this.node(t,{kind:Me.BOOLEAN,value:!0});case"false":return this.node(t,{kind:Me.BOOLEAN,value:!1});case"null":return this.node(t,{kind:Me.NULL});default:return this.node(t,{kind:Me.ENUM,value:t.value})}case he.DOLLAR:if(e)if(this.expectToken(he.DOLLAR),this._lexer.token.kind===he.NAME){const n=this._lexer.token.value;throw jt(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this._lexer.advance(),this.node(e,{kind:Me.STRING,value:e.value,block:e.kind===he.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:Me.LIST,values:this.any(he.BRACKET_L,t,he.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:Me.OBJECT,fields:this.any(he.BRACE_L,t,he.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(he.COLON),this.node(t,{kind:Me.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(he.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(he.AT),this.node(t,{kind:Me.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(he.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(he.BRACKET_R),t=this.node(e,{kind:Me.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(he.BANG)?this.node(e,{kind:Me.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:Me.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(he.STRING)||this.peek(he.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(he.BRACE_L,this.parseOperationTypeDefinition,he.BRACE_R);return this.node(e,{kind:Me.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(he.COLON);const n=this.parseNamedType();return this.node(e,{kind:Me.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:Me.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Me.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(he.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(he.BRACE_L,this.parseFieldDefinition,he.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(he.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:Me.FIELD_DEFINITION,description:t,name:n,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(he.PAREN_L,this.parseInputValueDef,he.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(he.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(he.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:Me.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:Me.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:Me.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(he.EQUALS)?this.delimitedMany(he.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:Me.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(he.BRACE_L,this.parseEnumValueDefinition,he.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:Me.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw jt(this._lexer.source,this._lexer.token.start,`${eo(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:Me.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(he.BRACE_L,this.parseInputValueDef,he.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===he.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(he.BRACE_L,this.parseOperationTypeDefinition,he.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:Me.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:Me.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:Me.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:Me.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Me.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Me.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:Me.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(he.AT);const n=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:Me.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(he.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(yu,t.value))return t;throw this.unexpected(e)}node(e,t){var n;return((n=this._options)===null||n===void 0?void 0:n.noLocation)!==!0&&(t.loc=new cO(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw jt(this._lexer.source,t.start,`Expected ${Qh(e)}, found ${eo(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this._lexer.advance(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===he.NAME&&t.value===e)this._lexer.advance();else throw jt(this._lexer.source,t.start,`Expected "${e}", found ${eo(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===he.NAME&&t.value===e?(this._lexer.advance(),!0):!1}unexpected(e){const t=e!=null?e:this._lexer.token;return jt(this._lexer.source,t.start,`Unexpected ${eo(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(e,t,n){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}}function eo(r){const e=r.value;return Qh(r.kind)+(e!=null?` "${e}"`:"")}function Qh(r){return HO(r)?`"${r}"`:r}function Et(r,e){return e.tag=r,e}function ir(){}function gu(r){return function(e){var t=r.length;let n=!1,i=!1,s=!1,o=0;e(Et(0,[function(a){if(a)n=!0;else if(i)s=!0;else{for(i=s=!0;s&&!n;)o<t?(a=r[o],o=o+1|0,s=!1,e(Et(1,[a]))):(n=!0,e(0));i=!1}}]))}}function eT(){}function tT(r){r(0)}function rT(r){let e=!1;r(Et(0,[function(t){t?e=!0:e||r(0)}]))}function nT(r){if(r===null||r[0]!==$h)return r;if((r=r[1])!==0)return[$h,r-1|0]}function iT(r){return function(e){return function(t){function n(l){typeof l=="number"?u&&(u=!1,(l=i.shift())!==void 0?(l=r(nT(l)),u=!0,l(n)):f?t(0):o||(o=!0,s(0))):l.tag?u&&(t(l),c?c=!1:a(0)):(a=l=l[0],c=!1,l(0))}let i=[],s=ir,o=!1,a=ir,u=!1,c=!1,f=!1;e(function(l){typeof l=="number"?f||(f=!0,u||i.length!==0||t(0)):l.tag?f||(l=l[0],o=!1,u?i.push(l):(l=r(l),u=!0,l(n))):s=l[0]}),t(Et(0,[function(l){if(l){if(f||(f=!0,s(1)),u)return u=!1,a(1)}else f||o||(o=!0,s(0)),u&&!c&&(c=!0,a(0))}]))}}}function sT(r){return r}function oT(r){return r(0)}function Wh(r){return function(e){return function(t){let n=ir,i=!1,s=[],o=!1;e(function(a){typeof a=="number"?o||(o=!0,s.length===0&&t(0)):a.tag?o||(i=!1,function(u){function c(h){typeof h=="number"?s.length!==0&&(s=s.filter(f),h=s.length===0,o&&h?t(0):!i&&h&&(i=!0,n(0))):h.tag?s.length!==0&&(t(Et(1,[h[0]])),l(0)):(l=h=h[0],s=s.concat(h),h(0))}function f(h){return h!==l}let l=ir;u.length===1?u(c):u.bind(null,c)}(r(a[0])),i||(i=!0,n(0))):n=a[0]}),t(Et(0,[function(a){a?(o||(o=!0,n(a)),s.forEach(function(u){return u(a)}),s=[]):(i||o?i=!1:(i=!0,n(0)),s.forEach(oT))}]))}}}function aT(r){return r}function Ki(r){return function(e){return function(t){let n=!1;return e(function(i){if(typeof i=="number")n||(n=!0,t(i));else if(i.tag)n||(r(i[0]),t(i));else{var s=i[0];t(Et(0,[function(o){if(!n)return o&&(n=!0),s(o)}]))}})}}}function uT(r){r(0)}function Yh(r){return function(e){return function(t){function n(f){a&&(typeof f=="number"?(a=!1,c?t(f):s||(s=!0,i(0))):f.tag?(t(f),u?u=!1:o(0)):(o=f=f[0],u=!1,f(0)))}let i=ir,s=!1,o=ir,a=!1,u=!1,c=!1;e(function(f){typeof f=="number"?c||(c=!0,a||t(0)):f.tag?c||(a&&(o(1),o=ir),s?s=!1:(s=!0,i(0)),f=r(f[0]),a=!0,f(n)):i=f[0]}),t(Et(0,[function(f){if(f){if(c||(c=!0,i(1)),a)return a=!1,o(1)}else c||s||(s=!0,i(0)),a&&!u&&(u=!0,o(0))}]))}}}function cT(r){return function(e){return function(t){let n=[],i=ir;return e(function(s){typeof s=="number"?gu(n)(t):s.tag?(n.length>=r&&0<r&&n.shift(),n.push(s[0]),i(0)):(s=s[0],0>=r?(s(1),rT(t)):(i=s,s(0)))})}}}function to(r){return function(e){let t=ir,n=!1;return e(function(i){typeof i=="number"?n=!0:i.tag?n||(r(i[0]),t(0)):(t=i=i[0],i(0))}),{unsubscribe:function(){if(!n)return n=!0,t(1)}}}}function lT(){}function fT(r){return iT(sT)(gu(r))}function ar(r){return function(e){return function(t){let n=ir;return e(function(i){typeof i=="number"?t(i):i.tag?r(i[0])?t(i):n(0):(n=i[0],t(i))})}}}function Xi(r){return function(e){let t=!1;e(Et(0,[function(n){n?t=!0:t||(t=!0,e(Et(1,[r])),e(0))}]))}}function vu(r){return function(e){let t=eT,n=!1;t=r({next:function(i){n||e(Et(1,[i]))},complete:function(){n||(n=!0,e(0))}}),e(Et(0,[function(i){if(i&&!n)return n=!0,t()}]))}}function hT(){let r=[],e=!1;return{source:function(t){function n(i){return i!==t}r=r.concat(t),t(Et(0,[function(i){i&&(r=r.filter(n))}]))},next:function(t){e||r.forEach(function(n){n(Et(1,[t]))})},complete:function(){e||(e=!0,r.forEach(tT))}}}function Qn(r){return function(e){return function(t){return e(function(n){n=typeof n=="number"?0:n.tag?Et(1,[r(n[0])]):Et(0,[n[0]]),t(n)})}}}function ro(r){return Wh(aT)(gu(r))}function Jh(r){return function(e){return function(t){let n=!1;return e(function(i){if(typeof i=="number")return n?void 0:(n=!0,t(i),r());if(i.tag)n||t(i);else{var s=i[0];t(Et(0,[function(o){if(!n)return o?(n=!0,s(o),r()):s(o)}]))}})}}}function Kh(r){return function(e){return function(t){return e(function(n){typeof n=="number"||n.tag?t(n):(t(n),r())})}}}function dT(r){return to(lT)(r)}function pT(r,e){return function(t,n){return function(i){return function(s){let o=n;return i(function(a){typeof a=="number"?a=0:a.tag?(o=t(o,a[0]),a=Et(1,[o])):a=Et(0,[a[0]]),s(a)})}}}(r,e)}function no(r){function e(s){typeof s=="number"?(t.forEach(uT),t=[]):s.tag?(i=!1,t.forEach(function(o){o(s)})):n=s[0]}let t=[],n=ir,i=!1;return function(s){function o(a){return a!==s}t=t.concat(s),t.length===1&&r(e),s(Et(0,[function(a){if(a){if(t=t.filter(o),t.length===0)return n(1)}else i||(i=!0,n(a))}]))}}function io(r){return function(e){return function(t){let n=!1,i=0,s=ir;e(function(o){typeof o=="number"?n||(n=!0,t(0)):o.tag?i<r&&!n&&(i=i+1|0,t(o),!n&&i>=r&&(n=!0,t(0),s(1))):(o=o[0],0>=r?(n=!0,t(0),o(1)):s=o)}),t(Et(0,[function(o){if(!n){if(o)return n=!0,s(1);if(i<r)return s(0)}}]))}}}function Xh(r){return function(e){return function(t){function n(a){typeof a!="number"&&(a.tag?(i=!0,s(1),t(0)):(o=a=a[0],a(0)))}let i=!1,s=ir,o=ir;e(function(a){typeof a=="number"?i||(i=!0,o(1),t(0)):a.tag?i||t(a):(s=a[0],r(n))}),t(Et(0,[function(a){if(!i)return a?(i=!0,s(1),o(1)):s(0)}]))}}}function Zh(r){return new Promise(function(e){cT(1)(r)(function(t){typeof t!="number"&&(t.tag?e(t[0]):t[0](0))})})}var $h=[];typeof Symbol=="function"&&(Symbol.observable||(Symbol.observable=Symbol("observable")));function yT(r){return typeof r=="string"?new Yi(r):typeof r=="object"&&r.message?new Yi(r.message,r.nodes,r.source,r.positions,r.path,r,r.extensions||{}):r}var bu=function(r){function e(t){var n=t.networkError,i=t.response,s=(t.graphQLErrors||[]).map(yT),o=function(u,c){var f="";return u!==void 0?f="[Network] "+u.message:(c!==void 0&&c.forEach(function(l){f+="[GraphQL] "+l.message+`
`}),f.trim())}(n,s);r.call(this,o),this.name="CombinedError",this.message=o,this.graphQLErrors=s,this.networkError=n,this.response=i}return r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e,e.prototype.toString=function(){return this.message},e}(Error);function ed(r,e){r|=0;for(var t=0,n=0|e.length;t<n;t++)r=(r<<5)+r+e.charCodeAt(t);return r}function td(r){return ed(5381,r)>>>0}var so=new Set,rd=new WeakMap;function Zi(r){if(r===null||so.has(r))return"null";if(typeof r!="object")return JSON.stringify(r)||"";if(r.toJSON)return Zi(r.toJSON());if(Array.isArray(r)){for(var e="[",t=0,n=r.length;t<n;t++){t>0&&(e+=",");var i=Zi(r[t]);e+=i.length>0?i:"null"}return e+="]"}var s=Object.keys(r).sort();if(!s.length&&r.constructor&&r.constructor!==Object){var o=rd.get(r)||Math.random().toString(36).slice(2);return rd.set(r,o),'{"__key":"'+o+'"}'}so.add(r);for(var a="{",u=0,c=s.length;u<c;u++){var f=s[u],l=Zi(r[f]);l&&(a.length>1&&(a+=","),a+=Zi(f)+":"+l)}return so.delete(r),a+="}"}function $i(r){return so.clear(),Zi(r)}function _u(r){var e=(typeof r!="string"?r.loc&&r.loc.source.body||hu(r):r).replace(/([\s,]|#[^\n\r]+)+/g," ").trim();if(typeof r!="string"){var t="definitions"in r&&id(r);t&&(e="# "+t+`
`+e),r.loc||(r.loc={start:0,end:e.length,source:{body:e,name:"gql",locationOffset:{line:1,column:1}}})}return e}var wu=new Map;function nd(r){var e,t;return typeof r=="string"?(e=td(_u(r)),t=wu.get(e)||ZO(r,{noLocation:!0})):(e=r.__key||td(_u(r)),t=wu.get(e)||r),t.loc||_u(t),t.__key=e,wu.set(e,t),t}function mn(r,e){e||(e={});var t=nd(r);return{key:ed(t.__key,$i(e))>>>0,query:t,variables:e}}function id(r){for(var e=0,t=r.definitions.length;e<t;e++){var n=r.definitions[e];if(n.kind===Me.OPERATION_DEFINITION&&n.name)return n.name.value}}function mT(r){for(var e=0,t=r.definitions.length;e<t;e++){var n=r.definitions[e];if(n.kind===Me.OPERATION_DEFINITION)return n.operation}}function It(){return(It=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}function Su(r,e,t){if(!("data"in e)&&!("errors"in e)||"path"in e)throw new Error("No Content");return{operation:r,data:e.data,error:Array.isArray(e.errors)?new bu({graphQLErrors:e.errors,response:t}):void 0,extensions:typeof e.extensions=="object"&&e.extensions||void 0,hasNext:!!e.hasNext}}function gT(r,e,t){var n=It({},r);if(n.hasNext=!!e.hasNext,!("path"in e))return"data"in e&&(n.data=e.data),n;Array.isArray(e.errors)&&(n.error=new bu({graphQLErrors:n.error?n.error.graphQLErrors.concat(e.errors):e.errors,response:t}));for(var i=n.data=It({},n.data),s=0,o;s<e.path.length;)i=i[o=e.path[s++]]=Array.isArray(i[o])?[].concat(i[o]):It({},i[o]);return It(i,e.data),n}function vT(r,e,t){return{operation:r,data:void 0,error:new bu({networkError:e,response:t}),extensions:void 0}}function sd(r){return r.kind==="query"&&!!r.context.preferGetMethod}function bT(r){return{query:hu(r.query),operationName:id(r.query),variables:r.variables||void 0,extensions:void 0}}function _T(r,e){var t=sd(r),n=r.context.url;if(!t||!e)return n;var i=[];return e.operationName&&i.push("operationName="+encodeURIComponent(e.operationName)),e.query&&i.push("query="+encodeURIComponent(e.query.replace(/#[^\n\r]+/g," ").trim())),e.variables&&i.push("variables="+encodeURIComponent($i(e.variables))),e.extensions&&i.push("extensions="+encodeURIComponent($i(e.extensions))),n+"?"+i.join("&")}function wT(r,e){var t=sd(r),n=typeof r.context.fetchOptions=="function"?r.context.fetchOptions():r.context.fetchOptions||{};return It({},n,{body:!t&&e?JSON.stringify(e):void 0,method:t?"GET":"POST",headers:t?n.headers:It({},{"content-type":"application/json"},n.headers)})}var ku=typeof Symbol!="undefined"?Symbol.asyncIterator:null,ST=typeof TextDecoder!="undefined"?new TextDecoder:null,kT=/content-type:[^\r\n]*application\/json/i,ET=/boundary="?([^=";]+)"?/i;function xT(r,e,t){var n=t.headers&&t.headers.get("Content-Type")||"";if(!/multipart\/mixed/i.test(n))return t.json().then(function(b){r(Su(e,b,t))});var i="---",s=n.match(ET);s&&(i="--"+s[1]);var o,a=function(){};if(ku&&t[ku]){var u=t[ku]();o=u.next.bind(u)}else if("body"in t&&t.body){var c=t.body.getReader();a=c.cancel.bind(c),o=c.read.bind(c)}else throw new TypeError("Streaming requests unsupported");var f="",l=!0,h=null,m=null;return o().then(function b(M){if(!M.done){var I=function(me){return me.constructor.name==="Buffer"?me.toString():ST.decode(me)}(M.value),T=I.indexOf(i);for(T>-1?T+=f.length:T=f.indexOf(i),f+=I;T>-1;){var B=f.slice(0,T),q=f.slice(T+i.length);if(l)l=!1;else{var F=B.indexOf(`\r
\r
`)+4,R=B.slice(0,F),se=B.slice(F,B.lastIndexOf(`\r
`)),X=void 0;if(kT.test(R))try{X=JSON.parse(se),h=m=m?gT(m,X,t):Su(e,X,t)}catch{}if(q.slice(0,2)==="--"||X&&!X.hasNext){if(!m)return r(Su(e,{},t));break}}T=(f=q).indexOf(i)}}if(h&&(r(h),h=null),!M.done&&(!m||m.hasNext))return o().then(b)}).finally(a)}function CT(r,e,t){var n=t.redirect==="manual"?400:300,i=r.context.fetch;return vu(function(s){var o=s.next,a=s.complete,u=typeof AbortController!="undefined"?new AbortController:null;u&&(t.signal=u.signal);var c=!1,f=!1,l;return Promise.resolve().then(function(){if(!c)return(i||fetch)(e,t)}).then(function(h){if(!!h)return f=(l=h).status<200||l.status>=n,xT(o,r,l)}).then(a).catch(function(h){if(h.name!=="AbortError"){var m=vT(r,f?new Error(l.statusText):h,l);o(m),a()}}),function(){c=!0,u&&u.abort()}})}function Eu(r,e){if(Array.isArray(r))for(var t=0;t<r.length;t++)Eu(r[t],e);else if(typeof r=="object"&&r!==null)for(var n in r)n==="__typename"&&typeof r[n]=="string"?e[r[n]]=0:Eu(r[n],e);return e}function OT(r){return Object.keys(Eu(r,{}))}var od=function(r){if(r.selectionSet&&!r.selectionSet.selections.some(function(e){return e.kind===Me.FIELD&&e.name.value==="__typename"&&!e.alias}))return It({},r,{selectionSet:It({},r.selectionSet,{selections:r.selectionSet.selections.concat([{kind:Me.FIELD,name:{kind:Me.NAME,value:"__typename"}}])})})},ad=new Map;function TT(r){var e=nd(r),t=ad.get(e.__key);return t||(t=Rh(e,{Field:od,InlineFragment:od}),Object.defineProperty(t,"__key",{value:e.__key,enumerable:!1}),ad.set(e.__key,t)),t}function xu(r){return!r||typeof r!="object"?r:Object.keys(r).reduce(function(e,t){var n=r[t];return t==="__typename"?Object.defineProperty(e,"__typename",{enumerable:!1,value:n}):Array.isArray(n)?e[t]=n.map(xu):n&&typeof n=="object"&&"__typename"in n?e[t]=xu(n):e[t]=n,e},Array.isArray(r)?[]:{})}function ud(r){return r.toPromise=function(){return Zh(io(1)(ar(function(e){return!e.stale&&!e.hasNext})(r)))},r}function es(r,e,t){return t||(t=e.context),{key:e.key,query:e.query,variables:e.variables,kind:r,context:t}}function cd(r,e){return es(r.kind,r,It({},r.context,{meta:It({},r.context.meta,e)}))}function ld(){}function Cu(r){var e=r.kind;return e!=="mutation"&&e!=="query"}function AT(r){var e=r.forward,t=r.client;r.dispatchDebug;var n=new Map,i=Object.create(null);function s(a){var u=es(a.kind,a);return u.query=TT(a.query),u}function o(a){var u=a.context.requestPolicy;return a.kind==="query"&&u!=="network-only"&&(u==="cache-only"||n.has(a.key))}return function(a){var u=no(a),c=Qn(function(l){var h=n.get(l.key),m=It({},h,{operation:cd(l,{cacheOutcome:h?"hit":"miss"})});return l.context.requestPolicy==="cache-and-network"&&(m.stale=!0,fd(t,l)),m})(ar(function(l){return!Cu(l)&&o(l)})(u)),f=Ki(function(l){var h=l.operation;if(!!h){var m=OT(l.data).concat(h.context.additionalTypenames||[]);if(l.operation.kind==="mutation"){for(var b=new Set,M=0;M<m.length;M++){var I=m[M],T=i[I]||(i[I]=new Set);T.forEach(function(F){b.add(F)}),T.clear()}b.forEach(function(F){n.has(F)&&(h=n.get(F).operation,n.delete(F),fd(t,h))})}else if(h.kind==="query"&&l.data){n.set(h.key,l);for(var B=0;B<m.length;B++){var q=m[B];(i[q]||(i[q]=new Set)).add(h.key)}}}})(e(ar(function(l){return l.kind!=="query"||l.context.requestPolicy!=="cache-only"})(Qn(function(l){return cd(l,{cacheOutcome:"miss"})})(ro([Qn(s)(ar(function(l){return!Cu(l)&&!o(l)})(u)),ar(function(l){return Cu(l)})(u)])))));return ro([c,f])}}function fd(r,e){return r.reexecuteOperation(es(e.kind,e,It({},e.context,{requestPolicy:"network-only"})))}function IT(r){var e=r.forward;r.dispatchDebug;var t=new Set;function n(s){var o=s.key,a=s.kind;if(a==="teardown")return t.delete(o),!0;if(a!=="query"&&a!=="subscription")return!0;var u=t.has(o);return t.add(o),!u}function i(s){s.hasNext||t.delete(s.operation.key)}return function(s){var o=ar(n)(s);return Ki(i)(e(o))}}function NT(r){var e=r.forward;return r.dispatchDebug,function(t){var n=no(t),i=Wh(function(o){var a=o.key,u=ar(function(h){return h.kind==="teardown"&&h.key===a})(n),c=bT(o),f=_T(o,c),l=wT(o,c);return Ki(function(h){h.data||h.error})(Xh(u)(CT(o,f,l)))})(ar(function(o){return o.kind==="query"||o.kind==="mutation"})(n)),s=e(ar(function(o){return o.kind!=="query"&&o.kind!=="mutation"})(n));return ro([i,s])}}function hd(r){return r.dispatchDebug,function(e){return ar(function(){return!1})(Ki(function(t){if(t.kind!=="teardown"&&!1)var n})(e))}}hd({dispatchDebug:ld});function RT(r){return function(e){var t=e.client;return e.dispatchDebug,r.reduceRight(function(n,i){return i({client:t,forward:n,dispatchDebug:function(o){}})},e.forward)}}var MT=[IT,AT,NT],DT=function r(e){var t=new Map,n=new Map,i=[],s=hT(),o=s.source,a=s.next,u=!1;function c(I){for(u=!0,I&&a(I);I=i.shift();)a(I);u=!1}function f(I){var T=ar(function(B){return B.operation.kind===I.kind&&B.operation.key===I.key})(M);return h.maskTypename&&(T=Qn(function(B){return It({},B,{data:xu(B.data)})})(T)),I.kind==="mutation"?io(1)(Kh(function(){return c(I)})(T)):no(Jh(function(){t.delete(I.key),n.delete(I.key);for(var B=i.length-1;B>=0;B--)i[B].key===I.key&&i.splice(B,1);c(es("teardown",I,I.context))})(Ki(function(B){t.set(I.key,B)})(Yh(function(B){return I.kind!=="query"||B.stale?Xi(B):ro([Xi(B),Qn(function(){return It({},B,{stale:!0})})(io(1)(ar(function(q){return q.kind==="query"&&q.key===I.key&&q.context.requestPolicy!=="cache-only"})(o)))])})(Xh(ar(function(B){return B.kind==="teardown"&&B.key===I.key})(o))(T)))))}var l=this instanceof r?this:Object.create(r.prototype),h=It(l,{url:e.url,fetchOptions:e.fetchOptions,fetch:e.fetch,suspense:!!e.suspense,requestPolicy:e.requestPolicy||"cache-first",preferGetMethod:!!e.preferGetMethod,maskTypename:!!e.maskTypename,operations$:o,reexecuteOperation:function(T){(T.kind==="mutation"||n.has(T.key))&&(i.push(T),u||Promise.resolve().then(c))},createOperationContext:function(T){return T||(T={}),It({},{url:h.url,fetchOptions:h.fetchOptions,fetch:h.fetch,preferGetMethod:h.preferGetMethod},T,{suspense:T.suspense||T.suspense!==!1&&h.suspense,requestPolicy:T.requestPolicy||h.requestPolicy})},createRequestOperation:function(T,B,q){return mT(B.query),es(T,B,h.createOperationContext(q))},executeRequestOperation:function(T){return T.kind==="mutation"?f(T):vu(function(B){var q=n.get(T.key);q||n.set(T.key,q=f(T));var F=T.context.requestPolicy==="cache-and-network"||T.context.requestPolicy==="network-only";return to(B.next)(Jh(B.complete)(Kh(function(){var R=t.get(T.key);if(T.kind==="subscription")return c(T);F&&c(T),R!=null&&R===t.get(T.key)?B.next(F?It({},R,{stale:!0}):R):F||c(T)})(q))).unsubscribe})},executeQuery:function(T,B){var q=h.createRequestOperation("query",T,B);return h.executeRequestOperation(q)},executeSubscription:function(T,B){var q=h.createRequestOperation("subscription",T,B);return h.executeRequestOperation(q)},executeMutation:function(T,B){var q=h.createRequestOperation("mutation",T,B);return h.executeRequestOperation(q)},query:function(T,B,q){return(!q||typeof q.suspense!="boolean")&&(q=It({},q,{suspense:!1})),ud(h.executeQuery(mn(T,B),q))},readQuery:function(T,B,q){var F=null;return to(function(R){F=R})(h.query(T,B,q)).unsubscribe(),F},subscription:function(T,B,q){return h.executeSubscription(mn(T,B),q)},mutation:function(T,B,q){return ud(h.executeMutation(mn(T,B),q))}}),m=ld,b=RT(e.exchanges!==void 0?e.exchanges:MT),M=no(b({client:h,dispatchDebug:m,forward:hd({dispatchDebug:m})})(o));return dT(M),h};function ts(){return(ts=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}).apply(this,arguments)}var dd=function(){};function FT(r,e,t){var n={query:r,variables:e||null,context:t},i={stale:!1,fetching:!1,data:void 0,error:void 0,extensions:void 0},s=oc(i),o=!1;return i.set=function(u){if(!(!u||u===i)){o=!0;var c=!1;if("query"in u||"variables"in u){var f=mn(n.query,n.variables),l=mn(u.query||n.query,u.variables||n.variables);f.key!==l.key&&(c=!0,n.query=u.query||n.query,n.variables=u.variables||n.variables||null)}"context"in u&&$i(n.context)!==$i(u.context)&&(c=!0,n.context=u.context);for(var h in u)h==="query"||h==="variables"||h==="context"||(h==="fetching"?i[h]=!!u[h]:h in i&&(i[h]=u[h]),c=!0);i.stale=!!u.stale,o=!1,c&&s.set(i)}},i.update=function(u){i.set(u(i))},i.subscribe=function(u,c){return s.subscribe(u,c)},i.reexecute=function(a){n.context=ts({},a||n.context),s.set(i)},Object.keys(n).forEach(function(a){Object.defineProperty(i,a,{configurable:!1,get:function(){return n[a]},set:function(c){n[a]=c,o||s.set(i)}})}),i}function pd(){return np("$$_urql")}function PT(r){rp("$$_urql",r)}function t3(r){var e=new DT(r);return PT(e),e}var jT={fetching:!1,stale:!1,error:void 0,data:void 0,extensions:void 0};function LT(r){return vu(function(e){var t,n={};return r.subscribe(function(i){var s=mn(i.query,i.variables);((s.context=i.context)!==n||s.key!==t)&&(t=s.key,n=i.context,e.next(s))})})}function r3(r){var e=pd(),t=to(function(n){r.set(n)})(pT(function(n,i){return ts({},n,i)},jT)(Yh(function(n){return n.context&&n.context.pause?Xi({fetching:!1,stale:!1}):fT([Xi({fetching:!0,stale:!1}),Qn(function(i){return ts({},{fetching:!1},i,{stale:!!i.stale})})(e.executeQuery(n,n.context)),Xi({fetching:!1,stale:!1})])})(LT(r))));return ec(t.unsubscribe),r}function n3(r){var e=pd(),t=typeof r.subscribe!="function"?FT(r.query,r.variables):r;return function(n,i){var s={fetching:!0,variables:n||t.variables,context:i||t.context};return dd(s),t.set(s),Zh(io(1)(e.executeMutation(mn(t.query,t.variables||{}),t.context))).then(function(o){var a=ts({},{fetching:!1},o);return dd(a),t.set(a),t})}}var Ou={exports:{}};(function(r,e){/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var t,n,i,s,o,a,u,c,f,l,h,m,b,M,I,T,B,q,F,R,se,X,ee,me,ue,Se,W,Z,C,A,H,w,_,O,j,G,Y,te,oe,ge,Oe,Re,ne,Ee,Be,Ve,Je,qe,ot,x,p,y,D,J,ce,ae,je,ze,tt,lt,st,Lt,Kt,Bt,ur,Fe,Wt,Qe,Nt,Ut,qt,Xt,gt,Yt,U,S,Q,V,K,re,le,we,pe=[].slice;V=function(){var d,g,v,k,E;for(d={},E="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),k=0,g=E.length;k<g;k++)v=E[k],d["[object "+v+"]"]=v.toLowerCase();return function(N){var P;return P=Object.prototype.toString.call(N),d[P]||"object"}}(),Je=function(d,g,v){return g==null&&(g=0),v==null&&(v=1),d<g&&(d=g),d>v&&(d=v),d},K=function(d){return d.length>=3?Array.prototype.slice.call(d):d[0]},se=function(d){var g,v;for(d._clipped=!1,d._unclipped=d.slice(0),g=v=0;v<3;g=++v)g<3?((d[g]<0||d[g]>255)&&(d._clipped=!0),d[g]<0&&(d[g]=0),d[g]>255&&(d[g]=255)):g===3&&(d[g]<0&&(d[g]=0),d[g]>1&&(d[g]=1));return d._clipped||delete d._unclipped,d},s=Math.PI,gt=Math.round,ee=Math.cos,Z=Math.floor,ae=Math.pow,qe=Math.log,U=Math.sin,S=Math.sqrt,M=Math.atan2,p=Math.max,b=Math.abs,u=s*2,o=s/3,n=s/180,a=180/s,R=function(){return arguments[0]instanceof t?arguments[0]:function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,arguments,function(){})},R.default=R,m=[],r!==null&&r.exports!=null&&(r.exports=R),Xt=e!==null?e:this,Xt.chroma=R,R.version="1.4.1",h={},f=[],l=!1,t=function(){function d(){var g,v,k,E,N,P,z,ie,de;for(P=this,v=[],ie=0,E=arguments.length;ie<E;ie++)g=arguments[ie],g!=null&&v.push(g);if(v.length>1&&(z=v[v.length-1]),h[z]!=null)P._rgb=se(h[z](K(v.slice(0,-1))));else{for(l||(f=f.sort(function(ye,Te){return Te.p-ye.p}),l=!0),de=0,N=f.length;de<N&&(k=f[de],z=k.test.apply(k,v),!z);de++);z&&(P._rgb=se(h[z].apply(h,v)))}P._rgb==null&&console.warn("unknown format: "+v),P._rgb==null&&(P._rgb=[0,0,0]),P._rgb.length===3&&P._rgb.push(1)}return d.prototype.toString=function(){return this.hex()},d}(),R._input=h;/**
	ColorBrewer colors for chroma.js

	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
	Pennsylvania State University.

	Licensed under the Apache License, Version 2.0 (the "License"); 
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at	
	http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software distributed
	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
	CONDITIONS OF ANY KIND, either express or implied. See the License for the
	specific language governing permissions and limitations under the License.

    @preserve
 */R.brewer=q={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var d,g;g=[];for(d in q)g.push(q[d.toLowerCase()]=q[d]);return g}(),re={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},R.colors=re,Re=function(){var d,g,v,k,E,N,P,z,ie;return g=K(arguments),E=g[0],d=g[1],v=g[2],z=(E+16)/116,P=isNaN(d)?z:z+d/500,ie=isNaN(v)?z:z-v/200,z=i.Yn*ne(z),P=i.Xn*ne(P),ie=i.Zn*ne(ie),N=we(3.2404542*P-1.5371385*z-.4985314*ie),k=we(-.969266*P+1.8760108*z+.041556*ie),v=we(.0556434*P-.2040259*z+1.0572252*ie),[N,k,v,g.length>3?g[3]:1]},we=function(d){return 255*(d<=.00304?12.92*d:1.055*ae(d,1/2.4)-.055)},ne=function(d){return d>i.t1?d*d*d:i.t2*(d-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Bt=function(){var d,g,v,k,E,N,P,z;return k=K(arguments),v=k[0],g=k[1],d=k[2],E=Nt(v,g,d),N=E[0],P=E[1],z=E[2],[116*P-16,500*(N-P),200*(P-z)]},Ut=function(d){return(d/=255)<=.04045?d/12.92:ae((d+.055)/1.055,2.4)},le=function(d){return d>i.t3?ae(d,1/3):d/i.t2+i.t0},Nt=function(){var d,g,v,k,E,N,P;return k=K(arguments),v=k[0],g=k[1],d=k[2],v=Ut(v),g=Ut(g),d=Ut(d),E=le((.4124564*v+.3575761*g+.1804375*d)/i.Xn),N=le((.2126729*v+.7151522*g+.072175*d)/i.Yn),P=le((.0193339*v+.119192*g+.9503041*d)/i.Zn),[E,N,P]},R.lab=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["lab"]),function(){})},h.lab=Re,t.prototype.lab=function(){return Bt(this._rgb)},I=function(d){var g,v,k,E,N,P,z,ie,de,ye,Te;return d=function(){var ve,fe,ke;for(ke=[],fe=0,ve=d.length;fe<ve;fe++)E=d[fe],ke.push(R(E));return ke}(),d.length===2?(de=function(){var ve,fe,ke;for(ke=[],fe=0,ve=d.length;fe<ve;fe++)E=d[fe],ke.push(E.lab());return ke}(),N=de[0],P=de[1],g=function(ve){var fe,ke;return ke=function(){var Ne,Pe;for(Pe=[],fe=Ne=0;Ne<=2;fe=++Ne)Pe.push(N[fe]+ve*(P[fe]-N[fe]));return Pe}(),R.lab.apply(R,ke)}):d.length===3?(ye=function(){var ve,fe,ke;for(ke=[],fe=0,ve=d.length;fe<ve;fe++)E=d[fe],ke.push(E.lab());return ke}(),N=ye[0],P=ye[1],z=ye[2],g=function(ve){var fe,ke;return ke=function(){var Ne,Pe;for(Pe=[],fe=Ne=0;Ne<=2;fe=++Ne)Pe.push((1-ve)*(1-ve)*N[fe]+2*(1-ve)*ve*P[fe]+ve*ve*z[fe]);return Pe}(),R.lab.apply(R,ke)}):d.length===4?(Te=function(){var ve,fe,ke;for(ke=[],fe=0,ve=d.length;fe<ve;fe++)E=d[fe],ke.push(E.lab());return ke}(),N=Te[0],P=Te[1],z=Te[2],ie=Te[3],g=function(ve){var fe,ke;return ke=function(){var Ne,Pe;for(Pe=[],fe=Ne=0;Ne<=2;fe=++Ne)Pe.push((1-ve)*(1-ve)*(1-ve)*N[fe]+3*(1-ve)*(1-ve)*ve*P[fe]+3*(1-ve)*ve*ve*z[fe]+ve*ve*ve*ie[fe]);return Pe}(),R.lab.apply(R,ke)}):d.length===5&&(v=I(d.slice(0,3)),k=I(d.slice(2,5)),g=function(ve){return ve<.5?v(ve*2):k((ve-.5)*2)}),g},R.bezier=function(d){var g;return g=I(d),g.scale=function(){return R.scale(g)},g},R.cubehelix=function(d,g,v,k,E){var N,P,z;return d==null&&(d=300),g==null&&(g=-1.5),v==null&&(v=1),k==null&&(k=1),E==null&&(E=[0,1]),N=0,V(E)==="array"?P=E[1]-E[0]:(P=0,E=[E,E]),z=function(ie){var de,ye,Te,ve,fe,ke,Ne,Pe,Ae;return de=u*((d+120)/360+g*ie),Ne=ae(E[0]+P*ie,k),ke=N!==0?v[0]+ie*N:v,ye=ke*Ne*(1-Ne)/2,ve=ee(de),Ae=U(de),Pe=Ne+ye*(-.14861*ve+1.78277*Ae),fe=Ne+ye*(-.29227*ve-.90649*Ae),Te=Ne+ye*(1.97294*ve),R(se([Pe*255,fe*255,Te*255,1]))},z.start=function(ie){return ie==null?d:(d=ie,z)},z.rotations=function(ie){return ie==null?g:(g=ie,z)},z.gamma=function(ie){return ie==null?k:(k=ie,z)},z.hue=function(ie){return ie==null?v:(v=ie,V(v)==="array"?(N=v[1]-v[0],N===0&&(v=v[1])):N=0,z)},z.lightness=function(ie){return ie==null?E:(V(ie)==="array"?(E=ie,P=ie[1]-ie[0]):(E=[ie,ie],P=0),z)},z.scale=function(){return R.scale(z)},z.hue(v),z},R.random=function(){var d,g,v;for(g="0123456789abcdef",d="#",v=0;v<6;++v)d+=g.charAt(Z(Math.random()*16));return new t(d)},m=[],j=function(d,g,v,k){var E,N,P,z;for(v==null&&(v=.5),k==null&&(k="rgb"),V(d)!=="object"&&(d=R(d)),V(g)!=="object"&&(g=R(g)),P=0,N=m.length;P<N;P++)if(E=m[P],k===E[0]){z=E[1](d,g,v,k);break}if(z==null)throw"color mode "+k+" is not supported";return z.alpha(d.alpha()+v*(g.alpha()-d.alpha()))},R.interpolate=j,t.prototype.interpolate=function(d,g,v){return j(this,d,g,v)},R.mix=j,t.prototype.mix=t.prototype.interpolate,h.rgb=function(){var d,g,v,k;g=K(arguments),v=[];for(d in g)k=g[d],v.push(k);return v},R.rgb=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(d){return d==null&&(d=!0),d?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},t.prototype.rgba=function(d){return d==null&&(d=!0),d?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},f.push({p:3,test:function(d){var g;if(g=K(arguments),V(g)==="array"&&g.length===3||g.length===4&&V(g[3])==="number"&&g[3]>=0&&g[3]<=1)return"rgb"}}),h.lrgb=h.rgb,te=function(d,g,v,k){var E,N;return E=d._rgb,N=g._rgb,new t(S(ae(E[0],2)*(1-v)+ae(N[0],2)*v),S(ae(E[1],2)*(1-v)+ae(N[1],2)*v),S(ae(E[2],2)*(1-v)+ae(N[2],2)*v),k)},c=function(d){var g,v,k,E,N,P;for(v=1/d.length,P=[0,0,0,0],E=0,k=d.length;E<k;E++)g=d[E],N=g._rgb,P[0]+=ae(N[0],2)*v,P[1]+=ae(N[1],2)*v,P[2]+=ae(N[2],2)*v,P[3]+=N[3]*v;return P[0]=S(P[0]),P[1]=S(P[1]),P[2]=S(P[2]),P[3]>1&&(P[3]=1),new t(se(P))},m.push(["lrgb",te]),R.average=function(d,g){var v,k,E,N,P,z,ie,de,ye,Te,ve,fe,ke;if(g==null&&(g="rgb"),ye=d.length,d=d.map(function(Ne){return R(Ne)}),ie=d.splice(0,1)[0],g==="lrgb")return c(d);fe=ie.get(g),N=[],P=0,z=0;for(de in fe)fe[de]=fe[de]||0,N.push(isNaN(fe[de])?0:1),g.charAt(de)==="h"&&!isNaN(fe[de])&&(v=fe[de]/180*s,P+=ee(v),z+=U(v));for(k=ie.alpha(),ve=0,Te=d.length;ve<Te;ve++){E=d[ve],ke=E.get(g),k+=E.alpha();for(de in fe)isNaN(ke[de])||(N[de]+=1,g.charAt(de)==="h"?(v=ke[de]/180*s,P+=ee(v),z+=U(v)):fe[de]+=ke[de])}for(de in fe)if(g.charAt(de)==="h"){for(v=M(z/N[de],P/N[de])/s*180;v<0;)v+=360;for(;v>=360;)v-=360;fe[de]=v}else fe[de]=fe[de]/N[de];return R(fe,g).alpha(k/ye)},A=function(d){var g,v,k,E,N,P;if(d.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(d.length===4||d.length===7)&&(d=d.substr(1)),d.length===3&&(d=d.split(""),d=d[0]+d[0]+d[1]+d[1]+d[2]+d[2]),P=parseInt(d,16),E=P>>16,k=P>>8&255,v=P&255,[E,k,v,1];if(d.match(/^#?([A-Fa-f0-9]{8})$/))return d.length===9&&(d=d.substr(1)),P=parseInt(d,16),E=P>>24&255,k=P>>16&255,v=P>>8&255,g=gt((P&255)/255*100)/100,[E,k,v,g];if(h.css!=null&&(N=h.css(d)))return N;throw"unknown color: "+d},lt=function(d,g){var v,k,E,N,P,z,ie;return g==null&&(g="auto"),P=d[0],E=d[1],k=d[2],v=d[3],g==="auto"&&(g=v<1?"rgba":"rgb"),P=Math.round(P),E=Math.round(E),k=Math.round(k),ie=P<<16|E<<8|k,z="000000"+ie.toString(16),z=z.substr(z.length-6),N="0"+gt(v*255).toString(16),N=N.substr(N.length-2),"#"+function(){switch(g.toLowerCase()){case"rgba":return z+N;case"argb":return N+z;default:return z}}()},h.hex=function(d){return A(d)},R.hex=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(d){return d==null&&(d="auto"),lt(this._rgb,d)},f.push({p:4,test:function(d){if(arguments.length===1&&V(d)==="string")return"hex"}}),_=function(){var d,g,v,k,E,N,P,z,ie,de,ye,Te,ve,fe;if(d=K(arguments),E=d[0],ye=d[1],P=d[2],ye===0)ie=k=g=P*255;else{for(fe=[0,0,0],v=[0,0,0],ve=P<.5?P*(1+ye):P+ye-P*ye,Te=2*P-ve,E/=360,fe[0]=E+1/3,fe[1]=E,fe[2]=E-1/3,N=z=0;z<=2;N=++z)fe[N]<0&&(fe[N]+=1),fe[N]>1&&(fe[N]-=1),6*fe[N]<1?v[N]=Te+(ve-Te)*6*fe[N]:2*fe[N]<1?v[N]=ve:3*fe[N]<2?v[N]=Te+(ve-Te)*(2/3-fe[N])*6:v[N]=Te;de=[gt(v[0]*255),gt(v[1]*255),gt(v[2]*255)],ie=de[0],k=de[1],g=de[2]}return d.length>3?[ie,k,g,d[3]]:[ie,k,g]},Lt=function(d,g,v){var k,E,N,P,z;return d!==void 0&&d.length>=3&&(P=d,d=P[0],g=P[1],v=P[2]),d/=255,g/=255,v/=255,N=Math.min(d,g,v),p=Math.max(d,g,v),E=(p+N)/2,p===N?(z=0,k=Number.NaN):z=E<.5?(p-N)/(p+N):(p-N)/(2-p-N),d===p?k=(g-v)/(p-N):g===p?k=2+(v-d)/(p-N):v===p&&(k=4+(d-g)/(p-N)),k*=60,k<0&&(k+=360),[k,z,E]},R.hsl=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["hsl"]),function(){})},h.hsl=_,t.prototype.hsl=function(){return Lt(this._rgb)},O=function(){var d,g,v,k,E,N,P,z,ie,de,ye,Te,ve,fe,ke,Ne,Pe,Ae;if(d=K(arguments),E=d[0],Ne=d[1],Ae=d[2],Ae*=255,Ne===0)ie=k=g=Ae;else switch(E===360&&(E=0),E>360&&(E-=360),E<0&&(E+=360),E/=60,N=Z(E),v=E-N,P=Ae*(1-Ne),z=Ae*(1-Ne*v),Pe=Ae*(1-Ne*(1-v)),N){case 0:de=[Ae,Pe,P],ie=de[0],k=de[1],g=de[2];break;case 1:ye=[z,Ae,P],ie=ye[0],k=ye[1],g=ye[2];break;case 2:Te=[P,Ae,Pe],ie=Te[0],k=Te[1],g=Te[2];break;case 3:ve=[P,z,Ae],ie=ve[0],k=ve[1],g=ve[2];break;case 4:fe=[Pe,P,Ae],ie=fe[0],k=fe[1],g=fe[2];break;case 5:ke=[Ae,P,z],ie=ke[0],k=ke[1],g=ke[2]}return[ie,k,g,d.length>3?d[3]:1]},Kt=function(){var d,g,v,k,E,N,P,z,ie;return P=K(arguments),N=P[0],v=P[1],d=P[2],E=Math.min(N,v,d),p=Math.max(N,v,d),g=p-E,ie=p/255,p===0?(k=Number.NaN,z=0):(z=g/p,N===p&&(k=(v-d)/g),v===p&&(k=2+(d-N)/g),d===p&&(k=4+(N-v)/g),k*=60,k<0&&(k+=360)),[k,z,ie]},R.hsv=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["hsv"]),function(){})},h.hsv=O,t.prototype.hsv=function(){return Kt(this._rgb)},J=function(d){var g,v,k;return V(d)==="number"&&d>=0&&d<=16777215?(k=d>>16,v=d>>8&255,g=d&255,[k,v,g,1]):(console.warn("unknown num color: "+d),[0,0,0,1])},Wt=function(){var d,g,v,k;return k=K(arguments),v=k[0],g=k[1],d=k[2],(v<<16)+(g<<8)+d},R.num=function(d){return new t(d,"num")},t.prototype.num=function(d){return d==null&&(d="rgb"),Wt(this._rgb,d)},h.num=J,f.push({p:1,test:function(d){if(arguments.length===1&&V(d)==="number"&&d>=0&&d<=16777215)return"num"}}),C=function(){var d,g,v,k,E,N,P,z,ie,de,ye,Te,ve,fe,ke,Ne,Pe,Ae,ht,Ke;if(v=K(arguments),z=v[0],E=v[1],g=v[2],E=E/100,P=P/100*255,d=E*255,E===0)Te=P=k=g;else switch(z===360&&(z=0),z>360&&(z-=360),z<0&&(z+=360),z/=60,ie=Z(z),N=z-ie,de=g*(1-E),ye=de+d*(1-N),ht=de+d*N,Ke=de+d,ie){case 0:ve=[Ke,ht,de],Te=ve[0],P=ve[1],k=ve[2];break;case 1:fe=[ye,Ke,de],Te=fe[0],P=fe[1],k=fe[2];break;case 2:ke=[de,Ke,ht],Te=ke[0],P=ke[1],k=ke[2];break;case 3:Ne=[de,ye,Ke],Te=Ne[0],P=Ne[1],k=Ne[2];break;case 4:Pe=[ht,de,Ke],Te=Pe[0],P=Pe[1],k=Pe[2];break;case 5:Ae=[Ke,de,ye],Te=Ae[0],P=Ae[1],k=Ae[2]}return[Te,P,k,v.length>3?v[3]:1]},tt=function(){var d,g,v,k,E,N,P,z,ie;return ie=K(arguments),z=ie[0],E=ie[1],g=ie[2],P=Math.min(z,E,g),p=Math.max(z,E,g),k=p-P,v=k*100/255,d=P/(255-k)*100,k===0?N=Number.NaN:(z===p&&(N=(E-g)/k),E===p&&(N=2+(g-z)/k),g===p&&(N=4+(z-E)/k),N*=60,N<0&&(N+=360)),[N,v,d]},R.hcg=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["hcg"]),function(){})},h.hcg=C,t.prototype.hcg=function(){return tt(this._rgb)},me=function(d){var g,v,k,E,N,P,z,ie;if(d=d.toLowerCase(),R.colors!=null&&R.colors[d])return A(R.colors[d]);if(N=d.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(z=N.slice(1,4),E=P=0;P<=2;E=++P)z[E]=+z[E];z[3]=1}else if(N=d.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(z=N.slice(1,5),E=ie=0;ie<=3;E=++ie)z[E]=+z[E];else if(N=d.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(z=N.slice(1,4),E=g=0;g<=2;E=++g)z[E]=gt(z[E]*2.55);z[3]=1}else if(N=d.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(z=N.slice(1,5),E=v=0;v<=2;E=++v)z[E]=gt(z[E]*2.55);z[3]=+z[3]}else(N=d.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(k=N.slice(1,4),k[1]*=.01,k[2]*=.01,z=_(k),z[3]=1):(N=d.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(k=N.slice(1,4),k[1]*=.01,k[2]*=.01,z=_(k),z[3]=+N[4]);return z},ze=function(d){var g;if(g=d[3]<1?"rgba":"rgb",g==="rgb")return g+"("+d.slice(0,3).map(gt).join(",")+")";if(g==="rgba")return g+"("+d.slice(0,3).map(gt).join(",")+","+d[3]+")"},qt=function(d){return gt(d*100)/100},w=function(d,g){var v;return v=g<1?"hsla":"hsl",d[0]=qt(d[0]||0),d[1]=qt(d[1]*100)+"%",d[2]=qt(d[2]*100)+"%",v==="hsla"&&(d[3]=g),v+"("+d.join(",")+")"},h.css=function(d){return me(d)},R.css=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(d){if(d==null&&(d="rgb"),d.slice(0,3)==="rgb")return ze(this._rgb);if(d.slice(0,3)==="hsl")return w(this.hsl(),this.alpha())},h.named=function(d){return A(re[d])},f.push({p:5,test:function(d){if(arguments.length===1&&re[d]!=null)return"named"}}),t.prototype.name=function(d){var g,v;arguments.length&&(re[d]&&(this._rgb=A(re[d])),this._rgb[3]=1),g=this.hex("rgb");for(v in re)if(g===re[v])return v;return g},Ee=function(){var d,g,v,k;return k=K(arguments),v=k[0],d=k[1],g=k[2],g=g*n,[v,ee(g)*d,U(g)*d]},Be=function(){var d,g,v,k,E,N,P,z,ie,de,ye;return v=K(arguments),z=v[0],E=v[1],P=v[2],de=Ee(z,E,P),d=de[0],g=de[1],k=de[2],ye=Re(d,g,k),ie=ye[0],N=ye[1],k=ye[2],[ie,N,k,v.length>3?v[3]:1]},Oe=function(){var d,g,v,k,E,N;return N=K(arguments),E=N[0],d=N[1],g=N[2],v=S(d*d+g*g),k=(M(g,d)*a+360)%360,gt(v*1e4)===0&&(k=Number.NaN),[E,v,k]},ur=function(){var d,g,v,k,E,N,P;return N=K(arguments),E=N[0],v=N[1],g=N[2],P=Bt(E,v,g),k=P[0],d=P[1],g=P[2],Oe(k,d,g)},R.lch=function(){var d;return d=K(arguments),new t(d,"lch")},R.hcl=function(){var d;return d=K(arguments),new t(d,"hcl")},h.lch=Be,h.hcl=function(){var d,g,v,k;return k=K(arguments),g=k[0],d=k[1],v=k[2],Be([v,d,g])},t.prototype.lch=function(){return ur(this._rgb)},t.prototype.hcl=function(){return ur(this._rgb).reverse()},je=function(d){var g,v,k,E,N,P,z,ie,de;return d==null&&(d="rgb"),ie=K(arguments),z=ie[0],E=ie[1],g=ie[2],z=z/255,E=E/255,g=g/255,N=1-Math.max(z,Math.max(E,g)),k=N<1?1/(1-N):0,v=(1-z-N)*k,P=(1-E-N)*k,de=(1-g-N)*k,[v,P,de,N]},X=function(){var d,g,v,k,E,N,P,z,ie;return g=K(arguments),k=g[0],P=g[1],ie=g[2],N=g[3],d=g.length>4?g[4]:1,N===1?[0,0,0,d]:(z=k>=1?0:255*(1-k)*(1-N),E=P>=1?0:255*(1-P)*(1-N),v=ie>=1?0:255*(1-ie)*(1-N),[z,E,v,d])},h.cmyk=function(){return X(K(arguments))},R.cmyk=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return je(this._rgb)},h.gl=function(){var d,g,v,k,E;for(k=function(){var N,P;N=K(arguments),P=[];for(g in N)E=N[g],P.push(E);return P}.apply(this,arguments),d=v=0;v<=2;d=++v)k[d]*=255;return k},R.gl=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var d;return d=this._rgb,[d[0]/255,d[1]/255,d[2]/255,d[3]]},Fe=function(d,g,v){var k;return k=K(arguments),d=k[0],g=k[1],v=k[2],d=ot(d),g=ot(g),v=ot(v),.2126*d+.7152*g+.0722*v},ot=function(d){return d/=255,d<=.03928?d/12.92:ae((d+.055)/1.055,2.4)},ge=function(d,g,v,k){var E,N;return E=d._rgb,N=g._rgb,new t(E[0]+v*(N[0]-E[0]),E[1]+v*(N[1]-E[1]),E[2]+v*(N[2]-E[2]),k)},m.push(["rgb",ge]),t.prototype.luminance=function(d,g){var v,k,E,N,P;return g==null&&(g="rgb"),arguments.length?(N=this._rgb,d===0?N=[0,0,0,this._rgb[3]]:d===1?N=[255,255,255,this[3]]:(v=Fe(this._rgb),k=1e-7,E=20,P=function(z,ie){var de,ye;return ye=z.interpolate(ie,.5,g),de=ye.luminance(),Math.abs(d-de)<k||!E--?ye:de>d?P(z,ye):P(ye,ie)},v>d?N=P(R("black"),this).rgba():N=P(this,R("white")).rgba()),R(N).alpha(this.alpha())):Fe(this._rgb)},Q=function(d){var g,v,k,E;return E=d/100,E<66?(k=255,v=-155.25485562709179-.44596950469579133*(v=E-2)+104.49216199393888*qe(v),g=E<20?0:-254.76935184120902+.8274096064007395*(g=E-10)+115.67994401066147*qe(g)):(k=351.97690566805693+.114206453784165*(k=E-55)-40.25366309332127*qe(k),v=325.4494125711974+.07943456536662342*(v=E-50)-28.0852963507957*qe(v),g=255),[k,v,g]},Qe=function(){var d,g,v,k,E,N,P,z;for(N=K(arguments),E=N[0],d=N[2],k=1e3,v=4e4,g=.4;v-k>g;)z=(v+k)*.5,P=Q(z),P[2]/P[0]>=d/E?v=z:k=z;return gt(z)},R.temperature=R.kelvin=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["temperature"]),function(){})},h.temperature=h.kelvin=h.K=Q,t.prototype.temperature=function(){return Qe(this._rgb)},t.prototype.kelvin=t.prototype.temperature,R.contrast=function(d,g){var v,k,E,N;return((E=V(d))==="string"||E==="number")&&(d=new t(d)),((N=V(g))==="string"||N==="number")&&(g=new t(g)),v=d.luminance(),k=g.luminance(),v>k?(v+.05)/(k+.05):(k+.05)/(v+.05)},R.distance=function(d,g,v){var k,E,N,P,z,ie,de;v==null&&(v="lab"),((z=V(d))==="string"||z==="number")&&(d=new t(d)),((ie=V(g))==="string"||ie==="number")&&(g=new t(g)),N=d.get(v),P=g.get(v),de=0;for(E in N)k=(N[E]||0)-(P[E]||0),de+=k*k;return Math.sqrt(de)},R.deltaE=function(d,g,v,k){var E,N,P,z,ie,de,ye,Te,ve,fe,ke,Ne,Pe,Ae,ht,Ke,bt,L,_e,$,Ce,De,Ue,Le,Ze,We,ut;for(v==null&&(v=1),k==null&&(k=1),((bt=V(d))==="string"||bt==="number")&&(d=new t(d)),((L=V(g))==="string"||L==="number")&&(g=new t(g)),_e=d.lab(),E=_e[0],P=_e[1],ie=_e[2],$=g.lab(),N=$[0],z=$[1],de=$[2],ye=S(P*P+ie*ie),Te=S(z*z+de*de),Ue=E<16?.511:.040975*E/(1+.01765*E),Ce=.0638*ye/(1+.0131*ye)+.638,Ke=ye<1e-6?0:M(ie,P)*180/s;Ke<0;)Ke+=360;for(;Ke>=360;)Ke-=360;return Le=Ke>=164&&Ke<=345?.56+b(.2*ee(s*(Ke+168)/180)):.36+b(.4*ee(s*(Ke+35)/180)),ve=ye*ye*ye*ye,ht=S(ve/(ve+1900)),De=Ce*(ht*Le+1-ht),Ae=E-N,Pe=ye-Te,ke=P-z,Ne=ie-de,fe=ke*ke+Ne*Ne-Pe*Pe,Ze=Ae/(v*Ue),We=Pe/(k*Ce),ut=De,S(Ze*Ze+We*We+fe/(ut*ut))},t.prototype.get=function(d){var g,v,k,E,N,P;return k=this,N=d.split("."),E=N[0],g=N[1],P=k[E](),g?(v=E.indexOf(g),v>-1?P[v]:console.warn("unknown channel "+g+" in mode "+E)):P},t.prototype.set=function(d,g){var v,k,E,N,P,z;if(E=this,P=d.split("."),N=P[0],v=P[1],v)if(z=E[N](),k=N.indexOf(v),k>-1)if(V(g)==="string")switch(g.charAt(0)){case"+":z[k]+=+g;break;case"-":z[k]+=+g;break;case"*":z[k]*=+g.substr(1);break;case"/":z[k]/=+g.substr(1);break;default:z[k]=+g}else z[k]=g;else console.warn("unknown channel "+v+" in mode "+N);else z=g;return R(z,N).alpha(E.alpha())},t.prototype.clipped=function(){return this._rgb._clipped||!1},t.prototype.alpha=function(d){return arguments.length?R.rgb([this._rgb[0],this._rgb[1],this._rgb[2],d]):this._rgb[3]},t.prototype.darken=function(d){var g,v;return d==null&&(d=1),v=this,g=v.lab(),g[0]-=i.Kn*d,R.lab(g).alpha(v.alpha())},t.prototype.brighten=function(d){return d==null&&(d=1),this.darken(-d)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(d){var g,v;return d==null&&(d=1),v=this,g=v.lch(),g[1]+=d*i.Kn,g[1]<0&&(g[1]=0),R.lch(g).alpha(v.alpha())},t.prototype.desaturate=function(d){return d==null&&(d=1),this.saturate(-d)},t.prototype.premultiply=function(){var d,g;return g=this.rgb(),d=this.alpha(),R(g[0]*d,g[1]*d,g[2]*d,d)},T=function(d,g,v){if(!T[v])throw"unknown blend mode "+v;return T[v](d,g)},B=function(d){return function(g,v){var k,E;return k=R(v).rgb(),E=R(g).rgb(),R(d(k,E),"rgb")}},W=function(d){return function(g,v){var k,E,N;for(N=[],k=E=0;E<=3;k=++E)N[k]=d(g[k],v[k]);return N}},D=function(d,g){return d},y=function(d,g){return d*g/255},ue=function(d,g){return d>g?g:d},Ve=function(d,g){return d>g?d:g},Yt=function(d,g){return 255*(1-(1-d/255)*(1-g/255))},ce=function(d,g){return g<128?2*d*g/255:255*(1-2*(1-d/255)*(1-g/255))},F=function(d,g){return 255*(1-(1-g/255)/(d/255))},Se=function(d,g){return d===255||(d=255*(g/255)/(1-d/255),d>255)?255:d},T.normal=B(W(D)),T.multiply=B(W(y)),T.screen=B(W(Yt)),T.overlay=B(W(ce)),T.darken=B(W(ue)),T.lighten=B(W(Ve)),T.dodge=B(W(Se)),T.burn=B(W(F)),R.blend=T,R.analyze=function(d){var g,v,k,E;for(k={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},v=0,g=d.length;v<g;v++)E=d[v],E!=null&&!isNaN(E)&&(k.values.push(E),k.sum+=E,E<k.min&&(k.min=E),E>k.max&&(k.max=E),k.count+=1);return k.domain=[k.min,k.max],k.limits=function(N,P){return R.limits(k,N,P)},k},R.scale=function(d,g){var v,k,E,N,P,z,ie,de,ye,Te,ve,fe,ke,Ne,Pe,Ae,ht,Ke,bt,L,_e;return ye="rgb",Te=R("#ccc"),Ne=0,P=[0,1],ke=[],fe=[0,0],v=!1,E=[],ve=!1,de=0,ie=1,N=!1,k={},Pe=!0,z=1,L=function($){var Ce,De,Ue,Le,Ze,We;if($==null&&($=["#fff","#000"]),$!=null&&V($)==="string"&&R.brewer!=null&&($=R.brewer[$]||R.brewer[$.toLowerCase()]||$),V($)==="array"){for($.length===1&&($=[$[0],$[0]]),$=$.slice(0),Ce=Ue=0,Le=$.length-1;0<=Le?Ue<=Le:Ue>=Le;Ce=0<=Le?++Ue:--Ue)De=$[Ce],V(De)==="string"&&($[Ce]=R(De));for(ke.length=0,Ce=We=0,Ze=$.length-1;0<=Ze?We<=Ze:We>=Ze;Ce=0<=Ze?++We:--We)ke.push(Ce/($.length-1))}return bt(),E=$},ht=function($){var Ce,De;if(v!=null){for(De=v.length-1,Ce=0;Ce<De&&$>=v[Ce];)Ce++;return Ce-1}return 0},_e=function($){return $},Ke=function($,Ce){var De,Ue,Le,Ze,We,ut,At,Ye;if(Ce==null&&(Ce=!1),isNaN($)||$===null)return Te;if(Ce?Ye=$:v&&v.length>2?(De=ht($),Ye=De/(v.length-2)):ie!==de?Ye=($-de)/(ie-de):Ye=1,Ce||(Ye=_e(Ye)),z!==1&&(Ye=ae(Ye,z)),Ye=fe[0]+Ye*(1-fe[0]-fe[1]),Ye=Math.min(1,Math.max(0,Ye)),Ze=Math.floor(Ye*1e4),Pe&&k[Ze])Ue=k[Ze];else{if(V(E)==="array")for(Le=We=0,At=ke.length-1;0<=At?We<=At:We>=At;Le=0<=At?++We:--We){if(ut=ke[Le],Ye<=ut){Ue=E[Le];break}if(Ye>=ut&&Le===ke.length-1){Ue=E[Le];break}if(Ye>ut&&Ye<ke[Le+1]){Ye=(Ye-ut)/(ke[Le+1]-ut),Ue=R.interpolate(E[Le],E[Le+1],Ye,ye);break}}else V(E)==="function"&&(Ue=E(Ye));Pe&&(k[Ze]=Ue)}return Ue},bt=function(){return k={}},L(d),Ae=function($){var Ce;return Ce=R(Ke($)),ve&&Ce[ve]?Ce[ve]():Ce},Ae.classes=function($){var Ce;return $!=null?(V($)==="array"?(v=$,P=[$[0],$[$.length-1]]):(Ce=R.analyze(P),$===0?v=[Ce.min,Ce.max]:v=R.limits(Ce,"e",$)),Ae):v},Ae.domain=function($){var Ce,De,Ue,Le,Ze,We,ut;if(!arguments.length)return P;if(de=$[0],ie=$[$.length-1],ke=[],Ue=E.length,$.length===Ue&&de!==ie)for(Ze=0,Le=$.length;Ze<Le;Ze++)De=$[Ze],ke.push((De-de)/(ie-de));else for(Ce=ut=0,We=Ue-1;0<=We?ut<=We:ut>=We;Ce=0<=We?++ut:--ut)ke.push(Ce/(Ue-1));return P=[de,ie],Ae},Ae.mode=function($){return arguments.length?(ye=$,bt(),Ae):ye},Ae.range=function($,Ce){return L($,Ce),Ae},Ae.out=function($){return ve=$,Ae},Ae.spread=function($){return arguments.length?(Ne=$,Ae):Ne},Ae.correctLightness=function($){return $==null&&($=!0),N=$,bt(),N?_e=function(Ce){var De,Ue,Le,Ze,We,ut,At,Ye,xt;for(De=Ke(0,!0).lab()[0],Ue=Ke(1,!0).lab()[0],At=De>Ue,Le=Ke(Ce,!0).lab()[0],We=De+(Ue-De)*Ce,Ze=Le-We,Ye=0,xt=1,ut=20;Math.abs(Ze)>.01&&ut-- >0;)(function(){return At&&(Ze*=-1),Ze<0?(Ye=Ce,Ce+=(xt-Ce)*.5):(xt=Ce,Ce+=(Ye-Ce)*.5),Le=Ke(Ce,!0).lab()[0],Ze=Le-We})();return Ce}:_e=function(Ce){return Ce},Ae},Ae.padding=function($){return $!=null?(V($)==="number"&&($=[$,$]),fe=$,Ae):fe},Ae.colors=function($,Ce){var De,Ue,Le,Ze,We,ut,At,Ye;if(arguments.length<2&&(Ce="hex"),We=[],arguments.length===0)We=E.slice(0);else if($===1)We=[Ae(.5)];else if($>1)Ue=P[0],De=P[1]-Ue,We=function(){ut=[];for(var xt=0;0<=$?xt<$:xt>$;0<=$?xt++:xt--)ut.push(xt);return ut}.apply(this).map(function(xt){return Ae(Ue+xt/($-1)*De)});else{if(d=[],At=[],v&&v.length>2)for(Le=Ye=1,Ze=v.length;1<=Ze?Ye<Ze:Ye>Ze;Le=1<=Ze?++Ye:--Ye)At.push((v[Le-1]+v[Le])*.5);else At=P;We=At.map(function(xt){return Ae(xt)})}return R[Ce]&&(We=We.map(function(xt){return xt[Ce]()})),We},Ae.cache=function($){return $!=null?(Pe=$,Ae):Pe},Ae.gamma=function($){return $!=null?(z=$,Ae):z},Ae.nodata=function($){return $!=null?(Te=R($),Ae):Te},Ae},R.scales==null&&(R.scales={}),R.scales.cool=function(){return R.scale([R.hsl(180,1,.9),R.hsl(250,.7,.4)])},R.scales.hot=function(){return R.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},R.analyze=function(d,g,v){var k,E,N,P,z,ie,de;if(z={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},v==null&&(v=function(){return!0}),k=function(ye){ye!=null&&!isNaN(ye)&&(z.values.push(ye),z.sum+=ye,ye<z.min&&(z.min=ye),ye>z.max&&(z.max=ye),z.count+=1)},de=function(ye,Te){if(v(ye,Te))return g!=null&&V(g)==="function"?k(g(ye)):g!=null&&V(g)==="string"||V(g)==="number"?k(ye[g]):k(ye)},V(d)==="array")for(P=0,N=d.length;P<N;P++)ie=d[P],de(ie);else for(E in d)ie=d[E],de(ie,E);return z.domain=[z.min,z.max],z.limits=function(ye,Te){return R.limits(z,ye,Te)},z},R.limits=function(d,g,v){var k,E,N,P,z,ie,de,ye,Te,ve,fe,ke,Ne,Pe,Ae,ht,Ke,bt,L,_e,$,Ce,De,Ue,Le,Ze,We,ut,At,Ye,xt,ss,gn,lo,Wn,Yn,Jn,Kn,Xn,Zn,Iu,$n,ei,ti,ri,ni,ii,si,oi,ai,Lr,os,Nu,wr,ui;if(g==null&&(g="equal"),v==null&&(v=7),V(d)==="array"&&(d=R.analyze(d)),Le=d.min,p=d.max,wr=d.values.sort(function(fo,ho){return fo-ho}),v===1)return[Le,p];if(De=[],g.substr(0,1)==="c"&&(De.push(Le),De.push(p)),g.substr(0,1)==="e"){for(De.push(Le),_e=xt=1,Wn=v-1;1<=Wn?xt<=Wn:xt>=Wn;_e=1<=Wn?++xt:--xt)De.push(Le+_e/v*(p-Le));De.push(p)}else if(g.substr(0,1)==="l"){if(Le<=0)throw"Logarithmic scales are only possible for values > 0";for(Ze=Math.LOG10E*qe(Le),Ue=Math.LOG10E*qe(p),De.push(Le),_e=ui=1,Yn=v-1;1<=Yn?ui<=Yn:ui>=Yn;_e=1<=Yn?++ui:--ui)De.push(ae(10,Ze+_e/v*(Ue-Ze)));De.push(p)}else if(g.substr(0,1)==="q"){for(De.push(Le),_e=k=1,$n=v-1;1<=$n?k<=$n:k>=$n;_e=1<=$n?++k:--k)ss=(wr.length-1)*_e/v,gn=Z(ss),gn===ss?De.push(wr[gn]):(lo=ss-gn,De.push(wr[gn]*(1-lo)+wr[gn+1]*lo));De.push(p)}else if(g.substr(0,1)==="k"){for(ut=wr.length,Pe=new Array(ut),bt=new Array(v),ai=!0,At=0,ht=null,ht=[],ht.push(Le),_e=E=1,ei=v-1;1<=ei?E<=ei:E>=ei;_e=1<=ei?++E:--E)ht.push(Le+_e/v*(p-Le));for(ht.push(p);ai;){for($=N=0,ti=v-1;0<=ti?N<=ti:N>=ti;$=0<=ti?++N:--N)bt[$]=0;for(_e=P=0,ri=ut-1;0<=ri?P<=ri:P>=ri;_e=0<=ri?++P:--P){for(Nu=wr[_e],We=Number.MAX_VALUE,$=z=0,ni=v-1;0<=ni?z<=ni:z>=ni;$=0<=ni?++z:--z)L=b(ht[$]-Nu),L<We&&(We=L,Ae=$);bt[Ae]++,Pe[_e]=Ae}for(Ye=new Array(v),$=ie=0,ii=v-1;0<=ii?ie<=ii:ie>=ii;$=0<=ii?++ie:--ie)Ye[$]=null;for(_e=de=0,si=ut-1;0<=si?de<=si:de>=si;_e=0<=si?++de:--de)Ke=Pe[_e],Ye[Ke]===null?Ye[Ke]=wr[_e]:Ye[Ke]+=wr[_e];for($=ye=0,oi=v-1;0<=oi?ye<=oi:ye>=oi;$=0<=oi?++ye:--ye)Ye[$]*=1/bt[$];for(ai=!1,$=Te=0,Jn=v-1;0<=Jn?Te<=Jn:Te>=Jn;$=0<=Jn?++Te:--Te)if(Ye[$]!==ht[_e]){ai=!0;break}ht=Ye,At++,At>200&&(ai=!1)}for(Ce={},$=ve=0,Kn=v-1;0<=Kn?ve<=Kn:ve>=Kn;$=0<=Kn?++ve:--ve)Ce[$]=[];for(_e=fe=0,Xn=ut-1;0<=Xn?fe<=Xn:fe>=Xn;_e=0<=Xn?++fe:--fe)Ke=Pe[_e],Ce[Ke].push(wr[_e]);for(Lr=[],$=ke=0,Zn=v-1;0<=Zn?ke<=Zn:ke>=Zn;$=0<=Zn?++ke:--ke)Lr.push(Ce[$][0]),Lr.push(Ce[$][Ce[$].length-1]);for(Lr=Lr.sort(function(fo,ho){return fo-ho}),De.push(Lr[0]),_e=Ne=1,Iu=Lr.length-1;Ne<=Iu;_e=Ne+=2)os=Lr[_e],!isNaN(os)&&De.indexOf(os)===-1&&De.push(os)}return De},H=function(d,g,v){var k,E,N,P;return k=K(arguments),d=k[0],g=k[1],v=k[2],isNaN(d)&&(d=0),d/=360,d<1/3?(E=(1-g)/3,P=(1+g*ee(u*d)/ee(o-u*d))/3,N=1-(E+P)):d<2/3?(d-=1/3,P=(1-g)/3,N=(1+g*ee(u*d)/ee(o-u*d))/3,E=1-(P+N)):(d-=2/3,N=(1-g)/3,E=(1+g*ee(u*d)/ee(o-u*d))/3,P=1-(N+E)),P=Je(v*P*3),N=Je(v*N*3),E=Je(v*E*3),[P*255,N*255,E*255,k.length>3?k[3]:1]},st=function(){var d,g,v,k,E,N,P,z;return P=K(arguments),N=P[0],g=P[1],d=P[2],u=Math.PI*2,N/=255,g/=255,d/=255,E=Math.min(N,g,d),k=(N+g+d)/3,z=1-E/k,z===0?v=0:(v=(N-g+(N-d))/2,v/=Math.sqrt((N-g)*(N-g)+(N-d)*(g-d)),v=Math.acos(v),d>g&&(v=u-v),v/=u),[v*360,z,k]},R.hsi=function(){return function(d,g,v){v.prototype=d.prototype;var k=new v,E=d.apply(k,g);return Object(E)===E?E:k}(t,pe.call(arguments).concat(["hsi"]),function(){})},h.hsi=H,t.prototype.hsi=function(){return st(this._rgb)},G=function(d,g,v,k){var E,N,P,z,ie,de,ye,Te,ve,fe,ke,Ne;return k==="hsl"?(ke=d.hsl(),Ne=g.hsl()):k==="hsv"?(ke=d.hsv(),Ne=g.hsv()):k==="hcg"?(ke=d.hcg(),Ne=g.hcg()):k==="hsi"?(ke=d.hsi(),Ne=g.hsi()):(k==="lch"||k==="hcl")&&(k="hcl",ke=d.hcl(),Ne=g.hcl()),k.substr(0,1)==="h"&&(P=ke[0],ve=ke[1],de=ke[2],z=Ne[0],fe=Ne[1],ye=Ne[2]),!isNaN(P)&&!isNaN(z)?(z>P&&z-P>180?E=z-(P+360):z<P&&P-z>180?E=z+360-P:E=z-P,N=P+v*E):isNaN(P)?isNaN(z)?N=Number.NaN:(N=z,(de===1||de===0)&&k!=="hsv"&&(Te=fe)):(N=P,(ye===1||ye===0)&&k!=="hsv"&&(Te=ve)),Te==null&&(Te=ve+v*(fe-ve)),ie=de+v*(ye-de),R[k](N,Te,ie)},m=m.concat(function(){var d,g,v,k;for(v=["hsv","hsl","hsi","hcl","lch","hcg"],k=[],g=0,d=v.length;g<d;g++)x=v[g],k.push([x,G]);return k}()),oe=function(d,g,v,k){var E,N;return E=d.num(),N=g.num(),R.num(E+(N-E)*v,"num")},m.push(["num",oe]),Y=function(d,g,v,k){var E,N;return E=d.lab(),N=g.lab(),new t(E[0]+v*(N[0]-E[0]),E[1]+v*(N[1]-E[1]),E[2]+v*(N[2]-E[2]),k)},m.push(["lab",Y])}).call(He)})(Ou,Ou.exports);var i3=Ou.exports,BT=4,UT=.001,qT=1e-7,HT=10,rs=11,oo=1/(rs-1),zT=typeof Float32Array=="function";function yd(r,e){return 1-3*e+3*r}function md(r,e){return 3*e-6*r}function gd(r){return 3*r}function ao(r,e,t){return((yd(e,t)*r+md(e,t))*r+gd(e))*r}function vd(r,e,t){return 3*yd(e,t)*r*r+2*md(e,t)*r+gd(e)}function GT(r,e,t,n,i){var s,o,a=0;do o=e+(t-e)/2,s=ao(o,n,i)-r,s>0?t=o:e=o;while(Math.abs(s)>qT&&++a<HT);return o}function VT(r,e,t,n){for(var i=0;i<BT;++i){var s=vd(e,t,n);if(s===0)return e;var o=ao(e,t,n)-r;e-=o/s}return e}function QT(r){return r}var s3=function(e,t,n,i){if(!(0<=e&&e<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&n===i)return QT;for(var s=zT?new Float32Array(rs):new Array(rs),o=0;o<rs;++o)s[o]=ao(o*oo,e,n);function a(u){for(var c=0,f=1,l=rs-1;f!==l&&s[f]<=u;++f)c+=oo;--f;var h=(u-s[f])/(s[f+1]-s[f]),m=c+h*oo,b=vd(m,e,n);return b>=UT?VT(u,m,e,n):b===0?m:GT(u,c,c+oo,e,n)}return function(c){return c===0?0:c===1?1:ao(a(c),t,i)}},uo=function(r,e){return r(e={exports:{}},e.exports),e.exports}(function(r,e){/*! axis.js v1.2.1 | (c) 2016 @toddmotto | https://github.com/toddmotto/axis */r.exports=function(){var t={},n="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" ");function i(){return Object.prototype.toString.call(this).slice(8,-1)}for(var s=n.length;s--;)t["is"+n[s]]=function(o){return function(a){return i.call(a)===o}}(n[s]);return t}()}),Tu=uo.isObject,Rt=uo.isNumber,co=uo.isArray,bd=uo.isString;function ns(r,e){return e+r*(1&e)>>1}function _d(r,e){return(r%e+e)%e}function wd(r,e){if(!/^(N|S)?(E|W)?$/i.test(r))throw new Error(`Invalid compass direction: ${r}. Choose from E, SE, S, SW, W, NW, N or NE.`);if(e=e.toLowerCase(),r=r.toUpperCase(),e==="pointy"&&["N","S"].includes(r))throw new Error(`Direction ${r} is ambiguous for pointy hexes. Did you mean ${r}E or ${r}W?`);if(e==="flat"&&["E","W"].includes(r))throw new Error(`Direction ${r} is ambiguous for flat hexes. Did you mean N${r} or S${r}?`);return{pointy:{E:0,SE:1,SW:2,W:3,NW:4,NE:5},flat:{SE:0,S:1,SW:2,NW:3,N:4,NE:5}}[e][r]}function Au(r,e){return Rt(r)||Rt(e)?Rt(r)?Rt(e)||(e=r):r=e:r=e=0,{x:r,y:e}}const Sd=[{q:1,r:0,s:-1},{q:0,r:1,s:-1},{q:-1,r:1,s:0},{q:-1,r:0,s:1},{q:0,r:-1,s:1},{q:1,r:-1,s:0}],WT=[{q:2,r:-1,s:-1},{q:1,r:1,s:-2},{q:-1,r:2,s:-1},{q:-2,r:1,s:1},{q:-1,r:-1,s:2},{q:1,r:-2,s:1}],YT={q:1e-6,r:1e-6,s:-2e-6};function JT(r){return Rt(r)?this[r]:this[this.indexOf(r)]}function KT({isValidHex:r}){return function(e,t){if(!r(t))return this;const n=Rt(e)?e:this.indexOf(e);return n<0?this.push(t):this[n]=t,this}}function XT(r,e){const t=r.distance(e),n=1/Math.max(t,1);let i=[];for(let s=0;s<=t;s++){const o=r.nudge().lerp(e.nudge(),n*s).round();i.push(this.get(o))}return i}function ZT({isValidHex:r}){return function(e,t=0,n=!0){if(!r(e))throw new Error(`Invalid center hex: ${e}.`);if(!this.get(e))throw new Error(`Center hex with coordinates ${e} not present in grid.`);let i=[];for(let s=-t;s<=t;s++)for(let o=Math.max(-t,-s-t);o<=Math.min(t,-s+t);o++){const a=this.get(e.cubeToCartesian({q:e.q+s,r:e.r+o}));e.equals(a)&&!n||i.push(a)}return i.filter(Boolean)}}function $T({isValidHex:r,signedModulo:e,compassToNumberDirection:t}){return function(n,i="all",s=!1){if(!r(n))throw new Error(`Invalid hex: ${n}.`);const o=s?WT:Sd;return i==="all"&&(i=[0,1,2,3,4,5]),[].concat(i).map(a=>{bd(a)&&(a=t(a,n.orientation)),(a<0||a>5)&&(a=e(a,6));const{q:u,r:c}=o[a];return this.get(n.cubeToCartesian({q:n.q+u,r:n.r+c}))})}}function eA(){if(this.length===0)return 0;const{0:r,length:e,[e-1]:t}=this[0].isPointy()?[...this].sort((n,i)=>i.s-n.s||n.q-i.q):[...this].sort((n,i)=>n.q-i.q);return t.toPoint().x-r.toPoint().x+this[0].width()}function tA(){if(this.length===0)return 0;const{0:r,length:e,[e-1]:t}=this[0].isPointy()?[...this].sort((n,i)=>n.r-i.r):[...this].sort((n,i)=>i.s-n.s||n.r-i.r);return t.toPoint().y-r.toPoint().y+this[0].height()}function rA({Hex:r}){return function(e,t){return r().fromPoint(e,t)}}function nA({Grid:r,Hex:e}){return function({width:t,height:n,start:i,direction:s=1,onCreate:o=()=>{}}){i=e(i);const[a,u,c]={1:["q","r","s"],3:["r","s","q"],5:["s","q","r"]}[s],f=new r;f.width=t,f.height=n,f.start=i,f.direction=s;for(let l=0;l<t;l++)for(let h=0;h<n;h++){const m=e({[a]:l+i[a],[u]:h+i[u],[c]:-l-h+i[c]});o(m,f),f.push(m)}return f}}function iA({Grid:r,Hex:e}){return function({size:t,start:n,direction:i=1,onCreate:s=()=>{}}){n=e(n);const o={1:{rStart:()=>0,rEnd:f=>t-f},5:{rStart:f=>t-f,rEnd:()=>t+1}},{rStart:a,rEnd:u}=o[i],c=new r;c.size=t,c.start=n,c.direction=i;for(let f=0;f<t;f++)for(let l=a(f);l<u(f);l++){const h=e({q:f+n.q,r:l+n.r,s:-f-l+n.s});s(h,c),c.push(h)}return c}}function sA({Grid:r,Hex:e}){return function({radius:t,center:n,onCreate:i=()=>{}}){n=e(n);const s=new r;s.radius=t,s.center=n;for(let o=-t;o<=t;o++){const a=Math.max(-t,-o-t),u=Math.min(t,-o+t);for(let c=a;c<=u;c++){const f=e({q:o+n.q,r:c+n.r,s:-o-c+n.s});i(f,s),s.push(f)}}return s}}function oA({Grid:r,Hex:e,compassToNumberDirection:t,signedModulo:n}){return function({width:i,height:s,start:o,direction:a=e().isPointy()?0:1,onCreate:u=()=>{}}){o=e(o),bd(a)&&(a=t(a,o.orientation)),(a<0||a>5)&&(a=n(a,6));const[c,f,l]=[["q","r","s"],["r","q","s"],["r","s","q"],["s","r","q"],["s","q","r"],["q","s","r"]][a],[h,m]=o.isPointy()?[i,s]:[s,i],b=new r;b.width=i,b.height=s,b.start=o,b.direction=a;for(let M=0;M<m;M++){const I=ns(o.offset,M);for(let T=-I;T<h-I;T++){const B=e({[c]:T+o[c],[f]:M+o[f],[l]:-T-M+o[l]});u(B,b),b.push(B)}}return b}}function aA({Grid:r,Hex:e}){return function({radius:t,center:n,onCreate:i=()=>{}}){n=e(n);const s=new r;s.radius=t,s.center=n;const{q:o,r:a,s:u}=n;let c=e({q:o,r:a-t,s:u+t});for(let f=0;f<6;f++)for(let l=0;l<t;l++){i(c,s),s.push(c);const{q:h,r:m,s:b}=Sd[f];c=e({q:c.q+h,r:c.r+m,s:c.s+b})}return s}}function uA({Grid:r,Hex:e}){return function({radius:t,center:n,onCreate:i=()=>{}}){n=e(n);let s=new r;i(n,s),s.push(n);for(let o=1;o<=t;o++)s=s.concat(this.ring({radius:o,center:n,onCreate:i}));return s.radius=t,s.center=n,s}}function cA({Point:r}){return function(e,t){let n;return{x:n,y:t}=r(e,t),r(this.x+n,this.y+t)}}function lA({Point:r}){return function(e,t){let n;return{x:n,y:t}=r(e,t),r(this.x-n,this.y-t)}}function fA({Point:r}){return function(e,t){let n;return{x:n,y:t}=r(e,t),r(this.x*n,this.y*t)}}function hA({Point:r}){return function(e,t){let n;return{x:n,y:t}=r(e,t),r(this.x/n,this.y/t)}}function kd({ensureXY:r}){const e={add:cA({Point:t}),subtract:lA({Point:t}),multiply:fA({Point:t}),divide:hA({Point:t})};function t(n,i){let s;return s=Rt(n)?r(n,i):co(n)?r(...n):Tu(n)?r(n.x,n.y):r(0),Object.assign(Object.create(e),s)}return t}const Ed=kd({ensureXY:Au});class is extends Array{static isValidHex(e){return(e||{}).__isHoneycombHex===!0}fill(){throw new TypeError("Grid.prototype.fill is not implemented")}includes(e,t=0){return!!(this.indexOf(e,t)+1)}indexOf(e,t=0){const{length:n}=this;let i=Number(t);for(e=Ed(e),i=Math.max(i>=0?i:n+i,0);i<n;i++)if(this[i].equals(e))return i;return-1}lastIndexOf(e,t=this.length-1){const{length:n}=this;let i=Number(t);for(e=Ed(e),i=i>=0?Math.min(i,n-1):n+i;i>=0;i--)if(this[i].equals(e))return i;return-1}push(...e){return super.push(...e.filter(is.isValidHex))}splice(e,t,...n){return t==null?super.splice(e):super.splice(e,t,...n.filter(is.isValidHex))}unshift(...e){return super.unshift(...e.filter(is.isValidHex))}}function dA(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xd(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Kr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xd(Object(t),!0).forEach(function(n){dA(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xd(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function pA(r,e){if(r==null)return{};var t,n,i=function(o,a){if(o==null)return{};var u,c,f={},l=Object.keys(o);for(c=0;c<l.length;c++)u=l[c],a.indexOf(u)>=0||(f[u]=o[u]);return f}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function yA({Hex:r}){return function(...e){return Object.assign(this,r(...e))}}function Cd(){return{x:this.x,y:this.y}}function mA(){return{q:this.q,r:this.r,s:this.s}}function Od({q:r,r:e}){let t,n;return this.isPointy()?(t=r+ns(this.offset,e),n=e):(t=r,n=e+ns(this.offset,r)),{x:t,y:n}}function gA(){return this.orientation.toLowerCase()==="pointy"}function vA(){return this.orientation.toLowerCase()==="flat"}function bA(){const{xRadius:r}=this.size;return this.isPointy()?r*Math.sqrt(3):2*r}function _A(){const{yRadius:r}=this.size;return this.isPointy()?2*r:r*Math.sqrt(3)}function wA({Point:r}){return function(){const e=this.width(),t=this.height(),{x:n,y:i}=this.origin;return this.isPointy()?[r(e-n,.25*t-i),r(e-n,.75*t-i),r(.5*e-n,t-i),r(0-n,.75*t-i),r(0-n,.25*t-i),r(.5*e-n,0-i)]:[r(e-n,.5*t-i),r(.75*e-n,t-i),r(.25*e-n,t-i),r(0-n,.5*t-i),r(.25*e-n,0-i),r(.75*e-n,0-i)]}}function SA({Point:r}){return function(){const{x:e,y:t}=this.origin;return r(this.width()/2-e,this.height()/2-t)}}function kA({Point:r}){return function(){const{q:e,r:t,size:n}=this,{xRadius:i,yRadius:s}=n;let o,a;return this.isPointy()?(o=i*Math.sqrt(3)*(e+t/2),a=3*s/2*t):(o=3*i/2*e,a=s*Math.sqrt(3)*(t+e/2)),r(o,a)}}function EA({Point:r,Hex:e}){return function(t,n){const{xRadius:i,yRadius:s}=this.size;let o,a,u;return{x:o,y:n}=r(t,n).subtract(this.center()),this.isPointy()?(a=Math.sqrt(3)*o/(3*i)-n/(3*s),u=2/3*(n/s)):(a=2/3*(o/i),u=Math.sqrt(3)*n/(3*s)-o/(3*i)),e({q:a,r:u,s:-a-u}).round()}}function xA({Hex:r,Point:e}){return function(t){const{x:n,y:i}=e(t);return r(this.x+n,this.y+i,Kr({},this))}}function CA({Hex:r,Point:e}){return function(t){const{x:n,y:i}=e(t);return r(this.x-n,this.y-i,Kr({},this))}}function OA({Point:r}){return function(e){if(e!=null&&(co(e)||Rt(e.x)&&Rt(e.y))){const{x:t,y:n}=r(e);return this.x===t&&this.y===n}return!1}}function TA(r){return Math.max(Math.abs(this.q-r.q),Math.abs(this.r-r.r),Math.abs(this.s-r.s))}function AA({Hex:r}){return function(){let{q:e,r:t,s:n}=this,i=Math.round(e),s=Math.round(t),o=Math.round(n);const a=Math.abs(e-i),u=Math.abs(t-s),c=Math.abs(n-o);return a>u&&a>c?i=-s-o:u>c?s=-i-o:o=-i-s,r(Kr(Kr({},this),{},{q:i,r:s,s:o}))}}function IA({Hex:r}){return function(e,t){const n=this.q*(1-t)+e.q*t,i=this.r*(1-t)+e.r*t;return r(Kr(Kr({},this),{},{q:n,r:i,s:-n-i}))}}function NA({Hex:r}){return function(){const{q:e,r:t,s:n}=YT;return r(Kr(Kr({},this),{},{q:this.q+e,r:this.r+t,s:this.s+n}))}}function RA(){return`${this.x},${this.y}`}const MA={thirdCoordinate:function(r,e){return-r-e}},Td=kd({ensureXY:Au}),DA=function({ensureXY:r,normalizeRadiuses:e,Point:t}){return function(n={}){const i=function({Point:u}){return function(c,f){let l,h,m;return{x:l,y:f}=u(c,f),this.isPointy()?(h=l-ns(this.offset,f),m=f):(h=l,m=f-ns(this.offset,l)),{q:h,r:m,s:-h-m}}}({Point:t}),s={__isHoneycombHex:!0,orientation:"pointy",origin:0,size:{xRadius:1,yRadius:1},offset:-1,get q(){return this.cartesianToCube(this).q},get r(){return this.cartesianToCube(this).r},get s(){return this.cartesianToCube(this).s},add:xA({Hex:a,Point:t}),cartesian:Cd,cartesianToCube:i,center:SA({Point:t}),coordinates:Cd,corners:wA({Point:t}),cube:mA,cubeToCartesian:Od,distance:TA,equals:OA({Point:t}),fromPoint:EA({Point:t,Hex:a}),height:_A,isFlat:vA,isPointy:gA,lerp:IA({Hex:a}),nudge:NA({Hex:a}),round:AA({Hex:a}),set:yA({Hex:a}),subtract:CA({Hex:a,Point:t}),toCartesian:Od,toCube:i,toPoint:kA({Point:t}),toString:RA,width:bA},o=Object.assign(s,n);function a(u,c,f={}){let l;if(Tu(u)){let{q:h,r:m,s:b}=u,M=pA(u,["q","r","s"]);if(Rt(h)||Rt(m)||Rt(b)){const I=h+m+b;if(Number.isNaN(I)||I>1e-12)throw new Error(`Cube coordinates must have a sum of 0. q: ${h}, r: ${m}, s: ${b}, sum: ${h+m+b}.`);({x:l,y:c}=o.cubeToCartesian({q:h,r:m,s:b}))}else({x:l,y:c}=u);f=M}else co(u)?([l,c]=u,f={}):l=u;return Object.assign(Object.create(o),Object.assign(f,r(l,c)))}return o.size=e(o.size,o.isPointy()),o.origin=t(o.origin),Object.assign(a,MA,{toJSON:()=>n}),a}}({ensureXY:Au,normalizeRadiuses:function(r,e){if(Tu(r)){if(Rt(r.xRadius)&&Rt(r.yRadius))return r;const{width:t,height:n}=r;if(Rt(t)&&Rt(n))return e?{xRadius:t/Math.sqrt(3),yRadius:n/2}:{xRadius:t/2,yRadius:n/Math.sqrt(3)}}if(Rt(r))return{xRadius:r,yRadius:r};throw new Error(`Invalid size: ${r}. Set it as a number or as an object containing width and height.`)},Point:Td}),o3=function({extendHex:r,Grid:e,Point:t}){const{isValidHex:n}=e;return function(i=r()){function s(...o){return o=o.filter(Boolean),co(o[0])&&(o[0].length===0||o[0].some(a=>!Rt(a)))&&(o=o[0]),new e(...o.map(a=>i(a)))}return Object.assign(s,{Hex:i,isValidHex:n,pointToHex:rA({Point:t,Hex:i}),parallelogram:nA({Grid:e,Hex:i}),triangle:iA({Grid:e,Hex:i}),hexagon:sA({Grid:e,Hex:i}),rectangle:oA({Grid:e,Hex:i,compassToNumberDirection:wd,signedModulo:_d}),ring:aA({Grid:e,Hex:i}),spiral:uA({Grid:e,Hex:i})}),Object.assign(e.prototype,{get:JT,hexesBetween:XT,hexesInRange:ZT({isValidHex:n}),neighborsOf:$T({isValidHex:n,signedModulo:_d,compassToNumberDirection:wd}),pointHeight:tA,pointWidth:eA,set:KT({isValidHex:n})}),s}}({extendHex:DA,Grid:is,Point:Td});export{qA as $,ic as A,Pt as B,Zt as C,oc as D,ps as E,rt as F,Ld as G,Bd as H,VA as I,jd as J,Pd as K,yt as L,PA as M,Ku as N,wt as O,Sr as P,jA as Q,QA as R,Cr as S,np as T,$t as U,sr as V,Vu as W,ci as X,yi as Y,go as Z,WA as _,$e as a,GA as a0,JA as a1,Er as a2,sc as a3,ip as a4,ZA as a5,N0 as a6,ec as a7,Gt as a8,Kd as a9,LA as aa,di as ab,UA as ac,KA as ad,XA as ae,l1 as af,I0 as ag,$A as ah,e3 as ai,zA as aj,YA as ak,Pu as al,rO as am,bo as an,Yd as ao,t3 as ap,n3 as aq,FT as ar,r3 as as,s3 as at,i3 as au,BA as av,Wd as aw,DA as ax,o3 as ay,be as b,dt as c,xe as d,ct as e,kr as f,Xe as g,Zr as h,xr as i,li as j,Ht as k,_t as l,zt as m,Mt as n,it as o,Dt as p,Ge as q,rp as r,pr as s,Mr as t,HA as u,bn as v,Vt as w,Br as x,Ft as y,gi as z};
