import{S as hs,i as fs,s as ds,Y as ps,e as _e,k as S,w as y,c as be,a as we,d as m,m as v,x as C,b as L,g as k,F as $e,y as x,O as Oe,q as E,o as I,B as P,Q as cs,v as ms,a0 as gs,a2 as q,a3 as O,t as je,h as Ne,a4 as F,j as _s,P as bs}from"../../../chunks/vendor-0f79dfe6.js";import{C as ws,s as $s}from"../../../chunks/CanvasManager-8c9c1c4c.js";import{S as ie}from"../../../chunks/Slider-58dcbe6f.js";import{C as qe}from"../../../chunks/Checkbox-import-0bfa8a73.js";import{O as ks}from"../../../chunks/OptionSelect-405478ae.js";/* empty css                                                           */import"../../../chunks/supabaseClient-46cd2d69.js";import"../../../chunks/stores-4423f7a5.js";/* empty css                                                                 */const{window:Ye}=gs;function Ss(n){let p,r,M,c,g,d,o,_,b,f,V,Q,t,X,J,H,ke,le,T,re,ae,R,ee=`${n[3]?"Pause":"Animate"}`,oe,W,B,Se,K,U,ue,he,D,fe,se,j,ve,de,N,Me,pe,Y,ye,ce,A,Ce,me,z,xe,ne,Ee,He;function Fe(e){n[12](e)}let Te={label:"Number of stars",min:"1",max:"50",step:"1"};n[4].numStars!==void 0&&(Te.value=n[4].numStars),p=new ie({props:Te}),q.push(()=>O(p,"value",Fe)),p.$on("message",n[13]);function Re(e){n[14](e)}let s={label:"Ships min",min:"1",max:"50",step:"1"};n[4].shipsMin!==void 0&&(s.value=n[4].shipsMin),c=new ie({props:s}),q.push(()=>O(c,"value",Re)),c.$on("message",n[8]);function i(e){n[15](e)}let l={label:"Ships max",min:"5",max:"250",step:"5"};n[4].shipsMax!==void 0&&(l.value=n[4].shipsMax),o=new ie({props:l}),q.push(()=>O(o,"value",i)),o.$on("message",n[8]);function u(e){n[16](e)}let h={label:"Speed",min:"5",max:"100",step:"5"};n[4].speed!==void 0&&(h.value=n[4].speed),f=new ie({props:h}),q.push(()=>O(f,"value",u)),f.$on("message",n[8]);function w(e){n[17](e)}let $={label:"FPS",min:"1",max:"60",step:"1"};n[4].fps!==void 0&&($.value=n[4].fps),t=new ie({props:$}),q.push(()=>O(t,"value",w)),t.$on("message",n[8]);function Z(e){n[18](e)}let G={label:"Orbit X mod",min:".1",max:"5",step:".1"};n[4].orbitXmod!==void 0&&(G.value=n[4].orbitXmod),H=new ie({props:G}),q.push(()=>O(H,"value",Z)),H.$on("message",n[8]);function te(e){n[19](e)}let ge={label:"Orbit Y mod",min:".1",max:"5",step:".1"};n[4].orbitYmod!==void 0&&(ge.value=n[4].orbitYmod),T=new ie({props:ge}),q.push(()=>O(T,"value",te)),T.$on("message",n[8]);function is(e){n[20](e)}let Ae={duration:"200",label:"Draw stars"};n[4].drawStars!==void 0&&(Ae.checked=n[4].drawStars),D=new qe({props:Ae}),q.push(()=>O(D,"checked",is)),D.$on("change",n[8]);function ls(e){n[21](e)}let Xe={duration:"200",label:"Draw ships"};n[4].drawShips!==void 0&&(Xe.checked=n[4].drawShips),j=new qe({props:Xe}),q.push(()=>O(j,"checked",ls)),j.$on("change",n[8]);function rs(e){n[22](e)}let Be={duration:"200",label:"Draw Centers"};n[4].drawCenters!==void 0&&(Be.checked=n[4].drawCenters),N=new qe({props:Be}),q.push(()=>O(N,"checked",rs)),N.$on("change",n[8]);function as(e){n[23](e)}let Ue={duration:"200",label:"Draw Hexes"};n[4].drawHexes!==void 0&&(Ue.checked=n[4].drawHexes),Y=new qe({props:Ue}),q.push(()=>O(Y,"checked",as)),Y.$on("change",n[8]);function os(e){n[24](e)}let ze={duration:"200",label:"Draw Vertices"};n[4].drawVertices!==void 0&&(ze.checked=n[4].drawVertices),A=new qe({props:ze}),q.push(()=>O(A,"checked",os)),A.$on("change",n[25]);function us(e){n[26](e)}let Le={items:n[4].colorFunctions};return n[4].colorFunctionsIndex!==void 0&&(Le.selected=n[4].colorFunctionsIndex),z=new ks({props:Le}),q.push(()=>O(z,"selected",us)),{c(){y(p.$$.fragment),M=S(),y(c.$$.fragment),d=S(),y(o.$$.fragment),b=S(),y(f.$$.fragment),Q=S(),y(t.$$.fragment),J=S(),y(H.$$.fragment),le=S(),y(T.$$.fragment),ae=S(),R=_e("button"),oe=je(ee),W=S(),B=_e("button"),Se=je("Redraw grid"),K=S(),U=_e("button"),ue=je("Clear localStorage"),he=S(),y(D.$$.fragment),se=S(),y(j.$$.fragment),de=S(),y(N.$$.fragment),pe=S(),y(Y.$$.fragment),ce=S(),y(A.$$.fragment),me=S(),y(z.$$.fragment),this.h()},l(e){C(p.$$.fragment,e),M=v(e),C(c.$$.fragment,e),d=v(e),C(o.$$.fragment,e),b=v(e),C(f.$$.fragment,e),Q=v(e),C(t.$$.fragment,e),J=v(e),C(H.$$.fragment,e),le=v(e),C(T.$$.fragment,e),ae=v(e),R=be(e,"BUTTON",{label:!0,class:!0});var a=we(R);oe=Ne(a,ee),a.forEach(m),W=v(e),B=be(e,"BUTTON",{label:!0,class:!0});var Ie=we(B);Se=Ne(Ie,"Redraw grid"),Ie.forEach(m),K=v(e),U=be(e,"BUTTON",{label:!0,class:!0});var Pe=we(U);ue=Ne(Pe,"Clear localStorage"),Pe.forEach(m),he=v(e),C(D.$$.fragment,e),se=v(e),C(j.$$.fragment,e),de=v(e),C(N.$$.fragment,e),pe=v(e),C(Y.$$.fragment,e),ce=v(e),C(A.$$.fragment,e),me=v(e),C(z.$$.fragment,e),this.h()},h(){L(R,"label","Start"),L(R,"class","p-3 m-2 bg-sky-600 hover:bg-sky-500 rounded"),L(B,"label","Start"),L(B,"class","p-3 m-2 bg-sky-600 hover:bg-sky-500 rounded"),L(U,"label","Start"),L(U,"class","p-3 m-2 bg-sky-600 hover:bg-sky-500 rounded")},m(e,a){x(p,e,a),k(e,M,a),x(c,e,a),k(e,d,a),x(o,e,a),k(e,b,a),x(f,e,a),k(e,Q,a),x(t,e,a),k(e,J,a),x(H,e,a),k(e,le,a),x(T,e,a),k(e,ae,a),k(e,R,a),$e(R,oe),k(e,W,a),k(e,B,a),$e(B,Se),k(e,K,a),k(e,U,a),$e(U,ue),k(e,he,a),x(D,e,a),k(e,se,a),x(j,e,a),k(e,de,a),x(N,e,a),k(e,pe,a),x(Y,e,a),k(e,ce,a),x(A,e,a),k(e,me,a),x(z,e,a),ne=!0,Ee||(He=[Oe(R,"click",n[7]),Oe(B,"click",n[6]),Oe(U,"click",n[5])],Ee=!0)},p(e,a){const Ie={};!r&&a[0]&16&&(r=!0,Ie.value=e[4].numStars,F(()=>r=!1)),p.$set(Ie);const Pe={};!g&&a[0]&16&&(g=!0,Pe.value=e[4].shipsMin,F(()=>g=!1)),c.$set(Pe);const We={};!_&&a[0]&16&&(_=!0,We.value=e[4].shipsMax,F(()=>_=!1)),o.$set(We);const Ge={};!V&&a[0]&16&&(V=!0,Ge.value=e[4].speed,F(()=>V=!1)),f.$set(Ge);const Qe={};!X&&a[0]&16&&(X=!0,Qe.value=e[4].fps,F(()=>X=!1)),t.$set(Qe);const Je={};!ke&&a[0]&16&&(ke=!0,Je.value=e[4].orbitXmod,F(()=>ke=!1)),H.$set(Je);const Ke={};!re&&a[0]&16&&(re=!0,Ke.value=e[4].orbitYmod,F(()=>re=!1)),T.$set(Ke),(!ne||a[0]&8)&&ee!==(ee=`${e[3]?"Pause":"Animate"}`)&&_s(oe,ee);const Ze={};!fe&&a[0]&16&&(fe=!0,Ze.checked=e[4].drawStars,F(()=>fe=!1)),D.$set(Ze);const es={};!ve&&a[0]&16&&(ve=!0,es.checked=e[4].drawShips,F(()=>ve=!1)),j.$set(es);const ss={};!Me&&a[0]&16&&(Me=!0,ss.checked=e[4].drawCenters,F(()=>Me=!1)),N.$set(ss);const ns={};!ye&&a[0]&16&&(ye=!0,ns.checked=e[4].drawHexes,F(()=>ye=!1)),Y.$set(ns);const ts={};!Ce&&a[0]&16&&(Ce=!0,ts.checked=e[4].drawVertices,F(()=>Ce=!1)),A.$set(ts);const De={};a[0]&16&&(De.items=e[4].colorFunctions),!xe&&a[0]&16&&(xe=!0,De.selected=e[4].colorFunctionsIndex,F(()=>xe=!1)),z.$set(De)},i(e){ne||(E(p.$$.fragment,e),E(c.$$.fragment,e),E(o.$$.fragment,e),E(f.$$.fragment,e),E(t.$$.fragment,e),E(H.$$.fragment,e),E(T.$$.fragment,e),E(D.$$.fragment,e),E(j.$$.fragment,e),E(N.$$.fragment,e),E(Y.$$.fragment,e),E(A.$$.fragment,e),E(z.$$.fragment,e),ne=!0)},o(e){I(p.$$.fragment,e),I(c.$$.fragment,e),I(o.$$.fragment,e),I(f.$$.fragment,e),I(t.$$.fragment,e),I(H.$$.fragment,e),I(T.$$.fragment,e),I(D.$$.fragment,e),I(j.$$.fragment,e),I(N.$$.fragment,e),I(Y.$$.fragment,e),I(A.$$.fragment,e),I(z.$$.fragment,e),ne=!1},d(e){P(p,e),e&&m(M),P(c,e),e&&m(d),P(o,e),e&&m(b),P(f,e),e&&m(Q),P(t,e),e&&m(J),P(H,e),e&&m(le),P(T,e),e&&m(ae),e&&m(R),e&&m(W),e&&m(B),e&&m(K),e&&m(U),e&&m(he),P(D,e),e&&m(se),P(j,e),e&&m(de),P(N,e),e&&m(pe),P(Y,e),e&&m(ce),P(A,e),e&&m(me),P(z,e),Ee=!1,bs(He)}}}function vs(n){let p,r,M,c,g,d,o,_;return ps(n[10]),g=new ws({props:{data:n[4],$$slots:{default:[Ss]},$$scope:{ctx:n}}}),g.$on("change",n[8]),{c(){p=_e("div"),r=_e("canvas"),M=S(),c=_e("div"),y(g.$$.fragment),this.h()},l(b){p=be(b,"DIV",{class:!0});var f=we(p);r=be(f,"CANVAS",{id:!0,class:!0}),we(r).forEach(m),M=v(f),c=be(f,"DIV",{class:!0});var V=we(c);C(g.$$.fragment,V),V.forEach(m),f.forEach(m),this.h()},h(){L(r,"id","canvas"),L(r,"class","svelte-v1peie"),L(c,"class","controls flex flex-col p-5 svelte-v1peie"),L(p,"class","sketch-wrapper svelte-v1peie")},m(b,f){k(b,p,f),$e(p,r),n[11](r),$e(p,M),$e(p,c),x(g,c,null),d=!0,o||(_=Oe(Ye,"resize",n[10]),o=!0)},p(b,f){const V={};f[0]&16&&(V.data=b[4]),f[0]&24|f[2]&16&&(V.$$scope={dirty:f,ctx:b}),g.$set(V)},i(b){d||(E(g.$$.fragment,b),d=!0)},o(b){I(g.$$.fragment,b),d=!1},d(b){b&&m(p),n[11](null),P(g),o=!1,_()}}}function Ve(n,p){const r=Math.pow(10,p);return Math.round(n*r)/r}function Ms(n,p){let r=n.ships;for(let M=0;M<p;M++)r.pop();return n.ships=r,r}function ys(n,p,r){let M;cs(n,$s,s=>r(9,M=s));let c,g,d,o,_=[],b=0,f=!1,V=0,Q=0,t={TITLE:"Pax01-vanilla",fps:60,tickRate:10,numStars:10,numTypes:5,shipsMin:1,shipsMax:50,starRadius:20,gridRadius:55,gridOffset:0,orbitXmod:1,orbitYmod:1,speed:10,clearLS:!1,drawStars:!0,drawShips:!0,drawCenters:!1,drawHexes:!0,drawVertices:!1,buildVertices:!0,drawStarNumber:!0},X=[],J=[],H=[];ms(async()=>{performance.now(),r(0,c=r(2,d.width=window.innerWidth*.8,d)),r(1,g=r(2,d.height=window.innerHeight,d)),ke(),T(t.drawStars,t.drawShips,t.drawCenters,t.drawHexes,t.buildVertices,t.drawVertices),console.log("\u{1F680} ~ file: index.svelte ~ line 52 ~ onMount ~ stars",_)});function ke(){r(2,d=document.getElementById("canvas")),r(0,c=r(2,d.width=window.innerWidth*.8,d)),r(1,g=r(2,d.height=window.innerHeight,d)),r(2,d.style.backgroundColor="#222",d),r(2,d.style.cursor="pointer",d),o=d.getContext("2d"),o.fillStyle="#222",o.fillRect(0,0,c,g),d.addEventListener("click",B)}function le(){o.fillStyle="#222",o.fillRect(0,0,c,g)}async function T(s,i,l,u,h,w){console.log("\u{1F680} ~ file: index.svelte ~ line 96 ~ mapInit ~ starsToggle, shipsToggle, center, outline, buildVertices, drawVertices",s,i,l,u,h,w),oe(c,g,t.gridRadius,t.gridOffset),h&&(console.log("\u{1F680} ~ file: index.svelte ~ line 90 ~ mapInit ~ buildVertices",h),r(4,t.buildVertices=!1,t),ae(),H=ee(J)),W(s,l,u,w),re(s,i)}function re(s=!0,i=!0){_.length<t.numStars&&(_=U(t.numStars-_.length)),_.length>t.numStars&&_.splice(t.numStars,_.length),_.forEach(l=>{s&&l.draw(o),i&&fe(l)})}function ae(){X.forEach(s=>{const i=2*Math.PI/6;for(let l=0;l<=6;l++){const u=Ve(s.x+s.r*Math.cos(i*l),3),h=Ve(s.y+s.r*Math.sin(i*l),3);J=[...J,{x:u,y:h}]}})}function R(s,i,l){const u=2*Math.PI/6;o.beginPath(),o.strokeStyle=`hsla(${s+i}, 100%, 50%, 1)`;for(let h=0;h<=6;h++){const w=Ve(s+l*Math.cos(u*h),3),$=Ve(i+l*Math.sin(u*h),3);o.lineTo(w,$)}o.stroke()}const ee=s=>{const i={},l=[];return s.forEach(u=>{i[u.x+":"+u.y]||(i[u.x+":"+u.y]=!0,l.push(u))}),console.log("\u{1F680} ~ file: index.svelte ~ line 105 ~ objArray.forEach ~ unique",l),console.log("\u{1F680} ~ file: index.svelte ~ line 82 ~ removeDuplicates ~ flag",i),l};function oe(s,i,l,u=0){const h=2*Math.PI/6;let w=0,$=1,Z=!1;for(let G=l;G+l*Math.sin(h)<i;G+=u+$*(l*Math.sin(h))){for(let te=l,ge=0;te+l*(1+Math.cos(h))<s;te+=u+l*(1+Math.cos(h)),G+=(-1)**ge++*l*Math.sin(h))ge>=w?w=ge+1:w=w,te=Ve(te,3),G=parseFloat(G.toFixed(3)),X=[...X,{x:te,y:G,r:l}];w%2==0?Z=!0:Z=!1,Z?$=2:$=1}console.log("\u{1F680} ~ file: index.svelte ~ line 69 ~ drawHex ~ hexCoords",X)}function W(s,i,l,u,h){let w=0;re(s,i),X.forEach($=>{l&&(o.beginPath(),o.fillStyle=`hsla(${w++}, 100%, 50%, 1)`,o.arc($.x,$.y,5,0,2*Math.PI),o.fill()),u&&R($.x,$.y,$.r)}),h&&H.forEach(($,Z)=>{R($.x,$.y,5)})}function B(s){console.log("click",s.x,":",s.y),_.forEach(i=>{s.x>=i.xMin&&s.x<=i.xMax&&s.y>=i.yMin&&s.y<=i.yMax&&(console.log("click HIT!!!! ",s.x,":",s.y,i),i.highlighted?i.unhighlight(o):i.highlight(o),i.highlighted=!i.highlighted)})}function Se(){f?r(3,f=!1):r(3,f=!0),f&&se()}function K(s){console.log("change"),console.log("\u{1F680} ~ file: index.svelte ~ line 194 ~ onChange ~ e",s.detail),le(),W(t.drawStars,t.drawShips,t.drawCenters,t.drawHexes,t.drawVertices)}function U(s){const i={};for(let l=0;l<s;l++){let u=X[Math.floor(Math.random()*X.length)];if(i[u.x+":"+u.y])console.log("\u{1F680} ~ file: index.svelte ~ line 214 ~ generateStars ~ else"),l--;else{i[u.x+":"+u.y]=!0;let h=Math.floor(Math.random()*t.numTypes),w=new ve(`star-${l}`,u.x,u.y,h+t.starRadius,h,Math.floor(Math.random()*t.numTypes)*(360/t.numTypes),Math.random()*t.shipsMax);w.ships=ue(w),_=[..._,w]}}return _}function ue(s){let i=s.ships||[];for(let l=0;l<s.numShips;l++){let u=D(s,l);i=[...i,u]}return i}function he(s){s.ships.length>s.numShips&&Ms(s,s.ships.length-s.numShips),s.ships.length<s.numShips&&(s.ships=[...s.ships,ue(s,s.numShips-s.ships.length)])}function D(s,i){let l=`hsla(${s.hue+Math.random()*i}, ${Math.random>.5?50+Math.random()*i*5:50-Math.random()*i}%, ${Math.random>.5?75+Math.random()*i*5:50-Math.random()*i}%, ${Math.random>.75?Math.random()+.25:Math.random()-.25})`;return new de(Math.random()*5,l,Math.random()*5)}function fe(s){let i=1,l=1;s.ships,s.ships.forEach((u,h)=>{b=b+h/1e4*t.speed/500,i=s.x+(s.radius+10)*Math.cos(b+h/t.orbitXmod),l=s.y+(s.radius+10)*Math.sin(b+h/t.orbitYmod),o.beginPath(),o.arc(i,l,4,0,2*Math.PI),o.fillStyle=u.color,o.fill()})}function se(){if(V%t.fps==0&&(Q++,j(),console.log("\u{1F680} ~ file: index.svelte ~ line 392 ~ animate ~ tick",Q)),f)setTimeout(function(){requestAnimationFrame(se),o.fillStyle="#222",o.fillRect(0,0,c,g),o.save(),_.forEach(s=>{t.drawStars&&s.draw(o),t.drawShips&&fe(s)}),o.restore(),o.save(),W(t.drawStars,t.drawShips,t.drawCenters,t.drawHexes,t.drawVertices),o.restore(),++V},1e3/t.fps);else return}function j(){_.forEach(s=>{s.update(),he(s)})}class ve{constructor(i,l,u,h,w,$,Z){this.id=i,this.x=l,this.y=u,this.radius=h,this.type=w,this.hue=$,this.numShips=Z,this.xMin=l-h,this.xMax=l+h,this.yMin=u-h,this.yMax=u+h}draw(i){let l=new Path2D;i.beginPath(),l.arc(this.x,this.y,this.radius,0,2*Math.PI),i.fillStyle=`hsla(${this.hue}, 50%, 50%, 1)`,i.fill(l);let u=18;t.drawStarNumber&&(i.fillStyle="#000",i.font=`bold ${u}px sans-serif`,i.textAlign="center",i.fillText(this.ships.length,this.x,this.y+u/3)),this.highlighted&&this.highlight(i)}update(){this.type<3&&Q%5==0&&this.numShips++}highlight(i){i.save(),i.beginPath(),i.arc(this.x,this.y,this.radius*1.2,0,2*Math.PI),i.fillStyle=`hsla(${this.hue+20}, 100%, 50%, 1)`,i.fill(),i.restore()}unhighlight(i){i.save(),i.beginPath(),i.arc(this.x,this.y,this.radius*1.3,0,2*Math.PI),i.fillStyle="#222",i.fill(),i.beginPath(),i.arc(this.x,this.y,this.radius,0,2*Math.PI),i.fillStyle=`hsla(${this.hue+20}, 50%, 50%, 1)`,i.fill(),i.restore()}handleEvent(i){console.log("\u{1F680} ~ file: index.svelte ~ line 334 ~ Star ~ onEvent ~ e.type: ",i.type),console.log("\u{1F680} ~ file: index.svelte ~ line 334 ~ Star ~ onEvent ~ e",i),console.log("\u{1F680} ~ file: index.svelte ~ line 214 ~ onEvent ~ this",this.x),console.log("\u{1F680} ~ file: index.svelte ~ line 214 ~ onEvent ~ this",this.y),i.type==="mouseover"&&(console.log(" e.type: mouseover "),this.hue=0)}}class de{constructor(i,l,u){this.radius=i,this.color=l,this.orbit=u}}function N(){r(0,c=Ye.innerWidth),r(1,g=Ye.innerHeight)}function Me(s){q[s?"unshift":"push"](()=>{d=s,r(2,d)})}function pe(s){n.$$.not_equal(t.numStars,s)&&(t.numStars=s,r(4,t))}const Y=s=>K(s);function ye(s){n.$$.not_equal(t.shipsMin,s)&&(t.shipsMin=s,r(4,t))}function ce(s){n.$$.not_equal(t.shipsMax,s)&&(t.shipsMax=s,r(4,t))}function A(s){n.$$.not_equal(t.speed,s)&&(t.speed=s,r(4,t))}function Ce(s){n.$$.not_equal(t.fps,s)&&(t.fps=s,r(4,t))}function me(s){n.$$.not_equal(t.orbitXmod,s)&&(t.orbitXmod=s,r(4,t))}function z(s){n.$$.not_equal(t.orbitYmod,s)&&(t.orbitYmod=s,r(4,t))}function xe(s){n.$$.not_equal(t.drawStars,s)&&(t.drawStars=s,r(4,t))}function ne(s){n.$$.not_equal(t.drawShips,s)&&(t.drawShips=s,r(4,t))}function Ee(s){n.$$.not_equal(t.drawCenters,s)&&(t.drawCenters=s,r(4,t))}function He(s){n.$$.not_equal(t.drawHexes,s)&&(t.drawHexes=s,r(4,t))}function Fe(s){n.$$.not_equal(t.drawVertices,s)&&(t.drawVertices=s,r(4,t))}const Te=s=>K(s);function Re(s){n.$$.not_equal(t.colorFunctionsIndex,s)&&(t.colorFunctionsIndex=s,r(4,t))}return n.$$.update=()=>{n.$$.dirty[0]&512&&console.log("\u{1F680} ~ file: index.svelte ~ line 15 ~ $storedSettingsChange",M),n.$$.dirty[0]&3&&console.log(c,g),n.$$.dirty[0]&3,n.$$.dirty[0]&1,n.$$.dirty[0]&2},_=[],[c,g,d,f,t,T,W,Se,K,M,N,Me,pe,Y,ye,ce,A,Ce,me,z,xe,ne,Ee,He,Fe,Te,Re]}class Os extends hs{constructor(p){super();fs(this,p,ys,vs,ds,{},null,[-1,-1,-1])}}export{Os as default};
