import{S as Se,i as Me,s as Be,e as ne,k as j,w as L,c as se,a as le,d as w,m as R,x as S,b as te,g as A,F as ae,y as M,q as B,o as P,B as E,v as Pe,R as q,a2 as N,a3 as T,a4 as V}from"../../chunks/vendor-0f79dfe6.js";import{S as X}from"../../chunks/Slider-58dcbe6f.js";/* empty css                                                        *//* empty css                                                            */import{C as Ee}from"../../chunks/Checkbox-1c363ee3.js";import{O as qe}from"../../chunks/OptionSelect-405478ae.js";import{C as je}from"../../chunks/CanvasManager-8c9c1c4c.js";/* empty css                                                          *//* empty css                                                              */import"../../chunks/supabaseClient-46cd2d69.js";import"../../chunks/stores-4423f7a5.js";function Re(n){let u,l,g,_,t,s,o,d,m,c,v,h,a,p,O,k,z,Y,I,C,H,F,Q,G,W,U,J,D,Z,K;function i(e){n[6](e)}let f={label:"Min Distance",min:"4",max:"1200",step:"4",color:"text-sky-400"};n[1].minDist!==void 0&&(f.value=n[1].minDist),u=new X({props:f}),N.push(()=>T(u,"value",i));function y(e){n[7](e)}let $={label:"Number of lines",min:"10",max:"500",step:"10"};n[1].maxLines!==void 0&&($.value=n[1].maxLines),_=new X({props:$}),N.push(()=>T(_,"value",y));function b(e){n[8](e)}let x={label:"Speed",min:".2",max:"20",step:".2"};n[1].speed!==void 0&&(x.value=n[1].speed),o=new X({props:x}),N.push(()=>T(o,"value",b));function ie(e){n[9](e)}let ee={label:"Line Birth",min:".1",max:"1",step:".1"};n[1].lineBirthFactor!==void 0&&(ee.value=n[1].lineBirthFactor),c=new X({props:ee}),N.push(()=>T(c,"value",ie));function Ie(e){n[10](e)}let de={label:"FPS",min:"1",max:"60",step:"1"};n[1].fps!==void 0&&(de.value=n[1].fps),a=new X({props:de}),N.push(()=>T(a,"value",Ie));function Ce(e){n[11](e)}let ue={label:"Maxdist Factor",min:"1",max:"50",step:"1"};n[1].maxDistFactor!==void 0&&(ue.value=n[1].maxDistFactor),k=new X({props:ue}),N.push(()=>T(k,"value",Ce));function Fe(e){n[12](e)}let fe={label:"Min Width",min:"1",max:"100",step:"1"};n[1].minWidth!==void 0&&(fe.value=n[1].minWidth),I=new X({props:fe}),N.push(()=>T(I,"value",Fe));function We(e){n[13](e)}let he={label:"Max Width",min:"1",max:"100",step:"1"};n[1].maxWidth!==void 0&&(he.value=n[1].maxWidth),F=new X({props:he}),N.push(()=>T(F,"value",We));function De(e){n[14](e)}let me={label:"Random color functions?"};n[1].randomColors!==void 0&&(me.checked=n[1].randomColors),W=new Ee({props:me}),N.push(()=>T(W,"checked",De));function Le(e){n[15](e)}let ce={items:n[1].colorFunctions};return n[1].colorFunctionsIndex!==void 0&&(ce.selected=n[1].colorFunctionsIndex),D=new qe({props:ce}),N.push(()=>T(D,"selected",Le)),{c(){L(u.$$.fragment),g=j(),L(_.$$.fragment),s=j(),L(o.$$.fragment),m=j(),L(c.$$.fragment),h=j(),L(a.$$.fragment),O=j(),L(k.$$.fragment),Y=j(),L(I.$$.fragment),H=j(),L(F.$$.fragment),G=j(),L(W.$$.fragment),J=j(),L(D.$$.fragment)},l(e){S(u.$$.fragment,e),g=R(e),S(_.$$.fragment,e),s=R(e),S(o.$$.fragment,e),m=R(e),S(c.$$.fragment,e),h=R(e),S(a.$$.fragment,e),O=R(e),S(k.$$.fragment,e),Y=R(e),S(I.$$.fragment,e),H=R(e),S(F.$$.fragment,e),G=R(e),S(W.$$.fragment,e),J=R(e),S(D.$$.fragment,e)},m(e,r){M(u,e,r),A(e,g,r),M(_,e,r),A(e,s,r),M(o,e,r),A(e,m,r),M(c,e,r),A(e,h,r),M(a,e,r),A(e,O,r),M(k,e,r),A(e,Y,r),M(I,e,r),A(e,H,r),M(F,e,r),A(e,G,r),M(W,e,r),A(e,J,r),M(D,e,r),K=!0},p(e,r){const pe={};!l&&r&2&&(l=!0,pe.value=e[1].minDist,V(()=>l=!1)),u.$set(pe);const _e={};!t&&r&2&&(t=!0,_e.value=e[1].maxLines,V(()=>t=!1)),_.$set(_e);const ve={};!d&&r&2&&(d=!0,ve.value=e[1].speed,V(()=>d=!1)),o.$set(ve);const ge={};!v&&r&2&&(v=!0,ge.value=e[1].lineBirthFactor,V(()=>v=!1)),c.$set(ge);const $e={};!p&&r&2&&(p=!0,$e.value=e[1].fps,V(()=>p=!1)),a.$set($e);const xe={};!z&&r&2&&(z=!0,xe.value=e[1].maxDistFactor,V(()=>z=!1)),k.$set(xe);const ye={};!C&&r&2&&(C=!0,ye.value=e[1].minWidth,V(()=>C=!1)),I.$set(ye);const be={};!Q&&r&2&&(Q=!0,be.value=e[1].maxWidth,V(()=>Q=!1)),F.$set(be);const we={};!U&&r&2&&(U=!0,we.checked=e[1].randomColors,V(()=>U=!1)),W.$set(we);const oe={};r&2&&(oe.items=e[1].colorFunctions),!Z&&r&2&&(Z=!0,oe.selected=e[1].colorFunctionsIndex,V(()=>Z=!1)),D.$set(oe)},i(e){K||(B(u.$$.fragment,e),B(_.$$.fragment,e),B(o.$$.fragment,e),B(c.$$.fragment,e),B(a.$$.fragment,e),B(k.$$.fragment,e),B(I.$$.fragment,e),B(F.$$.fragment,e),B(W.$$.fragment,e),B(D.$$.fragment,e),K=!0)},o(e){P(u.$$.fragment,e),P(_.$$.fragment,e),P(o.$$.fragment,e),P(c.$$.fragment,e),P(a.$$.fragment,e),P(k.$$.fragment,e),P(I.$$.fragment,e),P(F.$$.fragment,e),P(W.$$.fragment,e),P(D.$$.fragment,e),K=!1},d(e){E(u,e),e&&w(g),E(_,e),e&&w(s),E(o,e),e&&w(m),E(c,e),e&&w(h),E(a,e),e&&w(O),E(k,e),e&&w(Y),E(I,e),e&&w(H),E(F,e),e&&w(G),E(W,e),e&&w(J),E(D,e)}}}function Ae(n){let u,l,g,_,t,s,o;return s=new je({props:{settings:n[2],data:n[1],hidePanel:n[0],$$slots:{default:[Re]},$$scope:{ctx:n}}}),{c(){u=ne("div"),l=ne("div"),g=ne("canvas"),_=j(),t=ne("div"),L(s.$$.fragment),this.h()},l(d){u=se(d,"DIV",{class:!0});var m=le(u);l=se(m,"DIV",{id:!0});var c=le(l);g=se(c,"CANVAS",{id:!0}),le(g).forEach(w),c.forEach(w),_=R(m),t=se(m,"DIV",{class:!0,id:!0});var v=le(t);S(s.$$.fragment,v),v.forEach(w),m.forEach(w),this.h()},h(){te(g,"id","c"),te(l,"id","canvasContainer"),te(t,"class","controls flex flex-col p-4"),te(t,"id","controlPanel"),te(u,"class","flex h-full w-full sketch")},m(d,m){A(d,u,m),ae(u,l),ae(l,g),ae(u,_),ae(u,t),M(s,t,null),o=!0},p(d,[m]){const c={};m&2&&(c.data=d[1]),m&1&&(c.hidePanel=d[0]),m&536870914&&(c.$$scope={dirty:m,ctx:d}),s.$set(c)},i(d){o||(B(s.$$.fragment,d),o=!0)},o(d){P(s.$$.fragment,d),o=!1},d(d){d&&w(u),E(s)}}}function ke(){let u=document.getElementById("sideNav").offsetWidth,g=document.getElementById("controlPanel").offsetWidth,t=document.getElementById("sketchLayout").offsetWidth;document.getElementById("canvasContainer").offsetWidth;let o=window.innerWidth,d=t-u-g,m=o-u-g;return{calculatedLayoutRemaining:d,calculatedWindowRemaining:m}}function re(n){return n<0?n=n*-1:n=n}function Ne(n,u,l){let g,{hidePanel:_=!1}=u;const t={TITLE:"Sketch05",fps:60,minDist:20,maxDistFactor:6,initialLines:0,maxLines:100,speed:3,minWidth:1,maxWidth:4,lineBirthFactor:.25,randomColors:!1,colorFunctions:[{value:0,label:"original"},{value:1,label:"2"},{value:2,label:"3"},{value:3,label:"4"},{value:4,label:"5"},{value:5,label:"6"},{value:6,label:"7"}],colorFunctionsIndex:0};let s=[],o=0,d={};const m=[{x:1,y:0,angle:0},{x:.5,y:.866,angle:60},{x:-.5,y:.866,angle:120},{x:-1,y:0,angle:180},{x:-.5,y:-.866,angle:240},{x:.5,y:-.866,angle:300}],c={scaleToView:!0,dimensions:[1280,1280]};let v,h,a,p,O=0;Pe(()=>{let{calculatedLayoutRemaining:i,calculatedWindowRemaining:f}=ke();v=document.getElementById("c");let y=document.getElementById("canvasContainer"),$=y.offsetWidth;f<i?l(4,a=v.width=y.width=f):$>i?l(4,a=v.width=i):l(4,a=v.width=$),l(5,p=v.height=sketchLayout.offsetHeight),h=v.getContext("2d"),window.addEventListener("resize",function(){let{calculatedLayoutRemaining:b,calculatedWindowRemaining:x}=ke(),ie=document.getElementById("canvasContainer"),ee=ie.offsetWidth;x<b?l(4,a=v.width=ie.width=x):ee>b?l(4,a=v.width=b):l(4,a=v.width=ee),l(5,p=v.height=sketchLayout.offsetHeight),z()}),z(),I()});function k(){let i=[],f=[],y=Math.floor(a/t.minDist),$=Math.floor(p/t.minDist);i=Array.from(Array(y),(b,x)=>x*t.minDist),f=Array.from(Array($),(b,x)=>x*t.minDist),d.x=q.pick(i),d.y=q.pick(f),d.dirIndex=Math.floor(q.range(0,6))}function z(){l(3,s.length=0,s);for(let i=0;i<t.initialLines;++i){k();let f=new C(d);f.colorFunction=q.pick(t.colorFunctions),s.push(f)}h.fillStyle="#222",h.fillRect(0,0,a,p),h.lineCap="round"}function Y(i,f,y,$){$=1;const b=[`hsla( ${f/a*360+o}, 80%, 50%, 0.5 )`,`hsla( ${f/a*180+o-120}, 80%, 50%, ${y/p+o*Math.random()*$} )`,`hsla( ${f/a*180+o-120}, 80%, 50%, ${Math.cos(f)/Math.cos(y)} )`,`hsla( ${f/a*180+o-120}, 80%, 50%, ${o/2-Math.floor(o/2)} )`,`hsla( ${f/a*180+o-120}, 80%, 50%, ${o+1-(o+1)/o} `,`hsla( ${(f/a+y)*180+o/30}, 50%, 50%, ${$} )`,`hsla( ${(f/a+y/p)*o}, 50%, 50%, ${$} )`,`hsla( ${(f/a+y/p)*o}, 50%, 50%, ${$} )`];let x;return t.randomColors?x=b[i]:x=b[t.colorFunctionsIndex],x}function I(){setTimeout(function(){requestAnimationFrame(I)},1e3/t.fps),++o,++O,O>1e3&&(console.log("\u{1F680} ~ file: sketch05.svelte ~ line 191 ~ anim ~ lines",s),O=0),h.shadowBlur=0,h.fillStyle="rgba(0,0,0,.02)",h.fillRect(0,0,a,p),h.shadowBlur=.5;for(let i=0;i<s.length;++i)s[i].reverse?l(3,s[i].width*=.998,s):l(3,s[i].width*=1.002,s),s[i].step()&&(s.splice(i,1),--i);if(s.length<t.maxLines){k();let i=new C(d);i.dirIndex=Math.floor(q.range(0,6)),i.colorFunction=q.pick(t.colorFunctions),s.push(i),h.fillStyle=h.shadowColor=Y(i.colorFunction.value,d.x,d.y,Math.random()),h.beginPath()}}function C(i){this.x=i.x|0,this.y=i.y|0,this.width=i.width|1,this.reverse=!1,this.dirIndex=i.dirIndex,this.colorFunction=q.pick(t.colorFunctions),this.randomFactor=q.range(.1,1);do{this.dirIndex=++this.dirIndex%6,this.dirIndex=re(this.dirIndex);let f=m[this.dirIndex];this.vx=f.x*t.speed,this.vy=f.y*t.speed}while(this.vx===-i.vx&&this.vy===-i.vy||this.vx===i.vx&&this.vy===i.vy);this.lineDist=t.minDist,this.hexDist=g}C.prototype.wrap=function(){this.x=(this.x+a)%a,this.y=(this.y+p)%p},C.prototype.bounce=function(){(this.x<=0||this.x>=a)&&(this.vx*=-1),(this.y<=0||this.y>=p)&&(this.vy*=-1),this.dirIndex=(this.dirIndex+3)%6},C.prototype.step=function(){let i=!1,f=this.x,y=this.y;if(this.dirIndex=re(this.dirIndex%6),this.x+=this.vx,this.y+=this.vy,this.lineDist-=t.speed,this.hexDist-=t.speed,(this.x<0||this.x>a||this.y<0||this.y>p)&&this.bounce(),this.lineDist<=0){let b;if(this.dirIndex++,Math.random>.5?++this.dirIndex:--this.dirIndex,this.dirIndex=re(this.dirIndex)%6,b=m[this.dirIndex],this.vx=b.x*t.speed,this.vy=b.y*t.speed,this.lineDist=t.minDist,this.hexDist=t.minDist,s.length<t.maxLines&&s.push(new C(this)),Math.random()<t.lineBirthFactor){s.push(new C(this));let x=Math.random()*s.length|0;s.splice(x,1)}}let $=1;if($=this.vx*this.vy*this.vy,h.strokeStyle=h.shadowColor=Y(this.colorFunction.value,this.x,this.y,$),h.beginPath(),h.lineWidth=this.width,h.moveTo(this.x,this.y),h.lineTo(f,y),h.stroke(),this.width>t.maxWidth?this.reverse=!0:this.width<t.minWidth&&(this.reverse=!1),this.hexDist<=0&&(i=!0),i)return!0};function H(i){n.$$.not_equal(t.minDist,i)&&(t.minDist=i,l(1,t))}function F(i){n.$$.not_equal(t.maxLines,i)&&(t.maxLines=i,l(1,t))}function Q(i){n.$$.not_equal(t.speed,i)&&(t.speed=i,l(1,t))}function G(i){n.$$.not_equal(t.lineBirthFactor,i)&&(t.lineBirthFactor=i,l(1,t))}function W(i){n.$$.not_equal(t.fps,i)&&(t.fps=i,l(1,t))}function U(i){n.$$.not_equal(t.maxDistFactor,i)&&(t.maxDistFactor=i,l(1,t))}function J(i){n.$$.not_equal(t.minWidth,i)&&(t.minWidth=i,l(1,t))}function D(i){n.$$.not_equal(t.maxWidth,i)&&(t.maxWidth=i,l(1,t))}function Z(i){n.$$.not_equal(t.randomColors,i)&&(t.randomColors=i,l(1,t))}function K(i){n.$$.not_equal(t.colorFunctionsIndex,i)&&(t.colorFunctionsIndex=i,l(1,t))}return n.$$set=i=>{"hidePanel"in i&&l(0,_=i.hidePanel)},n.$$.update=()=>{n.$$.dirty&8,n.$$.dirty&50&&(d={x:a/2,y:p/2,vx:1,vy:.5,width:q.range(t.minWidth,t.maxWidth),reverse:!1,dirIndex:Math.floor(q.range(0,6)),randomFactor:q.range(.1,1)}),n.$$.dirty&2&&(g=t.minDist*t.maxDistFactor)},[_,t,c,s,a,p,H,F,Q,G,W,U,J,D,Z,K]}class Ue extends Se{constructor(u){super();Me(this,u,Ne,Ae,Be,{hidePanel:0})}}export{Ue as default};
