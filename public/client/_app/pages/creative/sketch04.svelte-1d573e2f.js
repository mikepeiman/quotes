import{S as le,i as ae,s as re,w as b,x as v,y,q as w,o as S,B as C,v as he,a2 as q,a3 as F,k as E,m as R,g as W,a4 as O,d as A,R as V,a5 as te,a1 as X}from"../../chunks/vendor-0f79dfe6.js";import{C as pe}from"../../chunks/CanvasSketchEditor-89928560.js";import{S as ne}from"../../chunks/Slider-58dcbe6f.js";import{O as ie}from"../../chunks/OptionSelect-405478ae.js";/* empty css                                                        *//* empty css                                                            */import{C as oe}from"../../chunks/Checkbox-import-0bfa8a73.js";import"../../chunks/stores-4423f7a5.js";/* empty css                                                              */function ue(n){let a,h,p,o,u,c,k,i,M,m,I,T,f,N,P,g,x,L;function G(e){n[6](e)}let D={label:"Range",min:"10",max:"500",step:"10"};n[1].range!==void 0&&(D.value=n[1].range),a=new ne({props:D}),q.push(()=>F(a,"value",G));function J(e){n[7](e)}let z={label:"Number of nodes",min:"10",max:"1000",step:"10"};n[1].numNodes!==void 0&&(z.value=n[1].numNodes),o=new ne({props:z}),q.push(()=>F(o,"value",J)),o.$on("message",n[3](H,B));function K(e){n[8](e)}let s={items:n[1].lineCaps};n[1].lineCap!==void 0&&(s.selected=n[1].lineCap),k=new ie({props:s}),q.push(()=>F(k,"selected",K));function t(e){n[9](e)}let l={items:n[1].nodeTypes};n[1].nodeType!==void 0&&(l.selected=n[1].nodeType),m=new ie({props:l}),q.push(()=>F(m,"selected",t));function d(e){n[10](e)}let _={label:"Show nodes"};n[1].showNodes!==void 0&&(_.checked=n[1].showNodes),f=new oe({props:_}),q.push(()=>F(f,"checked",d));function j(e){n[11](e)}let $={label:"Show lines"};return n[1].showLines!==void 0&&($.checked=n[1].showLines),g=new oe({props:$}),q.push(()=>F(g,"checked",j)),{c(){b(a.$$.fragment),p=E(),b(o.$$.fragment),c=E(),b(k.$$.fragment),M=E(),b(m.$$.fragment),T=E(),b(f.$$.fragment),P=E(),b(g.$$.fragment)},l(e){v(a.$$.fragment,e),p=R(e),v(o.$$.fragment,e),c=R(e),v(k.$$.fragment,e),M=R(e),v(m.$$.fragment,e),T=R(e),v(f.$$.fragment,e),P=R(e),v(g.$$.fragment,e)},m(e,r){y(a,e,r),W(e,p,r),y(o,e,r),W(e,c,r),y(k,e,r),W(e,M,r),y(m,e,r),W(e,T,r),y(f,e,r),W(e,P,r),y(g,e,r),L=!0},p(e,r){const Y={};!h&&r&2&&(h=!0,Y.value=e[1].range,O(()=>h=!1)),a.$set(Y);const Z={};!u&&r&2&&(u=!0,Z.value=e[1].numNodes,O(()=>u=!1)),o.$set(Z);const Q={};r&2&&(Q.items=e[1].lineCaps),!i&&r&2&&(i=!0,Q.selected=e[1].lineCap,O(()=>i=!1)),k.$set(Q);const U={};r&2&&(U.items=e[1].nodeTypes),!I&&r&2&&(I=!0,U.selected=e[1].nodeType,O(()=>I=!1)),m.$set(U);const ee={};!N&&r&2&&(N=!0,ee.checked=e[1].showNodes,O(()=>N=!1)),f.$set(ee);const se={};!x&&r&2&&(x=!0,se.checked=e[1].showLines,O(()=>x=!1)),g.$set(se)},i(e){L||(w(a.$$.fragment,e),w(o.$$.fragment,e),w(k.$$.fragment,e),w(m.$$.fragment,e),w(f.$$.fragment,e),w(g.$$.fragment,e),L=!0)},o(e){S(a.$$.fragment,e),S(o.$$.fragment,e),S(k.$$.fragment,e),S(m.$$.fragment,e),S(f.$$.fragment,e),S(g.$$.fragment,e),L=!1},d(e){C(a,e),e&&A(p),C(o,e),e&&A(c),C(k,e),e&&A(M),C(m,e),e&&A(T),C(f,e),e&&A(P),C(g,e)}}}function ce(n){let a,h;return a=new pe({props:{sketch:n[4],settings:n[2],data:n[1],hidePanel:n[0],$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){b(a.$$.fragment)},l(p){v(a.$$.fragment,p)},m(p,o){y(a,p,o),h=!0},p(p,[o]){const u={};o&2&&(u.data=p[1]),o&1&&(u.hidePanel=p[0]),o&16777218&&(u.$$scope={dirty:o,ctx:p}),a.$set(u)},i(p){h||(w(a.$$.fragment,p),h=!0)},o(p){S(a.$$.fragment,p),h=!1},d(p){C(a,p)}}}let H=800,B=800;function de(n,a){return n>a?n:a}function fe(n,a,h){let{hidePanel:p=!1}=a,o,u=[];he(()=>{let s=document.getElementsByTagName("canvas")[0];h(5,o=s.getContext("2d")),console.log("\u{1F680} ~ file: sketch03.svelte ~ line 25 ~ onMount ~ context",o)}),u=k(),console.log("\u{1F680} ~ file: sketch04.svelte ~ line 30 ~ onMount ~ angles",u);let c=[];function k(){for(let s=0;s<6;s++){let t={x:Math.cos(s*2*Math.PI/6).toFixed(2),y:Math.sin(s*2*Math.PI/6).toFixed(4)};u.push(t)}return u}const i={TITLE:"Sketch03",numNodes:200,range:200,lineCap:"butt",lineCaps:[{value:"butt",label:"butt"},{value:"round",label:"round"}],showNodes:!0,showLines:!0,nodeType:"hex",nodeTypes:[{value:"hex",label:"hex"},{value:"circle",label:"circle"}],lineWidth:2,lineWidthMax:5,radiusMin:1,radiusMax:3,animate:!0},M={dimensions:[H,B]};class m{constructor(t,l){this.x=t,this.y=l}getDistance(t){const l=this.x-t.x,d=this.y-t.y;return Math.sqrt(l*l+d*d)}}class I{constructor(t,l){this.pos=new m(t,l),this.angle=Math.floor(V.range(0,6)),this.vel=new m(parseFloat(u[this.angle].x),parseFloat(u[this.angle].y)),this.radius=V.range(i.radiusMin,i.radiusMax),this.sideLength=20,this.remainingTravel=this.sideLength}update(t){if(this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.remainingTravel-=de(f(this.vel.x),f(this.vel.y)),this.remainingTravel<=0){this.remainingTravel=this.sideLength;let l=Math.floor(V.range(-2,2));this.angle=f(this.angle+l)%6,this.vel=new m(parseFloat(u[this.angle].x),parseFloat(u[this.angle].y))}}bounce(t,l){(this.pos.x<=0||this.pos.x>=t)&&(this.vel.x*=-1),(this.pos.y<=0||this.pos.y>=l)&&(this.vel.y*=-1)}wrap(t,l){this.pos.x=(this.pos.x+t)%t,this.pos.y=(this.pos.y+l)%l}drawCircle(t){t.save(),t.translate(this.pos.x,this.pos.y),t.beginPath(),t.arc(0,0,this.radius,0,Math.PI*2),t.fill(),t.lineWidth=4,t.strokeStyle=this.color,t.stroke(),t.restore()}}class T extends I{constructor(t,l,d=6,_=0,j="hsla(180,50%,50%,1)"){super(t,l);var $,e;this.numOfSides=d,this.positiveVelSum=parseFloat((($=f(this.vel.x))==null?void 0:$.toFixed(3))+((e=f(this.vel.y))==null?void 0:e.toFixed(3))),this.color=N(this.positiveVelSum*360%360,50,50,1)}drawHex(t){t.save(),t.beginPath(),t.moveTo(this.pos.x+this.radius*Math.cos(0),this.pos.y+this.radius*Math.sin(0));for(let l=0;l<this.numOfSides;l++){let d=this.pos.x+this.radius*Math.cos(l*2*Math.PI/this.numOfSides),_=this.pos.y+this.radius*Math.sin(l*2*Math.PI/this.numOfSides);t.lineTo(d,_),t.fillStyle=this.color}t.fill(),t.restore()}}const f=s=>s<0?s*-1:s,N=(s,t,l,d)=>`hsla(${s},${t}%,${l}%,${d})`,P=(s,t)=>te.mapRange(t,0,s,1,0,!0),g=(s,t)=>{if(i.numNodes>c.length)for(let l=0;l<i.numNodes-c.length;l++){let d=V.range(0,s),_=V.range(0,t),j=new T(d,_);c.push(j)}else for(let l=0;l<c.length-i.numNodes;l++)c.pop()},x=()=>{g(H,B);for(let s=0;s<c.length;s++){const t=c[s];for(let l=s+1;l<c.length;l++){const d=c[l],_=t.pos.getDistance(d.pos);if(_>i.range)continue;h(5,o.lineWidth=te.mapRange(_,0,i.range,i.lineWidthMax,1),o),o.beginPath(),o.moveTo(t.pos.x,t.pos.y),i.showLines&&o.lineTo(d.pos.x,d.pos.y);let j=P(i.range,_),$=X.parse(t.color).hsla[0],e=X.parse(t.color).hsla[1],r=X.parse(t.color).hsla[2];h(5,o.strokeStyle=N($,e,r,j),o),h(5,o.lineCap=i.lineCap,o),o.stroke()}}return()=>{h(5,o.fillStyle="black",o),o.fillRect(0,0,H,B),i.numNodes!=c.length,c.forEach((s,t)=>{s.update(t),i.showNodes&&(i.nodeType=="hex"?s.drawHex(o):s.drawCircle(o)),s.wrap(H,B)}),requestAnimationFrame(x())}};function L(s){n.$$.not_equal(i.range,s)&&(i.range=s,h(1,i))}function G(s){n.$$.not_equal(i.numNodes,s)&&(i.numNodes=s,h(1,i))}function D(s){n.$$.not_equal(i.lineCap,s)&&(i.lineCap=s,h(1,i))}function J(s){n.$$.not_equal(i.nodeType,s)&&(i.nodeType=s,h(1,i))}function z(s){n.$$.not_equal(i.showNodes,s)&&(i.showNodes=s,h(1,i))}function K(s){n.$$.not_equal(i.showLines,s)&&(i.showLines=s,h(1,i))}return n.$$set=s=>{"hidePanel"in s&&h(0,p=s.hidePanel)},n.$$.update=()=>{n.$$.dirty&32,n.$$.dirty&2},[p,i,M,g,x,o,L,G,D,J,z,K]}class Se extends le{constructor(a){super();ae(this,a,fe,ce,re,{hidePanel:0})}}export{Se as default};
