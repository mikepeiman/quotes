import{S as le,i as ae,s as re,w as b,x as y,y as v,q as w,o as S,B as C,v as he,a2 as L,a3 as O,k as I,m as R,g as W,a4 as x,d as F,R as V,a5 as te,a1 as X}from"../../chunks/vendor-0f79dfe6.js";import{C as pe}from"../../chunks/CanvasSketchEditor-89928560.js";import{S as ne}from"../../chunks/Slider-58dcbe6f.js";import{O as ie}from"../../chunks/OptionSelect-405478ae.js";/* empty css                                                        *//* empty css                                                            */import{C as oe}from"../../chunks/Checkbox-import-0bfa8a73.js";import"../../chunks/stores-4423f7a5.js";/* empty css                                                              */function ue(n){let a,r,h,o,p,i,f,N,T,m,M,$,_,P,k,g,E,j;function G(e){n[6](e)}let B={label:"Range",min:"10",max:"500",step:"10"};n[1].range!==void 0&&(B.value=n[1].range),a=new ne({props:B}),L.push(()=>O(a,"value",G));function J(e){n[7](e)}let s={label:"Number of nodes",min:"10",max:"1000",step:"10"};n[1].numNodes!==void 0&&(s.value=n[1].numNodes),o=new ne({props:s}),L.push(()=>O(o,"value",J)),o.$on("message",n[3](A,H));function t(e){n[8](e)}let l={items:n[1].lineCaps};n[1].lineCap!==void 0&&(l.selected=n[1].lineCap),f=new ie({props:l}),L.push(()=>O(f,"selected",t));function c(e){n[9](e)}let d={items:n[1].nodeTypes};n[1].nodeType!==void 0&&(d.selected=n[1].nodeType),m=new ie({props:d}),L.push(()=>O(m,"selected",c));function q(e){n[10](e)}let D={label:"Show nodes"};n[1].showNodes!==void 0&&(D.checked=n[1].showNodes),_=new oe({props:D}),L.push(()=>O(_,"checked",q));function K(e){n[11](e)}let z={label:"Show lines"};return n[1].showLines!==void 0&&(z.checked=n[1].showLines),g=new oe({props:z}),L.push(()=>O(g,"checked",K)),{c(){b(a.$$.fragment),h=I(),b(o.$$.fragment),i=I(),b(f.$$.fragment),T=I(),b(m.$$.fragment),$=I(),b(_.$$.fragment),k=I(),b(g.$$.fragment)},l(e){y(a.$$.fragment,e),h=R(e),y(o.$$.fragment,e),i=R(e),y(f.$$.fragment,e),T=R(e),y(m.$$.fragment,e),$=R(e),y(_.$$.fragment,e),k=R(e),y(g.$$.fragment,e)},m(e,u){v(a,e,u),W(e,h,u),v(o,e,u),W(e,i,u),v(f,e,u),W(e,T,u),v(m,e,u),W(e,$,u),v(_,e,u),W(e,k,u),v(g,e,u),j=!0},p(e,u){const Y={};!r&&u&2&&(r=!0,Y.value=e[1].range,x(()=>r=!1)),a.$set(Y);const Z={};!p&&u&2&&(p=!0,Z.value=e[1].numNodes,x(()=>p=!1)),o.$set(Z);const Q={};u&2&&(Q.items=e[1].lineCaps),!N&&u&2&&(N=!0,Q.selected=e[1].lineCap,x(()=>N=!1)),f.$set(Q);const U={};u&2&&(U.items=e[1].nodeTypes),!M&&u&2&&(M=!0,U.selected=e[1].nodeType,x(()=>M=!1)),m.$set(U);const ee={};!P&&u&2&&(P=!0,ee.checked=e[1].showNodes,x(()=>P=!1)),_.$set(ee);const se={};!E&&u&2&&(E=!0,se.checked=e[1].showLines,x(()=>E=!1)),g.$set(se)},i(e){j||(w(a.$$.fragment,e),w(o.$$.fragment,e),w(f.$$.fragment,e),w(m.$$.fragment,e),w(_.$$.fragment,e),w(g.$$.fragment,e),j=!0)},o(e){S(a.$$.fragment,e),S(o.$$.fragment,e),S(f.$$.fragment,e),S(m.$$.fragment,e),S(_.$$.fragment,e),S(g.$$.fragment,e),j=!1},d(e){C(a,e),e&&F(h),C(o,e),e&&F(i),C(f,e),e&&F(T),C(m,e),e&&F($),C(_,e),e&&F(k),C(g,e)}}}function ce(n){let a,r;return a=new pe({props:{sketch:n[4],settings:n[2],data:n[1],hidePanel:n[0],$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){b(a.$$.fragment)},l(h){y(a.$$.fragment,h)},m(h,o){v(a,h,o),r=!0},p(h,[o]){const p={};o&2&&(p.data=h[1]),o&1&&(p.hidePanel=h[0]),o&4194306&&(p.$$scope={dirty:o,ctx:h}),a.$set(p)},i(h){r||(w(a.$$.fragment,h),r=!0)},o(h){S(a.$$.fragment,h),r=!1},d(h){C(a,h)}}}let A=800,H=800;function de(n,a,r){let{hidePanel:h=!1}=a,o;he(()=>{let s=document.getElementsByTagName("canvas")[0];r(5,o=s.getContext("2d")),console.log("\u{1F680} ~ file: sketch03.svelte ~ line 25 ~ onMount ~ context",o)});let p=[];const i={TITLE:"Sketch03",numNodes:200,range:200,lineCap:"butt",lineCaps:[{value:"butt",label:"butt"},{value:"round",label:"round"}],showNodes:!0,showLines:!0,nodeType:"hex",nodeTypes:[{value:"hex",label:"hex"},{value:"circle",label:"circle"}],lineWidth:2,lineWidthMax:5,radiusMin:10,radiusMax:30,animate:!0},f={dimensions:[A,H]};class N{constructor(t,l){this.x=t,this.y=l}getDistance(t){const l=this.x-t.x,c=this.y-t.y;return Math.sqrt(l*l+c*c)}}class T{constructor(t,l){this.pos=new N(t,l),this.vel=new N(V.range(-1,1),V.range(-1,1)),this.radius=V.range(i.radiusMin,i.radiusMax)}update(){this.pos.x+=this.vel.x,this.pos.y+=this.vel.y}bounce(t,l){(this.pos.x<=0||this.pos.x>=t)&&(this.vel.x*=-1),(this.pos.y<=0||this.pos.y>=l)&&(this.vel.y*=-1)}wrap(t,l){this.pos.x=(this.pos.x+t)%t,this.pos.y=(this.pos.y+l)%l}drawCircle(t){t.save(),t.translate(this.pos.x,this.pos.y),t.beginPath(),t.arc(0,0,this.radius,0,Math.PI*2),t.fill(),t.lineWidth=4,t.strokeStyle=this.color,t.stroke(),t.restore()}}class m extends T{constructor(t,l,c=6,d=0,q="hsla(180,50%,50%,1)"){super(t,l);this.numOfSides=c,this.positiveVelSum=parseFloat(M(this.vel.x).toFixed(3)+M(this.vel.y).toFixed(3)),this.color=$(this.positiveVelSum*360%360,50,50,1)}drawHex(t){t.save(),t.beginPath(),t.moveTo(this.pos.x+this.radius*Math.cos(0),this.pos.y+this.radius*Math.sin(0));for(let l=0;l<this.numOfSides;l++){let c=this.pos.x+this.radius*Math.cos(l*2*Math.PI/this.numOfSides),d=this.pos.y+this.radius*Math.sin(l*2*Math.PI/this.numOfSides);t.lineTo(c,d),t.fillStyle=this.color}t.fill(),t.restore()}}const M=s=>s<0?s*-1:s,$=(s,t,l,c)=>`hsla(${s},${t}%,${l}%,${c})`,_=(s,t)=>te.mapRange(t,0,s,1,0,!0),P=(s,t)=>{if(i.numNodes>p.length)for(let l=0;l<i.numNodes-p.length;l++){let c=V.range(0,s),d=V.range(0,t),q=new m(c,d);p.push(q)}else for(let l=0;l<p.length-i.numNodes;l++)p.pop()},k=()=>{P(A,H);for(let s=0;s<p.length;s++){const t=p[s];for(let l=s+1;l<p.length;l++){const c=p[l],d=t.pos.getDistance(c.pos);if(d>i.range)continue;r(5,o.lineWidth=te.mapRange(d,0,i.range,i.lineWidthMax,1),o),o.beginPath(),o.moveTo(t.pos.x,t.pos.y),i.showLines&&o.lineTo(c.pos.x,c.pos.y);let q=_(i.range,d),D=X.parse(t.color).hsla[0],K=X.parse(t.color).hsla[1],z=X.parse(t.color).hsla[2];r(5,o.strokeStyle=$(D,K,z,q),o),r(5,o.lineCap=i.lineCap,o),o.stroke()}}return()=>{r(5,o.fillStyle="black",o),o.fillRect(0,0,A,H),i.numNodes!=p.length,p.forEach(s=>{s.update(),i.showNodes&&(i.nodeType=="hex"?s.drawHex(o):s.drawCircle(o)),s.wrap(A,H)}),requestAnimationFrame(k())}};function g(s){n.$$.not_equal(i.range,s)&&(i.range=s,r(1,i))}function E(s){n.$$.not_equal(i.numNodes,s)&&(i.numNodes=s,r(1,i))}function j(s){n.$$.not_equal(i.lineCap,s)&&(i.lineCap=s,r(1,i))}function G(s){n.$$.not_equal(i.nodeType,s)&&(i.nodeType=s,r(1,i))}function B(s){n.$$.not_equal(i.showNodes,s)&&(i.showNodes=s,r(1,i))}function J(s){n.$$.not_equal(i.showLines,s)&&(i.showLines=s,r(1,i))}return n.$$set=s=>{"hidePanel"in s&&r(0,h=s.hidePanel)},n.$$.update=()=>{n.$$.dirty&32,n.$$.dirty&2},[h,i,f,P,k,o,g,E,j,G,B,J]}class we extends le{constructor(a){super();ae(this,a,de,ce,re,{hidePanel:0})}}export{we as default};
